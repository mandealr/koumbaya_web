import{r as m,c as H,j as O,b as i,e,l as p,g as v,i as $,u as b,az as J,x as h,aH as K,U as d,a0 as c,a6 as I,f as S,t as n,F as Q,z as W,y as N,ao as z,o as r,a3 as X,aU as Y,aO as Z}from"./vendor-Bi4LjMey.js";import{a as ee}from"./app-3J-7CZPC.js";const se={class:"px-6"},te={class:"mb-8"},le={class:"flex justify-between items-center"},oe={class:"flex gap-3"},ae={class:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6"},ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ie={class:"bg-white rounded-lg shadow-sm border border-gray-200"},re={class:"px-6 py-4 border-b border-gray-200"},de={class:"flex justify-between items-center"},ue={class:"text-lg font-semibold text-gray-900"},me={key:0,class:"p-8 text-center"},pe={key:1,class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200"},xe={class:"bg-white divide-y divide-gray-200"},fe={key:0},ve={class:"px-6 py-4 whitespace-nowrap"},be={class:"flex items-center"},ye={class:"flex-shrink-0 h-10 w-10"},ge={key:0,class:"h-10 w-10 rounded-full overflow-hidden"},_e=["src","alt"],we={key:1,class:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center"},he={class:"text-white font-semibold"},ke={class:"ml-4"},Ve={class:"text-sm font-medium text-gray-900"},Ce={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"text-sm text-gray-900"},Ee={key:0,class:"text-xs text-gray-500"},Ue={class:"px-6 py-4 whitespace-nowrap"},je={class:"text-sm text-gray-500"},Me={class:"px-6 py-4 whitespace-nowrap"},$e={class:"text-sm text-gray-500"},Ie={class:"px-6 py-4 whitespace-nowrap"},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ae={class:"flex space-x-2"},Le=["onClick"],Te=["onClick"],De=["onClick"],Fe={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Pe={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},qe={class:"flex justify-between items-center"},Be={class:"text-xl font-bold text-gray-900"},Re={class:"bg-gray-50 rounded-lg p-4 mb-4"},Ge={class:"grid grid-cols-2 gap-4"},He={class:"bg-blue-50 rounded-lg p-4 mb-4"},Oe={class:"space-y-4"},Je={class:"grid grid-cols-2 gap-4"},Ke={class:"bg-gray-50 rounded-lg p-4 mb-4"},Qe={class:"space-y-4"},We={key:0,class:"bg-blue-50 border-l-4 border-blue-400 rounded-lg p-4 mb-4"},Xe={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Ye={class:"flex justify-end space-x-3 pt-4 border-t"},Ze=["disabled"],es={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ss={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},ts={class:"flex justify-between items-center"},ls={class:"p-6 space-y-6"},os={class:"flex items-center space-x-4"},as={key:0,class:"h-20 w-20 rounded-full overflow-hidden"},ns=["src","alt"],is={key:1,class:"h-20 w-20 rounded-full bg-blue-500 flex items-center justify-center"},rs={class:"text-white text-2xl font-semibold"},ds={class:"text-xl font-bold text-gray-900"},us={class:"text-gray-600"},ms={key:0,class:"bg-blue-50 rounded-lg p-4"},ps={class:"grid grid-cols-2 gap-4"},cs={class:"font-medium"},xs={class:"font-medium"},fs={key:0},vs={class:"font-medium"},bs={key:1},ys={class:"font-medium"},gs={class:"grid grid-cols-2 gap-4"},_s={class:"font-medium"},ws={class:"font-medium"},hs={class:"font-medium"},Ns={__name:"VendorManagement",setup(ks){const{get:A,post:L,put:T,del:D}=ee(),g=m(!1),_=m(!1),E=m([]),a=m(null),x=m(!1),k=m(!1),V=m(!1),y=m(""),u=m({search:"",status:""}),o=m({first_name:"",last_name:"",email:"",phone:"",business_name:"",business_email:"",business_description:"",tax_id:"",company_type:"enterprise"}),C=H(()=>{let l=E.value;if(u.value.search){const s=u.value.search.toLowerCase();l=l.filter(t=>t.first_name?.toLowerCase().includes(s)||t.last_name?.toLowerCase().includes(s)||t.email?.toLowerCase().includes(s)||t.business_name?.toLowerCase().includes(s)||t.company?.business_name?.toLowerCase().includes(s))}return u.value.status&&(u.value.status==="verified"?l=l.filter(s=>s.email_verified_at):u.value.status==="unverified"&&(l=l.filter(s=>!s.email_verified_at))),l}),w=async()=>{g.value=!0;try{const l=await A("/admin/vendors");l?.data?.vendors&&(E.value=l.data.vendors)}catch(l){console.error("Error loading vendors:",l)}finally{g.value=!1}},F=()=>{u.value={search:"",status:""}},P=()=>{o.value={first_name:"",last_name:"",email:"",phone:"",business_name:"",business_email:"",business_description:"",tax_id:"",company_type:"enterprise"},y.value=""},f=()=>{x.value=!1,k.value=!1,V.value=!1,a.value=null,P()},q=async()=>{if(y.value="",!o.value.business_name?.trim()){y.value="Le nom de l'entreprise est obligatoire pour les vendeurs professionnels";return}_.value=!0;try{const l={first_name:o.value.first_name,last_name:o.value.last_name,email:o.value.email,phone:o.value.phone,business_name:o.value.business_name,business_email:o.value.business_email,business_description:o.value.business_description,tax_id:o.value.tax_id,company_type:o.value.company_type};x.value?await L("/admin/vendors",l):await T(`/admin/vendors/${a.value.id}`,l),f(),w()}catch(l){y.value=l.response?.data?.message||"Une erreur est survenue"}finally{_.value=!1}},B=l=>{a.value=l,V.value=!0},R=l=>{a.value=l,o.value={first_name:l.first_name,last_name:l.last_name,email:l.email,phone:l.phone||"",business_name:l.business_name||l.company?.business_name||"",business_email:l.company?.business_email||"",business_description:l.company?.business_description||"",tax_id:l.company?.tax_id||"",company_type:l.company?.company_type||"enterprise"},k.value=!0},G=async l=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le vendeur ${l.first_name} ${l.last_name} ?`))try{await D(`/admin/vendors/${l.id}`),w()}catch{alert("Erreur lors de la suppression")}},U=l=>(l.first_name?.[0]||"")+(l.last_name?.[0]||""),j=l=>l?new Date(l).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A";return O(()=>{w()}),(l,s)=>(r(),i("div",se,[e("div",te,[e("div",le,[s[14]||(s[14]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des Vendeurs Pro"),e("p",{class:"mt-2 text-gray-600"},"Gérez les comptes vendeurs professionnels (Business)")],-1)),e("div",oe,[e("button",{onClick:s[0]||(s[0]=t=>x.value=!0),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center"},[v(b(J),{class:"w-5 h-5 mr-2"}),s[12]||(s[12]=$(" Créer un Vendeur Pro ",-1))]),e("button",{onClick:w,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"},[v(b(K),{class:h(["w-5 h-5 inline mr-2",g.value?"animate-spin":""])},null,8,["class"]),s[13]||(s[13]=$(" Recharger ",-1))])])])]),e("div",ae,[e("div",ne,[e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>u.value.search=t),type:"text",placeholder:"Nom, email, entreprise...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,u.value.search]])]),e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>u.value.status=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},s[16]||(s[16]=[S('<option value="">Tous les statuts</option><option value="active">Actif</option><option value="inactive">Inactif</option><option value="verified">Vérifié</option><option value="unverified">Non vérifié</option>',5)]),512),[[I,u.value.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:F,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),e("div",ie,[e("div",re,[e("div",de,[e("h3",ue," Vendeurs Pro ("+n(C.value.length)+") ",1)])]),g.value?(r(),i("div",me,s[18]||(s[18]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)]))):(r(),i("div",pe,[e("table",ce,[s[20]||(s[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Entreprise"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Créé le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",xe,[C.value.length===0?(r(),i("tr",fe,s[19]||(s[19]=[e("td",{colspan:"7",class:"px-6 py-8 text-center text-gray-500"}," Aucun vendeur pro trouvé ",-1)]))):p("",!0),(r(!0),i(Q,null,W(C.value,t=>(r(),i("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",ve,[e("div",be,[e("div",ye,[t.avatar_url?(r(),i("div",ge,[e("img",{src:t.avatar_url,alt:t.first_name,class:"h-full w-full object-cover"},null,8,_e)])):(r(),i("div",we,[e("span",he,n(U(t)),1)]))]),e("div",ke,[e("div",Ve,n(t.first_name)+" "+n(t.last_name),1)])])]),e("td",Ce,[e("div",Ne,n(t.business_name||t.company?.business_name||"N/A"),1),t.company?.company_type?(r(),i("div",Ee,n(t.company.company_type==="enterprise"?"Entreprise":"Individuel"),1)):p("",!0)]),e("td",Ue,[e("div",je,n(t.email),1)]),e("td",Me,[e("div",$e,n(t.phone||"N/A"),1)]),e("td",Ie,[e("span",{class:h(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.email_verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(t.email_verified_at?"Vérifié":"Non vérifié"),3)]),e("td",Se,n(j(t.created_at)),1),e("td",ze,[e("div",Ae,[e("button",{onClick:M=>B(t),class:"text-blue-600 hover:text-blue-900",title:"Voir les détails"},[v(b(X),{class:"w-5 h-5"})],8,Le),e("button",{onClick:M=>R(t),class:"text-green-600 hover:text-green-900",title:"Modifier"},[v(b(Y),{class:"w-5 h-5"})],8,Te),e("button",{onClick:M=>G(t),class:"text-red-600 hover:text-red-900",title:"Supprimer"},[v(b(Z),{class:"w-5 h-5"})],8,De)])])]))),128))])])]))]),x.value||k.value?(r(),i("div",{key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:N(f,["self"])},[e("div",Fe,[e("div",Pe,[e("div",qe,[e("h2",Be,n(x.value?"Créer un Vendeur Pro":"Modifier le Vendeur Pro"),1),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600"},[v(b(z),{class:"w-6 h-6"})])])]),e("form",{onSubmit:N(q,["prevent"]),class:"p-6 space-y-4"},[e("div",Re,[s[23]||(s[23]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Informations personnelles",-1)),e("div",Ge,[e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prénom *",-1)),d(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.first_name=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,o.value.first_name]])]),e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom *",-1)),d(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.last_name=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,o.value.last_name]])])])]),e("div",He,[s[31]||(s[31]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Informations de l'entreprise",-1)),e("div",Oe,[e("div",null,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de l'entreprise *",-1)),d(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.value.business_name=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,o.value.business_name]]),s[25]||(s[25]=e("p",{class:"text-xs text-gray-500 mt-1"},"Ce champ est obligatoire pour les vendeurs professionnels",-1))]),e("div",null,[s[26]||(s[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email de l'entreprise",-1)),d(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>o.value.business_email=t),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,o.value.business_email]])]),e("div",null,[s[27]||(s[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description de l'entreprise",-1)),d(e("textarea",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.business_description=t),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Décrivez brièvement l'activité de l'entreprise..."},null,512),[[c,o.value.business_description]])]),e("div",Je,[e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Numéro fiscal / SIRET",-1)),d(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>o.value.tax_id=t),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 123456789"},null,512),[[c,o.value.tax_id]])]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type d'entreprise",-1)),d(e("select",{"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.company_type=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},s[29]||(s[29]=[e("option",{value:"enterprise"},"Entreprise",-1),e("option",{value:"individual"},"Individuel",-1)]),512),[[I,o.value.company_type]])])])])]),e("div",Ke,[s[34]||(s[34]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Informations de contact",-1)),e("div",Qe,[e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email *",-1)),d(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>o.value.email=t),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,o.value.email]])]),e("div",null,[s[33]||(s[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),d(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>o.value.phone=t),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,o.value.phone]])])])]),x.value?(r(),i("div",We,s[35]||(s[35]=[S('<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-semibold text-blue-800 mb-1">Création de mot de passe</h3><p class="text-sm text-blue-700"> Un email sera automatiquement envoyé au vendeur avec un lien pour créer son mot de passe. Il pourra se connecter après avoir défini son mot de passe. </p></div></div>',1)]))):p("",!0),y.value?(r(),i("div",Xe,n(y.value),1)):p("",!0),e("div",Ye,[e("button",{type:"button",onClick:f,class:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"}," Annuler "),e("button",{type:"submit",disabled:_.value,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50"},n(_.value?"Enregistrement...":x.value?"Créer":"Enregistrer"),9,Ze)])],32)])])):p("",!0),V.value&&a.value?(r(),i("div",{key:1,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:N(f,["self"])},[e("div",es,[e("div",ss,[e("div",ts,[s[36]||(s[36]=e("h2",{class:"text-xl font-bold text-gray-900"},"Détails du Vendeur Pro",-1)),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600"},[v(b(z),{class:"w-6 h-6"})])])]),e("div",ls,[e("div",os,[a.value.avatar_url?(r(),i("div",as,[e("img",{src:a.value.avatar_url,alt:a.value.first_name,class:"h-full w-full object-cover"},null,8,ns)])):(r(),i("div",is,[e("span",rs,n(U(a.value)),1)])),e("div",null,[e("h3",ds,n(a.value.first_name)+" "+n(a.value.last_name),1),e("p",us,n(a.value.business_name||a.value.company?.business_name||"N/A"),1)])]),a.value.company?(r(),i("div",ms,[s[42]||(s[42]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Informations de l'entreprise",-1)),e("div",ps,[e("div",null,[s[37]||(s[37]=e("p",{class:"text-sm text-gray-500"},"Nom",-1)),e("p",cs,n(a.value.company.business_name),1)]),e("div",null,[s[38]||(s[38]=e("p",{class:"text-sm text-gray-500"},"Type",-1)),e("p",xs,n(a.value.company.company_type==="enterprise"?"Entreprise":"Individuel"),1)]),a.value.company.business_email?(r(),i("div",fs,[s[39]||(s[39]=e("p",{class:"text-sm text-gray-500"},"Email entreprise",-1)),e("p",vs,n(a.value.company.business_email),1)])):p("",!0),a.value.company.tax_id?(r(),i("div",bs,[s[40]||(s[40]=e("p",{class:"text-sm text-gray-500"},"Numéro fiscal",-1)),e("p",ys,n(a.value.company.tax_id),1)])):p("",!0),e("div",null,[s[41]||(s[41]=e("p",{class:"text-sm text-gray-500"},"Statut entreprise",-1)),e("span",{class:h(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",a.value.company.is_verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(a.value.company.is_verified?"Vérifiée":"Non vérifiée"),3)])])])):p("",!0),e("div",gs,[e("div",null,[s[43]||(s[43]=e("p",{class:"text-sm text-gray-500"},"Email",-1)),e("p",_s,n(a.value.email),1)]),e("div",null,[s[44]||(s[44]=e("p",{class:"text-sm text-gray-500"},"Téléphone",-1)),e("p",ws,n(a.value.phone||"N/A"),1)]),e("div",null,[s[45]||(s[45]=e("p",{class:"text-sm text-gray-500"},"Statut compte",-1)),e("span",{class:h(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",a.value.email_verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(a.value.email_verified_at?"Vérifié":"Non vérifié"),3)]),e("div",null,[s[46]||(s[46]=e("p",{class:"text-sm text-gray-500"},"Créé le",-1)),e("p",hs,n(j(a.value.created_at)),1)])]),e("div",{class:"flex justify-end pt-4 border-t"},[e("button",{onClick:f,class:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"}," Fermer ")])])])])):p("",!0)]))}};export{Ns as default};
