import{r as u,j as w,b as n,e,t as o,V as y,a1 as k,a7 as b,l as A,F as S,z as C,i as m,o as i}from"./vendor-BnWJeMgN.js";import{c as _}from"./app-CoJMuxUM.js";const D={class:"p-6"},V={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},j={class:"bg-white rounded-lg shadow p-4"},M={class:"text-2xl font-bold text-gray-900"},R={class:"bg-white rounded-lg shadow p-4"},I={class:"text-2xl font-bold text-purple-600"},T={class:"bg-white rounded-lg shadow p-4"},U={class:"text-2xl font-bold text-blue-600"},$={class:"bg-white rounded-lg shadow p-4"},B={class:"text-2xl font-bold text-green-600"},E={class:"bg-white rounded-lg shadow p-4 mb-6"},L={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},N={class:"bg-white rounded-lg shadow overflow-hidden"},P={key:0,class:"text-center py-12"},z={key:1,class:"text-center py-12"},F={class:"text-red-600"},G={key:2,class:"text-center py-12"},q={key:3,class:"min-w-full divide-y divide-gray-200"},H={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"flex items-center"},O={class:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center"},Q={class:"text-white font-semibold"},W={class:"ml-4"},X={class:"text-sm font-medium text-gray-900"},Y={class:"text-sm text-gray-500"},Z={class:"px-6 py-4 whitespace-nowrap"},ee={class:"text-sm text-gray-900"},te={class:"text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap"},ae={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800"},re={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},oe={key:2,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},le={key:3,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"},ne={class:"px-6 py-4 whitespace-nowrap"},ie={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},de={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ce={key:4,class:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t border-gray-200"},ge={class:"flex-1 flex justify-between sm:hidden"},xe=["disabled"],me=["disabled"],ve={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},ye={class:"text-sm text-gray-700"},fe={class:"font-medium"},be={class:"font-medium"},_e={class:"font-medium"},he={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},we=["disabled"],ke=["disabled"],De={__name:"AdminManagement",setup(Ae){const c=u([]),p=u({}),v=u(!1),g=u(""),a=u({current_page:1,last_page:1,per_page:20,total:0}),l=u({search:"",role:"",status:"",sort_by:"created_at",sort_order:"desc"}),d=async()=>{v.value=!0,g.value="";try{const r=new URLSearchParams;l.value.search&&r.append("search",l.value.search),l.value.role&&r.append("role",l.value.role),l.value.status&&r.append("status",l.value.status),r.append("sort_by",l.value.sort_by),r.append("sort_order",l.value.sort_order),r.append("per_page",a.value.per_page);const t=await _.get(`/admin/admins?${r.toString()}`);t.data.success&&t.data.data?(c.value=t.data.data.users||[],a.value=t.data.data.pagination||a.value):c.value=[]}catch(r){g.value=r.response?.data?.message||"Erreur lors du chargement des administrateurs",console.error("Error fetching admins:",r)}finally{v.value=!1}},h=async()=>{try{const r=await _.get("/admin/admins/statistics");p.value=r.data.stats||{}}catch(r){console.error("Error fetching statistics:",r)}},x=r=>{r<1||r>a.value.last_page||(a.value.current_page=r,d())},f=r=>r?new Date(r).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"-";return w(()=>{d(),h()}),(r,t)=>(i(),n("div",D,[t[23]||(t[23]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Liste des administrateurs"),e("p",{class:"text-gray-600 mt-1"},"Gérer tous les utilisateurs admin (superadmin, admin, agent)")],-1)),e("div",V,[e("div",j,[t[7]||(t[7]=e("div",{class:"text-sm text-gray-500"},"Total",-1)),e("div",M,o(p.value.total||0),1)]),e("div",R,[t[8]||(t[8]=e("div",{class:"text-sm text-gray-500"},"Super Admins",-1)),e("div",I,o(p.value.superadmin||0),1)]),e("div",T,[t[9]||(t[9]=e("div",{class:"text-sm text-gray-500"},"Admins",-1)),e("div",U,o(p.value.admin||0),1)]),e("div",$,[t[10]||(t[10]=e("div",{class:"text-sm text-gray-500"},"Agents",-1)),e("div",B,o(p.value.agent||0),1)])]),e("div",E,[e("div",L,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Recherche",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.search=s),type:"text",placeholder:"Nom, email, téléphone...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onInput:d},null,544),[[k,l.value.search]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rôle",-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.role=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:d},t[12]||(t[12]=[e("option",{value:""},"Tous",-1),e("option",{value:"superadmin"},"Super Admin",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"agent"},"Agent",-1)]),544),[[b,l.value.role]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:d},t[14]||(t[14]=[e("option",{value:""},"Tous",-1),e("option",{value:"active"},"Actifs",-1),e("option",{value:"inactive"},"Inactifs",-1)]),544),[[b,l.value.status]])])])]),e("div",N,[v.value?(i(),n("div",P,t[16]||(t[16]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)]))):g.value?(i(),n("div",z,[e("p",F,o(g.value),1),e("button",{onClick:d,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Réessayer ")])):c.value.length===0?(i(),n("div",G,t[17]||(t[17]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun administrateur trouvé",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Aucun administrateur ne correspond aux filtres sélectionnés.",-1)]))):(i(),n("table",q,[t[18]||(t[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rôle"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Dernière connexion"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Inscrit le")])],-1)),e("tbody",H,[(i(!0),n(S,null,C(c.value,s=>(i(),n("tr",{key:s.id},[e("td",J,[e("div",K,[e("div",O,[e("span",Q,o(s.first_name?.charAt(0))+o(s.last_name?.charAt(0)),1)]),e("div",W,[e("div",X,o(s.first_name)+" "+o(s.last_name),1),e("div",Y,"ID: "+o(s.id),1)])])]),e("td",Z,[e("div",ee,o(s.email),1),e("div",te,o(s.phone),1)]),e("td",se,[s.primary_role==="superadmin"||s.primary_role==="Super Admin"?(i(),n("span",ae," Super Admin ")):s.primary_role==="admin"||s.primary_role==="Admin"?(i(),n("span",re," Admin ")):s.primary_role==="agent"||s.primary_role==="Agent"?(i(),n("span",oe," Agent ")):(i(),n("span",le,o(s.primary_role),1))]),e("td",ne,[s.is_active?(i(),n("span",ie," Actif ")):(i(),n("span",de," Inactif "))]),e("td",ue,o(f(s.last_login_date)),1),e("td",pe,o(f(s.created_at)),1)]))),128))])])),a.value.total>0?(i(),n("div",ce,[e("div",ge,[e("button",{onClick:t[3]||(t[3]=s=>x(a.value.current_page-1)),disabled:a.value.current_page===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Précédent ",8,xe),e("button",{onClick:t[4]||(t[4]=s=>x(a.value.current_page+1)),disabled:a.value.current_page===a.value.last_page,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Suivant ",8,me)]),e("div",ve,[e("div",null,[e("p",ye,[t[19]||(t[19]=m(" Affichage de ",-1)),e("span",fe,o((a.value.current_page-1)*a.value.per_page+1),1),t[20]||(t[20]=m(" à ",-1)),e("span",be,o(Math.min(a.value.current_page*a.value.per_page,a.value.total)),1),t[21]||(t[21]=m(" sur ",-1)),e("span",_e,o(a.value.total),1),t[22]||(t[22]=m(" résultats ",-1))])]),e("div",null,[e("nav",he,[e("button",{onClick:t[5]||(t[5]=s=>x(a.value.current_page-1)),disabled:a.value.current_page===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Précédent ",8,we),e("button",{onClick:t[6]||(t[6]=s=>x(a.value.current_page+1)),disabled:a.value.current_page===a.value.last_page,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Suivant ",8,ke)])])])])):A("",!0)])]))}};export{De as default};
