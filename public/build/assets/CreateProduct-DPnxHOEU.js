import{r as j,Q as $,c as M,i as pe,b as n,e,g as b,w as me,h as ge,F as P,y as A,k as c,W as p,X as y,t as a,a1 as q,u as m,B as v,a$ as R,S as L,aw as z,ai as U,f as fe,a0 as xe,m as h,av as N,al as be,aY as B,ac as ye,q as ve,o as i,A as _e,P as ke,x as he}from"./vendor-Ctfs0nQE.js";import{a as we}from"./app-DBRUhurF.js";const Ce={class:"max-w-4xl mx-auto space-y-6"},Fe={class:"flex items-center justify-between"},De={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},je={class:"flex items-center justify-between mb-8"},Ve={class:"flex items-center"},Me={key:1},Pe={class:"ml-3"},Ae={class:"text-xs text-gray-700"},Le={key:0,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ie={class:"lg:col-span-2"},Se={key:0,class:"mt-1 text-sm text-red-600"},Te={key:1,class:"mt-1 text-sm text-orange-600"},$e={class:"lg:col-span-2"},qe={key:0,class:"mt-1 text-sm text-red-600"},Re={key:1,class:"mt-1 text-sm text-orange-600"},ze=["disabled"],Ue={key:0,disabled:""},Ne={key:1,disabled:""},Be=["value"],Oe={class:"text-xs text-gray-500 mt-1"},Ge={key:0,class:"mt-1 text-sm text-red-600"},We={class:"lg:col-span-2"},Je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ke={class:"flex items-center space-x-3"},Qe={key:0,class:"w-2.5 h-2.5 bg-[#0099cc] rounded-full"},Xe={class:"flex items-center space-x-3"},Ye={key:0,class:"w-2.5 h-2.5 bg-purple-500 rounded-full"},He={key:0,class:"mt-1 text-sm text-red-600"},Ze={key:1,class:"mt-1 text-sm text-orange-600"},et={key:1,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},tt={class:"space-y-6"},st={class:"text-center"},ot={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},rt=["src","alt"],it=["onClick"],nt={key:0,class:"absolute bottom-2 left-2 bg-[#0099cc] text-white text-xs px-2 py-1 rounded-md"},lt={class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},at={class:"flex items-start space-x-3"},dt={key:2,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},ct={key:0},ut={class:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},mt={class:"bg-white rounded-lg p-3"},gt={class:"font-semibold text-[#0099cc]"},ft={class:"bg-white rounded-lg p-3"},xt={class:"font-semibold text-gray-800"},bt={key:1},yt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},vt={key:0,class:"mt-1 text-sm text-red-600"},_t={key:1,class:"mt-1 text-sm text-orange-600"},kt={key:2,class:"text-sm text-gray-700 mt-1"},ht={key:0,class:"mt-1 text-sm text-red-600"},wt={key:1,class:"mt-1 text-sm text-orange-600"},Ct={key:2,class:"text-sm text-gray-700 mt-1"},Ft=["min"],Dt={key:0,class:"mt-1 text-sm text-red-600"},jt={key:1,class:"mt-1 text-sm text-orange-600"},Vt=["max"],Mt={key:0,class:"mt-1 text-sm text-red-600"},Pt={key:1,class:"mt-1 text-sm text-orange-600"},At={key:2,class:"text-sm text-gray-700 mt-1"},Lt={class:"lg:col-span-2"},Et={class:"bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-xl p-6"},It={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},St={class:"text-center"},Tt={class:"text-2xl font-bold text-[#0099cc]"},$t={class:"text-center"},qt={class:"text-2xl font-bold text-blue-600"},Rt={class:"text-center"},zt={class:"text-2xl font-bold text-purple-600"},Ut={key:3,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Nt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Bt={class:"space-y-3"},Ot={class:"flex justify-between"},Gt={class:"font-medium"},Wt={class:"flex justify-between"},Jt={class:"font-medium"},Kt={class:"flex justify-between"},Qt={class:"font-medium"},Xt={class:"flex justify-between"},Yt={class:"font-medium"},Ht={class:"flex justify-between"},Zt={class:"font-medium"},es={class:"font-semibold text-gray-900 mb-4"},ts={key:0,class:"space-y-3"},ss={class:"flex justify-between"},os={class:"font-medium"},rs={class:"flex justify-between"},is={class:"font-medium"},ns={class:"flex justify-between border-t pt-3"},ls={class:"font-bold text-[#0099cc]"},as={key:1,class:"space-y-3"},ds={class:"flex justify-between"},cs={class:"font-medium"},us={class:"flex justify-between"},ps={class:"font-medium"},ms={class:"flex justify-between"},gs={class:"font-medium"},fs={class:"flex justify-between"},xs={class:"font-medium"},bs={class:"flex justify-between border-t pt-3"},ys={class:"font-bold text-[#0099cc]"},vs={class:"mt-8 p-4 bg-gray-100 rounded-xl"},_s={class:"flex items-start space-x-3"},ks={class:"text-sm text-gray-900"},hs={class:"flex justify-between items-center bg-white rounded-xl shadow-lg border border-gray-100 p-6"},ws={key:1},Cs={class:"text-sm text-gray-700"},Fs=["disabled"],Ds=["disabled"],js={key:0,class:"flex items-center"},Vs={key:1,class:"flex items-center"},Es={__name:"CreateProduct",setup(Ms){const O=ve(),{get:G,post:E,loading:w}=we(),u=j(1),C=j(!1),F=j(null),_=[{id:1,title:"Informations",description:"Détails du produit",icon:U},{id:2,title:"Photos",description:"Images du produit",icon:z},{id:3,title:"Tombola",description:"Configuration",icon:be},{id:4,title:"Publication",description:"Vérification",icon:B}],k=j([]),s=$({name:"",description:"",category_id:"",condition:"",sale_mode:"direct",price:"",location:"",images:[],ticket_price:"",total_tickets:"",min_tickets:"",end_date:"",terms_accepted:!1,duration_days:7}),l=$({name:"",description:"",category_id:"",condition:"",value:"",location:"",images:"",ticket_price:"",total_tickets:"",min_tickets:"",end_date:""}),W=M(()=>{const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().slice(0,16)}),D=M(()=>{const o=(s.ticket_price||0)*(s.total_tickets||0),t=o*.05,d=o-t,r=s.price?Math.round((d-s.price)/s.price*100):0;return{totalRevenue:o,platformFee:t,netRevenue:d,profitMargin:r}}),V=M(()=>{switch(u.value){case 1:return J();case 2:return!0;case 3:return K();case 4:return s.terms_accepted;default:return!1}}),J=()=>{const o=s.name&&s.description&&s.category_id&&s.condition&&s.sale_mode&&s.price&&s.location&&parseFloat(s.price)>=1e3;return o&&(l.name="",l.description="",l.category_id="",l.condition="",l.price="",l.location=""),o},K=()=>{if(s.sale_mode==="direct")return!0;if(s.sale_mode==="lottery"){const o=s.ticket_price&&s.total_tickets&&s.min_tickets&&s.end_date&&parseFloat(s.ticket_price)>=100&&parseInt(s.total_tickets)>=10&&parseInt(s.min_tickets)>=10&&parseInt(s.min_tickets)<=parseInt(s.total_tickets)&&new Date(s.end_date)>new Date;return o&&(l.ticket_price="",l.total_tickets="",l.min_tickets="",l.end_date=""),o}return!1},Q=()=>{V.value&&u.value<_.length&&u.value++},X=()=>{u.value>1&&u.value--},Y=()=>{F.value?.click()},H=o=>{const t=Array.from(o.target.files||[]);I(t)},Z=o=>{const t=Array.from(o.dataTransfer.files||[]);I(t)},I=o=>{const t=o.filter(d=>d.type.startsWith("image/")?d.size>5242880?(x(`Le fichier ${d.name} est trop volumineux (max 5MB)`),!1):!0:(x(`Le fichier ${d.name} n'est pas une image valide`),!1));if(s.images.length+t.length>10){x("Maximum 10 images autorisées");return}t.forEach(d=>{const r=new FileReader;r.onload=g=>{s.images.push({file:d,preview:g.target?.result,name:d.name,size:d.size,type:d.type})},r.onerror=()=>{x(`Erreur lors de la lecture du fichier ${d.name}`)},r.readAsDataURL(d)}),F.value&&(F.value.value="")},ee=o=>{s.images.splice(o,1)},S=()=>{},f=o=>new Intl.NumberFormat("fr-FR").format(o||0),te=o=>o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",se=o=>({new:"Neuf",used:"Occasion",refurbished:"Reconditionné"})[o]||o,oe=async()=>{C.value=!0,re();try{const o=Math.ceil(s.price/s.ticket_price),t={name:s.name,description:s.description,category_id:parseInt(s.category_id),price:parseFloat(s.price),sale_mode:s.sale_mode,images:s.images.map(r=>r.preview)};s.sale_mode==="lottery"&&(t.ticket_price=parseFloat(s.ticket_price),t.min_participants=parseInt(s.min_tickets));const d=await E("/products",t);if(d.product){if(s.sale_mode==="lottery"){const r={duration_days:ne()};try{await E(`/products/${d.product.id}/create-lottery`,r),T("Produit et tombola créés avec succès !")}catch(g){console.error("Error creating lottery:",g),le("Produit créé mais erreur lors de la création de la tombola")}}else T("Produit créé avec succès !");setTimeout(()=>{O.push("/merchant/products")},1500)}}catch(o){console.error("Error creating product:",o),ie(o)}finally{C.value=!1}},re=()=>{Object.keys(l).forEach(o=>{l[o]=""})},ie=o=>{if(o.response?.data?.errors){const t=o.response.data.errors;Object.keys(t).forEach(d=>{l[d]!==void 0&&(l[d]=t[d][0])}),x("Veuillez corriger les erreurs dans le formulaire")}else o.response?.data?.message?x(o.response.data.message):x("Une erreur est survenue. Veuillez réessayer.")},ne=()=>{if(!s.end_date)return 7;const o=new Date(s.end_date),d=Math.abs(o-new Date),r=Math.ceil(d/(1e3*60*60*24));return Math.min(Math.max(r,1),30)},T=o=>{window.$toast&&window.$toast.success(o,"✅ Succès")},x=o=>{window.$toast&&window.$toast.error(o,"❌ Erreur")},le=o=>{window.$toast&&window.$toast.warning(o,"⚠️ Attention")},ae=()=>{if(s.end_date){const o=new Date(s.end_date),t=new Date,d=new Date;d.setDate(d.getDate()+30),o<=t?l.end_date="La date de fin doit être dans le futur":o>d?l.end_date="La date de fin ne peut pas dépasser 30 jours":l.end_date=""}},de=()=>{s.ticket_price&&(parseFloat(s.ticket_price)<100?l.ticket_price="Le prix minimum est de 100 FCFA":l.ticket_price="")},ce=()=>{if(s.total_tickets){const o=parseInt(s.total_tickets);o<10?l.total_tickets="Minimum 10 tickets requis":o>1e4?l.total_tickets="Maximum 10,000 tickets autorisés":l.total_tickets=""}},ue=async()=>{try{console.log("Loading categories...");const o=await G("/categories");console.log("Categories response:",o),console.log("Response keys:",Object.keys(o)),o&&o.categories?(k.value=o.categories,console.log("Categories loaded:",k.value.length,"items")):o&&o.data?(k.value=o.data,console.log("Categories loaded from data:",k.value.length,"items")):console.log("No categories in response or response is null")}catch(o){console.error("Error loading categories:",o),x("Erreur lors du chargement des catégories")}};return pe(()=>{ue(),console.log("CreateProduct page loaded")}),(o,t)=>{const d=ge("router-link");return i(),n("div",Ce,[e("div",Fe,[t[15]||(t[15]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Publier un Nouveau Produit"),e("p",{class:"mt-2 text-gray-600"},"Créez votre tombola et mettez votre produit en vente")],-1)),b(d,{to:"/merchant/products",class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},{default:me(()=>[b(m(N),{class:"w-4 h-4 mr-2"}),t[14]||(t[14]=h(" Retour aux produits ",-1))]),_:1,__:[14]})]),e("div",De,[e("div",je,[(i(),n(P,null,A(_,(r,g)=>e("div",{key:r.id,class:v(["flex items-center",{"flex-1":g<_.length-1}])},[e("div",Ve,[e("div",{class:v(["flex items-center justify-center w-10 h-10 rounded-full border-2 font-medium text-sm transition-all",u.value>=r.id?"border-[#0099cc] bg-[#0099cc] text-white":"border-gray-300 bg-white text-gray-600"])},[u.value>=r.id?(i(),_e(ke(r.icon),{key:0,class:"w-5 h-5"})):(i(),n("span",Me,a(r.id),1))],2),e("div",Pe,[e("p",{class:v(["text-sm font-medium",u.value>=r.id?"text-[#0099cc]":"text-gray-600"])},a(r.title),3),e("p",Ae,a(r.description),1)])]),g<_.length-1?(i(),n("div",{key:0,class:v(["flex-1 h-0.5 mx-4 transition-all",u.value>r.id?"bg-[#0099cc]":"bg-gray-200"])},null,2)):c("",!0)],2)),64))])]),e("form",{onSubmit:L(oe,["prevent"]),class:"space-y-6"},[u.value===1?(i(),n("div",Le,[t[27]||(t[27]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations de base",-1)),e("div",Ee,[e("div",Ie,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom du produit * ",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.name=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: iPhone 15 Pro Max 256GB"},null,512),[[y,s.name]]),l.name?(i(),n("p",Se,a(l.name),1)):s.name&&s.name.length<3?(i(),n("p",Te,"Le nom doit contenir au moins 3 caractères")):c("",!0)]),e("div",$e,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Description * ",-1)),p(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.description=r),rows:"4",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Décrivez votre produit en détail..."},null,512),[[y,s.description]]),l.description?(i(),n("p",qe,a(l.description),1)):s.description&&s.description.length<10?(i(),n("p",Re,"La description doit contenir au moins 10 caractères")):c("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catégorie * ",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.category_id=r),required:"",disabled:m(w),class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all disabled:opacity-50",style:{color:"#5f5f5f"}},[t[18]||(t[18]=e("option",{value:""},"Sélectionner une catégorie",-1)),m(w)?(i(),n("option",Ue,"Chargement des catégories...")):c("",!0),k.value.length===0&&!m(w)?(i(),n("option",Ne,"Aucune catégorie disponible")):c("",!0),(i(!0),n(P,null,A(k.value,r=>(i(),n("option",{key:r.id,value:r.id},a(r.name),9,Be))),128))],8,ze),[[q,s.category_id]]),e("p",Oe," Debug: "+a(k.value.length)+" catégories chargées ",1),l.category_id?(i(),n("p",Ge,a(l.category_id),1)):c("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Condition * ",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.condition=r),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},t[20]||(t[20]=[e("option",{value:""},"État du produit",-1),e("option",{value:"new"},"Neuf",-1),e("option",{value:"used"},"Occasion",-1),e("option",{value:"refurbished"},"Reconditionné",-1)]),512),[[q,s.condition]])]),e("div",We,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mode de vente * ",-1)),e("div",Je,[e("label",{class:v(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-[#0099cc] bg-blue-50":s.sale_mode==="direct"}])},[p(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=r=>s.sale_mode=r),value:"direct",class:"sr-only"},null,512),[[R,s.sale_mode]]),e("div",Ke,[e("div",{class:v(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="direct"?"border-[#0099cc]":"border-gray-300"])},[s.sale_mode==="direct"?(i(),n("div",Qe)):c("",!0)],2),t[22]||(t[22]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Vente directe"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent directement")],-1))])],2),e("label",{class:v(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-purple-500 bg-purple-50":s.sale_mode==="lottery"}])},[p(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>s.sale_mode=r),value:"lottery",class:"sr-only"},null,512),[[R,s.sale_mode]]),e("div",Xe,[e("div",{class:v(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="lottery"?"border-purple-500":"border-gray-300"])},[s.sale_mode==="lottery"?(i(),n("div",Ye)):c("",!0)],2),t[23]||(t[23]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Tombola"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent des tickets")],-1))])],2)])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Valeur du produit (FCFA) * ",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s.price=r),type:"number",required:"",min:"0",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 800000"},null,512),[[y,s.price]]),l.price?(i(),n("p",He,a(l.price),1)):s.price&&parseFloat(s.price)<1e3?(i(),n("p",Ze,"La valeur minimum est de 1000 FCFA")):c("",!0)]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Localisation * ",-1)),p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.location=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: Libreville, Gabon"},null,512),[[y,s.location]])])])])):c("",!0),u.value===2?(i(),n("div",et,[t[32]||(t[32]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Photos du produit",-1)),e("div",tt,[e("div",st,[e("div",{onClick:Y,onDragover:t[8]||(t[8]=L(()=>{},["prevent"])),onDrop:L(Z,["prevent"]),class:"border-2 border-dashed border-gray-300 rounded-xl p-8 hover:border-[#0099cc] transition-colors cursor-pointer"},[b(m(z),{class:"w-16 h-16 text-gray-600 mx-auto mb-4"}),t[28]||(t[28]=e("p",{class:"text-lg font-medium text-gray-700 mb-2"},"Ajoutez des photos",-1)),t[29]||(t[29]=e("p",{class:"text-sm text-gray-700 mb-4"},"Glissez-déposez ou cliquez pour sélectionner",-1)),t[30]||(t[30]=e("div",{class:"flex justify-center"},[e("span",{class:"bg-[#0099cc] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#0088bb] transition-colors"}," Choisir des fichiers ")],-1))],32),e("input",{ref_key:"fileInput",ref:F,type:"file",multiple:"",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:H,class:"hidden"},null,544)]),s.images.length>0?(i(),n("div",ot,[(i(!0),n(P,null,A(s.images,(r,g)=>(i(),n("div",{key:g,class:"relative group"},[e("img",{src:r.preview,alt:`Produit ${g+1}`,class:"w-full h-32 object-cover rounded-xl border border-gray-200"},null,8,rt),e("button",{onClick:Ps=>ee(g),type:"button",class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[b(m(he),{class:"w-4 h-4"})],8,it),g===0?(i(),n("div",nt," Photo principale ")):c("",!0)]))),128))])):c("",!0),e("div",lt,[e("div",at,[b(m(U),{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),t[31]||(t[31]=e("div",{class:"text-sm text-blue-700"},[e("p",{class:"font-medium mb-1"},"Conseils pour de bonnes photos :"),e("ul",{class:"space-y-1 text-sm"},[e("li",null,"• Utilisez un bon éclairage naturel"),e("li",null,"• Prenez plusieurs angles du produit"),e("li",null,"• La première image sera la photo principale"),e("li",null,"• Maximum 10 images par produit"),e("li",null,"• Formats acceptés : JPG, PNG, WebP"),e("li",null,"• Taille maximum : 5MB par image")])],-1))])])])])):c("",!0),u.value===3?(i(),n("div",dt,[s.sale_mode==="direct"?(i(),n("div",ct,[t[37]||(t[37]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de vente directe",-1)),e("div",ut,[t[35]||(t[35]=fe('<div class="flex items-center justify-center space-x-3 mb-4"><div class="w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><h3 class="text-lg font-semibold text-gray-900">Vente directe configurée</h3><p class="text-gray-600">Votre produit sera disponible à l&#39;achat immédiat</p></div></div>',1)),e("div",pt,[e("div",mt,[t[33]||(t[33]=e("p",{class:"text-gray-600"},"Prix de vente",-1)),e("p",gt,a(f(s.price))+" FCFA",1)]),e("div",ft,[t[34]||(t[34]=e("p",{class:"text-gray-600"},"Commission plateforme",-1)),e("p",xt,a(f(s.price*.05))+" FCFA (5%)",1)])]),t[36]||(t[36]=e("p",{class:"text-sm text-gray-700 mt-4"}," Les clients pourront acheter votre produit directement au prix affiché. ",-1))])])):s.sale_mode==="lottery"?(i(),n("div",bt,[t[46]||(t[46]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de la tombola",-1)),e("div",yt,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prix par ticket (FCFA) * ",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.ticket_price=r),type:"number",required:"",min:"100",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 2500",onInput:S,onBlur:de},null,544),[[y,s.ticket_price]]),l.ticket_price?(i(),n("p",vt,a(l.ticket_price),1)):s.ticket_price&&parseFloat(s.ticket_price)<100?(i(),n("p",_t,"Le prix minimum est de 100 FCFA")):(i(),n("p",kt,"Minimum 100 FCFA"))]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre de tickets * ",-1)),p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.total_tickets=r),type:"number",required:"",min:"10",max:"10000",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 400",onInput:S,onBlur:ce},null,544),[[y,s.total_tickets]]),l.total_tickets?(i(),n("p",ht,a(l.total_tickets),1)):s.total_tickets&&(parseInt(s.total_tickets)<10||parseInt(s.total_tickets)>1e4)?(i(),n("p",wt,"Entre 10 et 10,000 tickets")):(i(),n("p",Ct,"Entre 10 et 10,000 tickets"))]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin de vente * ",-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>s.end_date=r),type:"datetime-local",required:"",min:W.value,onChange:ae,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},null,40,Ft),[[y,s.end_date]]),l.end_date?(i(),n("p",Dt,a(l.end_date),1)):s.end_date&&new Date(s.end_date)<=new Date?(i(),n("p",jt,"La date de fin doit être dans le futur")):c("",!0)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tickets minimum pour valider * ",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s.min_tickets=r),type:"number",required:"",max:s.total_tickets,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 200"},null,8,Vt),[[y,s.min_tickets]]),l.min_tickets?(i(),n("p",Mt,a(l.min_tickets),1)):s.min_tickets&&s.total_tickets&&parseInt(s.min_tickets)>parseInt(s.total_tickets)?(i(),n("p",Pt,"Ne peut pas dépasser le nombre total de tickets")):(i(),n("p",At,"Si pas atteint, remboursement automatique"))]),e("div",Lt,[e("div",Et,[t[45]||(t[45]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Aperçu de la tombola",-1)),e("div",It,[e("div",St,[e("p",Tt,a(f(D.value.totalRevenue)),1),t[42]||(t[42]=e("p",{class:"text-sm text-gray-600"},"Revenus potentiels",-1))]),e("div",$t,[e("p",qt,a(D.value.profitMargin)+"%",1),t[43]||(t[43]=e("p",{class:"text-sm text-gray-600"},"Marge bénéficiaire",-1))]),e("div",Rt,[e("p",zt,a(f(D.value.platformFee)),1),t[44]||(t[44]=e("p",{class:"text-sm text-gray-600"},"Frais plateforme (5%)",-1))])])])])])])):c("",!0)])):c("",!0),u.value===4?(i(),n("div",Ut,[t[65]||(t[65]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Vérification et publication",-1)),e("div",Nt,[e("div",null,[t[52]||(t[52]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Résumé du produit",-1)),e("div",Bt,[e("div",Ot,[t[47]||(t[47]=e("span",{class:"text-gray-800"},"Nom :",-1)),e("span",Gt,a(s.name),1)]),e("div",Wt,[t[48]||(t[48]=e("span",{class:"text-gray-800"},"Valeur :",-1)),e("span",Jt,a(f(s.price))+" FCFA",1)]),e("div",Kt,[t[49]||(t[49]=e("span",{class:"text-gray-800"},"Condition :",-1)),e("span",Qt,a(se(s.condition)),1)]),e("div",Xt,[t[50]||(t[50]=e("span",{class:"text-gray-800"},"Localisation :",-1)),e("span",Yt,a(s.location),1)]),e("div",Ht,[t[51]||(t[51]=e("span",{class:"text-gray-800"},"Photos :",-1)),e("span",Zt,a(s.images.length)+" image(s)",1)])])]),e("div",null,[e("h3",es,a(s.sale_mode==="lottery"?"Configuration tombola":"Configuration vente"),1),s.sale_mode==="direct"?(i(),n("div",ts,[t[56]||(t[56]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-[#0099cc]"},"Vente directe")],-1)),e("div",ss,[t[53]||(t[53]=e("span",{class:"text-gray-800"},"Prix de vente :",-1)),e("span",os,a(f(s.price))+" FCFA",1)]),e("div",rs,[t[54]||(t[54]=e("span",{class:"text-gray-800"},"Commission (5%) :",-1)),e("span",is,a(f(s.price*.05))+" FCFA",1)]),e("div",ns,[t[55]||(t[55]=e("span",{class:"text-gray-800"},"Vous recevrez :",-1)),e("span",ls,a(f(s.price*.95))+" FCFA",1)])])):s.sale_mode==="lottery"?(i(),n("div",as,[t[62]||(t[62]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-purple-600"},"Tombola")],-1)),e("div",ds,[t[57]||(t[57]=e("span",{class:"text-gray-800"},"Prix/ticket :",-1)),e("span",cs,a(f(s.ticket_price))+" FCFA",1)]),e("div",us,[t[58]||(t[58]=e("span",{class:"text-gray-800"},"Total tickets :",-1)),e("span",ps,a(s.total_tickets),1)]),e("div",ms,[t[59]||(t[59]=e("span",{class:"text-gray-800"},"Minimum requis :",-1)),e("span",gs,a(s.min_tickets),1)]),e("div",fs,[t[60]||(t[60]=e("span",{class:"text-gray-800"},"Date de fin :",-1)),e("span",xs,a(te(s.end_date)),1)]),e("div",bs,[t[61]||(t[61]=e("span",{class:"text-gray-800"},"Revenus max :",-1)),e("span",ys,a(f(D.value.totalRevenue))+" FCFA",1)])])):c("",!0)])]),e("div",vs,[e("label",_s,[p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>s.terms_accepted=r),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded"},null,512),[[xe,s.terms_accepted]]),e("span",ks,[t[63]||(t[63]=h(" J'accepte les ",-1)),t[64]||(t[64]=e("a",{href:"#",class:"text-[#0099cc] hover:underline"},"conditions de vente",-1)),h(" et confirme que toutes les informations sont exactes. Je comprends que Koumbaya prélèvera des frais de 5% sur les revenus "+a(s.sale_mode==="lottery"?"de la tombola":"de la vente")+". ",1)])])])])):c("",!0),e("div",hs,[u.value>1?(i(),n("button",{key:0,onClick:X,type:"button",class:"inline-flex items-center px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[b(m(N),{class:"w-4 h-4 mr-2"}),t[66]||(t[66]=h(" Précédent ",-1))])):(i(),n("div",ws)),e("div",Cs," Étape "+a(u.value)+" sur "+a(_.length),1),u.value<_.length?(i(),n("button",{key:2,onClick:Q,type:"button",class:"inline-flex items-center px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!V.value||m(w)},[t[67]||(t[67]=h(" Suivant ",-1)),b(m(ye),{class:"w-4 h-4 ml-2"})],8,Fs)):c("",!0),u.value===_.length?(i(),n("button",{key:3,type:"submit",disabled:C.value||!V.value||m(w),class:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors"},[C.value||m(w)?(i(),n("span",js,[t[68]||(t[68]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1)),h(" "+a(C.value?"Publication...":"Chargement..."),1)])):(i(),n("span",Vs,[b(m(B),{class:"w-4 h-4 mr-2"}),t[69]||(t[69]=h(" Publier le produit ",-1))]))],8,Ds)):c("",!0)])],32)])}}};export{Es as default};
