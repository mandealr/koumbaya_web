import{b as a,o as l,e,r as x,x as W,c as Q,g as X,h as Y,j as p,i as c,w as P,k as ee,F as _,n as w,z as k,u,A as te,D as $,f as se,t as r,s as j,m as oe,l as g,p as M,v as T,E as le}from"./vendor-CznQeBe4.js";import{e as F,j as re,d as ae,p as ne,q as ie,s as de,m as L,n as ce,o as ue,t as ge,v as me,f as pe,w as ve}from"./app-Dy6ZhDj2.js";import{r as xe}from"./RocketLaunchIcon-DVcC8RYo.js";function be(D,b){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}function fe(D,b){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"})])}const ye={class:"space-y-6"},he={class:"flex items-center justify-between"},_e={class:"flex space-x-3"},we={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},ke={class:"flex items-center justify-between"},Ce={class:"text-sm font-medium text-gray-600"},Pe={class:"text-2xl font-bold text-gray-900 mt-1"},$e={class:"mt-4 pt-4 border-t border-gray-100"},je={class:"flex items-center text-xs"},Me={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},De={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Se={class:"relative"},Ae=["value"],Be={key:0,class:"flex justify-center py-12"},Ve={key:1,class:"text-center py-12"},Te={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Fe={class:"relative h-48 bg-gray-200"},Le=["src","alt"],qe={class:"absolute top-3 left-3"},Ne={class:"absolute top-3 right-3"},Ze={class:"bg-black/50 text-white px-2 py-1 rounded-lg text-xs font-medium"},ze={class:"p-6"},Ee={class:"flex items-start justify-between mb-3"},Re={class:"text-lg font-semibold text-gray-900 line-clamp-2"},Ie={class:"text-right ml-2"},Ue={class:"text-lg font-bold text-[#0099cc]"},He={class:"text-gray-600 text-sm mb-4 line-clamp-2"},Oe={class:"space-y-3 mb-4"},Ge={class:"flex justify-between text-sm"},Je={class:"font-medium"},Ke={class:"w-full bg-gray-200 rounded-full h-2"},We={class:"flex justify-between text-xs text-gray-500"},Qe={key:0},Xe={class:"grid grid-cols-2 gap-4 mb-4 text-center"},Ye={class:"bg-green-50 p-3 rounded-lg"},et={class:"text-green-700 font-semibold text-lg"},tt={class:"bg-blue-50 p-3 rounded-lg"},st={class:"text-blue-700 font-semibold text-lg"},ot={class:"flex space-x-2"},lt=["onClick"],rt=["onClick"],at=["onClick"],nt={class:"relative"},it=["onClick"],dt={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10"},ct=["onClick"],ut=["onClick"],gt=["onClick"],mt={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},pt={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-xl bg-white max-h-[80vh] overflow-y-auto"},vt={class:"flex items-center justify-between mb-6"},xt={key:0,class:"space-y-6"},bt={key:0},ft={class:"grid grid-cols-3 gap-2"},yt=["src","alt"],ht={class:"grid grid-cols-2 gap-4"},_t={class:"text-sm text-gray-900"},wt={class:"text-sm text-gray-900"},kt={class:"text-sm text-gray-900 font-semibold"},Ct={class:"text-sm text-gray-900"},Pt={class:"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg"},$t={class:"grid grid-cols-3 gap-4 text-center"},jt={class:"bg-[#0099cc]/10 p-4 rounded-lg"},Mt={class:"text-2xl font-bold text-[#0099cc]"},Dt={class:"bg-green-100 p-4 rounded-lg"},St={class:"text-2xl font-bold text-green-600"},At={class:"bg-purple-100 p-4 rounded-lg"},Bt={class:"text-2xl font-bold text-purple-600"},Vt={class:"mt-6 flex justify-end space-x-3"},qt={__name:"Products",setup(D){const b=oe(),q=x(!1),C=x(!1),n=x(null),v=x(null),i=W({search:"",category:"",status:"",sortBy:"created_at"}),S=x([{id:1,name:"Électronique"},{id:2,name:"Mode & Accessoires"},{id:3,name:"Maison & Jardin"},{id:4,name:"Sport & Loisirs"},{id:5,name:"Automobile"}]),N=x([{label:"Produits actifs",value:"8",change:12.5,icon:F,color:"bg-[#0099cc]"},{label:"Total revenus",value:"45.2K",change:18.7,icon:re,color:"bg-green-500"},{label:"Billets vendus",value:"1,247",change:8.3,icon:ae,color:"bg-purple-500"},{label:"Taux succès",value:"89%",change:5.2,icon:ne,color:"bg-yellow-500"}]),f=x([{id:1,name:"iPhone 15 Pro Max 256GB",description:"Smartphone Apple dernière génération, état impeccable avec tous les accessoires d'origine.",category:"Électronique",condition:"new",value:85e4,ticket_price:2500,total_tickets:400,sold_tickets:287,progress:72,revenue:717500,status:"active",end_date:"2025-01-15T18:00:00Z",created_at:"2025-01-01T10:00:00Z",image:"/images/products/placeholder.jpg",images:["/images/products/placeholder.jpg","/images/products/placeholder.jpg","/images/products/placeholder.jpg"]},{id:2,name:'MacBook Pro M3 14"',description:"Ordinateur portable professionnel Apple avec processeur M3, parfait pour le travail et la créativité.",category:"Électronique",condition:"like_new",value:12e5,ticket_price:5e3,total_tickets:300,sold_tickets:156,progress:52,revenue:78e4,status:"active",end_date:"2025-01-20T20:00:00Z",created_at:"2025-01-05T14:30:00Z",image:"/images/products/placeholder.jpg",images:["/images/products/placeholder.jpg","/images/products/placeholder.jpg"]},{id:3,name:"PlayStation 5 + Accessoires",description:"Console de jeu nouvelle génération avec manette supplémentaire et 3 jeux inclus.",category:"Électronique",condition:"good",value:45e4,ticket_price:1500,total_tickets:350,sold_tickets:298,progress:85,revenue:447e3,status:"active",end_date:"2025-01-12T16:00:00Z",created_at:"2025-01-03T09:15:00Z",image:"/images/products/placeholder.jpg",images:["/images/products/placeholder.jpg"]},{id:4,name:"Apple Watch Series 9",description:"Montre connectée Apple avec toutes les fonctionnalités de santé et sport.",category:"Électronique",condition:"new",value:28e4,ticket_price:1e3,total_tickets:350,sold_tickets:89,progress:25,revenue:89e3,status:"draft",end_date:null,created_at:"2025-01-08T11:20:00Z",image:"/images/products/placeholder.jpg",images:[]}]),A=Q(()=>{let o=f.value;if(i.search){const t=i.search.toLowerCase();o=o.filter(d=>d.name.toLowerCase().includes(t)||d.description.toLowerCase().includes(t))}return i.category&&(o=o.filter(t=>t.category===S.value.find(d=>d.id==i.category)?.name)),i.status&&(o=o.filter(t=>t.status===i.status)),o.sort((t,d)=>{switch(i.sortBy){case"sales":return d.sold_tickets-t.sold_tickets;case"end_date":return new Date(d.end_date||0)-new Date(t.end_date||0);case"value":return d.value-t.value;default:return new Date(d.created_at)-new Date(t.created_at)}}),o}),y=()=>{},Z=o=>({draft:"bg-gray-100 text-gray-800 px-3 py-1 text-xs font-medium rounded-full",active:"bg-green-100 text-green-800 px-3 py-1 text-xs font-medium rounded-full",completed:"bg-blue-100 text-blue-800 px-3 py-1 text-xs font-medium rounded-full",cancelled:"bg-red-100 text-red-800 px-3 py-1 text-xs font-medium rounded-full"})[o]||"bg-gray-100 text-gray-800 px-3 py-1 text-xs font-medium rounded-full",z=o=>({draft:"Brouillon",active:"Actif",completed:"Terminé",cancelled:"Annulé"})[o]||o,E=o=>({new:"Neuf",like_new:"Comme neuf",good:"Bon état",fair:"État correct"})[o]||o,h=o=>new Intl.NumberFormat("fr-FR").format(o||0),R=o=>o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"",I=o=>{n.value=o,C.value=!0,v.value=null},B=()=>{C.value=!1,n.value=null},U=o=>{b.push(`/merchant/products/${o.id}/edit`)},H=async o=>{if(confirm(`Publier la tombola pour "${o.name}" ?`))try{o.status="active",o.end_date=new Date(Date.now()+10080*60*1e3).toISOString(),alert("Produit publié avec succès !")}catch{alert("Erreur lors de la publication")}},O=o=>{const t={...o,id:Date.now(),name:o.name+" (Copie)",status:"draft",sold_tickets:0,progress:0,revenue:0,end_date:null,created_at:new Date().toISOString()};f.value.unshift(t),v.value=null,alert("Produit dupliqué avec succès !")},G=o=>{b.push(`/merchant/analytics?product=${o.id}`),v.value=null},J=async o=>{if(confirm(`Supprimer définitivement "${o.name}" ? Cette action est irréversible.`)){try{const t=f.value.findIndex(d=>d.id===o.id);t!==-1&&(f.value.splice(t,1),alert("Produit supprimé"))}catch{alert("Erreur lors de la suppression")}v.value=null}},K=o=>{v.value=v.value===o?null:o},V=o=>{o.target.closest(".relative")||(v.value=null)};return X(()=>{document.addEventListener("click",V),console.log("Products page loaded")}),Y(()=>{document.removeEventListener("click",V)}),(o,t)=>{const d=ee("router-link");return l(),a("div",ye,[e("div",he,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mes Produits"),e("p",{class:"mt-2 text-gray-600"},"Gérez vos produits et suivez vos tombolas en cours")],-1)),e("div",_e,[c(d,{to:"/merchant/products/create",class:"inline-flex items-center px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl"},{default:P(()=>[c(u(L),{class:"w-5 h-5 mr-2"}),t[4]||(t[4]=g(" Nouveau Produit ",-1))]),_:1,__:[4]})])]),e("div",we,[(l(!0),a(_,null,w(N.value,s=>(l(),a("div",{key:s.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},[e("div",ke,[e("div",null,[e("p",Ce,r(s.label),1),e("p",Pe,r(s.value),1)]),e("div",{class:M(["p-3 rounded-xl",s.color])},[(l(),j(T(s.icon),{class:"w-6 h-6 text-white"}))],2)]),e("div",$e,[e("div",je,[e("span",{class:M(["inline-flex items-center px-2 py-1 rounded-full font-medium",s.change>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[(l(),j(T(s.change>=0?u(ce):u(ue)),{class:"w-3 h-3 mr-1"})),g(" "+r(Math.abs(s.change))+"% ",1)],2),t[6]||(t[6]=e("span",{class:"ml-2 text-gray-500"},"ce mois",-1))])])]))),128))]),e("div",Me,[e("div",De,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),e("div",Se,[c(u(ie),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.search=s),type:"text",placeholder:"Nom du produit...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black",onInput:y},null,544),[[te,i.search]])])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.category=s),onChange:y,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},[t[8]||(t[8]=e("option",{value:""},"Toutes les catégories",-1)),(l(!0),a(_,null,w(S.value,s=>(l(),a("option",{key:s.id,value:s.id},r(s.name),9,Ae))),128))],544),[[$,i.category]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.status=s),onChange:y,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},t[10]||(t[10]=[se('<option value="">Tous les statuts</option><option value="draft">Brouillon</option><option value="active">Actif</option><option value="completed">Terminé</option><option value="cancelled">Annulé</option>',5)]),544),[[$,i.status]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trier par",-1)),k(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.sortBy=s),onChange:y,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},t[12]||(t[12]=[e("option",{value:"created_at"},"Date de création",-1),e("option",{value:"sales"},"Ventes",-1),e("option",{value:"end_date"},"Date de fin",-1),e("option",{value:"value"},"Valeur",-1)]),544),[[$,i.sortBy]])])])]),q.value?(l(),a("div",Be,t[14]||(t[14]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):A.value.length===0?(l(),a("div",Ve,[c(u(F),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun produit",-1)),t[17]||(t[17]=e("p",{class:"text-gray-600 mb-6"},"Vous n'avez pas encore de produits. Créez votre première tombola !",-1)),c(d,{to:"/merchant/products/create",class:"inline-flex items-center px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-xl font-semibold transition-colors"},{default:P(()=>[c(u(L),{class:"w-5 h-5 mr-2"}),t[15]||(t[15]=g(" Créer mon premier produit ",-1))]),_:1,__:[15]})])):(l(),a("div",Te,[(l(!0),a(_,null,w(A.value,s=>(l(),a("div",{key:s.id,class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200 hover:scale-[1.02]"},[e("div",Fe,[e("img",{src:s.image,alt:s.name,class:"w-full h-full object-cover"},null,8,Le),e("div",qe,[e("span",{class:M(Z(s.status))},r(z(s.status)),3)]),e("div",Ne,[e("div",Ze,r(s.category),1)])]),e("div",ze,[e("div",Ee,[e("h3",Re,r(s.name),1),e("div",Ie,[e("p",Ue,r(h(s.value))+" FCFA",1),t[18]||(t[18]=e("p",{class:"text-xs text-gray-500"},"Valeur",-1))])]),e("p",He,r(s.description),1),e("div",Oe,[e("div",Ge,[t[19]||(t[19]=e("span",{class:"text-gray-600"},"Progression",-1)),e("span",Je,r(s.sold_tickets)+"/"+r(s.total_tickets),1)]),e("div",Ke,[e("div",{class:"bg-gradient-to-r from-[#0099cc] to-cyan-500 h-2 rounded-full transition-all duration-500",style:le({width:s.progress+"%"})},null,4)]),e("div",We,[e("span",null,r(s.progress)+"% vendu",1),s.end_date?(l(),a("span",Qe,"Fin: "+r(R(s.end_date)),1)):p("",!0)])]),e("div",Xe,[e("div",Ye,[e("p",et,r(h(s.revenue)),1),t[20]||(t[20]=e("p",{class:"text-green-600 text-xs"},"Revenus",-1))]),e("div",tt,[e("p",st,r(s.ticket_price.toLocaleString()),1),t[21]||(t[21]=e("p",{class:"text-blue-600 text-xs"},"Prix/billet",-1))])]),e("div",ot,[e("button",{onClick:m=>I(s),class:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors"},[c(u(ge),{class:"w-4 h-4 inline mr-1"}),t[22]||(t[22]=g(" Voir ",-1))],8,lt),s.status==="draft"?(l(),a("button",{key:0,onClick:m=>H(s),class:"flex-1 px-4 py-2 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg text-sm font-medium transition-colors"},[c(u(xe),{class:"w-4 h-4 inline mr-1"}),t[23]||(t[23]=g(" Publier ",-1))],8,rt)):p("",!0),s.status==="active"?(l(),a("button",{key:1,onClick:m=>U(s),class:"flex-1 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg text-sm font-medium transition-colors"},[c(u(me),{class:"w-4 h-4 inline mr-1"}),t[24]||(t[24]=g(" Modifier ",-1))],8,at)):p("",!0),e("div",nt,[e("button",{onClick:m=>K(s.id),class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[c(u(fe),{class:"w-4 h-4"})],8,it),v.value===s.id?(l(),a("div",dt,[e("button",{onClick:m=>O(s),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg"},[c(u(be),{class:"w-4 h-4 inline mr-2"}),t[25]||(t[25]=g(" Dupliquer ",-1))],8,ct),e("button",{onClick:m=>G(s),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50"},[c(u(pe),{class:"w-4 h-4 inline mr-2"}),t[26]||(t[26]=g(" Analytiques ",-1))],8,ut),["draft","active"].includes(s.status)?(l(),a("button",{key:0,onClick:m=>J(s),class:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 rounded-b-lg"},[c(u(ve),{class:"w-4 h-4 inline mr-2"}),t[27]||(t[27]=g(" Supprimer ",-1))],8,gt)):p("",!0)])):p("",!0)])])])]))),128))])),C.value?(l(),a("div",mt,[e("div",pt,[e("div",vt,[t[28]||(t[28]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Détails du produit",-1)),e("button",{onClick:B,class:"text-gray-400 hover:text-gray-600"},[c(u(de),{class:"w-6 h-6"})])]),n.value?(l(),a("div",xt,[n.value.images&&n.value.images.length>0?(l(),a("div",bt,[t[29]||(t[29]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Images",-1)),e("div",ft,[(l(!0),a(_,null,w(n.value.images.slice(0,6),(s,m)=>(l(),a("img",{key:m,src:s,alt:`Produit ${m+1}`,class:"w-full h-20 object-cover rounded-lg"},null,8,yt))),128))])])):p("",!0),e("div",ht,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",_t,r(n.value.name),1)]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",wt,r(n.value.category),1)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700"},"Valeur",-1)),e("p",kt,r(h(n.value.value))+" FCFA",1)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700"},"Condition",-1)),e("p",Ct,r(E(n.value.condition)),1)])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),e("p",Pt,r(n.value.description),1)]),e("div",null,[t[38]||(t[38]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Statistiques de la tombola",-1)),e("div",$t,[e("div",jt,[e("p",Mt,r(n.value.sold_tickets),1),t[35]||(t[35]=e("p",{class:"text-sm text-gray-600"},"Billets vendus",-1))]),e("div",Dt,[e("p",St,r(h(n.value.revenue)),1),t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Revenus (FCFA)",-1))]),e("div",At,[e("p",Bt,r(n.value.progress)+"%",1),t[37]||(t[37]=e("p",{class:"text-sm text-gray-600"},"Progression",-1))])])])])):p("",!0),e("div",Vt,[e("button",{onClick:B,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300"}," Fermer "),n.value?(l(),j(d,{key:0,to:`/merchant/products/${n.value.id}/edit`,class:"px-4 py-2 bg-[#0099cc] text-white rounded-lg hover:bg-[#0088bb]"},{default:P(()=>t[39]||(t[39]=[g(" Modifier ",-1)])),_:1,__:[39]},8,["to"])):p("",!0)])])])):p("",!0)])}}};export{qt as default};
