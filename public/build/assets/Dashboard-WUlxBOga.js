import{a as D,f as C,j as O,d as y,e as E,k as B,l as N,m as q,n as z}from"./app-C2S9Us23.js";import{r as c,g as T,b as n,e,i as l,w as u,k as R,F as b,n as v,u as d,t as o,o as r,q as m,p as P,v as F,l as w}from"./vendor-BnObtCtl.js";const G={class:"space-y-6"},L={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},M={class:"flex items-center"},I={class:"flex items-center"},H={class:"flex items-center"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},K={class:"flex items-center justify-between"},Q={class:"text-sm font-medium text-gray-600"},U={class:"text-3xl font-bold text-gray-900 mt-2"},W={class:"mt-4 pt-4 border-t border-gray-100"},X={class:"flex items-center text-sm"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Z={class:"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-gray-100"},ee={class:"flex items-center justify-between mb-6"},te={class:"flex space-x-2"},se=["onClick"],ae={class:"h-64 bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-lg flex items-center justify-center"},oe={class:"text-center"},le={class:"text-gray-400 text-sm"},re={class:"mt-6 grid grid-cols-3 gap-4"},ne={class:"text-center"},de={class:"text-2xl font-bold text-[#0099cc]"},ie={class:"text-center"},ce={class:"text-2xl font-bold text-blue-600"},ue={class:"text-center"},me={class:"text-2xl font-bold text-purple-600"},ge={class:"space-y-6"},xe={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},he={class:"flex items-center justify-between mb-4"},_e={class:"space-y-3"},be={class:"flex items-center space-x-3"},ve={class:"w-10 h-10 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},pe={class:"font-medium text-gray-900"},fe={class:"text-sm text-gray-500"},ye={class:"text-right"},we={class:"font-semibold text-gray-900"},ke={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},je={class:"flex items-center justify-between mb-4"},Ce={class:"space-y-3"},Pe={class:"flex-shrink-0 w-6 h-6 bg-[#0099cc] text-white text-xs font-bold rounded-full flex items-center justify-center"},Fe=["src","alt"],Ae={class:"flex-1 min-w-0"},Se={class:"font-medium text-gray-900 truncate"},Ve={class:"flex items-center space-x-2 text-sm text-gray-500"},Ee={__name:"Dashboard",setup($e){const{get:p}=D(),f=c("30j"),k=c([]),g=c({}),x=c([]),h=c([]),A=async()=>{try{const a=await p("/merchant/dashboard/stats");if(a&&a.data){const t=a.data;k.value=[{label:"Revenus du mois",value:_(t.monthly_revenue||0),change:t.revenue_change||0,icon:O,color:"bg-[#0099cc]"},{label:"Commandes",value:t.total_orders||0,change:t.orders_change||0,icon:y,color:"bg-blue-500"},{label:"Produits actifs",value:t.active_products||0,change:t.products_change||0,icon:E,color:"bg-yellow-500"},{label:"Clients",value:t.total_customers||0,change:t.customers_change||0,icon:B,color:"bg-purple-500"}],g.value={totalSales:t.total_sales||0,totalOrders:t.total_orders||0,avgOrder:t.average_order||0}}}catch(a){console.error("Erreur lors du chargement des statistiques:",a)}},S=async()=>{try{const a=await p("/merchant/dashboard/recent-transactions");a&&a.data&&Array.isArray(a.data)?x.value=a.data.map(t=>({id:t.id,product_name:t.product?.title||t.product?.name||"Produit inconnu",customer_name:(t.user?.name||t.user?.first_name+" "+t.user?.last_name||"Client inconnu").trim(),amount:parseFloat(t.amount||0),status:t.status||"pending",created_at:t.created_at?new Date(t.created_at):new Date})):x.value=[]}catch(a){console.error("Erreur lors du chargement des commandes récentes:",a),x.value=[]}},V=async()=>{try{const a=await p("/merchant/dashboard/top-products");a&&a.data&&Array.isArray(a.data)?h.value=a.data.map(t=>({id:t.id,name:t.title||t.name||"Produit sans nom",sales:t.tickets_sold||t.sales_count||0,growth:t.growth_percentage||0,image:t.image_url||t.image||"/images/products/placeholder.jpg"})):h.value=[]}catch(a){console.error("Erreur lors du chargement des produits populaires:",a),h.value=[]}},_=a=>new Intl.NumberFormat("fr-FR").format(a),$=a=>({completed:"Terminé",pending:"En attente",processing:"En cours",cancelled:"Annulé"})[a]||a;return T(async()=>{await Promise.all([A(),S(),V()])}),(a,t)=>{const i=R("router-link");return r(),n("div",G,[t[13]||(t[13]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de Bord Vendeur"),e("p",{class:"mt-2 text-gray-600"},"Suivez vos ventes, gérez vos produits et analysez vos performances")],-1)),e("div",L,[l(i,{to:"/merchant/products/create",class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:u(()=>[e("div",M,[l(d(N),{class:"w-8 h-8 mr-4"}),t[0]||(t[0]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Nouveau Produit"),e("p",{class:"text-blue-100 text-sm"},"Publier un produit")],-1))])]),_:1}),l(i,{to:"/merchant/orders",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:u(()=>[e("div",I,[l(d(y),{class:"w-8 h-8 mr-4"}),t[1]||(t[1]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Commandes"),e("p",{class:"text-blue-100 text-sm"},"Suivre les ventes")],-1))])]),_:1}),l(i,{to:"/merchant/analytics",class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:u(()=>[e("div",H,[l(d(C),{class:"w-8 h-8 mr-4"}),t[2]||(t[2]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Analytiques"),e("p",{class:"text-purple-100 text-sm"},"Voir les stats")],-1))])]),_:1})]),e("div",J,[(r(!0),n(b,null,v(k.value,s=>(r(),n("div",{key:s.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200"},[e("div",K,[e("div",null,[e("p",Q,o(s.label),1),e("p",U,o(s.value),1)]),e("div",{class:m(["p-4 rounded-xl",s.color])},[(r(),P(F(s.icon),{class:"w-8 h-8 text-white"}))],2)]),e("div",W,[e("div",X,[e("span",{class:m(["font-medium flex items-center px-2 py-1 rounded-full text-xs",s.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(r(),P(F(s.change>=0?d(q):d(z)),{class:"w-3 h-3 mr-1"})),w(" "+o(Math.abs(s.change))+"% ",1)],2),t[3]||(t[3]=e("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),e("div",Y,[e("div",Z,[e("div",ee,[t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Évolution des Ventes",-1)),e("div",te,[(r(),n(b,null,v(["7j","30j","90j"],s=>e("button",{key:s,onClick:j=>f.value=s,class:m(["px-3 py-1 rounded-lg text-sm font-medium transition-all",f.value===s?"bg-[#0099cc] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},o(s),11,se)),64))])]),e("div",ae,[e("div",oe,[l(d(C),{class:"w-16 h-16 text-[#0099cc] mx-auto mb-4"}),t[5]||(t[5]=e("p",{class:"text-gray-600 font-medium"},"Graphique des ventes",-1)),e("p",le,"Données des derniers "+o(f.value),1)])]),e("div",re,[e("div",ne,[e("p",de,o(_(g.value.totalSales||0)),1),t[6]||(t[6]=e("p",{class:"text-sm text-gray-600"},"Ventes totales (FCFA)",-1))]),e("div",ie,[e("p",ce,o(g.value.totalOrders||0),1),t[7]||(t[7]=e("p",{class:"text-sm text-gray-600"},"Commandes",-1))]),e("div",ue,[e("p",me,o(_(g.value.avgOrder||0)),1),t[8]||(t[8]=e("p",{class:"text-sm text-gray-600"},"Panier moyen (FCFA)",-1))])])]),e("div",ge,[e("div",xe,[e("div",he,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes",-1)),l(i,{to:"/merchant/orders",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:u(()=>t[9]||(t[9]=[w(" Voir tout → ",-1)])),_:1,__:[9]})]),e("div",_e,[(r(!0),n(b,null,v(x.value,s=>(r(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"},[e("div",be,[e("div",ve,[l(d(y),{class:"w-5 h-5 text-[#0099cc]"})]),e("div",null,[e("p",pe,o(s.product_name),1),e("p",fe,o(s.customer_name),1)])]),e("div",ye,[e("p",we,o(_(s.amount||0))+" FCFA",1),e("span",{class:m(["inline-block px-2 py-1 text-xs font-medium rounded-full",s.status==="completed"?"bg-blue-100 text-blue-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o($(s.status)),3)])]))),128))])]),e("div",ke,[e("div",je,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Produits populaires",-1)),l(i,{to:"/merchant/products",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:u(()=>t[11]||(t[11]=[w(" Gérer → ",-1)])),_:1,__:[11]})]),e("div",Ce,[(r(!0),n(b,null,v(h.value,(s,j)=>(r(),n("div",{key:s.id,class:"flex items-center space-x-3"},[e("div",Pe,o(j+1),1),e("img",{src:s.image,alt:s.name,class:"w-12 h-12 rounded-lg object-cover"},null,8,Fe),e("div",Ae,[e("p",Se,o(s.name),1),e("div",Ve,[e("span",null,o(s.sales)+" ventes",1),e("span",{class:m(["font-medium",s.growth>=0?"text-blue-600":"text-red-600"])},o(s.growth>=0?"+":"")+o(s.growth)+"% ",3)])])]))),128))])])])])])}}};export{Ee as default};
