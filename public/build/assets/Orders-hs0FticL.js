import{r as y,c as w,O as de,j as ue,P as me,b as c,e,l as _,g as x,i as v,v as $,u,aD as ge,t as o,aF as pe,F as L,y as N,U as A,M as xe,V as U,$ as X,f as ye,E as q,aj as be,o as i,z as Z,N as ee,aJ as ve,aK as fe,s as he,Y as _e,a5 as we,a1 as ke,ag as Ce,al as De,a7 as Se,I as Fe}from"./vendor-jx2CZFIM.js";import{a as Ee,d as Oe,e as $e}from"./app-BHl73pPI.js";function Ae(){const{get:D,put:I,loading:T,error:V}=Ee(),S=y([]),k=y([]),p=y([{label:"Total commandes",value:"0",change:0,color:"bg-blue-500",icon:"ShoppingBagIcon"},{label:"Revenus total",value:"0 FCFA",change:0,color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"En attente",value:"0",change:0,color:"bg-yellow-500",icon:"ClockIcon"},{label:"Terminées",value:"0",change:0,color:"bg-green-500",icon:"CheckIcon"}]),F=y([]),M=y([]),P=async()=>{try{const n=await D("/stats/merchant/orders");if(n&&n.success){const r=n.data.stats;p.value=[{label:"Total commandes",value:r.total_orders.toString(),change:r.total_orders_change||0,color:"bg-blue-500",icon:"ShoppingBagIcon"},{label:"Revenus total",value:b(r.total_revenue),change:r.revenue_change||0,color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"En attente",value:r.pending_orders.toString(),change:r.pending_change||0,color:"bg-yellow-500",icon:"ClockIcon"},{label:"Terminées",value:r.paid_orders.toString(),change:r.paid_change||0,color:"bg-green-500",icon:"CheckIcon"}],F.value=n.data.recent_orders||[],M.value=n.data.monthly_revenue||[]}}catch(n){console.error("Erreur lors du chargement des statistiques de commandes:",n)}},j=async(n={})=>{try{const r={page:1,per_page:50,...n},C=await D("/merchant/orders",{params:r});C&&C.success&&(S.value=C.data||[])}catch(r){console.error("Erreur lors du chargement des commandes:",r),S.value=[]}},m=async()=>{try{const n=await D("/merchant/products",{params:{per_page:100}});n&&n.success&&(k.value=n.data.data||n.data||[])}catch(n){console.error("Erreur lors du chargement des produits:",n),k.value=[]}},E=async n=>{try{return await I(`/orders/${n.order_number}/confirm`)}catch(r){throw console.error("Erreur lors de la confirmation:",r),r}},d=async n=>{try{return await I(`/orders/${n.order_number}/cancel`)}catch(r){throw console.error("Erreur lors de l'annulation:",r),r}},g=async(n="csv")=>{try{return await D(`/merchant/orders/export?format=${n}`)}catch(r){throw console.error("Erreur lors de l'export:",r),r}},f=w(()=>[{label:"Total commandes",value:p.value[0]?.value||"0",color:"bg-blue-500",icon:"ShoppingBagIcon"},{label:"Revenus total",value:p.value[1]?.value||"0 FCFA",color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"En attente",value:p.value[2]?.value||"0",color:"bg-yellow-500",icon:"ClockIcon"},{label:"Terminées",value:p.value[3]?.value||"0",color:"bg-green-500",icon:"CheckIcon"}]),h=w(()=>[{name:"Payées",value:parseInt(p.value[3]?.value||"0"),color:"#10B981"},{name:"En attente",value:parseInt(p.value[2]?.value||"0"),color:"#F59E0B"},{name:"Annulées",value:0,color:"#EF4444"}]),l=P,b=n=>{const r=parseFloat(n)||0;return r>=1e6?(r/1e6).toFixed(1)+"M FCFA":r>=1e3?(r/1e3).toFixed(0)+"k FCFA":r.toLocaleString("fr-FR")+" FCFA"};return{orders:S,products:k,orderStats:p,stats:f,recentOrders:F,monthlyRevenue:M,statusDistribution:h,loading:T,error:V,loadStats:P,loadOrders:j,loadProducts:m,loadOrderStats:l,confirmOrder:E,cancelOrder:d,exportOrders:g,formatCurrency:b,formatDate:n=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(n)),getStatusLabel:n=>({paid:"Payée",pending:"En attente",cancelled:"Annulée",failed:"Échouée",refunded:"Remboursée"})[n]||n,getStatusColor:n=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[n]||"bg-gray-100 text-gray-800",formatMonthYear:(n,r)=>`${["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"][n-1]} ${r}`}}const Ie={class:"space-y-6"},Te={class:"flex items-center justify-between"},Me={class:"flex space-x-3"},Pe=["disabled"],Le={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Ne={class:"flex items-center justify-between"},Ve={class:"text-sm font-medium text-gray-600"},je={class:"text-2xl font-bold text-gray-900 mt-1"},Be={class:"mt-4 pt-4 border-t border-gray-100"},Re={class:"flex items-center text-xs"},Ue={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},qe={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},ze={class:"relative"},Je=["value"],Ye={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},Ge={key:0,class:"flex justify-center py-12"},Ke={key:1,class:"text-center py-12"},He={key:2,class:"overflow-x-auto"},Qe={class:"min-w-full"},We={class:"bg-white divide-y divide-gray-200"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ze={class:"text-sm font-medium text-gray-900"},et={class:"text-sm text-gray-500"},tt={class:"px-6 py-4 whitespace-nowrap"},st={class:"flex items-center"},at={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},nt={class:"ml-3"},rt={class:"text-sm font-medium text-gray-900"},ot={class:"text-sm text-gray-500"},lt={class:"px-6 py-4 whitespace-nowrap"},it={class:"flex items-center"},ct=["src","alt"],dt={class:"ml-3"},ut={class:"text-sm font-medium text-gray-900"},mt={class:"text-sm text-gray-500"},gt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"flex items-center space-x-2"},xt={class:"text-sm text-gray-900"},yt={class:"text-sm text-gray-500"},bt={key:0,class:"ml-2"},vt={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},ft={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},ht={class:"px-6 py-4 whitespace-nowrap"},_t={class:"text-sm font-semibold text-gray-900"},wt={class:"text-sm text-gray-500"},kt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm text-gray-900"},St={class:"text-sm text-gray-500"},Ft={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Et={class:"flex items-center space-x-2"},Ot=["onClick"],$t=["onClick","title"],At=["onClick"],It=["onClick"],Tt={class:"bg-white px-6 py-3 border-t border-gray-200 flex items-center justify-between"},Mt={class:"text-sm text-gray-700"},Pt={class:"font-medium"},Lt={class:"font-medium"},Nt={class:"font-medium"},Vt={class:"flex space-x-2"},jt=["disabled"],Bt=["disabled"],Rt={key:0,class:"fixed inset-0 bg-black/40 overflow-y-auto h-full w-full z-50"},Ut={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-xl bg-white"},qt={class:"flex items-center justify-between mb-6"},zt={key:0,class:"space-y-6"},Jt={class:"grid grid-cols-2 gap-4"},Yt={class:"text-sm text-gray-900"},Gt={class:"text-sm text-gray-900"},Kt={class:"text-sm text-gray-900 font-semibold"},Ht={class:"bg-gray-50 p-4 rounded-lg"},Qt={class:"grid grid-cols-2 gap-4"},Wt={class:"text-sm text-gray-900"},Xt={class:"text-sm text-gray-900"},Zt={class:"bg-gray-50 p-4 rounded-lg"},es={class:"text-sm text-gray-700 mb-2"},ts={class:"flex flex-wrap gap-2"},ss={class:"mt-6 flex justify-end space-x-3"},rs={__name:"Orders",setup(D){const{orders:I,products:T,orderStats:V,loading:S,loadStats:k,loadOrders:p,loadProducts:F,confirmOrder:M,cancelOrder:P,exportOrders:j}=Ae(),m=Oe(),E=y(!1),d=y(null),g=y(1),f=y(10),h=y(!1),l=de({search:"",status:"",product:"",startDate:"",endDate:""}),b=w(()=>{let a=I.value;if(l.search){const t=l.search.toLowerCase();a=a.filter(s=>s.order_number.toLowerCase().includes(t)||s.customer_name.toLowerCase().includes(t)||s.product_name.toLowerCase().includes(t))}return l.status&&(a=a.filter(t=>t.status===l.status)),l.product&&(a=a.filter(t=>t.product_name.includes(T.value.find(s=>s.id==l.product)?.name||""))),l.startDate&&(a=a.filter(t=>new Date(t.created_at)>=new Date(l.startDate))),l.endDate&&(a=a.filter(t=>new Date(t.created_at)<=new Date(l.endDate))),a}),B=w(()=>Math.ceil(b.value.length/f.value)),z=w(()=>{const a=(g.value-1)*f.value,t=a+f.value;return b.value.slice(a,t)}),J=w(()=>(g.value-1)*f.value+1),Y=w(()=>{const a=g.value*f.value;return Math.min(a,b.value.length)}),n=async()=>{g.value=1,await r()},r=async()=>{try{await p(l)}catch{m.error("Erreur lors du chargement des commandes")}},C=()=>{g.value>1&&g.value--},te=()=>{g.value<B.value&&g.value++},G=a=>({pending:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",awaiting_payment:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",paid:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",shipping:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",fulfilled:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",cancelled:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",confirmed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",completed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"})[a]||"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",K=a=>({pending:"En attente",awaiting_payment:"En attente de paiement",paid:"Payé",shipping:"En cours de livraison",fulfilled:"Livré",cancelled:"Annulé",confirmed:"Confirmé",completed:"Terminé"})[a]||a,H=a=>new Date(a).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),se=a=>new Date(a).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),ae=a=>{d.value=a,E.value=!0},O=()=>{E.value=!1,d.value=null},Q=async a=>{if(confirm(`Confirmer la commande ${a.order_number} ?`))try{await M(a),m.success("Commande confirmée avec succès !"),O(),await r()}catch{m.error("Erreur lors de la confirmation")}},ne=async a=>{if(confirm(`Annuler la commande ${a.order_number} ? Cette action est irréversible.`))try{await P(a),m.success("Commande annulée"),O(),await r()}catch{m.error("Erreur lors de l'annulation")}},re=async a=>{if(confirm(`Marquer la commande ${a.order_number} comme en cours de livraison ?`))try{await $e(a.order_number,"shipping","Commande expédiée par le marchand"),m.success("Commande marquée en cours de livraison"),O(),await r()}catch{m.error("Erreur lors du changement de statut")}},oe=async()=>{h.value=!0;try{await Promise.all([k(),r(),F()]),m.success("Commandes actualisées")}catch{m.error("Erreur lors de l'actualisation")}finally{h.value=!1}},le=async()=>{try{await j("csv"),m.success("Export des commandes démarré")}catch{m.error("Erreur lors de l'export des commandes")}},ie=a=>a.type==="lottery"?a.has_winning_ticket?"Marquer en cours de livraison (ticket gagnant)":"Ticket non gagnant - pas de livraison":"Marquer en cours de livraison";ue(async()=>{try{await Promise.all([k(),p(),F()])}catch(a){console.error("Erreur lors du chargement initial:",a),m.error("Erreur lors du chargement des données")}});let W=null;me(()=>l.search,a=>{clearTimeout(W),W=setTimeout(()=>{n()},500)});const ce=a=>({ShoppingBagIcon:q,CurrencyDollarIcon:Fe,ClockIcon:Se,CheckIcon:De})[a]||q;return(a,t)=>(i(),c("div",Ie,[e("div",Te,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mes Commandes"),e("p",{class:"mt-2 text-gray-600"},"Suivez et gérez toutes vos ventes de tickets de tombola")],-1)),e("div",Me,[e("button",{onClick:oe,disabled:h.value,class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50"},[x(u(ge),{class:$(["w-4 h-4 mr-2",{"animate-spin":h.value}])},null,8,["class"]),v(" "+o(h.value?"Actualisation...":"Actualiser"),1)],8,Pe),e("button",{onClick:le,class:"inline-flex items-center px-4 py-2 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors"},[x(u(pe),{class:"w-4 h-4 mr-2"}),t[6]||(t[6]=v(" Exporter ",-1))])])]),e("div",Le,[(i(!0),c(L,null,N(u(V),s=>(i(),c("div",{key:s.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},[e("div",Ne,[e("div",null,[e("p",Ve,o(s.label),1),e("p",je,o(s.value),1)]),e("div",{class:$(["p-3 rounded-xl",s.color])},[(i(),Z(ee(ce(s.icon)),{class:"w-6 h-6 text-white"}))],2)]),e("div",Be,[e("div",Re,[e("span",{class:$(["inline-flex items-center px-2 py-1 rounded-full font-medium",s.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(i(),Z(ee(s.change>=0?u(ve):u(fe)),{class:"w-3 h-3 mr-1"})),v(" "+o(Math.abs(s.change))+"% ",1)],2),t[8]||(t[8]=e("span",{class:"ml-2 text-gray-500"},"vs semaine dernière",-1))])])]))),128))]),e("div",Ue,[e("div",qe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),e("div",ze,[x(u(xe),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.search=s),type:"text",placeholder:"ID, client, produit...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black",onInput:n},null,544),[[U,l.search]])])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),A(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.status=s),onChange:n,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},t[10]||(t[10]=[ye('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="awaiting_payment">En attente de paiement</option><option value="paid">Payé</option><option value="shipping">En cours de livraison</option><option value="fulfilled">Livré</option><option value="cancelled">Annulé</option>',7)]),544),[[X,l.status]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Produit",-1)),A(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.product=s),onChange:n,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},[t[12]||(t[12]=e("option",{value:""},"Tous les produits",-1)),(i(!0),c(L,null,N(u(T),s=>(i(),c("option",{key:s.id,value:s.id},o(s.name),9,Je))),128))],544),[[X,l.product]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date début",-1)),A(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.startDate=s),type:"date",onChange:n,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[U,l.startDate]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date fin",-1)),A(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.endDate=s),type:"date",onChange:n,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[U,l.endDate]])])])]),e("div",Ye,[t[24]||(t[24]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes")],-1)),u(S)?(i(),c("div",Ge,t[16]||(t[16]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):b.value.length===0?(i(),c("div",Ke,[x(u(q),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucune commande",-1)),t[18]||(t[18]=e("p",{class:"text-gray-600"},"Aucune commande ne correspond à vos critères.",-1))])):(i(),c("div",He,[e("table",Qe,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Commande "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Client "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tickets "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Montant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",We,[(i(!0),c(L,null,N(z.value,s=>(i(),c("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Xe,[e("div",null,[e("div",Ze,"#"+o(s.order_number),1),e("div",et,o(s.payment_method),1)])]),e("td",tt,[e("div",st,[e("div",at,[x(u(he),{class:"w-5 h-5 text-gray-600"})]),e("div",nt,[e("div",rt,o(s.customer_name),1),e("div",ot,o(s.customer_email),1)])])]),e("td",lt,[e("div",it,[e("img",{class:"h-12 w-12 rounded-lg object-cover",src:s.product_image,alt:s.product_name},null,8,ct),e("div",dt,[e("div",ut,o(s.product_name),1),e("div",mt,o((s.ticket_price||0).toLocaleString())+" FCFA/ticket",1)])])]),e("td",gt,[e("div",pt,[e("div",null,[e("div",xt,o(s.tickets_count||0)+" tickets",1),e("div",yt,"N° "+o((s.ticket_numbers||[]).join(", ")),1)]),s.type==="lottery"?(i(),c("div",bt,[s.has_winning_ticket?(i(),c("span",vt," 🏆 Gagnant ")):(i(),c("span",ft," Non gagnant "))])):_("",!0)])]),e("td",ht,[e("div",_t,o((s.total_amount||0).toLocaleString())+" FCFA",1),e("div",wt,o(s.currency),1)]),e("td",kt,[e("span",{class:$(G(s.status))},o(K(s.status)),3)]),e("td",Ct,[e("div",Dt,o(H(s.created_at)),1),e("div",St,o(se(s.created_at)),1)]),e("td",Ft,[e("div",Et,[e("button",{onClick:R=>ae(s),class:"text-[#0099cc] hover:text-[#0088bb] transition-colors",title:"Voir détails"},[x(u(_e),{class:"w-4 h-4"})],8,Ot),s.status==="paid"&&(s.type!=="lottery"||s.has_winning_ticket)?(i(),c("button",{key:0,onClick:R=>re(s),class:"text-blue-600 hover:text-blue-800 transition-colors",title:ie(s)},[x(u(we),{class:"w-4 h-4"})],8,$t)):_("",!0),s.status==="pending"?(i(),c("button",{key:1,onClick:R=>Q(s),class:"text-blue-600 hover:text-blue-800 transition-colors",title:"Confirmer"},[x(u(ke),{class:"w-4 h-4"})],8,At)):_("",!0),["pending","confirmed"].includes(s.status)?(i(),c("button",{key:2,onClick:R=>ne(s),class:"text-red-600 hover:text-red-800 transition-colors",title:"Annuler"},[x(u(Ce),{class:"w-4 h-4"})],8,It)):_("",!0)])])]))),128))])])])),e("div",Tt,[e("div",Mt,[t[20]||(t[20]=v(" Affichage de ",-1)),e("span",Pt,o(J.value),1),t[21]||(t[21]=v(" à ",-1)),e("span",Lt,o(Y.value),1),t[22]||(t[22]=v(" sur ",-1)),e("span",Nt,o(b.value.length),1),t[23]||(t[23]=v(" résultats ",-1))]),e("div",Vt,[e("button",{onClick:C,disabled:g.value===1,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,jt),e("button",{onClick:te,disabled:g.value===B.value,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,Bt)])])]),E.value?(i(),c("div",Rt,[e("div",Ut,[e("div",qt,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Détails de la commande",-1)),e("button",{onClick:O,class:"text-gray-400 hover:text-gray-600"},[x(u(be),{class:"w-6 h-6"})])]),d.value?(i(),c("div",zt,[e("div",Jt,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"N° de commande",-1)),e("p",Yt,o(d.value.order_number),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("p",Gt,o(H(d.value.created_at)),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:$(G(d.value.status))},o(K(d.value.status)),3)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",Kt,o((d.value.total_amount||0).toLocaleString())+" FCFA",1)])]),e("div",null,[t[32]||(t[32]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Informations client",-1)),e("div",Ht,[e("div",Qt,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Wt,o(d.value.customer_name),1)]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Xt,o(d.value.customer_email),1)])])])]),e("div",null,[t[33]||(t[33]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Tickets achetés",-1)),e("div",Zt,[e("p",es,[e("strong",null,o(d.value.tickets_count||0)+" tickets",1),v(" pour "+o(d.value.product_name||"Produit inconnu"),1)]),e("div",ts,[(i(!0),c(L,null,N(d.value.ticket_numbers||[],s=>(i(),c("span",{key:s,class:"inline-block bg-[#0099cc] text-white px-2 py-1 rounded text-xs font-mono"}," #"+o(s),1))),128))])])])])):_("",!0),e("div",ss,[e("button",{onClick:O,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300"}," Fermer "),d.value?.status==="pending"?(i(),c("button",{key:0,onClick:t[5]||(t[5]=s=>Q(d.value)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Confirmer la commande ")):_("",!0)])])])):_("",!0)]))}};export{rs as default};
