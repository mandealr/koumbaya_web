import{r as w,x as A,c as F,g as Q,b as i,e as t,i as p,w as X,k as Y,F as V,n as D,j as d,z as u,A as g,t as n,D as S,f as Z,y as P,u as x,C as tt,l as f,m as et,o as l,p as h,s as st,v as ot}from"./vendor-CznQeBe4.js";import{x as z,y as R,z as U,A as rt,B as lt,s as it}from"./app-BEyiPImD.js";import{r as N}from"./RocketLaunchIcon-DVcC8RYo.js";const nt={class:"max-w-4xl mx-auto space-y-6"},at={class:"flex items-center justify-between"},dt={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},ut={class:"flex items-center justify-between mb-8"},ct={class:"flex items-center"},mt={key:1},pt={class:"ml-3"},gt={class:"text-xs text-gray-500"},bt={key:0,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},xt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ft={class:"lg:col-span-2"},yt={key:0,class:"mt-1 text-sm text-red-600"},vt={class:"lg:col-span-2"},kt={key:0,class:"mt-1 text-sm text-red-600"},_t=["value"],wt={key:1,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},ht={class:"space-y-6"},Ct={class:"text-center"},Ft={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Vt=["src","alt"],Dt=["onClick"],Pt={key:0,class:"absolute bottom-2 left-2 bg-[#0099cc] text-white text-xs px-2 py-1 rounded-md"},jt={class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},Mt={class:"flex items-start space-x-3"},qt={key:2,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},At={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},St=["min"],zt=["max"],Rt={class:"lg:col-span-2"},Ut={class:"bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-xl p-6"},Nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Et={class:"text-center"},It={class:"text-2xl font-bold text-[#0099cc]"},Lt={class:"text-center"},Bt={class:"text-2xl font-bold text-green-600"},$t={class:"text-center"},Tt={class:"text-2xl font-bold text-purple-600"},Gt={key:3,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Jt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Kt={class:"space-y-3"},Ot={class:"flex justify-between"},Wt={class:"font-medium"},Ht={class:"flex justify-between"},Qt={class:"font-medium"},Xt={class:"flex justify-between"},Yt={class:"font-medium"},Zt={class:"flex justify-between"},te={class:"font-medium"},ee={class:"flex justify-between"},se={class:"font-medium"},oe={class:"space-y-3"},re={class:"flex justify-between"},le={class:"font-medium"},ie={class:"flex justify-between"},ne={class:"font-medium"},ae={class:"flex justify-between"},de={class:"font-medium"},ue={class:"flex justify-between"},ce={class:"font-medium"},me={class:"flex justify-between border-t pt-3"},pe={class:"font-bold text-[#0099cc]"},ge={class:"mt-8 p-4 bg-gray-50 rounded-xl"},be={class:"flex items-start space-x-3"},xe={class:"flex justify-between items-center bg-white rounded-xl shadow-lg border border-gray-100 p-6"},fe={key:1},ye={class:"text-sm text-gray-500"},ve=["disabled"],ke=["disabled"],_e={key:0,class:"flex items-center"},we={key:1,class:"flex items-center"},Pe={__name:"CreateProduct",setup(he){const E=et(),a=w(1),v=w(!1),j=w(null),b=[{id:1,title:"Informations",description:"Détails du produit",icon:R},{id:2,title:"Photos",description:"Images du produit",icon:z},{id:3,title:"Tombola",description:"Configuration",icon:rt},{id:4,title:"Publication",description:"Vérification",icon:N}],I=w([{id:1,name:"Électronique"},{id:2,name:"Mode & Accessoires"},{id:3,name:"Maison & Jardin"},{id:4,name:"Sport & Loisirs"},{id:5,name:"Automobile"},{id:6,name:"Autres"}]),s=A({name:"",description:"",category_id:"",condition:"",value:"",location:"",images:[],ticket_price:"",total_tickets:"",min_tickets:"",end_date:"",terms_accepted:!1}),k=A({name:"",description:"",category_id:"",condition:"",value:"",location:"",images:"",ticket_price:"",total_tickets:"",min_tickets:"",end_date:""}),L=F(()=>{const r=new Date;return r.setDate(r.getDate()+1),r.toISOString().slice(0,16)}),_=F(()=>{const r=(s.ticket_price||0)*(s.total_tickets||0),e=r*.05,c=r-e,o=s.value?Math.round((c-s.value)/s.value*100):0;return{totalRevenue:r,platformFee:e,netRevenue:c,profitMargin:o}}),C=F(()=>{switch(a.value){case 1:return s.name&&s.description&&s.category_id&&s.condition&&s.value&&s.location;case 2:return s.images.length>0;case 3:return s.ticket_price&&s.total_tickets&&s.min_tickets&&s.end_date;case 4:return s.terms_accepted;default:return!1}}),B=()=>{C.value&&a.value<b.length&&a.value++},$=()=>{a.value>1&&a.value--},T=()=>{j.value?.click()},G=r=>{const e=Array.from(r.target.files||[]);M(e)},J=r=>{const e=Array.from(r.dataTransfer.files||[]);M(e)},M=r=>{const e=r.filter(c=>c.type.startsWith("image/"));if(s.images.length+e.length>10){alert("Maximum 10 images autorisées");return}e.forEach(c=>{const o=new FileReader;o.onload=m=>{s.images.push({file:c,preview:m.target?.result,name:c.name})},o.readAsDataURL(c)})},K=r=>{s.images.splice(r,1)},q=()=>{},y=r=>new Intl.NumberFormat("fr-FR").format(r||0),O=r=>r?new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",W=r=>({new:"Neuf",like_new:"Comme neuf",good:"Bon état",fair:"État correct"})[r]||r,H=async()=>{v.value=!0;try{await new Promise(r=>setTimeout(r,2e3)),alert("Produit publié avec succès ! Votre tombola est maintenant en ligne."),E.push("/merchant/products")}catch(r){console.error("Error creating product:",r),alert("Erreur lors de la publication. Veuillez réessayer.")}finally{v.value=!1}};return Q(()=>{console.log("Create product page loaded")}),(r,e)=>{const c=Y("router-link");return l(),i("div",nt,[t("div",at,[e[13]||(e[13]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Publier un Nouveau Produit"),t("p",{class:"mt-2 text-gray-600"},"Créez votre tombola et mettez votre produit en vente")],-1)),p(c,{to:"/merchant/products",class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},{default:X(()=>[p(x(U),{class:"w-4 h-4 mr-2"}),e[12]||(e[12]=f(" Retour aux produits ",-1))]),_:1,__:[12]})]),t("div",dt,[t("div",ut,[(l(),i(V,null,D(b,(o,m)=>t("div",{key:o.id,class:h(["flex items-center",{"flex-1":m<b.length-1}])},[t("div",ct,[t("div",{class:h(["flex items-center justify-center w-10 h-10 rounded-full border-2 font-medium text-sm transition-all",a.value>=o.id?"border-[#0099cc] bg-[#0099cc] text-white":"border-gray-300 bg-white text-gray-400"])},[a.value>=o.id?(l(),st(ot(o.icon),{key:0,class:"w-5 h-5"})):(l(),i("span",mt,n(o.id),1))],2),t("div",pt,[t("p",{class:h(["text-sm font-medium",a.value>=o.id?"text-[#0099cc]":"text-gray-400"])},n(o.title),3),t("p",gt,n(o.description),1)])]),m<b.length-1?(l(),i("div",{key:0,class:h(["flex-1 h-0.5 mx-4 transition-all",a.value>o.id?"bg-[#0099cc]":"bg-gray-200"])},null,2)):d("",!0)],2)),64))])]),t("form",{onSubmit:P(H,["prevent"]),class:"space-y-6"},[a.value===1?(l(),i("div",bt,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations de base",-1)),t("div",xt,[t("div",ft,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom du produit * ",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black",placeholder:"Ex: iPhone 15 Pro Max 256GB"},null,512),[[g,s.name]]),k.name?(l(),i("p",yt,n(k.name),1)):d("",!0)]),t("div",vt,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Description * ",-1)),u(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.description=o),rows:"4",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black",placeholder:"Décrivez votre produit en détail..."},null,512),[[g,s.description]]),k.description?(l(),i("p",kt,n(k.description),1)):d("",!0)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catégorie * ",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.category_id=o),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black"},[e[16]||(e[16]=t("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),i(V,null,D(I.value,o=>(l(),i("option",{key:o.id,value:o.id},n(o.name),9,_t))),128))],512),[[S,s.category_id]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Condition * ",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.condition=o),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black"},e[18]||(e[18]=[Z('<option value="">État du produit</option><option value="new">Neuf</option><option value="like_new">Comme neuf</option><option value="good">Bon état</option><option value="fair">État correct</option>',5)]),512),[[S,s.condition]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Valeur du produit (FCFA) * ",-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value=o),type:"number",required:"",min:"0",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black",placeholder:"Ex: 800000"},null,512),[[g,s.value]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Localisation * ",-1)),u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.location=o),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black",placeholder:"Ex: Libreville, Gabon"},null,512),[[g,s.location]])])])])):d("",!0),a.value===2?(l(),i("div",wt,[e[27]||(e[27]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Photos du produit",-1)),t("div",ht,[t("div",Ct,[t("div",{onClick:T,onDragover:e[6]||(e[6]=P(()=>{},["prevent"])),onDrop:P(J,["prevent"]),class:"border-2 border-dashed border-gray-300 rounded-xl p-8 hover:border-[#0099cc] transition-colors cursor-pointer"},[p(x(z),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e[23]||(e[23]=t("p",{class:"text-lg font-medium text-gray-700 mb-2"},"Ajoutez des photos",-1)),e[24]||(e[24]=t("p",{class:"text-sm text-gray-500 mb-4"},"Glissez-déposez ou cliquez pour sélectionner",-1)),e[25]||(e[25]=t("div",{class:"flex justify-center"},[t("span",{class:"bg-[#0099cc] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#0088bb] transition-colors"}," Choisir des fichiers ")],-1))],32),t("input",{ref_key:"fileInput",ref:j,type:"file",multiple:"",accept:"image/*",onChange:G,class:"hidden"},null,544)]),s.images.length>0?(l(),i("div",Ft,[(l(!0),i(V,null,D(s.images,(o,m)=>(l(),i("div",{key:m,class:"relative group"},[t("img",{src:o.preview,alt:`Produit ${m+1}`,class:"w-full h-32 object-cover rounded-xl border border-gray-200"},null,8,Vt),t("button",{onClick:Ce=>K(m),type:"button",class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[p(x(it),{class:"w-4 h-4"})],8,Dt),m===0?(l(),i("div",Pt," Photo principale ")):d("",!0)]))),128))])):d("",!0),t("div",jt,[t("div",Mt,[p(x(R),{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e[26]||(e[26]=t("div",{class:"text-sm text-blue-700"},[t("p",{class:"font-medium mb-1"},"Conseils pour de bonnes photos :"),t("ul",{class:"space-y-1 text-sm"},[t("li",null,"• Utilisez un bon éclairage naturel"),t("li",null,"• Prenez plusieurs angles du produit"),t("li",null,"• La première image sera la photo principale"),t("li",null,"• Maximum 10 images par produit")])],-1))])])])])):d("",!0),a.value===3?(l(),i("div",qt,[e[39]||(e[39]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de la tombola",-1)),t("div",At,[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prix par ticket (FCFA) * ",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.ticket_price=o),type:"number",required:"",min:"100",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black",placeholder:"Ex: 2500",onInput:q},null,544),[[g,s.ticket_price]]),e[29]||(e[29]=t("p",{class:"text-sm text-gray-500 mt-1"},"Minimum 100 FCFA",-1))]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre de tickets * ",-1)),u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.total_tickets=o),type:"number",required:"",min:"10",max:"10000",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black",placeholder:"Ex: 400",onInput:q},null,544),[[g,s.total_tickets]]),e[31]||(e[31]=t("p",{class:"text-sm text-gray-500 mt-1"},"Entre 10 et 10,000 tickets",-1))]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin de vente * ",-1)),u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.end_date=o),type:"datetime-local",required:"",min:L.value,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black"},null,8,St),[[g,s.end_date]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tickets minimum pour valider * ",-1)),u(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.min_tickets=o),type:"number",required:"",max:s.total_tickets,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-black",placeholder:"Ex: 200"},null,8,zt),[[g,s.min_tickets]]),e[34]||(e[34]=t("p",{class:"text-sm text-gray-500 mt-1"},"Si pas atteint, remboursement automatique",-1))]),t("div",Rt,[t("div",Ut,[e[38]||(e[38]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Aperçu de la tombola",-1)),t("div",Nt,[t("div",Et,[t("p",It,n(y(_.value.totalRevenue)),1),e[35]||(e[35]=t("p",{class:"text-sm text-gray-600"},"Revenus potentiels",-1))]),t("div",Lt,[t("p",Bt,n(_.value.profitMargin)+"%",1),e[36]||(e[36]=t("p",{class:"text-sm text-gray-600"},"Marge bénéficiaire",-1))]),t("div",$t,[t("p",Tt,n(y(_.value.platformFee)),1),e[37]||(e[37]=t("p",{class:"text-sm text-gray-600"},"Frais plateforme (5%)",-1))])])])])])])):d("",!0),a.value===4?(l(),i("div",Gt,[e[53]||(e[53]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Vérification et publication",-1)),t("div",Jt,[t("div",null,[e[45]||(e[45]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Résumé du produit",-1)),t("div",Kt,[t("div",Ot,[e[40]||(e[40]=t("span",{class:"text-gray-600"},"Nom :",-1)),t("span",Wt,n(s.name),1)]),t("div",Ht,[e[41]||(e[41]=t("span",{class:"text-gray-600"},"Valeur :",-1)),t("span",Qt,n(y(s.value))+" FCFA",1)]),t("div",Xt,[e[42]||(e[42]=t("span",{class:"text-gray-600"},"Condition :",-1)),t("span",Yt,n(W(s.condition)),1)]),t("div",Zt,[e[43]||(e[43]=t("span",{class:"text-gray-600"},"Localisation :",-1)),t("span",te,n(s.location),1)]),t("div",ee,[e[44]||(e[44]=t("span",{class:"text-gray-600"},"Photos :",-1)),t("span",se,n(s.images.length)+" image(s)",1)])])]),t("div",null,[e[51]||(e[51]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Configuration tombola",-1)),t("div",oe,[t("div",re,[e[46]||(e[46]=t("span",{class:"text-gray-600"},"Prix/ticket :",-1)),t("span",le,n(y(s.ticket_price))+" FCFA",1)]),t("div",ie,[e[47]||(e[47]=t("span",{class:"text-gray-600"},"Total tickets :",-1)),t("span",ne,n(s.total_tickets),1)]),t("div",ae,[e[48]||(e[48]=t("span",{class:"text-gray-600"},"Minimum requis :",-1)),t("span",de,n(s.min_tickets),1)]),t("div",ue,[e[49]||(e[49]=t("span",{class:"text-gray-600"},"Date de fin :",-1)),t("span",ce,n(O(s.end_date)),1)]),t("div",me,[e[50]||(e[50]=t("span",{class:"text-gray-600"},"Revenus max :",-1)),t("span",pe,n(y(_.value.totalRevenue))+" FCFA",1)])])])]),t("div",ge,[t("label",be,[u(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.terms_accepted=o),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded"},null,512),[[tt,s.terms_accepted]]),e[52]||(e[52]=t("span",{class:"text-sm text-gray-700"},[f(" J'accepte les "),t("a",{href:"#",class:"text-[#0099cc] hover:underline"},"conditions de vente"),f(" et confirme que toutes les informations sont exactes. Je comprends que Koumbaya prélèvera des frais de 5% sur les revenus de la tombola. ")],-1))])])])):d("",!0),t("div",xe,[a.value>1?(l(),i("button",{key:0,onClick:$,type:"button",class:"inline-flex items-center px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[p(x(U),{class:"w-4 h-4 mr-2"}),e[54]||(e[54]=f(" Précédent ",-1))])):(l(),i("div",fe)),t("div",ye," Étape "+n(a.value)+" sur "+n(b.length),1),a.value<b.length?(l(),i("button",{key:2,onClick:B,type:"button",class:"inline-flex items-center px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors",disabled:!C.value},[e[55]||(e[55]=f(" Suivant ",-1)),p(x(lt),{class:"w-4 h-4 ml-2"})],8,ve)):d("",!0),a.value===b.length?(l(),i("button",{key:3,type:"submit",disabled:v.value||!C.value,class:"inline-flex items-center px-6 py-3 bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white rounded-lg transition-colors"},[v.value?(l(),i("span",_e,e[56]||(e[56]=[t("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1),f(" Publication... ",-1)]))):(l(),i("span",we,[p(x(N),{class:"w-4 h-4 mr-2"}),e[57]||(e[57]=f(" Publier le produit ",-1))]))],8,ke)):d("",!0)])],32)])}}};export{Pe as default};
