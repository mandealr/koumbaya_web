import{r as j,Q as q,R as ge,c as P,i as fe,b as l,e,g as y,w as xe,h as be,F as A,A as L,k as c,W as m,X as x,t as a,a1 as T,u as p,y as v,a$ as $,m as _,z as E,ax as U,ai as N,f as B,a0 as ye,aw as O,al as ve,aY as G,ac as _e,q as ke,o as i,B as he,P as we,x as Fe}from"./vendor-DMk-Ze7a.js";import{a as Ce,u as De}from"./app-BLkh9EwY.js";const Ve={class:"max-w-4xl mx-auto space-y-6"},je={class:"flex items-center justify-between"},Me={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Pe={class:"flex items-center justify-between mb-8"},Ae={class:"flex items-center"},Le={key:1},Ee={class:"ml-3"},Ie={class:"text-xs text-gray-700"},ze={key:0,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Re={class:"lg:col-span-2"},qe={key:0,class:"mt-1 text-sm text-red-600"},Te={key:1,class:"mt-1 text-sm text-orange-600"},$e={class:"lg:col-span-2"},Ue={key:0,class:"mt-1 text-sm text-red-600"},Ne={key:1,class:"mt-1 text-sm text-orange-600"},Be=["disabled"],Oe={key:0,disabled:""},Ge={key:1,disabled:""},We=["value"],Je={class:"text-xs text-gray-500 mt-1"},He={key:0,class:"mt-1 text-sm text-red-600"},Ke={class:"lg:col-span-2"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xe={class:"flex items-center space-x-3"},Ye={key:0,class:"w-2.5 h-2.5 bg-[#0099cc] rounded-full"},Ze={class:"flex items-center space-x-3"},et={key:0,class:"w-2.5 h-2.5 bg-purple-500 rounded-full"},tt={key:0,class:"mt-1 text-sm text-red-600"},st={key:1,class:"mt-1 text-sm text-orange-600"},ot={key:2,class:"mt-2 bg-blue-50 border border-blue-200 rounded-lg p-2"},rt={key:1,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},it={class:"space-y-6"},lt={class:"text-center"},nt={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},at=["src","alt"],dt=["onClick"],ct={key:0,class:"absolute bottom-2 left-2 bg-[#0099cc] text-white text-xs px-2 py-1 rounded-md"},ut={class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},pt={class:"flex items-start space-x-3"},mt={key:2,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},gt={key:0},ft={class:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},bt={class:"bg-white rounded-lg p-3"},yt={class:"font-semibold text-[#0099cc]"},vt={class:"bg-white rounded-lg p-3"},_t={class:"font-semibold text-gray-800"},kt={key:1},ht={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},wt={key:0,class:"mt-1 text-sm text-red-600"},Ft={key:1,class:"mt-1 text-sm text-orange-600"},Ct={key:2,class:"text-sm text-gray-700 mt-1"},Dt={key:0},Vt={key:1},jt={key:0,class:"mt-1 text-sm text-red-600"},Mt={key:1,class:"mt-1 text-sm text-orange-600"},Pt={key:2,class:"text-sm text-gray-700 mt-1"},At=["min"],Lt={key:0,class:"mt-1 text-sm text-red-600"},Et={key:1,class:"mt-1 text-sm text-orange-600"},It=["max"],zt={key:0,class:"mt-1 text-sm text-red-600"},St={key:1,class:"mt-1 text-sm text-orange-600"},Rt={key:2,class:"text-sm text-gray-700 mt-1"},qt={class:"lg:col-span-2"},Tt={class:"bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-xl p-6"},$t={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ut={class:"text-center"},Nt={class:"text-2xl font-bold text-[#0099cc]"},Bt={class:"text-center"},Ot={class:"text-2xl font-bold text-blue-600"},Gt={class:"text-center"},Wt={class:"text-2xl font-bold text-purple-600"},Jt={key:3,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Ht={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Kt={class:"space-y-3"},Qt={class:"flex justify-between"},Xt={class:"font-medium"},Yt={class:"flex justify-between"},Zt={class:"font-medium"},es={class:"flex justify-between"},ts={class:"font-medium"},ss={class:"flex justify-between"},os={class:"font-medium"},rs={class:"flex justify-between"},is={class:"font-medium"},ls={class:"font-semibold text-gray-900 mb-4"},ns={key:0,class:"space-y-3"},as={class:"flex justify-between"},ds={class:"font-medium"},cs={class:"flex justify-between"},us={class:"font-medium"},ps={class:"flex justify-between border-t pt-3"},ms={class:"font-bold text-[#0099cc]"},gs={key:1,class:"space-y-3"},fs={class:"flex justify-between"},xs={class:"font-medium"},bs={class:"flex justify-between"},ys={class:"font-medium"},vs={class:"flex justify-between"},_s={class:"font-medium"},ks={class:"flex justify-between"},hs={class:"font-medium"},ws={class:"flex justify-between border-t pt-3"},Fs={class:"font-bold text-[#0099cc]"},Cs={class:"mt-8 p-4 bg-gray-100 rounded-xl"},Ds={class:"flex items-start space-x-3"},Vs={class:"text-sm text-gray-900"},js={class:"flex justify-between items-center bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Ms={key:1},Ps={class:"text-sm text-gray-700"},As=["disabled"],Ls=["disabled"],Es={key:0,class:"flex items-center"},Is={key:1,class:"flex items-center"},Us={__name:"CreateProduct",setup(zs){const W=ke(),{get:J,post:I,loading:w}=Ce(),{user:Ss,isIndividualSeller:F,isBusinessSeller:Rs}=De(),u=j(1),C=j(!1),D=j(null),k=[{id:1,title:"Informations",description:"Détails du produit",icon:N},{id:2,title:"Photos",description:"Images du produit",icon:U},{id:3,title:"Tombola",description:"Configuration",icon:ve},{id:4,title:"Publication",description:"Vérification",icon:G}],h=j([]),s=q({name:"",description:"",category_id:"",condition:"",sale_mode:"direct",price:"",location:"",images:[],ticket_price:"",total_tickets:"",min_tickets:"",end_date:"",terms_accepted:!1,duration_days:7});ge(()=>s.sale_mode,o=>{o==="lottery"&&F.value&&(s.total_tickets="500")});const n=q({name:"",description:"",category_id:"",condition:"",value:"",location:"",images:"",ticket_price:"",total_tickets:"",min_tickets:"",end_date:""}),H=P(()=>{const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().slice(0,16)}),V=P(()=>{const o=(s.ticket_price||0)*(s.total_tickets||0),t=o*.05,d=o-t,r=s.price?Math.round((d-s.price)/s.price*100):0;return{totalRevenue:o,platformFee:t,netRevenue:d,profitMargin:r}}),M=P(()=>{switch(u.value){case 1:return K();case 2:return!0;case 3:return Q();case 4:return s.terms_accepted;default:return!1}}),K=()=>{const o=s.name&&s.description&&s.category_id&&s.condition&&s.sale_mode&&s.price&&s.location&&parseFloat(s.price)>=1e3;return o&&(n.name="",n.description="",n.category_id="",n.condition="",n.price="",n.location=""),o},Q=()=>{if(s.sale_mode==="direct")return!0;if(s.sale_mode==="lottery"){const o=s.ticket_price&&s.total_tickets&&s.min_tickets&&s.end_date&&parseFloat(s.ticket_price)>=100&&parseInt(s.total_tickets)>=10&&parseInt(s.min_tickets)>=10&&parseInt(s.min_tickets)<=parseInt(s.total_tickets)&&new Date(s.end_date)>new Date;return o&&(n.ticket_price="",n.total_tickets="",n.min_tickets="",n.end_date=""),o}return!1},X=()=>{M.value&&u.value<k.length&&u.value++},Y=()=>{u.value>1&&u.value--},Z=()=>{D.value?.click()},ee=o=>{const t=Array.from(o.target.files||[]);z(t)},te=o=>{const t=Array.from(o.dataTransfer.files||[]);z(t)},z=o=>{const t=o.filter(d=>d.type.startsWith("image/")?d.size>5242880?(b(`Le fichier ${d.name} est trop volumineux (max 5MB)`),!1):!0:(b(`Le fichier ${d.name} n'est pas une image valide`),!1));if(s.images.length+t.length>10){b("Maximum 10 images autorisées");return}t.forEach(d=>{const r=new FileReader;r.onload=g=>{s.images.push({file:d,preview:g.target?.result,name:d.name,size:d.size,type:d.type})},r.onerror=()=>{b(`Erreur lors de la lecture du fichier ${d.name}`)},r.readAsDataURL(d)}),D.value&&(D.value.value="")},se=o=>{s.images.splice(o,1)},S=()=>{F.value&&s.sale_mode==="lottery"&&(s.total_tickets="500")},f=o=>new Intl.NumberFormat("fr-FR").format(o||0),oe=o=>o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",re=o=>({new:"Neuf",used:"Occasion",refurbished:"Reconditionné"})[o]||o,ie=async()=>{C.value=!0,le();try{const o=Math.ceil(s.price/s.ticket_price),t={name:s.name,description:s.description,category_id:parseInt(s.category_id),price:parseFloat(s.price),sale_mode:s.sale_mode,images:s.images.map(r=>r.preview)};s.sale_mode==="lottery"&&(t.ticket_price=parseFloat(s.ticket_price),t.min_participants=parseInt(s.min_tickets));const d=await I("/products",t);if(d.product){if(s.sale_mode==="lottery"){const r={duration_days:ae()};try{await I(`/products/${d.product.id}/create-lottery`,r),R("Produit et tombola créés avec succès !")}catch(g){console.error("Error creating lottery:",g),de("Produit créé mais erreur lors de la création de la tombola")}}else R("Produit créé avec succès !");setTimeout(()=>{W.push("/merchant/products")},1500)}}catch(o){console.error("Error creating product:",o),ne(o)}finally{C.value=!1}},le=()=>{Object.keys(n).forEach(o=>{n[o]=""})},ne=o=>{if(o.response?.data?.errors){const t=o.response.data.errors;Object.keys(t).forEach(d=>{n[d]!==void 0&&(n[d]=t[d][0])}),b("Veuillez corriger les erreurs dans le formulaire")}else o.response?.data?.message?b(o.response.data.message):b("Une erreur est survenue. Veuillez réessayer.")},ae=()=>{if(!s.end_date)return 7;const o=new Date(s.end_date),d=Math.abs(o-new Date),r=Math.ceil(d/(1e3*60*60*24));return Math.min(Math.max(r,1),30)},R=o=>{window.$toast&&window.$toast.success(o,"✅ Succès")},b=o=>{window.$toast&&window.$toast.error(o,"❌ Erreur")},de=o=>{window.$toast&&window.$toast.warning(o,"⚠️ Attention")},ce=()=>{if(s.end_date){const o=new Date(s.end_date),t=new Date,d=new Date;d.setDate(d.getDate()+30),o<=t?n.end_date="La date de fin doit être dans le futur":o>d?n.end_date="La date de fin ne peut pas dépasser 30 jours":n.end_date=""}},ue=()=>{s.ticket_price&&(parseFloat(s.ticket_price)<100?n.ticket_price="Le prix minimum est de 100 FCFA":n.ticket_price="")},pe=()=>{if(s.total_tickets){const o=parseInt(s.total_tickets);if(F.value){s.total_tickets="500",n.total_tickets="";return}o<10?n.total_tickets="Minimum 10 tickets requis":o>1e4?n.total_tickets="Maximum 10,000 tickets autorisés":n.total_tickets=""}},me=async()=>{try{console.log("Loading categories...");const o=await J("/categories");console.log("Categories response:",o),console.log("Response keys:",Object.keys(o)),o&&o.categories?(h.value=o.categories,console.log("Categories loaded:",h.value.length,"items")):o&&o.data?(h.value=o.data,console.log("Categories loaded from data:",h.value.length,"items")):console.log("No categories in response or response is null")}catch(o){console.error("Error loading categories:",o),b("Erreur lors du chargement des catégories")}};return fe(()=>{me(),console.log("CreateProduct page loaded"),F.value&&(s.total_tickets="500")}),(o,t)=>{const d=be("router-link");return i(),l("div",Ve,[e("div",je,[t[16]||(t[16]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Publier un Nouveau Produit"),e("p",{class:"mt-2 text-gray-600"},"Créez votre tombola et mettez votre produit en vente")],-1)),y(d,{to:"/merchant/products",class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},{default:xe(()=>[y(p(O),{class:"w-4 h-4 mr-2"}),t[15]||(t[15]=_(" Retour aux produits ",-1))]),_:1,__:[15]})]),e("div",Me,[e("div",Pe,[(i(),l(A,null,L(k,(r,g)=>e("div",{key:r.id,class:v(["flex items-center",{"flex-1":g<k.length-1}])},[e("div",Ae,[e("div",{class:v(["flex items-center justify-center w-10 h-10 rounded-full border-2 font-medium text-sm transition-all",u.value>=r.id?"border-[#0099cc] bg-[#0099cc] text-white":"border-gray-300 bg-white text-gray-600"])},[u.value>=r.id?(i(),he(we(r.icon),{key:0,class:"w-5 h-5"})):(i(),l("span",Le,a(r.id),1))],2),e("div",Ee,[e("p",{class:v(["text-sm font-medium",u.value>=r.id?"text-[#0099cc]":"text-gray-600"])},a(r.title),3),e("p",Ie,a(r.description),1)])]),g<k.length-1?(i(),l("div",{key:0,class:v(["flex-1 h-0.5 mx-4 transition-all",u.value>r.id?"bg-[#0099cc]":"bg-gray-200"])},null,2)):c("",!0)],2)),64))])]),e("form",{onSubmit:E(ie,["prevent"]),class:"space-y-6"},[u.value===1?(i(),l("div",ze,[t[29]||(t[29]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations de base",-1)),e("div",Se,[e("div",Re,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom du produit * ",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.name=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: iPhone 15 Pro Max 256GB"},null,512),[[x,s.name]]),n.name?(i(),l("p",qe,a(n.name),1)):s.name&&s.name.length<3?(i(),l("p",Te,"Le nom doit contenir au moins 3 caractères")):c("",!0)]),e("div",$e,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Description * ",-1)),m(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.description=r),rows:"4",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Décrivez votre produit en détail..."},null,512),[[x,s.description]]),n.description?(i(),l("p",Ue,a(n.description),1)):s.description&&s.description.length<10?(i(),l("p",Ne,"La description doit contenir au moins 10 caractères")):c("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catégorie * ",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.category_id=r),required:"",disabled:p(w),class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all disabled:opacity-50",style:{color:"#5f5f5f"}},[t[19]||(t[19]=e("option",{value:""},"Sélectionner une catégorie",-1)),p(w)?(i(),l("option",Oe,"Chargement des catégories...")):c("",!0),h.value.length===0&&!p(w)?(i(),l("option",Ge,"Aucune catégorie disponible")):c("",!0),(i(!0),l(A,null,L(h.value,r=>(i(),l("option",{key:r.id,value:r.id},a(r.name),9,We))),128))],8,Be),[[T,s.category_id]]),e("p",Je," Debug: "+a(h.value.length)+" catégories chargées ",1),n.category_id?(i(),l("p",He,a(n.category_id),1)):c("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Condition * ",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.condition=r),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},t[21]||(t[21]=[e("option",{value:""},"État du produit",-1),e("option",{value:"new"},"Neuf",-1),e("option",{value:"used"},"Occasion",-1),e("option",{value:"refurbished"},"Reconditionné",-1)]),512),[[T,s.condition]])]),e("div",Ke,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mode de vente * ",-1)),e("div",Qe,[e("label",{class:v(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-[#0099cc] bg-blue-50":s.sale_mode==="direct"}])},[m(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=r=>s.sale_mode=r),value:"direct",class:"sr-only"},null,512),[[$,s.sale_mode]]),e("div",Xe,[e("div",{class:v(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="direct"?"border-[#0099cc]":"border-gray-300"])},[s.sale_mode==="direct"?(i(),l("div",Ye)):c("",!0)],2),t[23]||(t[23]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Vente directe"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent directement")],-1))])],2),e("label",{class:v(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-purple-500 bg-purple-50":s.sale_mode==="lottery"}])},[m(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>s.sale_mode=r),value:"lottery",class:"sr-only"},null,512),[[$,s.sale_mode]]),e("div",Ze,[e("div",{class:v(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="lottery"?"border-purple-500":"border-gray-300"])},[s.sale_mode==="lottery"?(i(),l("div",et)):c("",!0)],2),t[24]||(t[24]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Tombola"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent des tickets")],-1))])],2)])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Valeur du produit (FCFA) * ",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s.price=r),type:"number",required:"",min:"0",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 800000"},null,512),[[x,s.price]]),n.price?(i(),l("p",tt,a(n.price),1)):s.price&&parseFloat(s.price)<1e3?(i(),l("p",st,"La valeur minimum est de 1000 FCFA")):c("",!0),p(F)&&s.sale_mode==="lottery"&&s.price&&parseFloat(s.price)<1e5?(i(),l("div",ot,t[26]||(t[26]=[e("p",{class:"text-xs text-blue-800"},[e("strong",null,"Recommandation:"),_(" Pour un vendeur individuel avec 500 tickets fixes, un prix produit minimum de 100,000 FCFA est recommandé pour garantir un prix de ticket d'au moins 200 FCFA. ")],-1)]))):c("",!0)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Localisation * ",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.location=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: Libreville, Gabon"},null,512),[[x,s.location]])])])])):c("",!0),u.value===2?(i(),l("div",rt,[t[34]||(t[34]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Photos du produit",-1)),e("div",it,[e("div",lt,[e("div",{onClick:Z,onDragover:t[8]||(t[8]=E(()=>{},["prevent"])),onDrop:E(te,["prevent"]),class:"border-2 border-dashed border-gray-300 rounded-xl p-8 hover:border-[#0099cc] transition-colors cursor-pointer"},[y(p(U),{class:"w-16 h-16 text-gray-600 mx-auto mb-4"}),t[30]||(t[30]=e("p",{class:"text-lg font-medium text-gray-700 mb-2"},"Ajoutez des photos",-1)),t[31]||(t[31]=e("p",{class:"text-sm text-gray-700 mb-4"},"Glissez-déposez ou cliquez pour sélectionner",-1)),t[32]||(t[32]=e("div",{class:"flex justify-center"},[e("span",{class:"bg-[#0099cc] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#0088bb] transition-colors"}," Choisir des fichiers ")],-1))],32),e("input",{ref_key:"fileInput",ref:D,type:"file",multiple:"",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:ee,class:"hidden"},null,544)]),s.images.length>0?(i(),l("div",nt,[(i(!0),l(A,null,L(s.images,(r,g)=>(i(),l("div",{key:g,class:"relative group"},[e("img",{src:r.preview,alt:`Produit ${g+1}`,class:"w-full h-32 object-cover rounded-xl border border-gray-200"},null,8,at),e("button",{onClick:qs=>se(g),type:"button",class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[y(p(Fe),{class:"w-4 h-4"})],8,dt),g===0?(i(),l("div",ct," Photo principale ")):c("",!0)]))),128))])):c("",!0),e("div",ut,[e("div",pt,[y(p(N),{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),t[33]||(t[33]=e("div",{class:"text-sm text-blue-700"},[e("p",{class:"font-medium mb-1"},"Conseils pour de bonnes photos :"),e("ul",{class:"space-y-1 text-sm"},[e("li",null,"• Utilisez un bon éclairage naturel"),e("li",null,"• Prenez plusieurs angles du produit"),e("li",null,"• La première image sera la photo principale"),e("li",null,"• Maximum 10 images par produit"),e("li",null,"• Formats acceptés : JPG, PNG, WebP"),e("li",null,"• Taille maximum : 5MB par image")])],-1))])])])])):c("",!0),u.value===3?(i(),l("div",mt,[s.sale_mode==="direct"?(i(),l("div",gt,[t[39]||(t[39]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de vente directe",-1)),e("div",ft,[t[37]||(t[37]=B('<div class="flex items-center justify-center space-x-3 mb-4"><div class="w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><h3 class="text-lg font-semibold text-gray-900">Vente directe configurée</h3><p class="text-gray-600">Votre produit sera disponible à l&#39;achat immédiat</p></div></div>',1)),e("div",xt,[e("div",bt,[t[35]||(t[35]=e("p",{class:"text-gray-600"},"Prix de vente",-1)),e("p",yt,a(f(s.price))+" FCFA",1)]),e("div",vt,[t[36]||(t[36]=e("p",{class:"text-gray-600"},"Commission plateforme",-1)),e("p",_t,a(f(s.price*.05))+" FCFA (5%)",1)])]),t[38]||(t[38]=e("p",{class:"text-sm text-gray-700 mt-4"}," Les clients pourront acheter votre produit directement au prix affiché. ",-1))])])):s.sale_mode==="lottery"?(i(),l("div",kt,[t[49]||(t[49]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de la tombola",-1)),e("div",ht,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prix par ticket (FCFA) * ",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.ticket_price=r),type:"number",required:"",min:"100",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 2500",onInput:S,onBlur:ue},null,544),[[x,s.ticket_price]]),n.ticket_price?(i(),l("p",wt,a(n.ticket_price),1)):s.ticket_price&&parseFloat(s.ticket_price)<100?(i(),l("p",Ft,"Le prix minimum est de 100 FCFA")):(i(),l("p",Ct,"Minimum 100 FCFA"))]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre de tickets * ",-1)),p(F)?(i(),l("div",Dt,[m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.total_tickets=r),type:"number",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-100 cursor-not-allowed",style:{color:"#5f5f5f"}},null,512),[[x,s.total_tickets]]),t[41]||(t[41]=B('<div class="mt-2 bg-yellow-50 border border-yellow-200 rounded-lg p-3"><div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-yellow-800"><strong>Profil Vendeur Individuel:</strong> Le nombre de tickets est fixé à 500 pour garantir un prix de ticket minimum de 200 FCFA. </p></div></div></div>',1))])):(i(),l("div",Vt,[m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>s.total_tickets=r),type:"number",required:"",min:"10",max:"10000",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 400",onInput:S,onBlur:pe},null,544),[[x,s.total_tickets]]),n.total_tickets?(i(),l("p",jt,a(n.total_tickets),1)):s.total_tickets&&(parseInt(s.total_tickets)<10||parseInt(s.total_tickets)>1e4)?(i(),l("p",Mt,"Entre 10 et 10,000 tickets")):(i(),l("p",Pt,"Entre 10 et 10,000 tickets"))]))]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin de vente * ",-1)),m(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s.end_date=r),type:"datetime-local",required:"",min:H.value,onChange:ce,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},null,40,At),[[x,s.end_date]]),n.end_date?(i(),l("p",Lt,a(n.end_date),1)):s.end_date&&new Date(s.end_date)<=new Date?(i(),l("p",Et,"La date de fin doit être dans le futur")):c("",!0)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tickets minimum pour valider * ",-1)),m(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>s.min_tickets=r),type:"number",required:"",max:s.total_tickets,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 200"},null,8,It),[[x,s.min_tickets]]),n.min_tickets?(i(),l("p",zt,a(n.min_tickets),1)):s.min_tickets&&s.total_tickets&&parseInt(s.min_tickets)>parseInt(s.total_tickets)?(i(),l("p",St,"Ne peut pas dépasser le nombre total de tickets")):(i(),l("p",Rt,"Si pas atteint, remboursement automatique"))]),e("div",qt,[e("div",Tt,[t[48]||(t[48]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Aperçu de la tombola",-1)),e("div",$t,[e("div",Ut,[e("p",Nt,a(f(V.value.totalRevenue)),1),t[45]||(t[45]=e("p",{class:"text-sm text-gray-600"},"Revenus potentiels",-1))]),e("div",Bt,[e("p",Ot,a(V.value.profitMargin)+"%",1),t[46]||(t[46]=e("p",{class:"text-sm text-gray-600"},"Marge bénéficiaire",-1))]),e("div",Gt,[e("p",Wt,a(f(V.value.platformFee)),1),t[47]||(t[47]=e("p",{class:"text-sm text-gray-600"},"Frais plateforme (5%)",-1))])])])])])])):c("",!0)])):c("",!0),u.value===4?(i(),l("div",Jt,[t[68]||(t[68]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Vérification et publication",-1)),e("div",Ht,[e("div",null,[t[55]||(t[55]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Résumé du produit",-1)),e("div",Kt,[e("div",Qt,[t[50]||(t[50]=e("span",{class:"text-gray-800"},"Nom :",-1)),e("span",Xt,a(s.name),1)]),e("div",Yt,[t[51]||(t[51]=e("span",{class:"text-gray-800"},"Valeur :",-1)),e("span",Zt,a(f(s.price))+" FCFA",1)]),e("div",es,[t[52]||(t[52]=e("span",{class:"text-gray-800"},"Condition :",-1)),e("span",ts,a(re(s.condition)),1)]),e("div",ss,[t[53]||(t[53]=e("span",{class:"text-gray-800"},"Localisation :",-1)),e("span",os,a(s.location),1)]),e("div",rs,[t[54]||(t[54]=e("span",{class:"text-gray-800"},"Photos :",-1)),e("span",is,a(s.images.length)+" image(s)",1)])])]),e("div",null,[e("h3",ls,a(s.sale_mode==="lottery"?"Configuration tombola":"Configuration vente"),1),s.sale_mode==="direct"?(i(),l("div",ns,[t[59]||(t[59]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-[#0099cc]"},"Vente directe")],-1)),e("div",as,[t[56]||(t[56]=e("span",{class:"text-gray-800"},"Prix de vente :",-1)),e("span",ds,a(f(s.price))+" FCFA",1)]),e("div",cs,[t[57]||(t[57]=e("span",{class:"text-gray-800"},"Commission (5%) :",-1)),e("span",us,a(f(s.price*.05))+" FCFA",1)]),e("div",ps,[t[58]||(t[58]=e("span",{class:"text-gray-800"},"Vous recevrez :",-1)),e("span",ms,a(f(s.price*.95))+" FCFA",1)])])):s.sale_mode==="lottery"?(i(),l("div",gs,[t[65]||(t[65]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-purple-600"},"Tombola")],-1)),e("div",fs,[t[60]||(t[60]=e("span",{class:"text-gray-800"},"Prix/ticket :",-1)),e("span",xs,a(f(s.ticket_price))+" FCFA",1)]),e("div",bs,[t[61]||(t[61]=e("span",{class:"text-gray-800"},"Total tickets :",-1)),e("span",ys,a(s.total_tickets),1)]),e("div",vs,[t[62]||(t[62]=e("span",{class:"text-gray-800"},"Minimum requis :",-1)),e("span",_s,a(s.min_tickets),1)]),e("div",ks,[t[63]||(t[63]=e("span",{class:"text-gray-800"},"Date de fin :",-1)),e("span",hs,a(oe(s.end_date)),1)]),e("div",ws,[t[64]||(t[64]=e("span",{class:"text-gray-800"},"Revenus max :",-1)),e("span",Fs,a(f(V.value.totalRevenue))+" FCFA",1)])])):c("",!0)])]),e("div",Cs,[e("label",Ds,[m(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>s.terms_accepted=r),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded"},null,512),[[ye,s.terms_accepted]]),e("span",Vs,[t[66]||(t[66]=_(" J'accepte les ",-1)),t[67]||(t[67]=e("a",{href:"#",class:"text-[#0099cc] hover:underline"},"conditions de vente",-1)),_(" et confirme que toutes les informations sont exactes. Je comprends que Koumbaya prélèvera des frais de 5% sur les revenus "+a(s.sale_mode==="lottery"?"de la tombola":"de la vente")+". ",1)])])])])):c("",!0),e("div",js,[u.value>1?(i(),l("button",{key:0,onClick:Y,type:"button",class:"inline-flex items-center px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[y(p(O),{class:"w-4 h-4 mr-2"}),t[69]||(t[69]=_(" Précédent ",-1))])):(i(),l("div",Ms)),e("div",Ps," Étape "+a(u.value)+" sur "+a(k.length),1),u.value<k.length?(i(),l("button",{key:2,onClick:X,type:"button",class:"inline-flex items-center px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!M.value||p(w)},[t[70]||(t[70]=_(" Suivant ",-1)),y(p(_e),{class:"w-4 h-4 ml-2"})],8,As)):c("",!0),u.value===k.length?(i(),l("button",{key:3,type:"submit",disabled:C.value||!M.value||p(w),class:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors"},[C.value||p(w)?(i(),l("span",Es,[t[71]||(t[71]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1)),_(" "+a(C.value?"Publication...":"Chargement..."),1)])):(i(),l("span",Is,[y(p(G),{class:"w-4 h-4 mr-2"}),t[72]||(t[72]=_(" Publier le produit ",-1))]))],8,Ls)):c("",!0)])],32)])}}};export{Us as default};
