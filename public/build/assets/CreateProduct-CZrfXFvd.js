import{r as D,Q as A,R as me,c as I,j as pe,b as l,e,g as k,w as ge,h as xe,F as S,A as $,l as u,W as p,X as f,t as n,a1 as q,u as g,y as b,a$ as N,i as y,ai as T,f as R,a0 as fe,aw as B,ax as ye,al as be,aY as G,ac as _e,z as ve,q as ke,o as i,B as we,P as he}from"./vendor-CqdTsSOE.js";import{a as Ce,u as Fe}from"./app-BrRBzXvV.js";import{I as Ve}from"./ImageUpload-8WSnz9Ko.js";const De={class:"max-w-4xl mx-auto space-y-6"},Me={class:"flex items-center justify-between"},je={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Pe={class:"flex items-center justify-between mb-8"},Ie={class:"flex items-center"},Ue={key:1},ze={class:"ml-3"},Ee={class:"text-xs text-gray-700"},Le={key:0,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Se={class:"lg:col-span-2"},$e={key:0,class:"mt-1 text-sm text-red-600"},qe={key:1,class:"mt-1 text-sm text-orange-600"},Ne={class:"lg:col-span-2"},Te={key:0,class:"mt-1 text-sm text-red-600"},Re={key:1,class:"mt-1 text-sm text-orange-600"},Be=["disabled"],Ge={key:0,disabled:""},Oe={key:1,disabled:""},Je=["value"],We={class:"text-xs text-gray-500 mt-1"},He={key:0,class:"mt-1 text-sm text-red-600"},Ke={class:"lg:col-span-2"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xe={class:"flex items-center space-x-3"},Ye={key:0,class:"w-2.5 h-2.5 bg-[#0099cc] rounded-full"},Ze={class:"flex items-center space-x-3"},et={key:0,class:"w-2.5 h-2.5 bg-purple-500 rounded-full"},tt={key:0,class:"mt-1 text-sm text-red-600"},st={key:1,class:"mt-1 text-sm text-orange-600"},ot={key:2,class:"mt-2 bg-blue-50 border border-blue-200 rounded-lg p-2"},rt={key:1,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},it={class:"space-y-6"},lt={class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},at={class:"flex items-start space-x-3"},nt={key:2,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},dt={key:0},ct={class:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},mt={class:"bg-white rounded-lg p-3"},pt={class:"font-semibold text-[#0099cc]"},gt={class:"bg-white rounded-lg p-3"},xt={class:"font-semibold text-gray-800"},ft={key:1},yt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},bt={key:0,class:"mt-1 text-sm text-red-600"},_t={key:1,class:"mt-1 text-sm text-orange-600"},vt={key:2,class:"text-sm text-gray-700 mt-1"},kt={key:0},wt={key:1},ht={key:0,class:"mt-1 text-sm text-red-600"},Ct={key:1,class:"mt-1 text-sm text-orange-600"},Ft={key:2,class:"text-sm text-gray-700 mt-1"},Vt={class:"block text-sm font-medium text-gray-700 mb-2"},Dt={key:0},Mt={class:"relative"},jt=["min","max"],Pt={key:0,class:"mt-1 text-sm text-red-600"},It={key:1,class:"text-sm text-gray-700 mt-1"},Ut={key:1},zt={class:"relative"},Et=["value"],Lt={class:"mt-2 bg-yellow-50 border border-yellow-200 rounded-lg p-3"},At={class:"flex items-start"},St={class:"ml-3"},$t={class:"text-sm text-yellow-800"},qt={key:2},Nt=["min"],Tt={key:0,class:"mt-1 text-sm text-red-600"},Rt={key:1,class:"mt-1 text-sm text-orange-600"},Bt=["max"],Gt={key:0,class:"mt-1 text-sm text-red-600"},Ot={key:1,class:"mt-1 text-sm text-orange-600"},Jt={key:2,class:"text-sm text-gray-700 mt-1"},Wt={class:"lg:col-span-2"},Ht={class:"bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-xl p-6"},Kt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Qt={class:"text-center"},Xt={class:"text-2xl font-bold text-[#0099cc]"},Yt={class:"text-center"},Zt={class:"text-2xl font-bold text-blue-600"},es={class:"text-center"},ts={class:"text-2xl font-bold text-purple-600"},ss={key:3,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},os={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},rs={class:"space-y-3"},is={class:"flex justify-between"},ls={class:"font-medium"},as={class:"flex justify-between"},ns={class:"font-medium"},ds={class:"flex justify-between"},cs={class:"font-medium"},us={class:"flex justify-between"},ms={class:"font-medium"},ps={class:"flex justify-between"},gs={class:"font-medium"},xs={class:"font-semibold text-gray-900 mb-4"},fs={key:0,class:"space-y-3"},ys={class:"flex justify-between"},bs={class:"font-medium"},_s={class:"flex justify-between"},vs={class:"font-medium"},ks={class:"flex justify-between border-t pt-3"},ws={class:"font-bold text-[#0099cc]"},hs={key:1,class:"space-y-3"},Cs={class:"flex justify-between"},Fs={class:"font-medium"},Vs={class:"flex justify-between"},Ds={class:"font-medium"},Ms={class:"flex justify-between"},js={class:"font-medium"},Ps={class:"flex justify-between"},Is={class:"font-medium"},Us={class:"flex justify-between border-t pt-3"},zs={class:"font-bold text-[#0099cc]"},Es={class:"mt-8 p-4 bg-gray-100 rounded-xl"},Ls={class:"flex items-start space-x-3"},As={class:"text-sm text-gray-900"},Ss={class:"flex justify-between items-center bg-white rounded-xl shadow-lg border border-gray-100 p-6"},$s={key:1},qs={class:"text-sm text-gray-700"},Ns=["disabled"],Ts=["disabled"],Rs={key:0,class:"flex items-center"},Bs={key:1,class:"flex items-center"},Qs={__name:"CreateProduct",setup(Gs){const O=ke(),{get:U,post:z,loading:w}=Ce(),{user:Os,isIndividualSeller:h,isBusinessSeller:Js}=Fe(),m=D(1),F=D(!1);D(null);const _=[{id:1,title:"Informations",description:"Détails du produit",icon:T},{id:2,title:"Photos",description:"Images du produit",icon:ye},{id:3,title:"Tombola",description:"Configuration",icon:be},{id:4,title:"Publication",description:"Vérification",icon:G}],v=D([]),d=D(null),s=A({name:"",description:"",category_id:"",condition:"",sale_mode:"direct",price:"",location:"",images:[],imageUrls:[],ticket_price:"",total_tickets:"",min_tickets:"",end_date:"",lottery_duration:"",terms_accepted:!1,duration_days:7});me(()=>s.sale_mode,o=>{o==="lottery"&&h.value&&(s.total_tickets="500")});const a=A({name:"",description:"",category_id:"",condition:"",value:"",location:"",images:"",ticket_price:"",total_tickets:"",min_tickets:"",end_date:"",lottery_duration:""}),J=I(()=>{const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().slice(0,16)}),M=I(()=>{const o=(s.ticket_price||0)*(s.total_tickets||0),t=o*.05,c=o-t,r=s.price?Math.round((c-s.price)/s.price*100):0;return{totalRevenue:o,platformFee:t,netRevenue:c,profitMargin:r}}),j=I(()=>{switch(m.value){case 1:return W();case 2:return!0;case 3:return H();case 4:return s.terms_accepted;default:return!1}}),W=()=>{const o=s.name&&s.description&&s.category_id&&s.condition&&s.sale_mode&&s.price&&s.location&&parseFloat(s.price)>=1e3;return o&&(a.name="",a.description="",a.category_id="",a.condition="",a.price="",a.location=""),o},H=()=>{if(s.sale_mode==="direct")return!0;if(s.sale_mode==="lottery"){const o=s.ticket_price&&s.total_tickets&&s.min_tickets&&s.end_date&&parseFloat(s.ticket_price)>=100&&parseInt(s.total_tickets)>=10&&parseInt(s.min_tickets)>=10&&parseInt(s.min_tickets)<=parseInt(s.total_tickets)&&new Date(s.end_date)>new Date;return o&&(a.ticket_price="",a.total_tickets="",a.min_tickets="",a.end_date=""),o}return!1},K=()=>{j.value&&m.value<_.length&&m.value++},Q=()=>{m.value>1&&m.value--},X=({index:o,url:t,response:c})=>{console.log("Image uploadée avec succès:",{index:o,url:t,response:c}),P(`Image ${o+1} uploadée avec succès`)},Y=({index:o,error:t})=>{console.error("Erreur upload image:",{index:o,error:t}),V(`Erreur lors de l'upload de l'image ${o+1}: ${t.message}`)},Z=({index:o,progress:t})=>{console.log(`Upload image ${o+1}: ${t}%`)},E=()=>{h.value&&s.sale_mode==="lottery"&&(s.total_tickets="500")},x=o=>new Intl.NumberFormat("fr-FR").format(o||0),ee=o=>({new:"Neuf",used:"Occasion",refurbished:"Reconditionné"})[o]||o,te=async()=>{F.value=!0,se();try{const o=Math.ceil(s.price/s.ticket_price),t={name:s.name,description:s.description,category_id:parseInt(s.category_id),price:parseFloat(s.price),sale_mode:s.sale_mode,images:s.imageUrls.length>0?s.imageUrls:s.images.map(r=>r.preview)};s.sale_mode==="lottery"&&(t.ticket_price=parseFloat(s.ticket_price),t.min_participants=parseInt(s.min_tickets),d.value?.can_customize&&(t.lottery_duration=parseInt(s.lottery_duration)));const c=await z("/products",t);if(c.product){if(s.sale_mode==="lottery"){const r={duration_days:L()};try{await z(`/products/${c.product.id}/create-lottery`,r),P("Produit et tombola créés avec succès !")}catch(C){console.error("Error creating lottery:",C),re("Produit créé mais erreur lors de la création de la tombola")}}else P("Produit créé avec succès !");setTimeout(()=>{O.push("/merchant/products")},1500)}}catch(o){console.error("Error creating product:",o),oe(o)}finally{F.value=!1}},se=()=>{Object.keys(a).forEach(o=>{a[o]=""})},oe=o=>{if(o.response?.data?.errors){const t=o.response.data.errors;Object.keys(t).forEach(c=>{a[c]!==void 0&&(a[c]=t[c][0])}),V("Veuillez corriger les erreurs dans le formulaire")}else o.response?.data?.message?V(o.response.data.message):V("Une erreur est survenue. Veuillez réessayer.")},L=()=>{if(d.value?.can_customize&&s.lottery_duration)return parseInt(s.lottery_duration);if(d.value&&!d.value.can_customize)return d.value.fixed_duration;if(s.end_date){const o=new Date(s.end_date),c=Math.abs(o-new Date),r=Math.ceil(c/(1e3*60*60*24));if(d.value){const C=d.value.min_days||1,ue=d.value.max_days||60;return Math.min(Math.max(r,C),ue)}return Math.min(Math.max(r,1),30)}return d.value?.default_duration||30},P=o=>{window.$toast&&window.$toast.success(o,"✅ Succès")},V=o=>{window.$toast&&window.$toast.error(o,"❌ Erreur")},re=o=>{window.$toast&&window.$toast.warning(o,"⚠️ Attention")},ie=()=>{if(s.end_date){const o=new Date(s.end_date),t=new Date,c=new Date;c.setDate(c.getDate()+30),o<=t?a.end_date="La date de fin doit être dans le futur":o>c?a.end_date="La date de fin ne peut pas dépasser 30 jours":a.end_date=""}},le=()=>{s.ticket_price&&(parseFloat(s.ticket_price)<100?a.ticket_price="Le prix minimum est de 100 FCFA":a.ticket_price="")},ae=()=>{if(s.total_tickets){const o=parseInt(s.total_tickets);if(h.value){s.total_tickets="500",a.total_tickets="";return}o<10?a.total_tickets="Minimum 10 tickets requis":o>1e4?a.total_tickets="Maximum 10,000 tickets autorisés":a.total_tickets=""}},ne=()=>{if(!d.value||!d.value.can_customize){a.lottery_duration="";return}if(s.lottery_duration){const o=parseInt(s.lottery_duration),t=d.value.min_days,c=d.value.max_days;isNaN(o)?a.lottery_duration="Veuillez entrer un nombre valide":o<t?a.lottery_duration=`Minimum ${t} jour${t>1?"s":""} requis`:o>c?a.lottery_duration=`Maximum ${c} jours autorisés`:a.lottery_duration=""}},de=async()=>{try{console.log("Loading categories...");const o=await U("/categories");console.log("Categories response:",o),console.log("Response keys:",Object.keys(o)),o&&o.categories?(v.value=o.categories,console.log("Categories loaded:",v.value.length,"items")):o&&o.data?(v.value=o.data,console.log("Categories loaded from data:",v.value.length,"items")):console.log("No categories in response or response is null")}catch(o){console.error("Error loading categories:",o),V("Erreur lors du chargement des catégories")}},ce=async()=>{try{const o=await U("/products/lottery-duration-constraints");o&&o.data&&(d.value=o.data.constraints,console.log("Lottery duration constraints loaded:",d.value),d.value&&!d.value.can_customize?s.lottery_duration=d.value.fixed_duration:s.lottery_duration=d.value?.default_duration||30)}catch(o){console.error("Error loading lottery duration constraints:",o),s.lottery_duration=30}};return pe(()=>{de(),ce(),console.log("CreateProduct page loaded"),h.value&&(s.total_tickets="500")}),(o,t)=>{const c=xe("router-link");return i(),l("div",De,[e("div",Me,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Publier un Nouveau Produit"),e("p",{class:"mt-2 text-gray-600"},"Créez votre tombola et mettez votre produit en vente")],-1)),k(c,{to:"/merchant/products",class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},{default:ge(()=>[k(g(B),{class:"w-4 h-4 mr-2"}),t[16]||(t[16]=y(" Retour aux produits ",-1))]),_:1,__:[16]})]),e("div",je,[e("div",Pe,[(i(),l(S,null,$(_,(r,C)=>e("div",{key:r.id,class:b(["flex items-center",{"flex-1":C<_.length-1}])},[e("div",Ie,[e("div",{class:b(["flex items-center justify-center w-10 h-10 rounded-full border-2 font-medium text-sm transition-all",m.value>=r.id?"border-[#0099cc] bg-[#0099cc] text-white":"border-gray-300 bg-white text-gray-600"])},[m.value>=r.id?(i(),we(he(r.icon),{key:0,class:"w-5 h-5"})):(i(),l("span",Ue,n(r.id),1))],2),e("div",ze,[e("p",{class:b(["text-sm font-medium",m.value>=r.id?"text-[#0099cc]":"text-gray-600"])},n(r.title),3),e("p",Ee,n(r.description),1)])]),C<_.length-1?(i(),l("div",{key:0,class:b(["flex-1 h-0.5 mx-4 transition-all",m.value>r.id?"bg-[#0099cc]":"bg-gray-200"])},null,2)):u("",!0)],2)),64))])]),e("form",{onSubmit:ve(te,["prevent"]),class:"space-y-6"},[m.value===1?(i(),l("div",Le,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations de base",-1)),e("div",Ae,[e("div",Se,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom du produit * ",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.name=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: iPhone 15 Pro Max 256GB"},null,512),[[f,s.name]]),a.name?(i(),l("p",$e,n(a.name),1)):s.name&&s.name.length<3?(i(),l("p",qe,"Le nom doit contenir au moins 3 caractères")):u("",!0)]),e("div",Ne,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Description * ",-1)),p(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.description=r),rows:"4",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Décrivez votre produit en détail..."},null,512),[[f,s.description]]),a.description?(i(),l("p",Te,n(a.description),1)):s.description&&s.description.length<10?(i(),l("p",Re,"La description doit contenir au moins 10 caractères")):u("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catégorie * ",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.category_id=r),required:"",disabled:g(w),class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all disabled:opacity-50",style:{color:"#5f5f5f"}},[t[20]||(t[20]=e("option",{value:""},"Sélectionner une catégorie",-1)),g(w)?(i(),l("option",Ge,"Chargement des catégories...")):u("",!0),v.value.length===0&&!g(w)?(i(),l("option",Oe,"Aucune catégorie disponible")):u("",!0),(i(!0),l(S,null,$(v.value,r=>(i(),l("option",{key:r.id,value:r.id},n(r.name),9,Je))),128))],8,Be),[[q,s.category_id]]),e("p",We," Debug: "+n(v.value.length)+" catégories chargées ",1),a.category_id?(i(),l("p",He,n(a.category_id),1)):u("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Condition * ",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.condition=r),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},t[22]||(t[22]=[e("option",{value:""},"État du produit",-1),e("option",{value:"new"},"Neuf",-1),e("option",{value:"used"},"Occasion",-1),e("option",{value:"refurbished"},"Reconditionné",-1)]),512),[[q,s.condition]])]),e("div",Ke,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mode de vente * ",-1)),e("div",Qe,[e("label",{class:b(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-[#0099cc] bg-blue-50":s.sale_mode==="direct"}])},[p(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=r=>s.sale_mode=r),value:"direct",class:"sr-only"},null,512),[[N,s.sale_mode]]),e("div",Xe,[e("div",{class:b(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="direct"?"border-[#0099cc]":"border-gray-300"])},[s.sale_mode==="direct"?(i(),l("div",Ye)):u("",!0)],2),t[24]||(t[24]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Vente directe"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent directement")],-1))])],2),e("label",{class:b(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-purple-500 bg-purple-50":s.sale_mode==="lottery"}])},[p(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>s.sale_mode=r),value:"lottery",class:"sr-only"},null,512),[[N,s.sale_mode]]),e("div",Ze,[e("div",{class:b(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="lottery"?"border-purple-500":"border-gray-300"])},[s.sale_mode==="lottery"?(i(),l("div",et)):u("",!0)],2),t[25]||(t[25]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Tombola"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent des tickets")],-1))])],2)])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Valeur du produit (FCFA) * ",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s.price=r),type:"number",required:"",min:"0",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 800000"},null,512),[[f,s.price]]),a.price?(i(),l("p",tt,n(a.price),1)):s.price&&parseFloat(s.price)<1e3?(i(),l("p",st,"La valeur minimum est de 1000 FCFA")):u("",!0),g(h)&&s.sale_mode==="lottery"&&s.price&&parseFloat(s.price)<1e5?(i(),l("div",ot,t[27]||(t[27]=[e("p",{class:"text-xs text-blue-800"},[e("strong",null,"Recommandation:"),y(" Pour un vendeur individuel avec 500 tickets fixes, un prix produit minimum de 100,000 FCFA est recommandé pour garantir un prix de ticket d'au moins 200 FCFA. ")],-1)]))):u("",!0)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Localisation * ",-1)),p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.location=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: Libreville, Gabon"},null,512),[[f,s.location]])])])])):u("",!0),m.value===2?(i(),l("div",rt,[t[32]||(t[32]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Photos du produit",-1)),e("div",it,[k(Ve,{modelValue:s.imageUrls,"onUpdate:modelValue":t[8]||(t[8]=r=>s.imageUrls=r),"upload-endpoint":"/products/images","max-files":10,"max-size-m-b":5,"help-text":"JPG, PNG, WebP - Max 5MB chacune - La première image sera la photo principale",onSuccess:X,onError:Y,onProgress:Z},null,8,["modelValue"]),e("div",lt,[e("div",at,[k(g(T),{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),t[31]||(t[31]=e("div",{class:"text-sm text-blue-700"},[e("p",{class:"font-medium mb-1"},"Conseils pour de bonnes photos :"),e("ul",{class:"space-y-1 text-sm"},[e("li",null,"• Utilisez un bon éclairage naturel"),e("li",null,"• Prenez plusieurs angles du produit"),e("li",null,"• La première image sera la photo principale"),e("li",null,"• Maximum 10 images par produit"),e("li",null,"• Formats acceptés : JPG, PNG, WebP"),e("li",null,"• Taille maximum : 5MB par image")])],-1))])])])])):u("",!0),m.value===3?(i(),l("div",nt,[s.sale_mode==="direct"?(i(),l("div",dt,[t[37]||(t[37]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de vente directe",-1)),e("div",ct,[t[35]||(t[35]=R('<div class="flex items-center justify-center space-x-3 mb-4"><div class="w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><h3 class="text-lg font-semibold text-gray-900">Vente directe configurée</h3><p class="text-gray-600">Votre produit sera disponible à l&#39;achat immédiat</p></div></div>',1)),e("div",ut,[e("div",mt,[t[33]||(t[33]=e("p",{class:"text-gray-600"},"Prix de vente",-1)),e("p",pt,n(x(s.price))+" FCFA",1)]),e("div",gt,[t[34]||(t[34]=e("p",{class:"text-gray-600"},"Commission plateforme",-1)),e("p",xt,n(x(s.price*.05))+" FCFA (5%)",1)])]),t[36]||(t[36]=e("p",{class:"text-sm text-gray-700 mt-4"}," Les clients pourront acheter votre produit directement au prix affiché. ",-1))])])):s.sale_mode==="lottery"?(i(),l("div",ft,[t[49]||(t[49]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de la tombola",-1)),e("div",yt,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prix par ticket (FCFA) * ",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.ticket_price=r),type:"number",required:"",min:"100",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 2500",onInput:E,onBlur:le},null,544),[[f,s.ticket_price]]),a.ticket_price?(i(),l("p",bt,n(a.ticket_price),1)):s.ticket_price&&parseFloat(s.ticket_price)<100?(i(),l("p",_t,"Le prix minimum est de 100 FCFA")):(i(),l("p",vt,"Minimum 100 FCFA"))]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre de tickets * ",-1)),g(h)?(i(),l("div",kt,[p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.total_tickets=r),type:"number",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-100 cursor-not-allowed",style:{color:"#5f5f5f"}},null,512),[[f,s.total_tickets]]),t[39]||(t[39]=R('<div class="mt-2 bg-yellow-50 border border-yellow-200 rounded-lg p-3"><div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-yellow-800"><strong>Profil Vendeur Individuel:</strong> Le nombre de tickets est fixé à 500 pour garantir un prix de ticket minimum de 200 FCFA. </p></div></div></div>',1))])):(i(),l("div",wt,[p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>s.total_tickets=r),type:"number",required:"",min:"10",max:"10000",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 400",onInput:E,onBlur:ae},null,544),[[f,s.total_tickets]]),a.total_tickets?(i(),l("p",ht,n(a.total_tickets),1)):s.total_tickets&&(parseInt(s.total_tickets)<10||parseInt(s.total_tickets)>1e4)?(i(),l("p",Ct,"Entre 10 et 10,000 tickets")):(i(),l("p",Ft,"Entre 10 et 10,000 tickets"))]))]),e("div",null,[e("label",Vt,n(d.value?.can_customize?"Durée de la tombola *":"Date de fin de vente *"),1),d.value?.can_customize?(i(),l("div",Dt,[e("div",Mt,[p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s.lottery_duration=r),type:"number",required:"",min:d.value.min_days,max:d.value.max_days,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"30",onInput:ne},null,40,jt),[[f,s.lottery_duration]]),t[41]||(t[41]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-600 pointer-events-none"},"jours",-1))]),a.lottery_duration?(i(),l("p",Pt,n(a.lottery_duration),1)):(i(),l("p",It," Entre "+n(d.value.min_days)+" et "+n(d.value.max_days)+" jours ",1))])):d.value&&!d.value.can_customize?(i(),l("div",Ut,[e("div",zt,[e("input",{value:d.value.fixed_duration+" jours",type:"text",readonly:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-100 cursor-not-allowed",style:{color:"#5f5f5f"}},null,8,Et)]),e("div",Lt,[e("div",At,[t[43]||(t[43]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",St,[e("p",$t,[t[42]||(t[42]=e("strong",null,"Profil Vendeur Individuel:",-1)),y(" La durée est fixée à "+n(d.value.fixed_duration)+" jours. ",1)])])])])])):(i(),l("div",qt,[p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>s.end_date=r),type:"datetime-local",required:"",min:J.value,onChange:ie,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},null,40,Nt),[[f,s.end_date]]),a.end_date?(i(),l("p",Tt,n(a.end_date),1)):s.end_date&&new Date(s.end_date)<=new Date?(i(),l("p",Rt,"La date de fin doit être dans le futur")):u("",!0)]))]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tickets minimum pour valider * ",-1)),p(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>s.min_tickets=r),type:"number",required:"",max:s.total_tickets,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 200"},null,8,Bt),[[f,s.min_tickets]]),a.min_tickets?(i(),l("p",Gt,n(a.min_tickets),1)):s.min_tickets&&s.total_tickets&&parseInt(s.min_tickets)>parseInt(s.total_tickets)?(i(),l("p",Ot,"Ne peut pas dépasser le nombre total de tickets")):(i(),l("p",Jt,"Si pas atteint, remboursement automatique"))]),e("div",Wt,[e("div",Ht,[t[48]||(t[48]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Aperçu de la tombola",-1)),e("div",Kt,[e("div",Qt,[e("p",Xt,n(x(M.value.totalRevenue)),1),t[45]||(t[45]=e("p",{class:"text-sm text-gray-600"},"Revenus potentiels",-1))]),e("div",Yt,[e("p",Zt,n(M.value.profitMargin)+"%",1),t[46]||(t[46]=e("p",{class:"text-sm text-gray-600"},"Marge bénéficiaire",-1))]),e("div",es,[e("p",ts,n(x(M.value.platformFee)),1),t[47]||(t[47]=e("p",{class:"text-sm text-gray-600"},"Frais plateforme (5%)",-1))])])])])])])):u("",!0)])):u("",!0),m.value===4?(i(),l("div",ss,[t[68]||(t[68]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Vérification et publication",-1)),e("div",os,[e("div",null,[t[55]||(t[55]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Résumé du produit",-1)),e("div",rs,[e("div",is,[t[50]||(t[50]=e("span",{class:"text-gray-800"},"Nom :",-1)),e("span",ls,n(s.name),1)]),e("div",as,[t[51]||(t[51]=e("span",{class:"text-gray-800"},"Valeur :",-1)),e("span",ns,n(x(s.price))+" FCFA",1)]),e("div",ds,[t[52]||(t[52]=e("span",{class:"text-gray-800"},"Condition :",-1)),e("span",cs,n(ee(s.condition)),1)]),e("div",us,[t[53]||(t[53]=e("span",{class:"text-gray-800"},"Localisation :",-1)),e("span",ms,n(s.location),1)]),e("div",ps,[t[54]||(t[54]=e("span",{class:"text-gray-800"},"Photos :",-1)),e("span",gs,n(s.imageUrls?.length||s.images?.length||0)+" image(s)",1)])])]),e("div",null,[e("h3",xs,n(s.sale_mode==="lottery"?"Configuration tombola":"Configuration vente"),1),s.sale_mode==="direct"?(i(),l("div",fs,[t[59]||(t[59]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-[#0099cc]"},"Vente directe")],-1)),e("div",ys,[t[56]||(t[56]=e("span",{class:"text-gray-800"},"Prix de vente :",-1)),e("span",bs,n(x(s.price))+" FCFA",1)]),e("div",_s,[t[57]||(t[57]=e("span",{class:"text-gray-800"},"Commission (5%) :",-1)),e("span",vs,n(x(s.price*.05))+" FCFA",1)]),e("div",ks,[t[58]||(t[58]=e("span",{class:"text-gray-800"},"Vous recevrez :",-1)),e("span",ws,n(x(s.price*.95))+" FCFA",1)])])):s.sale_mode==="lottery"?(i(),l("div",hs,[t[65]||(t[65]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-purple-600"},"Tombola")],-1)),e("div",Cs,[t[60]||(t[60]=e("span",{class:"text-gray-800"},"Prix/ticket :",-1)),e("span",Fs,n(x(s.ticket_price))+" FCFA",1)]),e("div",Vs,[t[61]||(t[61]=e("span",{class:"text-gray-800"},"Total tickets :",-1)),e("span",Ds,n(s.total_tickets),1)]),e("div",Ms,[t[62]||(t[62]=e("span",{class:"text-gray-800"},"Minimum requis :",-1)),e("span",js,n(s.min_tickets),1)]),e("div",Ps,[t[63]||(t[63]=e("span",{class:"text-gray-800"},"Durée :",-1)),e("span",Is,n(d.value&&!d.value.can_customize?d.value.fixed_duration:s.lottery_duration||L())+" jours ",1)]),e("div",Us,[t[64]||(t[64]=e("span",{class:"text-gray-800"},"Revenus max :",-1)),e("span",zs,n(x(M.value.totalRevenue))+" FCFA",1)])])):u("",!0)])]),e("div",Es,[e("label",Ls,[p(e("input",{"onUpdate:modelValue":t[15]||(t[15]=r=>s.terms_accepted=r),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded"},null,512),[[fe,s.terms_accepted]]),e("span",As,[t[66]||(t[66]=y(" J'accepte les ",-1)),t[67]||(t[67]=e("a",{href:"#",class:"text-[#0099cc] hover:underline"},"conditions de vente",-1)),y(" et confirme que toutes les informations sont exactes. Je comprends que Koumbaya prélèvera des frais de 5% sur les revenus "+n(s.sale_mode==="lottery"?"de la tombola":"de la vente")+". ",1)])])])])):u("",!0),e("div",Ss,[m.value>1?(i(),l("button",{key:0,onClick:Q,type:"button",class:"inline-flex items-center px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[k(g(B),{class:"w-4 h-4 mr-2"}),t[69]||(t[69]=y(" Précédent ",-1))])):(i(),l("div",$s)),e("div",qs," Étape "+n(m.value)+" sur "+n(_.length),1),m.value<_.length?(i(),l("button",{key:2,onClick:K,type:"button",class:"inline-flex items-center px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!j.value||g(w)},[t[70]||(t[70]=y(" Suivant ",-1)),k(g(_e),{class:"w-4 h-4 ml-2"})],8,Ns)):u("",!0),m.value===_.length?(i(),l("button",{key:3,type:"submit",disabled:F.value||!j.value||g(w),class:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors"},[F.value||g(w)?(i(),l("span",Rs,[t[71]||(t[71]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1)),y(" "+n(F.value?"Publication...":"Chargement..."),1)])):(i(),l("span",Bs,[k(g(G),{class:"w-4 h-4 mr-2"}),t[72]||(t[72]=y(" Publier le produit ",-1))]))],8,Ts)):u("",!0)])],32)])}}};export{Qs as default};
