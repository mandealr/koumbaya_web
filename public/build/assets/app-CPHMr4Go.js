const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MerchantLayout-_68WApCP.js","assets/vendor-CTxEzfV9.js","assets/Dashboard-Bw3dCbIm.js","assets/Products-CdKorkCU.js","assets/RocketLaunchIcon-Cq_GBda_.js","assets/CreateProduct-iOjsvOlH.js","assets/EditProduct-D59ntKI6.js","assets/Orders-BmnfdGfy.js","assets/LotteriesSimple-Dfj9NeDt.js","assets/LotteryView-rMwI2wQV.js","assets/Analytics-CrhLok2U.js","assets/Settings-BqcxiZKz.js","assets/Profile-BoczXX68.js"])))=>i.map(i=>d[i]);
import{a as rs,r as V,d as Cs,c as re,b as s,e,o as t,f as ie,u as l,g as ue,h as rt,i as p,j as R,w as oe,k as fe,t as o,l as U,m as be,F as te,n as se,p as de,q as Q,s as qe,v as Ce,x as me,y as Ae,z as xe,A as G,B as ee,C as lt,D as _e,E as ne,G as Me,H as js,I as $t,J as As,K as Ps,L as Ms,T as Es,M as Ss,N as Ds,O as Ts}from"./vendor-CTxEzfV9.js";window.axios=rs;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Is="modulepreload",Ls=function(d){return"/build/"+d},Xt={},Le=function(m,T,M){let u=Promise.resolve();if(T&&T.length>0){let n=function(y){return Promise.all(y.map(j=>Promise.resolve(j).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),A=h?.nonce||h?.getAttribute("nonce");u=n(T.map(y=>{if(y=Ls(y),y in Xt)return;Xt[y]=!0;const j=y.endsWith(".css"),E=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const f=document.createElement("link");if(f.rel=j?"stylesheet":Is,j||(f.as="script"),f.crossOrigin="",f.href=y,A&&f.setAttribute("nonce",A),document.head.appendChild(f),j)return new Promise((_,I)=>{f.addEventListener("load",_),f.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${y}`)))})}))}function r(h){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=h,window.dispatchEvent(A),!A.defaultPrevented)throw h}return u.then(h=>{for(const A of h||[])A.status==="rejected"&&r(A.reason);return m().catch(r)})},Se=rs.create({baseURL:"https://koumbaya.com/api",headers:{Accept:"application/json"}});Se.interceptors.request.use(d=>{const m=localStorage.getItem("auth_token");return m&&(d.headers.Authorization=`Bearer ${m}`),d},d=>Promise.reject(d));Se.interceptors.response.use(d=>d,d=>{const m=localStorage.getItem("auth_token");return d.response?.status===401&&!d.config?.url?.includes("/auth/login")&&m&&(localStorage.removeItem("auth_token"),window.router?window.router.push("/login"):window.location.href="/login"),Promise.reject(d)});function le(){const d=V(!1),m=V(null),T=async A=>{d.value=!0,m.value=null;try{return(await A()).data}catch(n){throw m.value=n.response?.data?.message||n.message||"Une erreur est survenue",n}finally{d.value=!1}};return{loading:d,error:m,get:(A,n={})=>T(()=>Se.get(A,n)),post:(A,n={},y={})=>{if(n instanceof FormData){const E={...y};return E.headers&&delete E.headers["Content-Type"],T(()=>Se.post(A,n,{...E,headers:{...E.headers}}))}const j={...y,headers:{"Content-Type":"application/json",...y.headers}};return T(()=>Se.post(A,n,j))},put:(A,n={},y={})=>T(()=>Se.put(A,n,y)),delete:(A,n={})=>T(()=>Se.delete(A,n)),api:Se}}const we=Cs("auth",()=>{const d=V(null),m=V(localStorage.getItem("auth_token")),T=V(!1),M=V(""),u=re(()=>!!m.value&&!!d.value),r=re(()=>{if(d.value?.userType?.name==="MANAGER"||d.value?.user_type_id===1)return!0;if(d.value?.roles&&Array.isArray(d.value.roles)){const L=["Super Admin","Admin","Agent","Agent Back Office"];return d.value.roles.some(Y=>L.includes(Y.name))}return d.value?.email?["superadmin@koumbaya.ga","admin@koumbaya.ga","agent@koumbaya.ga","backoffice@koumbaya.ga"].includes(d.value.email):!1}),h=re(()=>{if(d.value?.roles&&Array.isArray(d.value.roles)){const L=["Super Admin","Admin"];return d.value.roles.some(Y=>L.includes(Y.name))}return d.value?.email?.includes("superadmin")?!0:d.value?.email?["superadmin@koumbaya.ga","admin@koumbaya.ga"].includes(d.value.email):!1}),A=re(()=>{if(d.value?.roles&&Array.isArray(d.value.roles)){const L=["Agent","Agent Back Office"];return d.value.roles.some(Y=>L.includes(Y.name))}return d.value?.email?["agent@koumbaya.ga","backoffice@koumbaya.ga"].includes(d.value.email):!1}),n=re(()=>d.value?.roles&&Array.isArray(d.value.roles)?d.value.roles.some(L=>L.name==="Business"):d.value?.can_sell&&d.value?.account_type==="business"?!0:d.value?.email?["business@koumbaya.ga","business2@koumbaya.ga"].includes(d.value.email):!1),y=re(()=>r.value?!1:d.value?.roles&&Array.isArray(d.value.roles)?d.value.roles.some(L=>L.name==="Particulier"):d.value?.account_type==="personal"?!0:!r.value&&!n.value),j=re(()=>d.value?.account_type==="business"||d.value?.roles?.some(L=>L.name==="Business")),E=re(()=>d.value?.account_type==="personal"||d.value?.roles?.some(L=>L.name==="Particulier")),f=re(()=>d.value?.can_sell===!0||j.value||d.value?.roles?.some(L=>L.name==="Business"));async function _(L){T.value=!0,M.value="";try{const Y=await Se.post("/auth/login",L),{access_token:J,user:z}=Y.data;return m.value=J,d.value=z,localStorage.setItem("auth_token",J),{success:!0}}catch(Y){let J="Erreur de connexion";if(Y.response?.status===401)J="Identifiants incorrects";else if(Y.response?.status===429)J="Trop de tentatives. Veuillez patienter.";else if(Y.response?.status===422){const z=Y.response?.data?.errors;z?J=Object.values(z).flat().join(", "):J=Y.response?.data?.message||"Données invalides"}else Y.response?J=Y.response?.data?.error||Y.response?.data?.message||"Erreur de connexion":J="Problème de connexion réseau";return M.value=J,{success:!1,error:J}}finally{T.value=!1}}async function I(L){T.value=!0,M.value="";try{const Y=await Se.post("/auth/register",L),{access_token:J,user:z}=Y.data;return m.value=J,d.value=z,localStorage.setItem("auth_token",J),{success:!0}}catch(Y){return M.value=Y.response?.data?.error||Y.response?.data?.message||"Erreur lors de l'inscription",{success:!1,error:M.value}}finally{T.value=!1}}async function F(){try{await Se.post("/auth/logout")}catch(L){console.error("Erreur lors de la déconnexion:",L)}finally{d.value=null,m.value=null,localStorage.removeItem("auth_token")}}async function C(){if(m.value)try{const L=await Se.get("/auth/me");d.value=L.data.user}catch{d.value=null,m.value=null,localStorage.removeItem("auth_token")}}async function x(){if(u.value)try{const L=await Se.get("/auth/me");d.value=L.data.user}catch(L){console.error("Erreur lors du rafraîchissement:",L)}}function c(){M.value=""}function a(L){M.value=L}function v(L){d.value=L}function i(L){m.value=L,L?localStorage.setItem("auth_token",L):localStorage.removeItem("auth_token")}function $(){return d.value?(console.log("🔄 Logique de redirection:",{email:d.value?.email,user:d.value,roles:d.value?.roles,isManager:r.value,isAdmin:h.value,isAgent:A.value,isMerchant:n.value,isCustomer:y.value,account_type:d.value?.account_type,roles:d.value?.roles?.map(L=>L.name)}),r.value?(console.log("✅ Redirection vers admin.dashboard (Manager)"),"admin.dashboard"):d.value?.roles&&Array.isArray(d.value.roles)&&d.value.roles.some(Y=>Y.name==="Business")?(console.log("✅ Redirection vers merchant.dashboard (Business)"),"merchant.dashboard"):(console.log("✅ Redirection vers customer.dashboard (Customer par défaut)"),"customer.dashboard")):"home"}return{user:d,token:m,loading:T,error:M,isAuthenticated:u,isManager:r,isAdmin:h,isAgent:A,isMerchant:n,isCustomer:y,isBusiness:j,isPersonal:E,canSell:f,login:_,register:I,logout:F,checkAuth:C,refreshUser:x,clearError:c,setError:a,setUser:v,setToken:i,getDefaultRedirect:$}}),as="/build/logo.png";function Vs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function zt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})])}function kt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function Ne(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function tt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function Xe(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function ns(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"})])}function Fs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})])}function dt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function Nt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function ct(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function Rs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})])}function Ut(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function qs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})])}function Ct(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function Jt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function is(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function Te(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function pe(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function jt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function zs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Pe(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ns(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function Yt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Ze(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}function ls(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"})])}function Us(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"})])}function Ke(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}function Ue(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function it(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})])}function mt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Bs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Os(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function st(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function je(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})])}function He(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function ut(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Fe(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Hs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"})])}function Ye(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function Gs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}function Ks(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})])}function Qt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function Oe(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function Ws(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"})])}function Bt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}function ot(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function Ft(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])}function Zs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}function yt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function Je(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function Rt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function ds(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function Xs(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}function at(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}function Be(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function Js(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})])}function xt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function _t(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function De(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"})])}function bt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function Ge(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})])}function Ot(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})])}function us(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}function Ve(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function pt(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function Ys(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}function At(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Re(d,m){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const We="/build/assets/logo-ZbB75Npb.png",$e=(d,m)=>{const T=d.__vccOpts||d;for(const[M,u]of m)T[M]=u;return T},Qs={class:"bg-white border-t border-gray-200 mt-12"},eo={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},to={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},so={class:"col-span-1 md:col-span-2 lg:col-span-1"},oo={class:"flex items-center"},ro=["src"],ao={__name:"KoumbayaFooter",setup(d){return(m,T)=>(t(),s("footer",Qs,[e("div",eo,[e("div",to,[e("div",so,[e("div",oo,[e("img",{src:l(We),alt:"Koumbaya",class:"h-15 w-auto"},null,8,ro)]),T[0]||(T[0]=ie('<p class="mt-4 text-gray-600 text-sm leading-relaxed" data-v-97bf4cec> La marketplace innovante qui vous permet d&#39;acquérir des produits premium à prix imbattables grâce aux tombolas équitables. </p><div class="mt-6 flex space-x-4" data-v-97bf4cec><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>Facebook</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" data-v-97bf4cec></path></svg></a><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>Instagram</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path fill-rule="evenodd" d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.618 5.367 11.986 11.988 11.986s11.987-5.368 11.987-11.986C24.004 5.367 18.635.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.68 13.729 3.68 12.417s.518-2.478 1.446-3.274c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.928.796 1.446 1.962 1.446 3.274s-.518 2.478-1.446 3.274c-.875.807-2.026 1.297-3.323 1.297zm7.718 0c-1.297 0-2.448-.49-3.323-1.297-.928-.796-1.446-1.962-1.446-3.274s.518-2.478 1.446-3.274c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.928.796 1.446 1.962 1.446 3.274s-.518 2.478-1.446 3.274c-.875.807-2.026 1.297-3.323 1.297z" clip-rule="evenodd" data-v-97bf4cec></path></svg></a><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>Twitter</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" data-v-97bf4cec></path></svg></a><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>LinkedIn</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" data-v-97bf4cec></path></svg></a></div>',2))]),T[1]||(T[1]=ie('<div data-v-97bf4cec><h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4" data-v-97bf4cec> Informations sur l&#39;entreprise </h3><ul class="space-y-3" data-v-97bf4cec><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>À propos de Koumbaya</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Affiliés &amp; Influenceurs</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Gagnez des Gombos</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Nous contacter</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Carrières</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Media &amp; Presse</a></li></ul></div><div data-v-97bf4cec><h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4" data-v-97bf4cec> Service client </h3><ul class="space-y-3" data-v-97bf4cec><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Participation aux tombolas</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Politique de propriété intellectuelle</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Informations sur la réception des commandes</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Signaler une activité suspecte</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Centre d&#39;assistance</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Centre de sécurité</a></li></ul></div><div data-v-97bf4cec><h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4" data-v-97bf4cec> Centre d&#39;Assistance </h3><ul class="space-y-3" data-v-97bf4cec><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Centre de Sécurité</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Avoir la paix sur Koumbaya</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Plan du site</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors font-medium" data-v-97bf4cec>Vendre sur Koumbaya</a></li></ul></div>',3))]),T[2]||(T[2]=ie('<div class="mt-12 pt-8 border-t border-gray-200" data-v-97bf4cec><div class="flex flex-col md:flex-row justify-between items-center" data-v-97bf4cec><div class="flex flex-wrap items-center space-x-6 mb-4 md:mb-0" data-v-97bf4cec><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Conditions d&#39;utilisation</a><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Politique de confidentialité</a><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Mentions légales</a><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Cookies</a></div><div class="text-sm text-gray-500" data-v-97bf4cec> © 2025 Koumbaya. Tous droits réservés. </div></div></div>',1))])]))}},cs=$e(ao,[["__scopeId","data-v-97bf4cec"]]),no={class:"min-h-screen bg-gray-50"},io={class:"bg-white shadow-sm"},lo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},uo={class:"flex justify-between items-center h-16"},co={key:1,class:"flex items-center space-x-1 sm:space-x-2"},mo={class:"hidden md:flex space-x-8"},po={class:"flex items-center space-x-2 sm:space-x-4"},go={key:0,class:"flex items-center space-x-2 sm:space-x-4"},vo={class:"relative"},fo={class:"w-8 h-8 bg-[#0099cc] rounded-full flex items-center justify-center"},xo={class:"text-sm font-medium text-white"},bo={class:"px-4 py-2 text-sm text-gray-700 border-b border-gray-100"},ho={class:"font-medium"},yo={class:"text-xs text-gray-500"},_o={key:1,class:"flex items-center space-x-2 sm:space-x-4"},wo={key:0,class:"md:hidden border-t border-gray-200 bg-white"},$o={class:"px-4 py-3 space-y-1"},ko={class:"border-t border-gray-200 pt-4 mt-4"},Co={key:0,class:"space-y-2"},jo={class:"px-3 py-2 text-sm text-gray-600"},Ao={key:1,class:"space-y-2"},Po={__name:"GuestLayout",setup(d){const m=be(),T=we(),M=V(!1),u=V(!1),r=V(!1),h=re(()=>{const E=T.user;return E?(E.first_name?.[0]||"")+(E.last_name?.[0]||""):"U"}),A=re(()=>{const E=T.getDefaultRedirect();return{"admin.dashboard":"/admin","merchant.dashboard":"/merchant/dashboard","customer.dashboard":"/customer"}[E]||"/customer"}),n=async()=>{u.value=!1,await T.logout(),m.push({name:"login"})},y=()=>{r.value=!0},j=E=>{E.target.closest(".relative")||(u.value=!1)};return ue(()=>{document.addEventListener("click",j)}),rt(()=>{document.removeEventListener("click",j)}),(E,f)=>{const _=fe("router-link"),I=fe("router-view");return t(),s("div",no,[e("header",io,[e("div",lo,[e("div",uo,[p(_,{to:"/",class:"flex items-center min-w-0 flex-shrink-0"},{default:oe(()=>[r.value?(t(),s("div",co,f[11]||(f[11]=[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-[#0099cc] rounded flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white font-bold text-sm sm:text-lg"},"K")],-1),e("span",{class:"text-lg sm:text-xl font-bold text-[#0099cc] whitespace-nowrap"},"Koumbaya",-1)]))):(t(),s("img",{key:0,src:as,alt:"Koumbaya",class:"h-8 sm:h-10 w-auto object-contain max-w-none",onError:y},null,32))]),_:1}),e("nav",mo,[p(_,{to:"/",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:oe(()=>f[12]||(f[12]=[U(" Accueil ",-1)])),_:1,__:[12]}),p(_,{to:"/products",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:oe(()=>f[13]||(f[13]=[U(" Produits ",-1)])),_:1,__:[13]}),p(_,{to:"/how-it-works",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:oe(()=>f[14]||(f[14]=[U(" Comment ça marche ",-1)])),_:1,__:[14]}),p(_,{to:"/contact",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:oe(()=>f[15]||(f[15]=[U(" Contact ",-1)])),_:1,__:[15]})]),e("div",po,[l(T).isAuthenticated?(t(),s("div",go,[p(_,{to:A.value,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center whitespace-nowrap"},{default:oe(()=>[p(l(Ve),{class:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2 flex-shrink-0"}),f[16]||(f[16]=e("span",{class:"hidden sm:inline"},"Mon Espace",-1)),f[17]||(f[17]=e("span",{class:"sm:hidden"},"Espace",-1))]),_:1,__:[16,17]},8,["to"]),e("div",vo,[e("button",{onClick:f[0]||(f[0]=F=>u.value=!u.value),class:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100"},[e("div",fo,[e("span",xo,o(h.value),1)]),p(l(jt),{class:"w-4 h-4 text-gray-500"})]),u.value?(t(),s("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",onClick:f[2]||(f[2]=F=>u.value=!1)},[e("div",bo,[e("p",ho,o(l(T).user?.first_name)+" "+o(l(T).user?.last_name),1),e("p",yo,o(l(T).user?.email),1)]),p(_,{to:A.value,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:f[1]||(f[1]=F=>u.value=!1)},{default:oe(()=>[p(l(Ve),{class:"w-4 h-4 inline mr-2"}),f[18]||(f[18]=U(" Mon Espace ",-1))]),_:1,__:[18]},8,["to"]),e("button",{onClick:n,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[p(l(tt),{class:"w-4 h-4 inline mr-2"}),f[19]||(f[19]=U(" Se déconnecter ",-1))])])):R("",!0)])])):(t(),s("div",_o,[p(_,{to:"/login",class:"text-gray-600 hover:text-[#0099cc] px-2 sm:px-3 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap"},{default:oe(()=>f[20]||(f[20]=[e("span",{class:"hidden sm:inline"},"Se connecter",-1),e("span",{class:"sm:hidden"},"Connexion",-1)])),_:1,__:[20]}),p(_,{to:"/register",class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap"},{default:oe(()=>f[21]||(f[21]=[U(" S'inscrire ",-1)])),_:1,__:[21]})])),e("button",{onClick:f[3]||(f[3]=F=>M.value=!M.value),class:"md:hidden p-1 sm:p-2 rounded-md text-gray-400 hover:text-gray-600 flex-shrink-0"},[p(l(Nt),{class:"w-5 h-5 sm:w-6 sm:h-6"})])])])]),M.value?(t(),s("div",wo,[e("div",$o,[p(_,{to:"/",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:f[4]||(f[4]=F=>M.value=!1)},{default:oe(()=>f[22]||(f[22]=[U(" Accueil ",-1)])),_:1,__:[22]}),p(_,{to:"/products",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:f[5]||(f[5]=F=>M.value=!1)},{default:oe(()=>f[23]||(f[23]=[U(" Produits ",-1)])),_:1,__:[23]}),p(_,{to:"/how-it-works",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:f[6]||(f[6]=F=>M.value=!1)},{default:oe(()=>f[24]||(f[24]=[U(" Comment ça marche ",-1)])),_:1,__:[24]}),p(_,{to:"/contact",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:f[7]||(f[7]=F=>M.value=!1)},{default:oe(()=>f[25]||(f[25]=[U(" Contact ",-1)])),_:1,__:[25]}),e("div",ko,[l(T).isAuthenticated?(t(),s("div",Co,[p(_,{to:A.value,class:"block px-3 py-2 rounded-md text-base font-medium bg-[#0099cc] text-white hover:bg-[#0088bb] flex items-center",onClick:f[8]||(f[8]=F=>M.value=!1)},{default:oe(()=>[p(l(Ve),{class:"w-5 h-5 mr-2"}),f[26]||(f[26]=U(" Mon Espace ",-1))]),_:1,__:[26]},8,["to"]),e("div",jo,o(l(T).user?.first_name)+" "+o(l(T).user?.last_name),1),e("button",{onClick:n,class:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5"},[p(l(tt),{class:"w-5 h-5 inline mr-2"}),f[27]||(f[27]=U(" Se déconnecter ",-1))])])):(t(),s("div",Ao,[p(_,{to:"/login",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:f[9]||(f[9]=F=>M.value=!1)},{default:oe(()=>f[28]||(f[28]=[U(" Se connecter ",-1)])),_:1,__:[28]}),p(_,{to:"/register",class:"block px-3 py-2 rounded-md text-base font-medium bg-[#0099cc] text-white hover:bg-[#0088bb]",onClick:f[10]||(f[10]=F=>M.value=!1)},{default:oe(()=>f[29]||(f[29]=[U(" S'inscrire ",-1)])),_:1,__:[29]})]))])])])):R("",!0)]),e("main",null,[p(I)]),p(cs)])}}},Mo={key:0,class:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-4 mb-6 shadow-sm"},Eo={class:"flex items-start"},So={class:"flex-shrink-0"},Do={class:"ml-3 flex-1"},To={class:"flex flex-col sm:flex-row gap-2"},Io=["disabled"],Lo={key:0},Vo={key:1,class:"flex items-center"},Fo={class:"flex-shrink-0 ml-2"},Ro={__name:"VerificationBanner",setup(d){const m=we(),{post:T}=le(),M=V(!1),u=V(!1),r=re(()=>m.user),h=re(()=>!u.value),A=async()=>{M.value=!0;try{const j=await T("/auth/resend-verification",{email:r.value.email});window.$toast&&window.$toast.success(`Un nouvel email de vérification a été envoyé à ${r.value.email}. Vérifiez votre boîte email.`,"✅ Email envoyé",8e3),setTimeout(()=>{u.value=!0,localStorage.setItem("verification_banner_hidden_until",Date.now()+1800*1e3)},2e3)}catch(j){console.error("Erreur lors de l'envoi de l'email de vérification:",j);let E="Une erreur est survenue lors de l'envoi de l'email.";j.response?.status===429?E="Trop de tentatives. Veuillez patienter avant de renvoyer un email.":j.response?.data?.message&&(E=j.response.data.message),window.$toast&&window.$toast.error(E,"Erreur")}finally{M.value=!1}},n=()=>{u.value=!0,localStorage.setItem("verification_banner_hidden_until",Date.now()+3600*1e3)},y=localStorage.getItem("verification_banner_hidden_until");return y&&Date.now()<parseInt(y)&&(u.value=!0),(j,E)=>r.value&&!r.value.verified_at&&h.value?(t(),s("div",Mo,[e("div",Eo,[e("div",So,[p(l(He),{class:"h-6 w-6 text-yellow-600"})]),e("div",Do,[E[1]||(E[1]=e("h3",{class:"text-sm font-semibold text-yellow-800 mb-1"}," Compte non vérifié ",-1)),E[2]||(E[2]=e("p",{class:"text-sm text-yellow-700 mb-3"}," Votre compte n'est pas encore vérifié. Certaines fonctionnalités peuvent être limitées. ",-1)),e("div",To,[e("button",{onClick:A,disabled:M.value,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-lg text-yellow-800 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors disabled:opacity-50"},[M.value?(t(),s("span",Vo,E[0]||(E[0]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-yellow-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),U(" Envoi en cours... ",-1)]))):(t(),s("span",Lo,"Renvoyer l'email de vérification"))],8,Io),e("button",{onClick:n,class:"inline-flex items-center px-3 py-2 text-sm leading-4 font-medium rounded-lg text-yellow-600 hover:text-yellow-800 transition-colors"}," Masquer ")])]),e("div",Fo,[e("button",{onClick:n,class:"inline-flex rounded-lg p-1.5 text-yellow-400 hover:text-yellow-600 hover:bg-yellow-100 transition-colors"},[p(l(Re),{class:"h-4 w-4"})])])])])):R("",!0)}},qo={class:"min-h-screen bg-gray-50"},zo={class:"bg-white shadow-sm border-b border-gray-200"},No={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Uo={class:"flex justify-between items-center h-16"},Bo={class:"flex items-center min-w-0 flex-shrink-0"},Oo={key:1,class:"flex items-center space-x-1 sm:space-x-2"},Ho={class:"hidden md:flex space-x-8"},Go={class:"flex items-center space-x-2 sm:space-x-4"},Ko={class:"p-1 sm:p-2 text-gray-400 hover:text-gray-600 relative"},Wo={key:0,class:"absolute top-0 right-0 block h-2 w-2 bg-red-400 rounded-full"},Zo={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold"},Xo={class:"relative"},Jo={class:"w-7 h-7 sm:w-8 sm:h-8 bg-[#0099cc] rounded-full flex items-center justify-center flex-shrink-0"},Yo={class:"text-xs sm:text-sm font-medium text-white"},Qo={class:"hidden md:block text-left min-w-0"},er={class:"text-sm font-medium text-gray-700 truncate"},tr={class:"text-xs text-gray-500 truncate"},sr={key:0,class:"md:hidden border-t border-gray-200 bg-white"},or={class:"px-4 py-3 space-y-1"},rr={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},ar={__name:"CustomerLayout",setup(d){const m=we(),T=be(),{get:M}=le(),u=V(!1),r=V(!1),h=V(!1),A=V(0),n=[{name:"customer.dashboard",to:{name:"customer.dashboard"},label:"Accueil"},{name:"customer.products",to:{name:"customer.products"},label:"Produits"},{name:"customer.tickets",to:{name:"customer.tickets"},label:"Mes Tickets"},{name:"customer.orders",to:{name:"customer.orders"},label:"Mes Commandes"}],y=re(()=>{const F=m.user;return F?(F.first_name?.[0]||"")+(F.last_name?.[0]||""):"U"}),j=re(()=>m.isAuthenticated&&m.user&&!m.user.verified_at),E=async()=>{await m.logout(),T.push({name:"login"})},f=()=>{h.value=!0},_=F=>{F.target.closest(".relative")||(u.value=!1)},I=async()=>{try{const F=await M("/notifications/unread-count");F&&F.data&&F.data.unread_count!==void 0&&(A.value=F.data.unread_count)}catch(F){console.error("Erreur lors du chargement des notifications:",F),A.value=0}};return ue(()=>{document.addEventListener("click",_),I();const F=setInterval(I,120*1e3);rt(()=>{document.removeEventListener("click",_),clearInterval(F)})}),(F,C)=>{const x=fe("router-link"),c=fe("router-view");return t(),s("div",qo,[e("header",zo,[e("div",No,[e("div",Uo,[e("div",Bo,[p(x,{to:"/customer",class:"flex items-center"},{default:oe(()=>[h.value?(t(),s("div",Oo,C[7]||(C[7]=[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-[#0099cc] rounded flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white font-bold text-sm sm:text-lg"},"K")],-1),e("span",{class:"text-lg sm:text-xl font-bold text-[#0099cc] whitespace-nowrap"},"Koumbaya",-1)]))):(t(),s("img",{key:0,class:"h-8 sm:h-10 w-auto object-contain max-w-none",src:as,alt:"Koumbaya Marketplace",onError:f},null,32))]),_:1})]),e("nav",Ho,[(t(),s(te,null,se(n,a=>p(x,{key:a.name,to:a.to,class:Q(["px-3 py-2 rounded-md text-sm font-medium transition-colors",F.$route.name===a.name?"text-white bg-[#0099cc]":"text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5"])},{default:oe(()=>[U(o(a.label),1)]),_:2},1032,["to","class"])),64))]),e("div",Go,[e("button",Ko,[p(l(ct),{class:"w-5 h-5 sm:w-6 sm:h-6"}),A.value>0?(t(),s("span",Wo)):R("",!0),A.value>9?(t(),s("span",Zo,o(A.value>99?"99+":A.value),1)):R("",!0)]),e("div",Xo,[e("button",{onClick:C[0]||(C[0]=a=>u.value=!u.value),class:"flex items-center space-x-1 sm:space-x-3 p-1 sm:p-2 rounded-lg hover:bg-gray-100"},[e("div",Jo,[e("span",Yo,o(y.value),1)]),e("div",Qo,[e("p",er,o(l(m).user?.first_name),1),e("p",tr,o(l(m).user?.email),1)]),p(l(jt),{class:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 flex-shrink-0"})]),u.value?(t(),s("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",onClick:C[4]||(C[4]=a=>u.value=!1)},[p(x,{to:"/customer/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:C[1]||(C[1]=a=>u.value=!1)},{default:oe(()=>[p(l(Ve),{class:"w-4 h-4 inline mr-2"}),C[8]||(C[8]=U(" Mon Profil ",-1))]),_:1,__:[8]}),p(x,{to:"/customer/tickets",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:C[2]||(C[2]=a=>u.value=!1)},{default:oe(()=>[p(l(De),{class:"w-4 h-4 inline mr-2"}),C[9]||(C[9]=U(" Mes Tickets ",-1))]),_:1,__:[9]}),p(x,{to:"/customer/payments",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:C[3]||(C[3]=a=>u.value=!1)},{default:oe(()=>[p(l(Ke),{class:"w-4 h-4 inline mr-2"}),C[10]||(C[10]=U(" Mes Paiements ",-1))]),_:1,__:[10]}),C[12]||(C[12]=e("div",{class:"border-t border-gray-100 my-1"},null,-1)),e("button",{onClick:E,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[p(l(tt),{class:"w-4 h-4 inline mr-2"}),C[11]||(C[11]=U(" Se déconnecter ",-1))])])):R("",!0)]),e("button",{onClick:C[5]||(C[5]=a=>r.value=!r.value),class:"md:hidden p-1 sm:p-2 rounded-md text-gray-400 hover:text-gray-600 flex-shrink-0"},[p(l(Nt),{class:"w-5 h-5 sm:w-6 sm:h-6"})])])])]),r.value?(t(),s("div",sr,[e("div",or,[(t(),s(te,null,se(n,a=>p(x,{key:a.name,to:a.to,class:Q(["block px-3 py-2 rounded-md text-base font-medium",F.$route.name===a.name?"text-[#0099cc] bg-blue-50":"text-gray-600 hover:text-[#0099cc] hover:bg-blue-50"]),onClick:C[6]||(C[6]=v=>r.value=!1)},{default:oe(()=>[U(o(a.label),1)]),_:2},1032,["to","class"])),64))])])):R("",!0)]),e("main",rr,[j.value?(t(),de(Ro,{key:0})):R("",!0),p(c)]),p(cs)])}}},nr="/build/icon.png",ir={class:"min-h-screen admin-layout"},lr={class:"flex items-center justify-between h-16 px-6 border-b border-gray-700"},dr={class:"flex items-center space-x-3"},ur={class:"w-8 h-8 bg-white rounded-lg flex items-center justify-center p-1"},cr=["src"],mr={class:"mt-6 flex-1"},pr={class:"px-3 space-y-1"},gr={class:"font-medium"},vr={key:0,class:"ml-auto bg-orange-500 text-white text-xs px-2 py-1 rounded-full"},fr={class:"absolute bottom-4 left-0 right-0 px-3"},xr={class:"bg-gray-700 rounded-lg p-4"},br={class:"flex items-center space-x-3"},hr={class:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center"},yr={class:"flex-1 min-w-0"},_r={class:"text-sm font-medium text-white truncate"},wr={class:"lg:pl-72"},$r={class:"admin-header sticky top-0 z-30"},kr={class:"flex items-center justify-between px-6 py-4"},Cr={class:"flex items-center space-x-4"},jr={class:"hidden lg:flex items-center space-x-2 text-sm"},Ar={class:"text-gray-600"},Pr={class:"flex items-center space-x-4"},Mr={class:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},Er={class:"hidden md:flex items-center"},Sr={class:"relative"},Dr={class:"relative"},Tr={class:"w-8 h-8 bg-[#0099cc] rounded-lg flex items-center justify-center"},Ir={class:"text-sm font-semibold text-white"},Lr={class:"hidden md:block text-left"},Vr={class:"text-sm font-semibold text-gray-800"},Fr={class:"px-4 py-3 border-b border-gray-100"},Rr={class:"text-sm font-medium text-gray-800"},qr={class:"text-xs text-gray-500"},zr={class:"border-t border-gray-100 mt-2 pt-2"},Nr={class:"p-6"},Ur={__name:"AdminLayout",setup(d){const m=we(),T=be(),M=qe(),{get:u}=le(),r=V(!0),h=V(!1),A=V({users:0,lotteries:0,refunds:0}),n=re(()=>[{name:"admin.dashboard",to:{name:"admin.dashboard"},label:"Tableau de bord",icon:Qt},{name:"admin.users",to:{name:"admin.users"},label:"Utilisateurs",icon:pt,badge:A.value.users>0?A.value.users.toString():null},{name:"admin.products",to:{name:"admin.products"},label:"Produits",icon:Be},{name:"admin.lotteries",to:{name:"admin.lotteries"},label:"Tombolas",icon:Ye,badge:A.value.lotteries>0?A.value.lotteries.toString():null},{name:"admin.refunds",to:{name:"admin.refunds"},label:"Remboursements",icon:Ue,badge:A.value.refunds>0?A.value.refunds.toString():null},{name:"admin.payments",to:{name:"admin.payments"},label:"Paiements",icon:Ue},{name:"admin.settings",to:{name:"admin.settings"},label:"Paramètres",icon:Yt}]),y=re(()=>n.value.find(F=>F.name===M.name)?.label||"Page"),j=async()=>{try{const I=await u("/admin/dashboard/stats");I?.data?.users&&(A.value.users=I.data.users.growth>0?Math.ceil(I.data.users.total*(I.data.users.growth/100)):0);const F=await u("/admin/lotteries?status=active");if(F?.data?.lotteries){const x=F.data.lotteries.filter(c=>{const i=(new Date(c.end_date)-new Date)/(1e3*60*60);return i<=24&&i>0});A.value.lotteries=x.length}const C=await u("/admin/refunds?status=pending");C?.data?.refunds&&(A.value.refunds=C.data.refunds.length)}catch(I){console.error("Erreur lors du chargement des compteurs de badges:",I)}},E=re(()=>{const I=m.user;return I?(I.first_name?.[0]||"")+(I.last_name?.[0]||""):"AD"}),f=async()=>{await m.logout(),T.push({name:"login"})},_=I=>{I.target.closest(".relative")||(h.value=!1)};return ue(()=>{document.addEventListener("click",_),j();const I=setInterval(j,300*1e3);rt(()=>{document.removeEventListener("click",_),clearInterval(I)})}),(I,F)=>{const C=fe("router-link"),x=fe("router-view");return t(),s("div",ir,[e("aside",{class:Q(["fixed inset-y-0 left-0 z-50 w-72 admin-sidebar transform transition-transform duration-300 ease-in-out lg:translate-x-0",{"-translate-x-full lg:translate-x-0":!r.value,"translate-x-0":r.value}])},[e("div",lr,[e("div",dr,[e("div",ur,[e("img",{src:l(nr),alt:"Koumbaya",class:"w-full h-full object-contain"},null,8,cr)]),F[6]||(F[6]=e("div",{class:"text-white"},[e("h1",{class:"text-lg font-bold"},"Koumbaya"),e("p",{class:"text-xs text-gray-300"},"Administration")],-1))])]),e("nav",mr,[e("div",pr,[(t(!0),s(te,null,se(n.value,c=>(t(),de(C,{key:c.name,to:c.to,class:Q(["admin-sidebar-item",I.$route.name===c.name?"active":""])},{default:oe(()=>[(t(),de(Ce(c.icon),{class:"w-5 h-5 mr-3"})),e("span",gr,o(c.label),1),c.badge?(t(),s("span",vr,o(c.badge),1)):R("",!0)]),_:2},1032,["to","class"]))),128))]),e("div",fr,[e("div",xr,[e("div",br,[e("div",hr,[p(l(Ve),{class:"w-5 h-5 text-gray-300"})]),e("div",yr,[e("p",_r,o(l(m).user?.first_name)+" "+o(l(m).user?.last_name),1),F[7]||(F[7]=e("p",{class:"text-xs text-gray-300 truncate"},"Super Administrateur",-1))]),e("button",{onClick:f,class:"text-gray-300 hover:text-white transition-colors",title:"Se déconnecter"},[p(l(tt),{class:"w-5 h-5"})])])])])])],2),r.value?(t(),s("div",{key:0,class:"fixed inset-0 z-40 bg-black/20 lg:hidden",onClick:F[0]||(F[0]=c=>r.value=!1)})):R("",!0),e("div",wr,[e("header",$r,[e("div",kr,[e("div",Cr,[e("button",{onClick:F[1]||(F[1]=c=>r.value=!r.value),class:"lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors"},[p(l(Nt),{class:"w-6 h-6"})]),e("nav",jr,[p(l(Qt),{class:"w-4 h-4 text-gray-400"}),p(l(zs),{class:"w-4 h-4 text-gray-400"}),e("span",Ar,o(y.value),1)])]),e("div",Pr,[e("button",Mr,[p(l(ct),{class:"w-6 h-6"}),F[8]||(F[8]=e("span",{class:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"},null,-1))]),e("div",Er,[e("div",Sr,[p(l(ot),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),F[9]||(F[9]=e("input",{type:"text",placeholder:"Rechercher...",class:"pl-10 pr-4 py-2 w-64 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent"},null,-1))])]),e("div",Dr,[e("button",{onClick:F[2]||(F[2]=c=>h.value=!h.value),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",Tr,[e("span",Ir,o(E.value),1)]),e("div",Lr,[e("p",Vr,o(l(m).user?.first_name)+" "+o(l(m).user?.last_name),1),F[10]||(F[10]=e("p",{class:"text-xs text-gray-500"},"Super Admin",-1))]),p(l(jt),{class:"w-4 h-4 text-gray-400"})]),h.value?(t(),s("div",{key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",onClick:F[5]||(F[5]=c=>h.value=!1)},[e("div",Fr,[e("p",Rr,o(l(m).user?.first_name)+" "+o(l(m).user?.last_name),1),e("p",qr,o(l(m).user?.email),1)]),p(C,{to:{name:"admin.profile"},onClick:F[3]||(F[3]=c=>h.value=!1),class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 transition-colors"},{default:oe(()=>[p(l(Ve),{class:"w-4 h-4 mr-3 text-gray-400"}),F[11]||(F[11]=U(" Mon Profil ",-1))]),_:1,__:[11]}),p(C,{to:{name:"admin.settings"},onClick:F[4]||(F[4]=c=>h.value=!1),class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 transition-colors"},{default:oe(()=>[p(l(Yt),{class:"w-4 h-4 mr-3 text-gray-400"}),F[12]||(F[12]=U(" Paramètres ",-1))]),_:1,__:[12]}),e("div",zr,[e("button",{onClick:f,class:"flex items-center w-full px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors"},[p(l(tt),{class:"w-4 h-4 mr-3"}),F[13]||(F[13]=U(" Se déconnecter ",-1))])])])):R("",!0)])])])]),e("main",Nr,[p(x)])])])}}};function Br(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var St={exports:{}},es;function Or(){return es||(es=1,function(d){(function(m){d.exports?d.exports=m():window.intlTelInput=m()})(()=>{var m=(()=>{var T=Object.defineProperty,M=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,h=(g,w)=>{for(var P in w)T(g,P,{get:w[P],enumerable:!0})},A=(g,w,P,N)=>{if(w&&typeof w=="object"||typeof w=="function")for(let X of u(w))!r.call(g,X)&&X!==P&&T(g,X,{get:()=>w[X],enumerable:!(N=M(w,X))||N.enumerable});return g},n=g=>A(T({},"__esModule",{value:!0}),g),y={};h(y,{Iti:()=>q,default:()=>D});var j=[["af","93"],["ax","358",1],["al","355"],["dz","213"],["as","1",5,["684"]],["ad","376"],["ao","244"],["ai","1",6,["264"]],["ag","1",7,["268"]],["ar","54"],["am","374"],["aw","297"],["ac","247"],["au","61",0,null,"0"],["at","43"],["az","994"],["bs","1",8,["242"]],["bh","973"],["bd","880"],["bb","1",9,["246"]],["by","375"],["be","32"],["bz","501"],["bj","229"],["bm","1",10,["441"]],["bt","975"],["bo","591"],["ba","387"],["bw","267"],["br","55"],["io","246"],["vg","1",11,["284"]],["bn","673"],["bg","359"],["bf","226"],["bi","257"],["kh","855"],["cm","237"],["ca","1",1,["204","226","236","249","250","263","289","306","343","354","365","367","368","382","387","403","416","418","428","431","437","438","450","584","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","879","902","905"]],["cv","238"],["bq","599",1,["3","4","7"]],["ky","1",12,["345"]],["cf","236"],["td","235"],["cl","56"],["cn","86"],["cx","61",2,["89164"],"0"],["cc","61",1,["89162"],"0"],["co","57"],["km","269"],["cg","242"],["cd","243"],["ck","682"],["cr","506"],["ci","225"],["hr","385"],["cu","53"],["cw","599",0],["cy","357"],["cz","420"],["dk","45"],["dj","253"],["dm","1",13,["767"]],["do","1",2,["809","829","849"]],["ec","593"],["eg","20"],["sv","503"],["gq","240"],["er","291"],["ee","372"],["sz","268"],["et","251"],["fk","500"],["fo","298"],["fj","679"],["fi","358",0],["fr","33"],["gf","594"],["pf","689"],["ga","241"],["gm","220"],["ge","995"],["de","49"],["gh","233"],["gi","350"],["gr","30"],["gl","299"],["gd","1",14,["473"]],["gp","590",0],["gu","1",15,["671"]],["gt","502"],["gg","44",1,["1481","7781","7839","7911"],"0"],["gn","224"],["gw","245"],["gy","592"],["ht","509"],["hn","504"],["hk","852"],["hu","36"],["is","354"],["in","91"],["id","62"],["ir","98"],["iq","964"],["ie","353"],["im","44",2,["1624","74576","7524","7924","7624"],"0"],["il","972"],["it","39",0],["jm","1",4,["876","658"]],["jp","81"],["je","44",3,["1534","7509","7700","7797","7829","7937"],"0"],["jo","962"],["kz","7",1,["33","7"],"8"],["ke","254"],["ki","686"],["xk","383"],["kw","965"],["kg","996"],["la","856"],["lv","371"],["lb","961"],["ls","266"],["lr","231"],["ly","218"],["li","423"],["lt","370"],["lu","352"],["mo","853"],["mg","261"],["mw","265"],["my","60"],["mv","960"],["ml","223"],["mt","356"],["mh","692"],["mq","596"],["mr","222"],["mu","230"],["yt","262",1,["269","639"],"0"],["mx","52"],["fm","691"],["md","373"],["mc","377"],["mn","976"],["me","382"],["ms","1",16,["664"]],["ma","212",0,null,"0"],["mz","258"],["mm","95"],["na","264"],["nr","674"],["np","977"],["nl","31"],["nc","687"],["nz","64"],["ni","505"],["ne","227"],["ng","234"],["nu","683"],["nf","672"],["kp","850"],["mk","389"],["mp","1",17,["670"]],["no","47",0],["om","968"],["pk","92"],["pw","680"],["ps","970"],["pa","507"],["pg","675"],["py","595"],["pe","51"],["ph","63"],["pl","48"],["pt","351"],["pr","1",3,["787","939"]],["qa","974"],["re","262",0,null,"0"],["ro","40"],["ru","7",0,null,"8"],["rw","250"],["ws","685"],["sm","378"],["st","239"],["sa","966"],["sn","221"],["rs","381"],["sc","248"],["sl","232"],["sg","65"],["sx","1",21,["721"]],["sk","421"],["si","386"],["sb","677"],["so","252"],["za","27"],["kr","82"],["ss","211"],["es","34"],["lk","94"],["bl","590",1],["sh","290"],["kn","1",18,["869"]],["lc","1",19,["758"]],["mf","590",2],["pm","508"],["vc","1",20,["784"]],["sd","249"],["sr","597"],["sj","47",1,["79"]],["se","46"],["ch","41"],["sy","963"],["tw","886"],["tj","992"],["tz","255"],["th","66"],["tl","670"],["tg","228"],["tk","690"],["to","676"],["tt","1",22,["868"]],["tn","216"],["tr","90"],["tm","993"],["tc","1",23,["649"]],["tv","688"],["ug","256"],["ua","380"],["ae","971"],["gb","44",0,null,"0"],["us","1",0],["uy","598"],["vi","1",24,["340"]],["uz","998"],["vu","678"],["va","39",1,["06698"]],["ve","58"],["vn","84"],["wf","681"],["eh","212",1,["5288","5289"],"0"],["ye","967"],["zm","260"],["zw","263"]],E=[];for(let g=0;g<j.length;g++){const w=j[g];E[g]={name:"",iso2:w[0],dialCode:w[1],priority:w[2]||0,areaCodes:w[3]||null,nodeById:{},nationalPrefix:w[4]||null}}var f=E,_={ad:"Andorra",ae:"United Arab Emirates",af:"Afghanistan",ag:"Antigua & Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",ar:"Argentina",as:"American Samoa",at:"Austria",au:"Australia",aw:"Aruba",ax:"Åland Islands",az:"Azerbaijan",ba:"Bosnia & Herzegovina",bb:"Barbados",bd:"Bangladesh",be:"Belgium",bf:"Burkina Faso",bg:"Bulgaria",bh:"Bahrain",bi:"Burundi",bj:"Benin",bl:"St. Barthélemy",bm:"Bermuda",bn:"Brunei",bo:"Bolivia",bq:"Caribbean Netherlands",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cc:"Cocos (Keeling) Islands",cd:"Congo - Kinshasa",cf:"Central African Republic",cg:"Congo - Brazzaville",ch:"Switzerland",ci:"Côte d’Ivoire",ck:"Cook Islands",cl:"Chile",cm:"Cameroon",cn:"China",co:"Colombia",cr:"Costa Rica",cu:"Cuba",cv:"Cape Verde",cw:"Curaçao",cx:"Christmas Island",cy:"Cyprus",cz:"Czechia",de:"Germany",dj:"Djibouti",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",eh:"Western Sahara",er:"Eritrea",es:"Spain",et:"Ethiopia",fi:"Finland",fj:"Fiji",fk:"Falkland Islands",fm:"Micronesia",fo:"Faroe Islands",fr:"France",ga:"Gabon",gb:"United Kingdom",gd:"Grenada",ge:"Georgia",gf:"French Guiana",gg:"Guernsey",gh:"Ghana",gi:"Gibraltar",gl:"Greenland",gm:"Gambia",gn:"Guinea",gp:"Guadeloupe",gq:"Equatorial Guinea",gr:"Greece",gt:"Guatemala",gu:"Guam",gw:"Guinea-Bissau",gy:"Guyana",hk:"Hong Kong SAR China",hn:"Honduras",hr:"Croatia",ht:"Haiti",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",im:"Isle of Man",in:"India",io:"British Indian Ocean Territory",iq:"Iraq",ir:"Iran",is:"Iceland",it:"Italy",je:"Jersey",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Kyrgyzstan",kh:"Cambodia",ki:"Kiribati",km:"Comoros",kn:"St. Kitts & Nevis",kp:"North Korea",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"St. Lucia",li:"Liechtenstein",lk:"Sri Lanka",lr:"Liberia",ls:"Lesotho",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",ly:"Libya",ma:"Morocco",mc:"Monaco",md:"Moldova",me:"Montenegro",mf:"St. Martin",mg:"Madagascar",mh:"Marshall Islands",mk:"North Macedonia",ml:"Mali",mm:"Myanmar (Burma)",mn:"Mongolia",mo:"Macao SAR China",mp:"Northern Mariana Islands",mq:"Martinique",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mv:"Maldives",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",nc:"New Caledonia",ne:"Niger",nf:"Norfolk Island",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",no:"Norway",np:"Nepal",nr:"Nauru",nu:"Niue",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pf:"French Polynesia",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pm:"St. Pierre & Miquelon",pr:"Puerto Rico",ps:"Palestinian Territories",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",re:"Réunion",ro:"Romania",rs:"Serbia",ru:"Russia",rw:"Rwanda",sa:"Saudi Arabia",sb:"Solomon Islands",sc:"Seychelles",sd:"Sudan",se:"Sweden",sg:"Singapore",sh:"St. Helena",si:"Slovenia",sj:"Svalbard & Jan Mayen",sk:"Slovakia",sl:"Sierra Leone",sm:"San Marino",sn:"Senegal",so:"Somalia",sr:"Suriname",ss:"South Sudan",st:"São Tomé & Príncipe",sv:"El Salvador",sx:"Sint Maarten",sy:"Syria",sz:"Eswatini",tc:"Turks & Caicos Islands",td:"Chad",tg:"Togo",th:"Thailand",tj:"Tajikistan",tk:"Tokelau",tl:"Timor-Leste",tm:"Turkmenistan",tn:"Tunisia",to:"Tonga",tr:"Turkey",tt:"Trinidad & Tobago",tv:"Tuvalu",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",us:"United States",uy:"Uruguay",uz:"Uzbekistan",va:"Vatican City",vc:"St. Vincent & Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vi:"U.S. Virgin Islands",vn:"Vietnam",vu:"Vanuatu",wf:"Wallis & Futuna",ws:"Samoa",ye:"Yemen",yt:"Mayotte",za:"South Africa",zm:"Zambia",zw:"Zimbabwe"},I=_,F={selectedCountryAriaLabel:"Selected country",noCountrySelected:"No country selected",countryListAriaLabel:"List of countries",searchPlaceholder:"Search",zeroSearchResults:"No results found",oneSearchResult:"1 result found",multipleSearchResults:"${count} results found",ac:"Ascension Island",xk:"Kosovo"},C=F,x={...I,...C},c=x;for(let g=0;g<f.length;g++)f[g].name=c[f[g].iso2];var a=0,v={allowDropdown:!0,autoPlaceholder:"polite",containerClass:"",countryOrder:null,countrySearch:!0,customPlaceholder:null,dropdownContainer:null,excludeCountries:[],fixDropdownWidth:!0,formatAsYouType:!0,formatOnDisplay:!0,geoIpLookup:null,hiddenInput:null,i18n:{},initialCountry:"",loadUtils:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",showFlags:!0,separateDialCode:!1,strictMode:!1,useFullscreenPopup:typeof navigator<"u"&&typeof window<"u"?/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=500:!1,validationNumberTypes:["MOBILE"]},i=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],$=g=>g.replace(/\D/g,""),L=(g="")=>g.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),Y=g=>{const w=$(g);if(w.charAt(0)==="1"){const P=w.substr(1,3);return i.includes(P)}return!1},J=(g,w,P,N)=>{if(P===0&&!N)return 0;let X=0;for(let W=0;W<w.length;W++){if(/[+0-9]/.test(w[W])&&X++,X===g&&!N)return W+1;if(N&&X===g+1)return W}return w.length},z=(g,w,P)=>{const N=document.createElement(g);return w&&Object.entries(w).forEach(([X,W])=>N.setAttribute(X,W)),P&&P.appendChild(N),N},b=(g,...w)=>{const{instances:P}=k;Object.values(P).forEach(N=>N[g](...w))},q=class{constructor(g,w={}){this.id=a++,this.telInput=g,this.highlightedItem=null,this.options=Object.assign({},v,w),this.hadInitialPlaceholder=!!g.getAttribute("placeholder")}_init(){this.options.useFullscreenPopup&&(this.options.fixDropdownWidth=!1),this.options.onlyCountries.length===1&&(this.options.initialCountry=this.options.onlyCountries[0]),this.options.separateDialCode&&(this.options.nationalMode=!1),this.options.allowDropdown&&!this.options.showFlags&&!this.options.separateDialCode&&(this.options.nationalMode=!1),this.options.useFullscreenPopup&&!this.options.dropdownContainer&&(this.options.dropdownContainer=document.body),this.isAndroid=typeof navigator<"u"?/Android/i.test(navigator.userAgent):!1,this.isRTL=!!this.telInput.closest("[dir=rtl]");const g=this.options.allowDropdown||this.options.separateDialCode;this.showSelectedCountryOnLeft=this.isRTL?!g:g,this.options.separateDialCode&&(this.isRTL?this.originalPaddingRight=this.telInput.style.paddingRight:this.originalPaddingLeft=this.telInput.style.paddingLeft),this.options.i18n={...c,...this.options.i18n};const w=new Promise((N,X)=>{this.resolveAutoCountryPromise=N,this.rejectAutoCountryPromise=X}),P=new Promise((N,X)=>{this.resolveUtilsScriptPromise=N,this.rejectUtilsScriptPromise=X});this.promise=Promise.all([w,P]),this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}_processCountryData(){this._processAllCountries(),this._processDialCodes(),this._translateCountryNames(),this._sortCountries()}_sortCountries(){this.options.countryOrder&&(this.options.countryOrder=this.options.countryOrder.map(g=>g.toLowerCase())),this.countries.sort((g,w)=>{const{countryOrder:P}=this.options;if(P){const N=P.indexOf(g.iso2),X=P.indexOf(w.iso2),W=N>-1,K=X>-1;if(W||K)return W&&K?N-X:W?-1:1}return g.name.localeCompare(w.name)})}_addToDialCodeMap(g,w,P){w.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=w.length),this.dialCodeToIso2Map.hasOwnProperty(w)||(this.dialCodeToIso2Map[w]=[]);for(let X=0;X<this.dialCodeToIso2Map[w].length;X++)if(this.dialCodeToIso2Map[w][X]===g)return;const N=P!==void 0?P:this.dialCodeToIso2Map[w].length;this.dialCodeToIso2Map[w][N]=g}_processAllCountries(){const{onlyCountries:g,excludeCountries:w}=this.options;if(g.length){const P=g.map(N=>N.toLowerCase());this.countries=f.filter(N=>P.includes(N.iso2))}else if(w.length){const P=w.map(N=>N.toLowerCase());this.countries=f.filter(N=>!P.includes(N.iso2))}else this.countries=f}_translateCountryNames(){for(let g=0;g<this.countries.length;g++){const w=this.countries[g].iso2.toLowerCase();this.options.i18n.hasOwnProperty(w)&&(this.countries[g].name=this.options.i18n[w])}}_processDialCodes(){this.dialCodes={},this.dialCodeMaxLen=0,this.dialCodeToIso2Map={};for(let g=0;g<this.countries.length;g++){const w=this.countries[g];this.dialCodes[w.dialCode]||(this.dialCodes[w.dialCode]=!0),this._addToDialCodeMap(w.iso2,w.dialCode,w.priority)}for(let g=0;g<this.countries.length;g++){const w=this.countries[g];if(w.areaCodes){const P=this.dialCodeToIso2Map[w.dialCode][0];for(let N=0;N<w.areaCodes.length;N++){const X=w.areaCodes[N];for(let W=1;W<X.length;W++){const K=X.substr(0,W),O=w.dialCode+K;this._addToDialCodeMap(P,O),this._addToDialCodeMap(w.iso2,O)}this._addToDialCodeMap(w.iso2,w.dialCode+X)}}}}_generateMarkup(){this.telInput.classList.add("iti__tel-input"),!this.telInput.hasAttribute("autocomplete")&&!(this.telInput.form&&this.telInput.form.hasAttribute("autocomplete"))&&this.telInput.setAttribute("autocomplete","off");const{allowDropdown:g,separateDialCode:w,showFlags:P,containerClass:N,hiddenInput:X,dropdownContainer:W,fixDropdownWidth:K,useFullscreenPopup:O,countrySearch:ae,i18n:ce}=this.options;let ge="iti";g&&(ge+=" iti--allow-dropdown"),P&&(ge+=" iti--show-flags"),N&&(ge+=` ${N}`),O||(ge+=" iti--inline-dropdown");const ve=z("div",{class:ge});if(this.telInput.parentNode?.insertBefore(ve,this.telInput),g||P||w){this.countryContainer=z("div",{class:"iti__country-container"},ve),this.showSelectedCountryOnLeft?this.countryContainer.style.left="0px":this.countryContainer.style.right="0px",g?(this.selectedCountry=z("button",{type:"button",class:"iti__selected-country","aria-expanded":"false","aria-label":this.options.i18n.selectedCountryAriaLabel,"aria-haspopup":"true","aria-controls":`iti-${this.id}__dropdown-content`,role:"combobox"},this.countryContainer),this.telInput.disabled&&this.selectedCountry.setAttribute("disabled","true")):this.selectedCountry=z("div",{class:"iti__selected-country"},this.countryContainer);const Ie=z("div",{class:"iti__selected-country-primary"},this.selectedCountry);if(this.selectedCountryInner=z("div",{class:"iti__flag"},Ie),this.selectedCountryA11yText=z("span",{class:"iti__a11y-text"},this.selectedCountryInner),g&&(this.dropdownArrow=z("div",{class:"iti__arrow","aria-hidden":"true"},Ie)),w&&(this.selectedDialCode=z("div",{class:"iti__selected-dial-code"},this.selectedCountry)),g){const he=K?"":"iti--flexible-dropdown-width";if(this.dropdownContent=z("div",{id:`iti-${this.id}__dropdown-content`,class:`iti__dropdown-content iti__hide ${he}`}),ae&&(this.searchInput=z("input",{type:"text",class:"iti__search-input",placeholder:ce.searchPlaceholder,role:"combobox","aria-expanded":"true","aria-label":ce.searchPlaceholder,"aria-controls":`iti-${this.id}__country-listbox`,"aria-autocomplete":"list",autocomplete:"off"},this.dropdownContent),this.searchResultsA11yText=z("span",{class:"iti__a11y-text"},this.dropdownContent)),this.countryList=z("ul",{class:"iti__country-list",id:`iti-${this.id}__country-listbox`,role:"listbox","aria-label":ce.countryListAriaLabel},this.dropdownContent),this._appendListItems(),ae&&this._updateSearchResultsText(),W){let ye="iti iti--container";O?ye+=" iti--fullscreen-popup":ye+=" iti--inline-dropdown",this.dropdown=z("div",{class:ye}),this.dropdown.appendChild(this.dropdownContent)}else this.countryContainer.appendChild(this.dropdownContent)}}if(ve.appendChild(this.telInput),this._updateInputPadding(),X){const Ie=this.telInput.getAttribute("name")||"",he=X(Ie);if(he.phone){const ye=this.telInput.form?.querySelector(`input[name="${he.phone}"]`);ye?this.hiddenInput=ye:(this.hiddenInput=z("input",{type:"hidden",name:he.phone}),ve.appendChild(this.hiddenInput))}if(he.country){const ye=this.telInput.form?.querySelector(`input[name="${he.country}"]`);ye?this.hiddenInputCountry=ye:(this.hiddenInputCountry=z("input",{type:"hidden",name:he.country}),ve.appendChild(this.hiddenInputCountry))}}}_appendListItems(){for(let g=0;g<this.countries.length;g++){const w=this.countries[g],P=g===0?"iti__highlight":"",N=z("li",{id:`iti-${this.id}__item-${w.iso2}`,class:`iti__country ${P}`,tabindex:"-1",role:"option","data-dial-code":w.dialCode,"data-country-code":w.iso2,"aria-selected":"false"},this.countryList);w.nodeById[this.id]=N;let X="";this.options.showFlags&&(X+=`<div class='iti__flag iti__${w.iso2}'></div>`),X+=`<span class='iti__country-name'>${w.name}</span>`,X+=`<span class='iti__dial-code'>+${w.dialCode}</span>`,N.insertAdjacentHTML("beforeend",X)}}_setInitialState(g=!1){const w=this.telInput.getAttribute("value"),P=this.telInput.value,X=w&&w.charAt(0)==="+"&&(!P||P.charAt(0)!=="+")?w:P,W=this._getDialCode(X),K=Y(X),{initialCountry:O,geoIpLookup:ae}=this.options,ce=O==="auto"&&ae;if(W&&!K)this._updateCountryFromNumber(X);else if(!ce||g){const ge=O?O.toLowerCase():"";ge&&this._getCountryData(ge,!0)?this._setCountry(ge):W&&K?this._setCountry("us"):this._setCountry()}X&&this._updateValFromNumber(X)}_initListeners(){this._initTelInputListeners(),this.options.allowDropdown&&this._initDropdownListeners(),(this.hiddenInput||this.hiddenInputCountry)&&this.telInput.form&&this._initHiddenInputListener()}_initHiddenInputListener(){this._handleHiddenInputSubmit=()=>{this.hiddenInput&&(this.hiddenInput.value=this.getNumber()),this.hiddenInputCountry&&(this.hiddenInputCountry.value=this.getSelectedCountryData().iso2||"")},this.telInput.form?.addEventListener("submit",this._handleHiddenInputSubmit)}_initDropdownListeners(){this._handleLabelClick=w=>{this.dropdownContent.classList.contains("iti__hide")?this.telInput.focus():w.preventDefault()};const g=this.telInput.closest("label");g&&g.addEventListener("click",this._handleLabelClick),this._handleClickSelectedCountry=()=>{this.dropdownContent.classList.contains("iti__hide")&&!this.telInput.disabled&&!this.telInput.readOnly&&this._openDropdown()},this.selectedCountry.addEventListener("click",this._handleClickSelectedCountry),this._handleCountryContainerKeydown=w=>{this.dropdownContent.classList.contains("iti__hide")&&["ArrowUp","ArrowDown"," ","Enter"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),this._openDropdown()),w.key==="Tab"&&this._closeDropdown()},this.countryContainer.addEventListener("keydown",this._handleCountryContainerKeydown)}_initRequests(){let{loadUtils:g,initialCountry:w,geoIpLookup:P}=this.options;g&&!k.utils?(this._handlePageLoad=()=>{window.removeEventListener("load",this._handlePageLoad),k.attachUtils(g)?.catch(()=>{})},k.documentReady()?this._handlePageLoad():window.addEventListener("load",this._handlePageLoad)):this.resolveUtilsScriptPromise(),w==="auto"&&P&&!this.selectedCountryData.iso2?this._loadAutoCountry():this.resolveAutoCountryPromise()}_loadAutoCountry(){k.autoCountry?this.handleAutoCountry():k.startedLoadingAutoCountry||(k.startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup((g="")=>{const w=g.toLowerCase();w&&this._getCountryData(w,!0)?(k.autoCountry=w,setTimeout(()=>b("handleAutoCountry"))):(this._setInitialState(!0),b("rejectAutoCountryPromise"))},()=>{this._setInitialState(!0),b("rejectAutoCountryPromise")}))}_openDropdownWithPlus(){this._openDropdown(),this.searchInput.value="+",this._filterCountries("",!0)}_initTelInputListeners(){const{strictMode:g,formatAsYouType:w,separateDialCode:P,formatOnDisplay:N,allowDropdown:X,countrySearch:W}=this.options;let K=!1;new RegExp("\\p{L}","u").test(this.telInput.value)&&(K=!0),this._handleInputEvent=O=>{if(this.isAndroid&&O?.data==="+"&&P&&X&&W){const ve=this.telInput.selectionStart||0,Ie=this.telInput.value.substring(0,ve-1),he=this.telInput.value.substring(ve);this.telInput.value=Ie+he,this._openDropdownWithPlus();return}this._updateCountryFromNumber(this.telInput.value)&&this._triggerCountryChange();const ae=O?.data&&/[^+0-9]/.test(O.data),ce=O?.inputType==="insertFromPaste"&&this.telInput.value;ae||ce&&!g?K=!0:/[^+0-9]/.test(this.telInput.value)||(K=!1);const ge=O?.detail&&O.detail.isSetNumber&&!N;if(w&&!K&&!ge){const ve=this.telInput.selectionStart||0,he=this.telInput.value.substring(0,ve).replace(/[^+0-9]/g,"").length,ye=O?.inputType==="deleteContentForward",Qe=this._formatNumberAsYouType(),et=J(he,Qe,ve,ye);this.telInput.value=Qe,this.telInput.setSelectionRange(et,et)}},this.telInput.addEventListener("input",this._handleInputEvent),(g||P)&&(this._handleKeydownEvent=O=>{if(O.key&&O.key.length===1&&!O.altKey&&!O.ctrlKey&&!O.metaKey){if(P&&X&&W&&O.key==="+"){O.preventDefault(),this._openDropdownWithPlus();return}if(g){const ae=this.telInput.value,ce=ae.charAt(0)==="+",ge=!ce&&this.telInput.selectionStart===0&&O.key==="+",ve=/^[0-9]$/.test(O.key),Ie=P?ve:ge||ve,he=ae.slice(0,this.telInput.selectionStart)+O.key+ae.slice(this.telInput.selectionEnd),ye=this._getFullNumber(he),Qe=k.utils.getCoreNumber(ye,this.selectedCountryData.iso2),et=this.maxCoreNumberLength&&Qe.length>this.maxCoreNumberLength;let vt=!1;if(ce){const Mt=this.selectedCountryData.iso2;vt=this._getCountryFromNumber(ye)!==Mt}(!Ie||et&&!vt&&!ge)&&O.preventDefault()}}},this.telInput.addEventListener("keydown",this._handleKeydownEvent))}_cap(g){const w=parseInt(this.telInput.getAttribute("maxlength")||"",10);return w&&g.length>w?g.substr(0,w):g}_trigger(g,w={}){const P=new CustomEvent(g,{bubbles:!0,cancelable:!0,detail:w});this.telInput.dispatchEvent(P)}_openDropdown(){const{fixDropdownWidth:g,countrySearch:w}=this.options;if(g&&(this.dropdownContent.style.width=`${this.telInput.offsetWidth}px`),this.dropdownContent.classList.remove("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","true"),this._setDropdownPosition(),w){const P=this.countryList.firstElementChild;P&&(this._highlightListItem(P,!1),this.countryList.scrollTop=0),this.searchInput.focus()}this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}_setDropdownPosition(){if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.options.useFullscreenPopup){const g=this.telInput.getBoundingClientRect(),w=this.telInput.offsetHeight;this.options.dropdownContainer&&(this.dropdown.style.top=`${g.top+w}px`,this.dropdown.style.left=`${g.left}px`,this._handleWindowScroll=()=>this._closeDropdown(),window.addEventListener("scroll",this._handleWindowScroll))}}_bindDropdownListeners(){this._handleMouseoverCountryList=N=>{const X=N.target?.closest(".iti__country");X&&this._highlightListItem(X,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=N=>{const X=N.target?.closest(".iti__country");X&&this._selectListItem(X)},this.countryList.addEventListener("click",this._handleClickCountryList);let g=!0;this._handleClickOffToClose=()=>{g||this._closeDropdown(),g=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);let w="",P=null;if(this._handleKeydownOnDropdown=N=>{["ArrowUp","ArrowDown","Enter","Escape"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),N.key==="ArrowUp"||N.key==="ArrowDown"?this._handleUpDownKey(N.key):N.key==="Enter"?this._handleEnterKey():N.key==="Escape"&&this._closeDropdown()),!this.options.countrySearch&&/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(N.key)&&(N.stopPropagation(),P&&clearTimeout(P),w+=N.key.toLowerCase(),this._searchForCountry(w),P=setTimeout(()=>{w=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch){const N=()=>{const W=this.searchInput.value.trim();W?this._filterCountries(W):this._filterCountries("",!0)};let X=null;this._handleSearchChange=()=>{X&&clearTimeout(X),X=setTimeout(()=>{N(),X=null},100)},this.searchInput.addEventListener("input",this._handleSearchChange),this.searchInput.addEventListener("click",W=>W.stopPropagation())}}_searchForCountry(g){for(let w=0;w<this.countries.length;w++){const P=this.countries[w];if(P.name.substr(0,g.length).toLowerCase()===g){const X=P.nodeById[this.id];this._highlightListItem(X,!1),this._scrollTo(X);break}}}_filterCountries(g,w=!1){let P=!0;this.countryList.innerHTML="";const N=L(g);for(let X=0;X<this.countries.length;X++){const W=this.countries[X],K=L(W.name),O=W.name.split(/[^a-zA-ZÀ-ÿа-яА-Я]/).map(ce=>ce[0]).join("").toLowerCase(),ae=`+${W.dialCode}`;if(w||K.includes(N)||ae.includes(N)||W.iso2.includes(N)||O.includes(N)){const ce=W.nodeById[this.id];ce&&this.countryList.appendChild(ce),P&&(this._highlightListItem(ce,!1),P=!1)}}P&&this._highlightListItem(null,!1),this.countryList.scrollTop=0,this._updateSearchResultsText()}_updateSearchResultsText(){const{i18n:g}=this.options,w=this.countryList.childElementCount;let P;"searchResultsText"in g?P=g.searchResultsText(w):w===0?P=g.zeroSearchResults:w===1?P=g.oneSearchResult:P=g.multipleSearchResults.replace("${count}",w.toString()),this.searchResultsA11yText.textContent=P}_handleUpDownKey(g){let w=g==="ArrowUp"?this.highlightedItem?.previousElementSibling:this.highlightedItem?.nextElementSibling;!w&&this.countryList.childElementCount>1&&(w=g==="ArrowUp"?this.countryList.lastElementChild:this.countryList.firstElementChild),w&&(this._scrollTo(w),this._highlightListItem(w,!1))}_handleEnterKey(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}_updateValFromNumber(g){let w=g;if(this.options.formatOnDisplay&&k.utils&&this.selectedCountryData){const P=this.options.nationalMode||w.charAt(0)!=="+"&&!this.options.separateDialCode,{NATIONAL:N,INTERNATIONAL:X}=k.utils.numberFormat,W=P?N:X;w=k.utils.formatNumber(w,this.selectedCountryData.iso2,W)}w=this._beforeSetNumber(w),this.telInput.value=w}_updateCountryFromNumber(g){const w=this._getCountryFromNumber(g);return w!==null?this._setCountry(w):!1}_ensureHasDialCode(g){const{dialCode:w,nationalPrefix:P}=this.selectedCountryData;if(g.charAt(0)==="+"||!w)return g;const W=P&&g.charAt(0)===P&&!this.options.separateDialCode?g.substring(1):g;return`+${w}${W}`}_getCountryFromNumber(g){const w=g.indexOf("+");let P=w?g.substring(w):g;const N=this.selectedCountryData.iso2,X=this.selectedCountryData.dialCode;P=this._ensureHasDialCode(P);const W=this._getDialCode(P,!0),K=$(P);if(W){const O=$(W),ae=this.dialCodeToIso2Map[O];if(!N&&this.defaultCountry&&ae.includes(this.defaultCountry))return this.defaultCountry;const ce=N&&ae.includes(N)&&(K.length===O.length||!this.selectedCountryData.areaCodes);if(!(X==="1"&&Y(K))&&!ce){for(let ve=0;ve<ae.length;ve++)if(ae[ve])return ae[ve]}}else{if(P.charAt(0)==="+"&&K.length)return"";if((!P||P==="+")&&!this.selectedCountryData.iso2)return this.defaultCountry}return null}_highlightListItem(g,w){const P=this.highlightedItem;if(P&&(P.classList.remove("iti__highlight"),P.setAttribute("aria-selected","false")),this.highlightedItem=g,this.highlightedItem){this.highlightedItem.classList.add("iti__highlight"),this.highlightedItem.setAttribute("aria-selected","true");const N=this.highlightedItem.getAttribute("id")||"";this.selectedCountry.setAttribute("aria-activedescendant",N),this.options.countrySearch&&this.searchInput.setAttribute("aria-activedescendant",N)}w&&this.highlightedItem.focus()}_getCountryData(g,w){for(let P=0;P<this.countries.length;P++)if(this.countries[P].iso2===g)return this.countries[P];if(w)return null;throw new Error(`No country data for '${g}'`)}_setCountry(g){const{separateDialCode:w,showFlags:P,i18n:N}=this.options,X=this.selectedCountryData.iso2?this.selectedCountryData:{};if(this.selectedCountryData=g?this._getCountryData(g,!1)||{}:{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedCountryInner){let W="",K="";g&&P?(W=`iti__flag iti__${g}`,K=`${this.selectedCountryData.name} +${this.selectedCountryData.dialCode}`):(W="iti__flag iti__globe",K=N.noCountrySelected),this.selectedCountryInner.className=W,this.selectedCountryA11yText.textContent=K}if(this._setSelectedCountryTitleAttribute(g,w),w){const W=this.selectedCountryData.dialCode?`+${this.selectedCountryData.dialCode}`:"";this.selectedDialCode.innerHTML=W,this._updateInputPadding()}return this._updatePlaceholder(),this._updateMaxLength(),X.iso2!==g}_updateInputPadding(){if(this.selectedCountry){const w=(this.selectedCountry.offsetWidth||this._getHiddenSelectedCountryWidth())+6;this.showSelectedCountryOnLeft?this.telInput.style.paddingLeft=`${w}px`:this.telInput.style.paddingRight=`${w}px`}}_updateMaxLength(){const{strictMode:g,placeholderNumberType:w,validationNumberTypes:P}=this.options,{iso2:N}=this.selectedCountryData;if(g&&k.utils)if(N){const X=k.utils.numberType[w];let W=k.utils.getExampleNumber(N,!1,X,!0),K=W;for(;k.utils.isPossibleNumber(W,N,P);)K=W,W+="0";const O=k.utils.getCoreNumber(K,N);this.maxCoreNumberLength=O.length,N==="by"&&(this.maxCoreNumberLength=O.length+1)}else this.maxCoreNumberLength=null}_setSelectedCountryTitleAttribute(g=null,w){if(!this.selectedCountry)return;let P;g&&!w?P=`${this.selectedCountryData.name}: +${this.selectedCountryData.dialCode}`:g?P=this.selectedCountryData.name:P="Unknown",this.selectedCountry.setAttribute("title",P)}_getHiddenSelectedCountryWidth(){if(this.telInput.parentNode){const g=this.telInput.parentNode.cloneNode(!1);g.style.visibility="hidden",document.body.appendChild(g);const w=this.countryContainer.cloneNode();g.appendChild(w);const P=this.selectedCountry.cloneNode(!0);w.appendChild(P);const N=P.offsetWidth;return document.body.removeChild(g),N}return 0}_updatePlaceholder(){const{autoPlaceholder:g,placeholderNumberType:w,nationalMode:P,customPlaceholder:N}=this.options,X=g==="aggressive"||!this.hadInitialPlaceholder&&g==="polite";if(k.utils&&X){const W=k.utils.numberType[w];let K=this.selectedCountryData.iso2?k.utils.getExampleNumber(this.selectedCountryData.iso2,P,W):"";K=this._beforeSetNumber(K),typeof N=="function"&&(K=N(K,this.selectedCountryData)),this.telInput.setAttribute("placeholder",K)}}_selectListItem(g){const w=this._setCountry(g.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(g.getAttribute("data-dial-code")),this.telInput.focus(),w&&this._triggerCountryChange()}_closeDropdown(){this.dropdownContent.classList.add("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","false"),this.selectedCountry.removeAttribute("aria-activedescendant"),this.highlightedItem&&this.highlightedItem.setAttribute("aria-selected","false"),this.options.countrySearch&&this.searchInput.removeAttribute("aria-activedescendant"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch&&this.searchInput.removeEventListener("input",this._handleSearchChange),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.options.useFullscreenPopup||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._handlePageLoad&&window.removeEventListener("load",this._handlePageLoad),this._trigger("close:countrydropdown")}_scrollTo(g){const w=this.countryList,P=document.documentElement.scrollTop,N=w.offsetHeight,X=w.getBoundingClientRect().top+P,W=X+N,K=g.offsetHeight,O=g.getBoundingClientRect().top+P,ae=O+K,ce=O-X+w.scrollTop;if(O<X)w.scrollTop=ce;else if(ae>W){const ge=N-K;w.scrollTop=ce-ge}}_updateDialCode(g){const w=this.telInput.value,P=`+${g}`;let N;if(w.charAt(0)==="+"){const X=this._getDialCode(w);X?N=w.replace(X,P):N=P,this.telInput.value=N}}_getDialCode(g,w){let P="";if(g.charAt(0)==="+"){let N="";for(let X=0;X<g.length;X++){const W=g.charAt(X);if(!isNaN(parseInt(W,10))){if(N+=W,w)this.dialCodeToIso2Map[N]&&(P=g.substr(0,X+1));else if(this.dialCodes[N]){P=g.substr(0,X+1);break}if(N.length===this.dialCodeMaxLen)break}}}return P}_getFullNumber(g){const w=g||this.telInput.value.trim(),{dialCode:P}=this.selectedCountryData;let N;const X=$(w);return this.options.separateDialCode&&w.charAt(0)!=="+"&&P&&X?N=`+${P}`:N="",N+w}_beforeSetNumber(g){let w=g;if(this.options.separateDialCode){let P=this._getDialCode(w);if(P){P=`+${this.selectedCountryData.dialCode}`;const N=w[P.length]===" "||w[P.length]==="-"?P.length+1:P.length;w=w.substr(N)}}return this._cap(w)}_triggerCountryChange(){this._trigger("countrychange")}_formatNumberAsYouType(){const g=this._getFullNumber(),w=k.utils?k.utils.formatNumberAsYouType(g,this.selectedCountryData.iso2):g,{dialCode:P}=this.selectedCountryData;return this.options.separateDialCode&&this.telInput.value.charAt(0)!=="+"&&w.includes(`+${P}`)?(w.split(`+${P}`)[1]||"").trim():w}handleAutoCountry(){this.options.initialCountry==="auto"&&k.autoCountry&&(this.defaultCountry=k.autoCountry,this.selectedCountryData.iso2||this.selectedCountryInner.classList.contains("iti__globe")||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}handleUtils(){k.utils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this.selectedCountryData.iso2&&(this._updatePlaceholder(),this._updateMaxLength())),this.resolveUtilsScriptPromise()}destroy(){this.telInput.iti=void 0;const{allowDropdown:g,separateDialCode:w}=this.options;if(g){this._closeDropdown(),this.selectedCountry.removeEventListener("click",this._handleClickSelectedCountry),this.countryContainer.removeEventListener("keydown",this._handleCountryContainerKeydown);const X=this.telInput.closest("label");X&&X.removeEventListener("click",this._handleLabelClick)}const{form:P}=this.telInput;this._handleHiddenInputSubmit&&P&&P.removeEventListener("submit",this._handleHiddenInputSubmit),this.telInput.removeEventListener("input",this._handleInputEvent),this._handleKeydownEvent&&this.telInput.removeEventListener("keydown",this._handleKeydownEvent),this.telInput.removeAttribute("data-intl-tel-input-id"),w&&(this.isRTL?this.telInput.style.paddingRight=this.originalPaddingRight:this.telInput.style.paddingLeft=this.originalPaddingLeft);const N=this.telInput.parentNode;N?.parentNode?.insertBefore(this.telInput,N),N?.parentNode?.removeChild(N),delete k.instances[this.id]}getExtension(){return k.utils?k.utils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}getNumber(g){if(k.utils){const{iso2:w}=this.selectedCountryData;return k.utils.formatNumber(this._getFullNumber(),w,g)}return""}getNumberType(){return k.utils?k.utils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}getSelectedCountryData(){return this.selectedCountryData}getValidationError(){if(k.utils){const{iso2:g}=this.selectedCountryData;return k.utils.getValidationError(this._getFullNumber(),g)}return-99}isValidNumber(){if(!this.selectedCountryData.iso2)return!1;const g=this._getFullNumber(),w=g.search(new RegExp("\\p{L}","u"));if(w>-1){const P=g.substring(0,w),N=this._utilsIsPossibleNumber(P),X=this._utilsIsPossibleNumber(g);return N&&X}return this._utilsIsPossibleNumber(g)}_utilsIsPossibleNumber(g){return k.utils?k.utils.isPossibleNumber(g,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}isValidNumberPrecise(){if(!this.selectedCountryData.iso2)return!1;const g=this._getFullNumber(),w=g.search(new RegExp("\\p{L}","u"));if(w>-1){const P=g.substring(0,w),N=this._utilsIsValidNumber(P),X=this._utilsIsValidNumber(g);return N&&X}return this._utilsIsValidNumber(g)}_utilsIsValidNumber(g){return k.utils?k.utils.isValidNumber(g,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}setCountry(g){const w=g?.toLowerCase(),P=this.selectedCountryData.iso2;(g&&w!==P||!g&&P)&&(this._setCountry(w),this._updateDialCode(this.selectedCountryData.dialCode),this._triggerCountryChange())}setNumber(g){const w=this._updateCountryFromNumber(g);this._updateValFromNumber(g),w&&this._triggerCountryChange(),this._trigger("input",{isSetNumber:!0})}setPlaceholderNumberType(g){this.options.placeholderNumberType=g,this._updatePlaceholder()}setDisabled(g){this.telInput.disabled=g,g?this.selectedCountry.setAttribute("disabled","true"):this.selectedCountry.removeAttribute("disabled")}},Z=g=>{if(!k.utils&&!k.startedLoadingUtilsScript){let w;if(typeof g=="function")try{w=Promise.resolve(g())}catch(P){return Promise.reject(P)}else return Promise.reject(new TypeError(`The argument passed to attachUtils must be a function that returns a promise for the utilities module, not ${typeof g}`));return k.startedLoadingUtilsScript=!0,w.then(P=>{const N=P?.default;if(!N||typeof N!="object")throw new TypeError("The loader function passed to attachUtils did not resolve to a module object with utils as its default export.");return k.utils=N,b("handleUtils"),!0}).catch(P=>{throw b("rejectUtilsScriptPromise",P),P})}return null},k=Object.assign((g,w)=>{const P=new q(g,w);return P._init(),g.setAttribute("data-intl-tel-input-id",P.id.toString()),k.instances[P.id]=P,g.iti=P,P},{defaults:v,documentReady:()=>document.readyState==="complete",getCountryData:()=>f,getInstance:g=>{const w=g.getAttribute("data-intl-tel-input-id");return w?k.instances[w]:null},instances:{},attachUtils:Z,startedLoadingUtilsScript:!1,startedLoadingAutoCountry:!1,version:"25.4.2"}),D=k;return n(y)})();return m.default})}(St)),St.exports}var Hr=Or();const ms=Br(Hr),Gr={name:"PhoneInput",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Numéro de téléphone"},preferredCountries:{type:Array,default:()=>["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"]},initialCountry:{type:String,default:"ga"}},data(){return{phoneNumber:this.modelValue,iti:null}},watch:{phoneNumber(d){this.$emit("update:modelValue",d)},modelValue(d){d!==this.phoneNumber&&(this.phoneNumber=d,this.iti&&this.$refs.phoneInput&&d&&this.iti.setNumber(d))}},mounted(){this.initializeIntlTelInput()},beforeUnmount(){this.iti&&this.iti.destroy()},methods:{initializeIntlTelInput(){const d=this.$refs.phoneInput;this.iti=ms(d,{preferredCountries:this.preferredCountries,initialCountry:this.initialCountry,separateDialCode:!0,customPlaceholder:(m,T)=>m}),d.addEventListener("input",m=>{this.phoneNumber=m.target.value,this.emitAllData()}),d.addEventListener("countrychange",()=>{this.emitAllData()}),setTimeout(()=>{this.modelValue&&this.iti.setNumber(this.modelValue),this.emitAllData()},100)},emitAllData(){if(this.iti&&this.iti.getSelectedCountryData)try{const d=this.iti.getSelectedCountryData(),m=this.phoneNumber||"";let T="";m.trim()&&(m.startsWith("+")?T=m:T=`+${d.dialCode}${m}`);const M=this.validatePhoneNumber(m,d);this.$emit("update:modelValue",T),console.log("PhoneInput emitting:",{number:m,fullNumber:T,countryCode:d.dialCode,countryIso2:d.iso2,isValid:M}),this.$emit("phone-change",{number:m,fullNumber:T,countryCode:d.dialCode,countryIso2:d.iso2,isValid:M})}catch(d){console.warn("PhoneInput: Error emitting data",d)}},emitPhoneData(){this.emitAllData()},validatePhoneNumber(d,m){if(!d||!d.trim())return!1;const M={ga:{min:7,max:8},cm:{min:8,max:9},ci:{min:8,max:10},fr:{min:9,max:10},ca:{min:10,max:10},cg:{min:8,max:9},cf:{min:8,max:8},td:{min:8,max:8},gq:{min:9,max:9},bf:{min:8,max:8},bj:{min:8,max:8},tg:{min:8,max:8}}[m.iso2]||{min:7,max:15},u=d.replace(/[^\d]/g,"");return u.length>=M.min&&u.length<=M.max},getNumber(){if(this.iti&&this.iti.getSelectedCountryData){const d=this.iti.getSelectedCountryData(),m=this.phoneNumber||"";if(m.trim())return m.startsWith("+")?m:`+${d.dialCode}${m}`}return""},isValidNumber(){if(this.iti&&this.iti.getSelectedCountryData){const d=this.iti.getSelectedCountryData();return this.validatePhoneNumber(this.phoneNumber,d)}return!1},setNumber(d){this.iti&&(this.iti.setNumber(d),this.phoneNumber=d,this.emitAllData())}}},Kr={class:"phone-input-wrapper"},Wr=["placeholder"];function Zr(d,m,T,M,u,r){return t(),s("div",Kr,[e("input",{ref:"phoneInput",type:"tel",class:"form-control",placeholder:T.placeholder},null,8,Wr)])}const gt=$e(Gr,[["render",Zr],["__scopeId","data-v-118cdfc2"]]),Xr={class:"min-h-screen bg-gradient-to-br from-koumbaya-primary/5 via-white to-koumbaya-primary/10 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Jr={class:"sm:mx-auto sm:w-full sm:max-w-md"},Yr={class:"flex justify-center mb-8"},Qr=["src"],ea={class:"text-center text-sm text-gray-500"},ta={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},sa={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},oa={class:"koumbaya-card-body p-8"},ra={key:0,class:"mb-6 rounded-xl bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-200 p-4 shadow-lg"},aa={class:"flex items-start"},na={class:"ml-3 flex-1"},ia={class:"text-sm font-semibold text-green-800 mb-2"},la={class:"text-sm text-green-700 leading-relaxed"},da={key:0,class:"mt-2 text-xs text-green-600 bg-green-100 rounded-lg p-2"},ua={class:"space-y-1 list-disc list-inside ml-2"},ca={class:"flex justify-center space-x-2 p-1 bg-gray-100 rounded-lg mb-6"},ma={key:0,class:"rounded-xl bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 p-4 shadow-lg"},pa={class:"flex items-start"},ga={class:"flex-shrink-0"},va={class:"ml-3 flex-1"},fa={class:"text-sm text-red-800 font-semibold leading-relaxed"},xa={key:0,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},ba={key:1,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},ha={key:2,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},ya={key:1,class:"koumbaya-form-group"},_a={for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},wa={class:"flex items-center"},$a={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},ka={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},Ca={key:2,class:"koumbaya-form-group"},ja={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},Aa={class:"flex items-center"},Pa={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Ma={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},Ea={class:"koumbaya-form-group"},Sa={for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},Da={class:"flex items-center"},Ta={class:"relative"},Ia=["type"],La={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Va={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},Fa={class:"flex items-center justify-between"},Ra={class:"flex items-center cursor-pointer group"},qa={class:"pt-2"},za=["disabled"],Na={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-4"},Ua={class:"flex items-center justify-center"},Ba={__name:"Login",setup(d){const m=be(),T=qe(),M=we(),u=me({email:"",phone:"",password:"",rememberMe:!1}),r=V("email"),h=V(null),A=V(!1),n=me({email:"",phone:"",password:"",general:""}),y=C=>{console.log("Login phone change:",C),A.value=C.isValid,u.phone=C.fullNumber,C.isValid&&C.fullNumber&&(n.phone="")},j=V(!1),E=V(!1),f=V(null),_=()=>{let C=!0;return Object.keys(n).forEach(x=>{n[x]=""}),r.value==="email"?u.email?u.email.includes("@")?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)?u.email.length>100&&(n.email="L'adresse email est trop longue (max 100 caractères)",C=!1):(n.email="Format d'email invalide (exemple: nom@domaine.com)",C=!1):(n.email="L'adresse email doit contenir le symbole @",C=!1):(n.email="L'adresse email est obligatoire",C=!1):!u.phone||u.phone.trim()===""?(n.phone="📱 Le numéro de téléphone est obligatoire",C=!1):!A.value&&u.phone.length>3&&(n.phone="Format de téléphone invalide",C=!1),u.password?u.password.length<6?(n.password="Le mot de passe doit contenir au moins 6 caractères",C=!1):u.password.length>50?(n.password="Le mot de passe est trop long (max 50 caractères)",C=!1):u.password.includes(" ")&&(n.password="Le mot de passe ne doit pas contenir d'espaces",C=!1):(n.password="Le mot de passe est obligatoire",C=!1),C},I=async C=>{if(C&&(C.preventDefault(),C.stopPropagation()),!!_()){j.value=!0,n.general="";try{const x={password:u.password};r.value==="email"?x.email=u.email:x.phone=u.phone;const c=await M.login(x);if(c.success){if(window.$toast){const i=M.user?.name||M.user?.first_name||"utilisateur";window.$toast.success(`🎉 Bienvenue ${i} ! Redirection en cours...`,"✅ Connexion réussie")}console.log("User data après connexion:",M.user);const a=T.query.redirect,v=T.query.action;setTimeout(()=>{if(a&&(v==="participate"||v==="wishlist")){const $=a.match(/\/products\/(\d+)/)?.[1];if($){m.push({name:"customer.product.detail",params:{id:$}});return}}if(a){m.push(a);return}const i=M.getDefaultRedirect();console.log("Redirection logic:",{user:M.user,redirectTo:i,isAdmin:M.isAdmin,isMerchant:M.isMerchant,isCustomer:M.isCustomer}),m.push({name:i}).catch($=>{console.error("Erreur de redirection vers",i,":",$),m.push({name:"customer.dashboard"}).catch(()=>{m.push("/")})})},100)}else{const a=c.error||"Erreur de connexion inconnue";a.toLowerCase().includes("identifiants incorrects")||a.toLowerCase().includes("invalid credentials")||a.includes("401")?(n.general="Identifiants incorrects. Vérifiez votre adresse email et votre mot de passe.",n.email="Adresse email ou mot de passe incorrect",n.password="Adresse email ou mot de passe incorrect"):a.toLowerCase().includes("trop de tentatives")||a.toLowerCase().includes("too many")||a.includes("429")?n.general="Trop de tentatives de connexion. Veuillez patienter 15 minutes avant de réessayer.":a.toLowerCase().includes("network")||a.toLowerCase().includes("réseau")||a.toLowerCase().includes("connexion")?n.general="Problème de connexion internet. Vérifiez votre connexion et réessayez.":a.toLowerCase().includes("email")&&a.toLowerCase().includes("verify")?n.general="Votre compte n'est pas encore vérifié. Vérifiez votre boîte email et cliquez sur le lien de vérification.":a.toLowerCase().includes("blocked")||a.toLowerCase().includes("suspendu")?n.general="Votre compte est temporairement suspendu. Contactez le support client.":n.general=`${a}`,window.$toast&&window.$toast.error(n.general,"🚫 Erreur de connexion"),setTimeout(()=>{n.email,document.getElementById("email")?.focus()},100)}}catch(x){console.error("Erreur lors de la connexion:",x);let c="Une erreur technique est survenue. Veuillez réessayer.";if(x.response?.status===401)c="🚫 Identifiants incorrects. Vérifiez votre adresse email et votre mot de passe.",n.email="Adresse email ou mot de passe incorrect",n.password="Adresse email ou mot de passe incorrect";else if(x.response?.status===422)if(x.response.data?.errors){const a=x.response.data.errors;a.email&&(n.email=a.email[0]),a.password&&(n.password=a.password[0]),c="⚠️ Veuillez corriger les erreurs ci-dessous."}else c="⚠️ Données invalides. Vérifiez vos informations.";else x.response?.status===429?c="⏳ Trop de tentatives de connexion. Veuillez patienter 15 minutes avant de réessayer.":x.response?.status===500?c="🔧 Erreur du serveur. Nos équipes sont notifiées. Veuillez réessayer dans quelques minutes.":x.response?.status===503?c="⚙️ Service temporairement indisponible. Maintenance en cours.":x.code==="NETWORK_ERROR"||!x.response?c="🌐 Impossible de joindre le serveur. Vérifiez votre connexion internet.":x.response?.data?.message?c=`${x.response.data.message}`:x.message&&(c=`${x.message}`);if(n.general=c,window.$toast){let a="🚫 Erreur de connexion";x.response?.status===500?a="🔧 Erreur serveur":x.code==="NETWORK_ERROR"&&(a="🌐 Problème réseau"),window.$toast.error(c,a)}setTimeout(()=>{n.email?document.getElementById("email")?.focus():n.password?document.getElementById("password")?.focus():document.getElementById("email")?.focus()},100)}finally{j.value=!1}}};Ae(()=>u.email,C=>{n.email&&C&&C.includes("@")&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C)&&(n.email="")},{debounce:300}),Ae(()=>u.password,C=>{n.password&&C&&C.length>=6&&C.length<=50&&!C.includes(" ")&&(n.password="")},{debounce:300}),Ae([()=>u.email,()=>u.password],()=>{n.general&&(n.general="")});const F=()=>{f.value=null,sessionStorage.removeItem("registration_success")};return ue(()=>{if(T.query.registered==="true"){const C=sessionStorage.getItem("registration_success");if(C)try{f.value=JSON.parse(C),f.value.email&&(u.email=f.value.email)}catch(x){console.error("Erreur lors du parsing des données d'inscription:",x)}else T.query.email&&(u.email=T.query.email,f.value={email:T.query.email,first_name:"utilisateur",verification_message:"Un email de vérification a été envoyé à votre adresse. Veuillez consulter votre boîte email pour vérifier votre compte.",requires_verification:!0})}}),(C,x)=>{const c=fe("router-link");return t(),s("div",Xr,[e("div",Jr,[e("div",Yr,[e("img",{class:"h-20 w-auto",src:l(We),alt:"Koumbaya"},null,8,Qr)]),x[10]||(x[10]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Content de vous revoir ! ",-1)),x[11]||(x[11]=e("p",{class:"text-center text-lg text-gray-600 mb-8"}," Connectez-vous pour accéder à vos tombolas ",-1)),e("p",ea,[x[9]||(x[9]=U(" Pas encore de compte ? ",-1)),p(c,{to:"/register",class:"font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors ml-1"},{default:oe(()=>x[8]||(x[8]=[U(" Inscrivez-vous gratuitement → ",-1)])),_:1,__:[8]})])]),e("div",ta,[e("div",sa,[e("div",oa,[f.value?(t(),s("div",ra,[e("div",aa,[x[17]||(x[17]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",na,[e("div",ia," Inscription réussie ! Bienvenue "+o(f.value.first_name),1),e("div",la,o(f.value.verification_message),1),f.value.email?(t(),s("div",da,[x[15]||(x[15]=e("div",{class:"font-medium mb-1"},"Que faire maintenant :",-1)),e("ul",ua,[e("li",null,[x[12]||(x[12]=U("Consultez votre boîte email : ",-1)),e("strong",null,o(f.value.email),1)]),x[13]||(x[13]=e("li",null,"Cliquez sur le lien de vérification dans l'email",-1)),x[14]||(x[14]=e("li",null,"Revenez ici pour vous connecter avec vos identifiants",-1))])])):R("",!0)]),e("button",{onClick:F,class:"flex-shrink-0 ml-2 text-green-400 hover:text-green-600 transition-colors",title:"Fermer ce message"},x[16]||(x[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])):R("",!0),e("form",{onSubmit:xe(I,["prevent"]),class:"space-y-6"},[e("div",ca,[e("button",{type:"button",onClick:x[0]||(x[0]=a=>r.value="email"),class:Q(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",r.value==="email"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[p(l(st),{class:"w-4 h-4 inline-block mr-2"}),x[18]||(x[18]=U(" Email ",-1))],2),e("button",{type:"button",onClick:x[1]||(x[1]=a=>r.value="phone"),class:Q(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",r.value==="phone"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[p(l(Je),{class:"w-4 h-4 inline-block mr-2"}),x[19]||(x[19]=U(" Téléphone ",-1))],2)]),n.general?(t(),s("div",ma,[e("div",pa,[e("div",ga,[p(l(je),{class:"w-6 h-6 text-red-500 animate-pulse"})]),e("div",va,[e("div",fa,o(n.general),1),n.general.includes("Identifiants incorrects")?(t(),s("div",xa,x[20]||(x[20]=[e("div",{class:"font-medium mb-1"},"💡 Conseils :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Vérifiez que votre adresse email est correcte"),e("li",null,"Assurez-vous que les majuscules/minuscules sont respectées"),e("li",null,"Essayez de réinitialiser votre mot de passe si nécessaire")],-1)]))):n.general.includes("connexion internet")?(t(),s("div",ba,x[21]||(x[21]=[e("div",{class:"font-medium mb-1"},"💡 Conseils :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Vérifiez votre connexion WiFi ou données mobiles"),e("li",null,"Essayez de rafraîchir la page"),e("li",null,"Contactez votre fournisseur internet si le problème persiste")],-1)]))):n.general.includes("Trop de tentatives")?(t(),s("div",ha,x[22]||(x[22]=[e("div",{class:"font-medium mb-1"},"💡 Que faire :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Attendez 15 minutes avant de réessayer"),e("li",null,"Utilisez ce temps pour vérifier vos identifiants"),e("li",null,"Réinitialisez votre mot de passe si nécessaire")],-1)]))):R("",!0)]),e("button",{onClick:x[2]||(x[2]=a=>n.general=""),class:"flex-shrink-0 ml-2 text-red-400 hover:text-red-600 transition-colors",title:"Fermer ce message"},x[23]||(x[23]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])):R("",!0),r.value==="email"?(t(),s("div",ya,[e("label",_a,[e("div",wa,[p(l(st),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),x[24]||(x[24]=e("span",null,"Adresse e-mail",-1))])]),G(e("input",{id:"email",name:"email",type:"email","onUpdate:modelValue":x[3]||(x[3]=a=>u.email=a),required:"",class:Q(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":n.email,"border-blue-300 focus:border-blue-500":!n.email&&u.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)}]),style:{color:"#5f5f5f"},placeholder:"exemple@koumbaya.com"},null,2),[[ee,u.email]]),n.email?(t(),s("p",$a,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(n.email),1)])):!n.email&&u.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)?(t(),s("p",ka,x[25]||(x[25]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),U(" ✓ Adresse email valide ",-1)]))):R("",!0)])):R("",!0),r.value==="phone"?(t(),s("div",Ca,[e("label",ja,[e("div",Aa,[p(l(Je),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),x[26]||(x[26]=e("span",null,"Numéro de téléphone",-1))])]),p(gt,{ref_key:"phoneInputRef",ref:h,modelValue:u.phone,"onUpdate:modelValue":x[4]||(x[4]=a=>u.phone=a),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:y},null,8,["modelValue"]),n.phone?(t(),s("p",Pa,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(n.phone),1)])):A.value?(t(),s("p",Ma,x[27]||(x[27]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),U(" ✓ Numéro de téléphone valide ",-1)]))):R("",!0)])):R("",!0),e("div",Ea,[e("label",Sa,[e("div",Da,[p(l(Bt),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),x[28]||(x[28]=e("span",null,"Mot de passe",-1))])]),e("div",Ta,[G(e("input",{id:"password",name:"password",type:E.value?"text":"password","onUpdate:modelValue":x[5]||(x[5]=a=>u.password=a),required:"",class:Q(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":n.password,"border-blue-300 focus:border-blue-500":!n.password&&u.password&&u.password.length>=6}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Ia),[[lt,u.password]]),e("button",{type:"button",onClick:x[6]||(x[6]=a=>E.value=!E.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[E.value?(t(),de(l(ut),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(t(),de(l(Fe),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),n.password?(t(),s("p",La,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(n.password),1)])):!n.password&&u.password&&u.password.length>=6?(t(),s("p",Va,x[29]||(x[29]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),U(" ✓ Mot de passe valide ",-1)]))):R("",!0)]),e("div",Fa,[e("label",Ra,[G(e("input",{id:"remember-me",name:"remember-me",type:"checkbox","onUpdate:modelValue":x[7]||(x[7]=a=>u.rememberMe=a),class:"w-4 h-4 text-koumbaya-primary bg-white border-2 border-gray-300 rounded focus:ring-koumbaya-primary focus:ring-2 transition-colors"},null,512),[[_e,u.rememberMe]]),x[30]||(x[30]=e("span",{class:"ml-3 text-sm text-gray-700 group-hover:text-gray-900 transition-colors"}," Se souvenir de moi ",-1))]),p(c,{to:"/forgot-password",class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors"},{default:oe(()=>x[31]||(x[31]=[U(" Mot de passe oublié ? ",-1)])),_:1,__:[31]})]),e("div",qa,[e("button",{type:"submit",disabled:j.value,class:"koumbaya-btn koumbaya-btn-primary koumbaya-btn-full koumbaya-btn-lg relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all duration-300"},[j.value?(t(),s("span",Na,x[32]||(x[32]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1)]))):R("",!0),e("span",Ua,[j.value?R("",!0):(t(),de(l(tt),{key:0,class:"w-5 h-5 mr-2 group-hover:translate-x-1 transition-transform"})),U(" "+o(j.value?"Connexion en cours...":"Se connecter"),1)])],8,za)])],32),x[33]||(x[33]=ie('<div class="my-8" data-v-b168a1c4><div class="relative" data-v-b168a1c4><div class="absolute inset-0 flex items-center" data-v-b168a1c4><div class="w-full border-t border-gray-200" data-v-b168a1c4></div></div><div class="relative flex justify-center text-sm" data-v-b168a1c4><span class="px-4 bg-white text-gray-500 font-medium" data-v-b168a1c4>Ou continuez avec</span></div></div></div><div class="grid grid-cols-2 gap-4" data-v-b168a1c4><button class="flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl shadow-sm bg-white hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group" data-v-b168a1c4><svg class="w-5 h-5 text-gray-600 group-hover:text-gray-700" viewBox="0 0 24 24" data-v-b168a1c4><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-b168a1c4></path><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-b168a1c4></path><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-b168a1c4></path><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-b168a1c4></path></svg><span class="ml-2 text-sm font-medium text-gray-700" data-v-b168a1c4>Google</span></button><button class="flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl shadow-sm bg-white hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group" data-v-b168a1c4><svg class="w-5 h-5 text-gray-600 group-hover:text-gray-700" fill="currentColor" viewBox="0 0 24 24" data-v-b168a1c4><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" data-v-b168a1c4></path></svg><span class="ml-2 text-sm font-medium text-gray-700" data-v-b168a1c4>Twitter</span></button></div>',2))])])])])}}},Oa=$e(Ba,[["__scopeId","data-v-b168a1c4"]]),ht={async loginWithFacebook(){try{const m=await le().get("/auth/facebook");m.redirect_url&&(window.location.href=m.redirect_url)}catch(d){throw console.error("Facebook login error:",d),new Error("Erreur lors de la connexion avec Facebook")}},async loginWithGoogle(){try{const m=await le().get("/auth/google");m.redirect_url&&(window.location.href=m.redirect_url)}catch(d){throw console.error("Google login error:",d),new Error("Erreur lors de la connexion avec Google")}},async loginWithApple(){try{const m=await le().get("/auth/apple");m.redirect_url&&(window.location.href=m.redirect_url)}catch(d){throw console.error("Apple login error:",d),new Error("Erreur lors de la connexion avec Apple")}},async handleSocialCallback(d,m){try{const M=await le().get(`/auth/${d}/callback`,{params:m});if(M.access_token){const u=we();return u.setUser(M.user),u.setToken(M.access_token),{success:!0,user:M.user,message:M.message}}else throw new Error("Réponse invalide du serveur")}catch(T){return console.error("Social callback error:",T),{success:!1,message:T.response?.data?.message||"Erreur lors de l'authentification"}}},async openSocialLoginPopup(d){return new Promise((m,T)=>{try{const M=window.open(`/api/auth/${d}`,"socialLogin","width=600,height=700,scrollbars=yes,resizable=yes"),u=setInterval(()=>{M.closed&&(clearInterval(u),ht.checkAuthenticationStatus().then(m).catch(T))},1e3);setTimeout(()=>{clearInterval(u),M.closed||M.close(),T(new Error("Timeout lors de l'authentification"))},3e5)}catch(M){T(M)}})},async checkAuthenticationStatus(){try{const m=await le().get("/auth/me");return m.user?(we().setUser(m.user),{success:!0,user:m.user}):{success:!1}}catch{return{success:!1}}}},Ha={class:"min-h-screen bg-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},Ga={class:"max-w-4xl w-full"},Ka={class:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden"},Wa={class:"grid grid-cols-1 lg:grid-cols-2"},Za={class:"p-8 lg:p-12"},Xa={class:"max-w-md mx-auto"},Ja={class:"text-gray-600 mb-8"},Ya={class:"mb-6"},Qa={class:"grid grid-cols-2 gap-3"},en={class:"flex items-center"},tn={key:0,class:"w-full h-full rounded-full bg-white scale-50"},sn={class:"flex items-center"},on={key:0,class:"w-full h-full rounded-full bg-white scale-50"},rn={key:0,class:"transition-all duration-300"},an={key:0,class:"mt-2 text-sm text-red-600"},nn={class:"grid grid-cols-2 gap-4"},ln={key:0,class:"mt-1 text-sm text-red-600"},dn={key:0,class:"mt-1 text-sm text-red-600"},un={key:0,class:"mt-1 text-sm text-red-600"},cn={key:0,class:"mt-1 text-sm text-red-600"},mn={class:"relative"},pn=["disabled"],gn=["value"],vn={key:0,class:"mt-1 text-sm text-red-600"},fn={key:1,class:"mt-1 text-sm text-gray-500"},xn={key:1,class:"grid grid-cols-2 gap-4 transition-all duration-300"},bn=["required"],hn={key:0,class:"mt-1 text-sm text-red-600"},yn={key:0,class:"mt-1 text-sm text-red-600"},_n={class:"grid grid-cols-2 gap-4"},wn={class:"relative"},$n=["type"],kn={key:0,class:"mt-1 text-sm text-red-600"},Cn={class:"relative"},jn=["type"],An={key:0,class:"mt-1 text-sm text-red-600"},Pn={class:"flex items-start space-x-3"},Mn={class:"flex items-center h-6"},En={key:2,class:"text-sm text-red-600"},Sn={key:3,class:"rounded-xl bg-red-50 p-4 border border-red-200"},Dn={class:"flex"},Tn={class:"ml-3"},In={class:"mt-1 text-sm text-red-700"},Ln=["disabled"],Vn={key:0,class:"flex items-center space-x-2"},Fn={key:1},Rn="/logo_white.png",qn={__name:"Register",setup(d){const m=be(),T=we(),{get:M}=le(),u=V(!1),r=V(!1),h=V([]),A=V(!1),n=V(!1);V("GA");const y=me({account_type:"personal",business_name:"",first_name:"",last_name:"",email:"",phone:"",city:"",address:"",country_id:"",password:"",password_confirmation:"",terms:!1}),j=me({account_type:"",business_name:"",first_name:"",last_name:"",email:"",phone:"",city:"",address:"",country_id:"",password:"",password_confirmation:"",terms:""}),E=()=>{Object.keys(j).forEach(a=>{j[a]=""});let c=!0;return y.account_type==="business"&&!y.business_name.trim()&&(j.business_name="Le nom de l'entreprise est requis pour un compte business",c=!1),y.first_name.trim()||(j.first_name="Le prénom est requis",c=!1),y.last_name.trim()||(j.last_name="Le nom est requis",c=!1),y.email?/\S+@\S+\.\S+/.test(y.email)||(j.email="Format d'email invalide",c=!1):(j.email="L'email est requis",c=!1),!y.phone||y.phone.trim()===""?(j.phone="Le numéro de téléphone est requis",c=!1):!n.value&&y.phone.length>3&&(j.phone="Format de téléphone invalide",c=!1),y.account_type==="business"&&!y.city.trim()&&(j.city="La ville est requise pour un compte business",c=!1),y.country_id||(j.country_id="Le pays est requis",c=!1),y.password?y.password.length<8&&(j.password="Le mot de passe doit contenir au moins 8 caractères",c=!1):(j.password="Le mot de passe est requis",c=!1),y.password!==y.password_confirmation&&(j.password_confirmation="Les mots de passe ne correspondent pas",c=!1),y.terms||(j.terms="Vous devez accepter les conditions d'utilisation",c=!1),c},f=c=>{console.log("Phone change:",c),n.value=c.isValid,y.phone=c.fullNumber,c.isValid&&c.fullNumber&&(j.phone="")},_=async()=>{if(!E())return;T.clearError();const c={account_type:y.account_type,first_name:y.first_name.trim(),last_name:y.last_name.trim(),email:y.email.trim(),phone:y.phone.trim(),country_id:parseInt(y.country_id),password:y.password,password_confirmation:y.password_confirmation,can_sell:y.account_type==="business",can_buy:!0};y.account_type==="business"&&(c.city=y.city.trim(),c.address=y.address.trim()||null),y.account_type==="business"&&y.business_name.trim()&&(c.business_name=y.business_name.trim());const a=await T.register(c);if(a.success){console.log("Inscription réussie, données utilisateur:",T.user),T.logout();const v=y.account_type==="business"?"marchand":"client",i=a.verification_type==="email_link"?`Un email de vérification a été envoyé à ${a.verification_sent_to}. Veuillez cliquer sur le lien dans votre email, puis vous connecter ci-dessous.`:`Un code de vérification a été envoyé à ${a.verification_sent_to}. Veuillez vérifier votre compte, puis vous connecter ci-dessous.`;sessionStorage.setItem("registration_success",JSON.stringify({email:y.email.trim(),first_name:a.user?.first_name||y.first_name,account_type:v,verification_message:i,requires_verification:a.requires_verification||!1})),console.log("Redirection vers la page de connexion après inscription"),m.push({name:"login",query:{registered:"true",email:y.email.trim()}})}else if(console.error("Erreur lors de l'inscription:",a),window.$toast){const v=a.message||"Une erreur est survenue lors de l'inscription";window.$toast.error(v,"Erreur d'inscription")}},I=async()=>{try{T.clearError(),await ht.loginWithFacebook()}catch(c){T.setError(c.message||"Erreur lors de la connexion avec Facebook")}},F=async()=>{try{T.clearError(),await ht.loginWithGoogle()}catch(c){T.setError(c.message||"Erreur lors de la connexion avec Google")}},C=async()=>{try{T.clearError(),await ht.loginWithApple()}catch(c){T.setError(c.message||"Erreur lors de la connexion avec Apple")}},x=async()=>{try{A.value=!0;const c=await M("/countries");h.value=c.countries||[];const a=h.value.find(v=>v.name==="Gabon");a&&!y.country_id&&(y.country_id=a.id)}catch(c){console.error("Erreur lors du chargement des pays:",c)}finally{A.value=!1}};return ue(()=>{x()}),(c,a)=>{const v=fe("router-link");return t(),s("div",Ha,[e("div",Ga,[e("div",Ka,[e("div",Wa,[e("div",{class:"bg-gradient-to-br from-[#0099cc] to-[#0088bb] p-8 lg:p-12 flex flex-col justify-center relative overflow-hidden"},[a[16]||(a[16]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute -top-10 -right-10 w-40 h-40 bg-white rounded-full"}),e("div",{class:"absolute -bottom-16 -left-16 w-60 h-60 bg-white rounded-full"})],-1)),e("div",{class:"relative z-10"},[e("div",{class:"flex items-center mb-8"},[e("img",{src:Rn,alt:"Logo Koumbaya",class:"h-16 w-auto mr-4"})]),a[15]||(a[15]=ie('<h2 class="text-4xl lg:text-5xl font-bold text-white mb-6"> Rejoignez notre marketplace ! </h2><p class="text-blue-100 text-lg leading-relaxed mb-8"> Créez votre compte hybride et profitez d&#39;une expérience unique : <strong class="text-white">achetez malin</strong> et <strong class="text-white">vendez facilement</strong> sur la même plateforme. </p><div class="space-y-4"><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Compte hybride acheteur-vendeur</span></div><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Produits authentiques à prix réduits</span></div><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Système de notation communautaire</span></div></div>',3))])]),e("div",Za,[e("div",Xa,[a[40]||(a[40]=e("h3",{class:"text-3xl font-bold text-gray-900 mb-2"},"Créer un compte",-1)),e("p",Ja,[a[18]||(a[18]=U(" Déjà membre ? ",-1)),p(v,{to:"/login",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},{default:oe(()=>a[17]||(a[17]=[U(" Se connecter ",-1)])),_:1,__:[17]})]),e("div",{class:"space-y-3 mb-8"},[e("button",{onClick:I,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},a[19]||(a[19]=[e("svg",{class:"w-5 h-5 mr-3",viewBox:"0 0 24 24",fill:"#1877F2"},[e("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})],-1),U(" Continuer avec Facebook ",-1)])),e("button",{onClick:F,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},a[20]||(a[20]=[ie('<svg class="w-5 h-5 mr-3" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Continuer avec Google ',2)])),e("button",{onClick:C,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},a[21]||(a[21]=[e("svg",{class:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12.017 0C8.396 0 8.025.044 8.025 2.551c0 1.983 1.396 3.329 3.396 3.329 3.329 0 3.329-2.551 3.329-2.551S14.75.044 12.017 0zm2.076 24c-1.825 0-2.631-1.078-4.076-1.078-1.513 0-2.513 1.078-4.025 1.078C3.759 24 0 18.444 0 12.861c0-5.516 3.759-9.861 8.944-9.861 1.825 0 2.631 1.078 4.076 1.078 1.513 0 2.513-1.078 4.025-1.078C19.278 3 24 7.861 24 12.861 24 18.444 19.278 24 14.093 24z"})],-1),U(" Continuer avec Apple ",-1)]))]),a[41]||(a[41]=ie('<div class="relative my-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white text-gray-500">ou créer avec email</span></div></div>',1)),e("div",Ya,[a[24]||(a[24]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-3"},"Type de compte",-1)),e("div",Qa,[e("div",{onClick:a[0]||(a[0]=i=>y.account_type="personal"),class:Q(["relative cursor-pointer p-4 border-2 rounded-xl transition-all duration-200 hover:border-[#0099cc]/50",y.account_type==="personal"?"border-[#0099cc] bg-[#0099cc]/5":"border-gray-200"])},[e("div",en,[e("div",{class:Q(["w-4 h-4 rounded-full border-2 mr-3 transition-colors",y.account_type==="personal"?"border-[#0099cc] bg-[#0099cc]":"border-gray-300"])},[y.account_type==="personal"?(t(),s("div",tn)):R("",!0)],2),a[22]||(a[22]=e("div",null,[e("h4",{class:"font-semibold text-gray-900"},"Personnel"),e("p",{class:"text-xs text-gray-600"},"Acheteur particulier")],-1))])],2),e("div",{onClick:a[1]||(a[1]=i=>y.account_type="business"),class:Q(["relative cursor-pointer p-4 border-2 rounded-xl transition-all duration-200 hover:border-[#0099cc]/50",y.account_type==="business"?"border-[#0099cc] bg-[#0099cc]/5":"border-gray-200"])},[e("div",sn,[e("div",{class:Q(["w-4 h-4 rounded-full border-2 mr-3 transition-colors",y.account_type==="business"?"border-[#0099cc] bg-[#0099cc]":"border-gray-300"])},[y.account_type==="business"?(t(),s("div",on)):R("",!0)],2),a[23]||(a[23]=e("div",null,[e("h4",{class:"font-semibold text-gray-900"},"Business"),e("p",{class:"text-xs text-gray-600"},"Vendeur professionnel")],-1))])],2)])]),e("form",{onSubmit:xe(_,["prevent"]),class:"space-y-5"},[y.account_type==="business"?(t(),s("div",rn,[a[25]||(a[25]=e("label",{for:"business_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Nom de l'entreprise * ",-1)),G(e("input",{id:"business_name","onUpdate:modelValue":a[2]||(a[2]=i=>y.business_name=i),type:"text",required:"",class:Q(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.business_name}]),style:{color:"#5f5f5f"},placeholder:"Ma Super Entreprise"},null,2),[[ee,y.business_name]]),j.business_name?(t(),s("p",an,o(j.business_name),1)):R("",!0)])):R("",!0),e("div",nn,[e("div",null,[a[26]||(a[26]=e("label",{for:"first_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Prénom * ",-1)),G(e("input",{id:"first_name","onUpdate:modelValue":a[3]||(a[3]=i=>y.first_name=i),type:"text",required:"",class:Q(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.first_name}]),style:{color:"#5f5f5f"},placeholder:"Jean"},null,2),[[ee,y.first_name]]),j.first_name?(t(),s("p",ln,o(j.first_name),1)):R("",!0)]),e("div",null,[a[27]||(a[27]=e("label",{for:"last_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Nom * ",-1)),G(e("input",{id:"last_name","onUpdate:modelValue":a[4]||(a[4]=i=>y.last_name=i),type:"text",required:"",class:Q(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.last_name}]),style:{color:"#5f5f5f"},placeholder:"Dupont"},null,2),[[ee,y.last_name]]),j.last_name?(t(),s("p",dn,o(j.last_name),1)):R("",!0)])]),e("div",null,[a[28]||(a[28]=e("label",{for:"email",class:"block text-sm font-semibold text-gray-900 mb-2"}," Adresse email * ",-1)),G(e("input",{id:"email","onUpdate:modelValue":a[5]||(a[5]=i=>y.email=i),type:"email",required:"",class:Q(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.email}]),style:{color:"#5f5f5f"},placeholder:"jean@exemple.com"},null,2),[[ee,y.email]]),j.email?(t(),s("p",un,o(j.email),1)):R("",!0)]),e("div",null,[a[29]||(a[29]=e("label",{for:"phone",class:"block text-sm font-semibold text-gray-900 mb-2"}," Numéro de téléphone * ",-1)),p(gt,{ref:"phoneInputRef",modelValue:y.phone,"onUpdate:modelValue":a[6]||(a[6]=i=>y.phone=i),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:f},null,8,["modelValue"]),j.phone?(t(),s("p",cn,o(j.phone),1)):R("",!0)]),e("div",null,[a[32]||(a[32]=e("label",{for:"country",class:"block text-sm font-semibold text-gray-900 mb-2"}," Pays * ",-1)),e("div",mn,[G(e("select",{id:"country","onUpdate:modelValue":a[7]||(a[7]=i=>y.country_id=i),required:"",class:Q(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all appearance-none bg-white",{"border-red-300 bg-red-50":j.country_id}]),style:{color:"#5f5f5f"},disabled:A.value},[a[30]||(a[30]=e("option",{value:"",disabled:""},"Sélectionnez votre pays",-1)),(t(!0),s(te,null,se(h.value,i=>(t(),s("option",{key:i.id,value:i.id},o(i.name),9,gn))),128))],10,pn),[[ne,y.country_id]]),a[31]||(a[31]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),j.country_id?(t(),s("p",vn,o(j.country_id),1)):R("",!0),A.value?(t(),s("p",fn,"Chargement des pays...")):R("",!0)]),y.account_type=="business"?(t(),s("div",xn,[e("div",null,[a[33]||(a[33]=e("label",{for:"city",class:"block text-sm font-semibold text-gray-900 mb-2"}," Ville * ",-1)),G(e("input",{id:"city","onUpdate:modelValue":a[8]||(a[8]=i=>y.city=i),type:"text",required:y.account_type==="business",class:Q(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.city}]),style:{color:"#5f5f5f"},placeholder:"Libreville"},null,10,bn),[[ee,y.city]]),j.city?(t(),s("p",hn,o(j.city),1)):R("",!0)]),e("div",null,[a[34]||(a[34]=e("label",{for:"address",class:"block text-sm font-semibold text-gray-900 mb-2"}," Adresse ",-1)),G(e("input",{id:"address","onUpdate:modelValue":a[9]||(a[9]=i=>y.address=i),type:"text",class:Q(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.address}]),style:{color:"#5f5f5f"},placeholder:"123 Rue Example"},null,2),[[ee,y.address]]),j.address?(t(),s("p",yn,o(j.address),1)):R("",!0)])])):R("",!0),e("div",_n,[e("div",null,[a[35]||(a[35]=e("label",{for:"password",class:"block text-sm font-semibold text-gray-900 mb-2"}," Mot de passe * ",-1)),e("div",wn,[G(e("input",{id:"password","onUpdate:modelValue":a[10]||(a[10]=i=>y.password=i),type:u.value?"text":"password",required:"",class:Q(["w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.password}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,$n),[[lt,y.password]]),e("button",{type:"button",onClick:a[11]||(a[11]=i=>u.value=!u.value),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[u.value?(t(),de(l(ut),{key:1,class:"h-5 w-5"})):(t(),de(l(Fe),{key:0,class:"h-5 w-5"}))])]),j.password?(t(),s("p",kn,o(j.password),1)):R("",!0)]),e("div",null,[a[36]||(a[36]=e("label",{for:"password_confirmation",class:"block text-sm font-semibold text-gray-900 mb-2"}," Confirmer * ",-1)),e("div",Cn,[G(e("input",{id:"password_confirmation","onUpdate:modelValue":a[12]||(a[12]=i=>y.password_confirmation=i),type:r.value?"text":"password",required:"",class:Q(["w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":j.password_confirmation}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,jn),[[lt,y.password_confirmation]]),e("button",{type:"button",onClick:a[13]||(a[13]=i=>r.value=!r.value),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r.value?(t(),de(l(ut),{key:1,class:"h-5 w-5"})):(t(),de(l(Fe),{key:0,class:"h-5 w-5"}))])]),j.password_confirmation?(t(),s("p",An,o(j.password_confirmation),1)):R("",!0)])]),e("div",Pn,[e("div",Mn,[G(e("input",{id:"terms","onUpdate:modelValue":a[14]||(a[14]=i=>y.terms=i),type:"checkbox",class:Q(["h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded",{"border-red-500":j.terms}])},null,2),[[_e,y.terms]])]),a[37]||(a[37]=e("label",{for:"terms",class:"text-sm text-gray-600 leading-6"},[U(" J'accepte les "),e("a",{href:"#",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},"conditions d'utilisation"),U(" et la "),e("a",{href:"#",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},"politique de confidentialité")],-1))]),j.terms?(t(),s("p",En,o(j.terms),1)):R("",!0),l(T).error?(t(),s("div",Sn,[e("div",Dn,[p(l(He),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",Tn,[a[38]||(a[38]=e("h3",{class:"text-sm font-semibold text-red-800"}," Erreur d'inscription ",-1)),e("div",In,o(l(T).error),1)])])])):R("",!0),e("button",{type:"submit",disabled:l(T).loading,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[l(T).loading?(t(),s("span",Vn,a[39]||(a[39]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Création en cours...",-1)]))):(t(),s("span",Fn,"Créer mon compte Koumbaya"))],8,Ln)],32)])])])])])])}}},zn={class:"min-h-screen bg-white flex items-center justify-center py-12 px-4"},Nn={class:"max-w-md w-full bg-white rounded-3xl shadow-2xl border border-gray-100 p-8"},Un={class:"text-center mb-8"},Bn=["src"],On={key:0,class:"text-center"},Hn={key:1,class:"text-center"},Gn={class:"text-2xl font-bold text-[#0099cc] mb-2"},Kn={class:"text-gray-600 mb-6"},Wn={class:"space-y-3"},Zn={key:2,class:"text-center"},Xn={class:"text-gray-600 mb-6"},Jn={class:"space-y-3"},Yn={__name:"VerifyEmail",setup(d){const m=qe(),T=be(),M=we(),{get:u}=le(),r=V(!0),h=V(null),A=V(""),n=async()=>{try{const j=m.query.token;if(!j)throw new Error("Token de vérification manquant");const E=await u(`/auth/verify-email/${encodeURIComponent(j)}`);if(E.success)h.value=E,M.isAuthenticated&&await M.refreshUser();else throw new Error(E.message||"Erreur de vérification")}catch(j){console.error("Erreur lors de la vérification:",j),h.value={success:!1},A.value=j.response?.data?.message||j.message||"Une erreur est survenue lors de la vérification"}finally{r.value=!1}},y=()=>{if(M.isAuthenticated){const j=M.getDefaultRedirect();T.push({name:j}).catch(()=>{T.push("/dashboard")})}else T.push("/login")};return ue(()=>{n()}),(j,E)=>(t(),s("div",zn,[e("div",Nn,[e("div",Un,[e("img",{src:l(We),alt:"Logo Koumbaya",class:"h-16 w-auto mx-auto mb-4"},null,8,Bn)]),r.value?(t(),s("div",On,E[3]||(E[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-[#0099cc] border-t-transparent mx-auto mb-4"},null,-1),e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Vérification en cours...",-1),e("p",{class:"text-gray-600"},"Nous vérifions votre lien de vérification.",-1)]))):h.value?.success?(t(),s("div",Hn,[E[4]||(E[4]=e("div",{class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-[#0099cc]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("h2",Gn,o(h.value.already_verified?"Déjà vérifié !":"Compte vérifié !"),1),e("p",Kn,o(h.value.message),1),e("div",Wn,[e("button",{onClick:y,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"}," Accéder à mon compte "),e("button",{onClick:E[0]||(E[0]=f=>j.$router.push("/")),class:"w-full border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Retour à l'accueil ")])])):(t(),s("div",Zn,[E[5]||(E[5]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),E[6]||(E[6]=e("h2",{class:"text-2xl font-bold text-red-600 mb-2"},"Vérification échouée",-1)),e("p",Xn,o(A.value),1),e("div",Jn,[e("button",{onClick:E[1]||(E[1]=f=>j.$router.push("/register")),class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Créer un nouveau compte "),e("button",{onClick:E[2]||(E[2]=f=>j.$router.push("/login")),class:"w-full border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Se connecter ")])])),E[7]||(E[7]=ie('<div class="mt-8 p-4 bg-blue-50 rounded-xl border border-blue-200"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h4 class="text-sm font-semibold text-blue-900">Pourquoi vérifier mon compte ?</h4><p class="text-sm text-blue-700 mt-1"> La vérification de votre compte est nécessaire pour pouvoir acheter des produits et participer aux tombolas sur Koumbaya. </p></div></div></div>',1))])]))}},Qn={class:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},ei={class:"sm:mx-auto sm:w-full sm:max-w-md"},ti={class:"flex justify-center mb-8"},si=["src"],oi={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},ri={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},ai={class:"koumbaya-card-body p-8"},ni={class:"flex justify-center space-x-2 p-1 bg-gray-100 rounded-lg mb-6"},ii={key:0,class:"koumbaya-form-group"},li={for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},di={class:"flex items-center"},ui={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},ci={key:1,class:"koumbaya-form-group"},mi={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},pi={class:"flex items-center"},gi={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},vi={key:2,class:"rounded-xl bg-red-50 p-4 border border-red-200"},fi={class:"flex"},xi={class:"ml-3"},bi={class:"mt-1 text-sm text-red-700"},hi={key:3,class:"rounded-xl bg-green-50 p-4 border border-green-200"},yi={class:"flex"},_i={class:"ml-3"},wi={class:"mt-1 text-sm text-green-700"},$i=["disabled"],ki={key:0,class:"flex items-center space-x-2"},Ci={key:1},ji={class:"text-center"},Ai={__name:"ForgotPassword",setup(d){const m=be(),{post:T}=le(),M=V("email"),u=V(!1),r=V(!1),h=V(!1),A=me({email:"",phone:""}),n=me({email:"",phone:"",general:""}),y=f=>{u.value=f.isValid,A.phone=f.fullNumber,f.isValid&&(n.phone="")},j=()=>{Object.keys(n).forEach(_=>{n[_]=""});let f=!0;return M.value==="email"?A.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)||(n.email="Format d'email invalide",f=!1):(n.email="L'adresse email est obligatoire",f=!1):A.phone?u.value||(n.phone="Format de téléphone invalide",f=!1):(n.phone="Le numéro de téléphone est obligatoire",f=!1),f},E=async()=>{if(j()){r.value=!0,n.general="",h.value=!1;try{const f=M.value==="email"?A.email:A.phone,_=await T("/otp/send",{identifier:f,type:M.value==="email"?"email":"sms",purpose:"password_reset"});_.success?(h.value=!0,setTimeout(()=>{m.push({name:"reset-password-verify",query:{identifier:f,method:M.value}})},2e3)):n.general=_.message||"Une erreur est survenue"}catch(f){console.error("Erreur lors de l'envoi du code:",f),n.general="Une erreur est survenue lors de l'envoi du code"}finally{r.value=!1}}};return(f,_)=>{const I=fe("router-link");return t(),s("div",Qn,[e("div",ei,[e("div",ti,[e("img",{class:"h-20 w-auto",src:l(We),alt:"Koumbaya"},null,8,si)]),_[4]||(_[4]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Mot de passe oublié ? ",-1)),_[5]||(_[5]=e("p",{class:"text-center text-lg text-gray-600 mb-8"}," Entrez votre adresse email ou votre numéro de téléphone ",-1))]),e("div",oi,[e("div",ri,[e("div",ai,[e("form",{onSubmit:xe(E,["prevent"]),class:"space-y-6"},[e("div",ni,[e("button",{type:"button",onClick:_[0]||(_[0]=F=>M.value="email"),class:Q(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",M.value==="email"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[p(l(st),{class:"w-4 h-4 inline-block mr-2"}),_[6]||(_[6]=U(" Email ",-1))],2),e("button",{type:"button",onClick:_[1]||(_[1]=F=>M.value="phone"),class:Q(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",M.value==="phone"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[p(l(Je),{class:"w-4 h-4 inline-block mr-2"}),_[7]||(_[7]=U(" Téléphone ",-1))],2)]),M.value==="email"?(t(),s("div",ii,[e("label",li,[e("div",di,[p(l(st),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),_[8]||(_[8]=e("span",null,"Adresse e-mail",-1))])]),G(e("input",{id:"email",name:"email",type:"email","onUpdate:modelValue":_[2]||(_[2]=F=>A.email=F),required:"",class:Q(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":n.email}]),style:{color:"#5f5f5f"},placeholder:"exemple@koumbaya.com"},null,2),[[ee,A.email]]),n.email?(t(),s("p",ui,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(n.email),1)])):R("",!0)])):R("",!0),M.value==="phone"?(t(),s("div",ci,[e("label",mi,[e("div",pi,[p(l(Je),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),_[9]||(_[9]=e("span",null,"Numéro de téléphone",-1))])]),p(gt,{ref:"phoneInputRef",modelValue:A.phone,"onUpdate:modelValue":_[3]||(_[3]=F=>A.phone=F),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:y},null,8,["modelValue"]),n.phone?(t(),s("p",gi,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(n.phone),1)])):R("",!0)])):R("",!0),n.general?(t(),s("div",vi,[e("div",fi,[p(l(je),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",xi,[_[10]||(_[10]=e("h3",{class:"text-sm font-semibold text-red-800"},"Erreur",-1)),e("div",bi,o(n.general),1)])])])):R("",!0),h.value?(t(),s("div",hi,[e("div",yi,[p(l(Te),{class:"h-5 w-5 text-green-400 mt-0.5"}),e("div",_i,[_[11]||(_[11]=e("h3",{class:"text-sm font-semibold text-green-800"},"Code envoyé !",-1)),e("div",wi," Un code de réinitialisation a été envoyé à "+o(M.value==="email"?A.email:A.phone),1)])])])):R("",!0),e("button",{type:"submit",disabled:r.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[r.value?(t(),s("span",ki,_[12]||(_[12]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Envoi en cours...",-1)]))):(t(),s("span",Ci,"Envoyer le code"))],8,$i),e("div",ji,[p(I,{to:"/login",class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors"},{default:oe(()=>_[13]||(_[13]=[U(" ← Retour à la connexion ",-1)])),_:1,__:[13]})])],32)])])])])}}},Pi=$e(Ai,[["__scopeId","data-v-51805275"]]),Mi={class:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Ei={class:"sm:mx-auto sm:w-full sm:max-w-md"},Si={class:"flex justify-center mb-8"},Di=["src"],Ti={class:"text-center text-lg text-gray-600 mb-8"},Ii={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},Li={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},Vi={class:"koumbaya-card-body p-8"},Fi={class:"koumbaya-form-group"},Ri={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},qi={class:"koumbaya-form-group"},zi={class:"relative"},Ni=["type"],Ui={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Bi={class:"koumbaya-form-group"},Oi={class:"relative"},Hi=["type"],Gi={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Ki={key:0,class:"rounded-xl bg-red-50 p-4 border border-red-200"},Wi={class:"flex"},Zi={class:"ml-3"},Xi={class:"mt-1 text-sm text-red-700"},Ji={key:1,class:"rounded-xl bg-green-50 p-4 border border-green-200"},Yi={class:"flex"},Qi=["disabled"],el={key:0,class:"flex items-center space-x-2"},tl={key:1},sl={class:"text-center"},ol=["disabled"],rl={key:0},al={key:1},nl={key:2},il={__name:"ResetPasswordVerify",setup(d){const m=be(),T=qe(),{post:M}=le(),u=V(T.query.identifier||""),r=V(T.query.method||"email"),h=V(!1),A=V(!1),n=V(!1),y=V(!1),j=V(!1),E=V(0),f=V(null),_=me({otp:"",password:"",password_confirmation:""}),I=me({otp:"",password:"",password_confirmation:"",general:""}),F=()=>{Object.keys(I).forEach(v=>{I[v]=""});let a=!0;return _.otp?_.otp.length!==6&&(I.otp="Le code doit contenir 6 chiffres",a=!1):(I.otp="Le code est obligatoire",a=!1),_.password?_.password.length<8&&(I.password="Le mot de passe doit contenir au moins 8 caractères",a=!1):(I.password="Le mot de passe est obligatoire",a=!1),_.password!==_.password_confirmation&&(I.password_confirmation="Les mots de passe ne correspondent pas",a=!1),a},C=async()=>{if(F()){h.value=!0,I.general="",A.value=!1;try{const a=await M("/auth/reset-password",{identifier:u.value,otp:_.otp,password:_.password,password_confirmation:_.password_confirmation});a.success?(A.value=!0,setTimeout(()=>{m.push({name:"login"})},2e3)):I.general=a.message||"Une erreur est survenue"}catch(a){console.error("Erreur lors de la réinitialisation:",a),a.response?.data?.message?I.general=a.response.data.message:I.general="Une erreur est survenue lors de la réinitialisation"}finally{h.value=!1}}},x=async()=>{j.value=!0;try{const a=await M("/otp/resend",{identifier:u.value,type:r.value==="email"?"email":"sms",purpose:"password_reset"});a.success?c():I.general=a.message||"Erreur lors du renvoi du code"}catch(a){console.error("Erreur lors du renvoi:",a),I.general="Erreur lors du renvoi du code"}finally{j.value=!1}},c=()=>{E.value=60,f.value=setInterval(()=>{E.value--,E.value<=0&&clearInterval(f.value)},1e3)};return ue(()=>{u.value||m.push({name:"forgot-password"})}),rt(()=>{f.value&&clearInterval(f.value)}),(a,v)=>(t(),s("div",Mi,[e("div",Ei,[e("div",Si,[e("img",{class:"h-20 w-auto",src:l(We),alt:"Koumbaya"},null,8,Di)]),v[5]||(v[5]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Vérification du code ",-1)),e("p",Ti," Entrez le code reçu "+o(r.value==="email"?"par email":"par SMS"),1)]),e("div",Ii,[e("div",Li,[e("div",Vi,[e("form",{onSubmit:xe(C,["prevent"]),class:"space-y-6"},[e("div",Fi,[v[6]||(v[6]=e("label",{for:"otp",class:"block text-sm font-medium text-gray-700 mb-2"}," Code de vérification ",-1)),G(e("input",{id:"otp",name:"otp",type:"text","onUpdate:modelValue":v[0]||(v[0]=i=>_.otp=i),required:"",maxlength:"6",class:Q(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 text-center text-2xl letter-spacing-wide",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":I.otp}]),style:{color:"#5f5f5f"},placeholder:"123456"},null,2),[[ee,_.otp]]),I.otp?(t(),s("p",Ri,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(I.otp),1)])):R("",!0)]),e("div",qi,[v[7]||(v[7]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," Nouveau mot de passe ",-1)),e("div",zi,[G(e("input",{id:"password",name:"password",type:n.value?"text":"password","onUpdate:modelValue":v[1]||(v[1]=i=>_.password=i),required:"",class:Q(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":I.password}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Ni),[[lt,_.password]]),e("button",{type:"button",onClick:v[2]||(v[2]=i=>n.value=!n.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[n.value?(t(),de(l(ut),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(t(),de(l(Fe),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),I.password?(t(),s("p",Ui,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(I.password),1)])):R("",!0)]),e("div",Bi,[v[8]||(v[8]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirmer le mot de passe ",-1)),e("div",Oi,[G(e("input",{id:"password_confirmation",name:"password_confirmation",type:y.value?"text":"password","onUpdate:modelValue":v[3]||(v[3]=i=>_.password_confirmation=i),required:"",class:Q(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":I.password_confirmation}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Hi),[[lt,_.password_confirmation]]),e("button",{type:"button",onClick:v[4]||(v[4]=i=>y.value=!y.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[y.value?(t(),de(l(ut),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(t(),de(l(Fe),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),I.password_confirmation?(t(),s("p",Gi,[p(l(je),{class:"w-4 h-4 mr-1"}),U(" "+o(I.password_confirmation),1)])):R("",!0)]),I.general?(t(),s("div",Ki,[e("div",Wi,[p(l(je),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",Zi,[v[9]||(v[9]=e("h3",{class:"text-sm font-semibold text-red-800"},"Erreur",-1)),e("div",Xi,o(I.general),1)])])])):R("",!0),A.value?(t(),s("div",Ji,[e("div",Yi,[p(l(Te),{class:"h-5 w-5 text-green-400 mt-0.5"}),v[10]||(v[10]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-semibold text-green-800"},"Mot de passe réinitialisé !"),e("div",{class:"mt-1 text-sm text-green-700"}," Redirection vers la page de connexion... ")],-1))])])):R("",!0),e("button",{type:"submit",disabled:h.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[h.value?(t(),s("span",el,v[11]||(v[11]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Réinitialisation...",-1)]))):(t(),s("span",tl,"Réinitialiser le mot de passe"))],8,Qi),e("div",sl,[e("button",{type:"button",onClick:x,disabled:j.value||E.value>0,class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors disabled:opacity-50"},[E.value>0?(t(),s("span",rl," Renvoyer le code ("+o(E.value)+"s) ",1)):j.value?(t(),s("span",al,"Envoi...")):(t(),s("span",nl,"Renvoyer le code"))],8,ol)])],32)])])])]))}},ll=$e(il,[["__scopeId","data-v-667fc4f1"]]),ke="/build/assets/placeholder-BS1MYrTN.jpg",Dt="/build/assets/placeholder-BS1MYrTN.jpg",dl={class:"bg-white"},ul={class:"relative bg-gradient-to-br from-[#0099cc]/5 via-white to-[#0099cc]/10 overflow-hidden"},cl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ml={class:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center min-h-[90vh] py-20"},pl={class:"space-y-8"},gl={class:"space-y-4"},vl={class:"inline-flex items-center gap-2 bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full text-sm font-medium"},fl={class:"flex flex-col sm:flex-row gap-4"},xl={class:"flex items-center gap-8 pt-8"},bl={class:"flex items-center gap-2 text-gray-600"},hl={class:"flex items-center gap-2 text-gray-600"},yl={class:"flex items-center gap-2 text-gray-600"},_l={class:"relative lg:h-[600px] flex items-center justify-center"},wl={class:"relative"},$l={class:"bg-white rounded-3xl shadow-2xl p-8 max-w-sm relative z-10 border border-gray-100"},kl={class:"relative mb-6"},Cl=["src","alt"],jl={class:"absolute -top-2 -right-2 bg-[#0099cc] text-white px-3 py-1 rounded-full text-sm font-bold"},Al={class:"space-y-4"},Pl={class:"text-xl font-bold text-black"},Ml={class:"text-gray-600"},El={class:"space-y-2"},Sl={class:"flex justify-between text-sm text-gray-600"},Dl={class:"font-semibold"},Tl={class:"w-full bg-gray-200 rounded-full h-3"},Il={class:"text-center text-sm text-gray-500"},Ll={class:"w-full bg-purple-600 text-white font-semibold py-3 rounded-xl hover:bg-purple-700 transition-colors flex items-center justify-center gap-2"},Vl={class:"absolute inline-flex items-center -top-8 -left-8 bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full text-sm font-medium z-20 animate-float"},Fl={key:0,class:"absolute -bottom-4 -right-8 bg-red-100 text-red-600 px-4 py-2 rounded-full text-sm font-medium z-20 animate-float-delayed flex items-center gap-1"},Rl={key:1,class:"absolute -bottom-4 -right-8 bg-yellow-100 text-yellow-600 px-4 py-2 rounded-full text-sm font-medium z-20 animate-float-delayed flex items-center gap-1"},ql={class:"py-20 bg-gray-50"},zl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Nl={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},Ul={class:"text-center"},Bl={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Ol={class:"text-center"},Hl={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Gl={class:"text-center"},Kl={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Wl={class:"text-center"},Zl={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Xl={class:"py-20"},Jl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Yl={class:"text-center mt-12"},Ql={class:"py-20 bg-gray-50"},ed={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},td={class:"flex items-center justify-between mb-12"},sd={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},od=["onClick"],rd={class:"absolute top-4 left-4 z-10"},ad={key:0,class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg flex items-center gap-1"},nd={key:1,class:"bg-gradient-to-r from-[#0099cc] to-cyan-500 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg flex items-center gap-1"},id={class:"absolute top-4 right-4 z-10"},ld={key:0,class:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg animate-pulse flex items-center gap-1"},dd={key:1,class:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg flex items-center gap-1"},ud={class:"relative mb-6 mt-4"},cd=["src","alt"],md={class:"absolute -bottom-3 -right-3"},pd={key:0,class:"bg-purple-600 text-white px-4 py-2 rounded-full font-semibold shadow-lg"},gd={key:1,class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold shadow-lg"},vd={class:"space-y-4"},fd={key:0,class:"text-gray-600"},xd={key:1,class:"text-gray-600"},bd={key:0,class:"space-y-2"},hd={class:"flex justify-between text-sm text-gray-600"},yd={class:"font-semibold"},_d={class:"w-full bg-gray-200 rounded-full h-3"},wd={class:"text-center text-sm text-gray-500"},$d={key:1,class:"flex items-center justify-between py-2"},kd={class:"text-center mt-12 md:hidden"},Cd={class:"py-20"},jd={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ad={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},Pd={class:"flex items-center mb-6"},Md=["src","alt"],Ed={class:"ml-4"},Sd={class:"font-semibold text-gray-900"},Dd={class:"text-sm text-gray-600"},Td={class:"flex items-center mb-4"},Id={class:"flex text-yellow-400"},Ld={class:"text-gray-700 italic leading-relaxed"},Vd={class:"mt-4 text-sm text-[#0099cc] font-medium"},Fd={class:"py-20 bg-gradient-to-r from-[#0099cc] to-cyan-600"},Rd={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},qd={class:"flex flex-col sm:flex-row gap-4 justify-center"},zd={__name:"Home",setup(d){const m=be(),{get:T}=le(),M=V([]),u=V(null);V({participants:"12 000+",productsWon:"250+",amountDistributed:"500M+",rating:"4.9/5"});const r=async()=>{try{console.log("Chargement des derniers produits mixtes...");const[f,_]=await Promise.all([T("/products/latest-lottery-only?limit=3"),T("/products/latest-direct?limit=3")]);console.log("Réponses API:",{lottery:f,direct:_});let I=[];if(f&&f.success&&f.data){const F=(f.data.products||f.data).slice(0,2).map(C=>({id:C.id,name:C.name||C.title,value:C.price||0,price:C.price||0,ticketPrice:C.ticket_price||C.active_lottery?.ticket_price||1e3,ticket_price:C.ticket_price||C.active_lottery?.ticket_price||1e3,image_url:C.image_url||C.main_image,image:C.image_url||C.main_image||ke,soldTickets:C.active_lottery?.sold_tickets||0,totalTickets:C.active_lottery?.total_tickets||1e3,isNew:n(C.created_at),sale_mode:"lottery",has_active_lottery:C.has_active_lottery||!1,lottery_ends_soon:C.lottery_ends_soon||!1,category:C.category}));I.push(...F)}if(_&&_.success&&_.data){const F=(_.data.products||_.data).slice(0,2).map(C=>({id:C.id,name:C.name||C.title,value:C.price||0,price:C.price||0,image_url:C.image_url||C.main_image,image:C.image_url||C.main_image||ke,isNew:n(C.created_at),sale_mode:"direct",category:C.category}));I.push(...F)}M.value=I.sort(()=>Math.random()-.5).slice(0,6),M.value.length===0&&A()}catch(f){console.error("Erreur lors du chargement des produits mixtes:",f),A()}},h=async()=>{try{console.log("Chargement du dernier produit tombola...");const f=await T("/products/latest-lottery");if(console.log("Réponse API dernier produit tombola:",f),f&&f.success&&f.data){const _=f.data.product,I=f.data.lottery;console.log("Données produit:",_),console.log("Données lottery:",I);const F=parseInt(I?.sold_tickets||0),C=parseInt(I?.total_tickets||1e3),x=C>0?Math.round(F/C*100):0;console.log("Tickets vendus (brut):",I?.sold_tickets),console.log("Total tickets (brut):",I?.total_tickets),console.log("Tickets vendus (parseInt):",F),console.log("Total tickets (parseInt):",C),console.log("Progression calculée:",x),C<100&&console.warn("⚠️ Total tickets semble faible:",C,"- vérifier les données API"),u.value={id:_.id,name:_.name||_.title,value:_.price||0,ticketPrice:I?.ticket_price||_.ticket_price||1500,image:_.image_url||_.main_image||ke,soldTickets:F,totalTickets:C,progress:x,timeRemaining:I?.time_remaining,isEndingSoon:I?.is_ending_soon||!1},console.log("Produit tombola final:",u.value)}else u.value={id:"fallback",name:"iPhone 15 Pro Max",value:1299e3,ticketPrice:1500,image:ke,soldTickets:750,totalTickets:1e3,progress:75}}catch(f){console.error("Erreur lors du chargement du dernier produit tombola:",f),u.value={id:"fallback",name:"iPhone 15 Pro Max",value:1299e3,ticketPrice:1500,image:ke,soldTickets:750,totalTickets:1e3,progress:75}}},A=()=>{M.value=[{id:"fallback-1",name:"iPhone 15 Pro Max",value:1299e3,price:1299e3,ticketPrice:1500,ticket_price:1500,image:ke,soldTickets:750,totalTickets:1e3,isNew:!0,sale_mode:"lottery",lottery_ends_soon:!1,category:{name:"Smartphones"}},{id:"fallback-2",name:"MacBook Pro M3",value:25e5,price:25e5,image:ke,isNew:!0,sale_mode:"direct",category:{name:"Ordinateurs"}},{id:"fallback-3",name:"Samsung Galaxy S24",value:95e4,price:95e4,ticketPrice:1200,ticket_price:1200,image:ke,soldTickets:320,totalTickets:800,isNew:!1,sale_mode:"lottery",lottery_ends_soon:!0,category:{name:"Smartphones"}},{id:"fallback-4",name:"AirPods Pro",value:38e4,price:38e4,image:ke,isNew:!1,sale_mode:"direct",category:{name:"Audio"}}]},n=f=>{if(!f)return!1;const _=new Date,I=new Date(f);return(_-I)/(1e3*60*60*24)<=7},y=V([{id:1,name:"Marie Dubois",location:"Libreville",avatar:Dt,review:"J'ai acheté un iPhone 14 Pro avec seulement 5 tickets ! Le processus était transparent et la livraison rapide.",won:"iPhone 14 Pro"},{id:2,name:"Jean Kamga",location:"Port-Gentil",avatar:Dt,review:"Koumbaya a changé ma vie ! J'ai obtenu une moto à prix réduit et maintenant je participe à toutes les tombolas.",won:"Yamaha MT-03"},{id:3,name:"Fatou Ndongo",location:"Franceville",avatar:Dt,review:"Platform très sérieuse, paiement sécurisé et service client réactif. Je recommande vivement !",won:"MacBook Air M2"}]),j=f=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(f).replace("XAF","FCFA"),E=f=>{m.push({name:"public.product.detail",params:{id:f.id}})};return Ae(u,f=>{f&&console.log("🔄 latestLotteryProduct mis à jour:",f)},{deep:!0}),ue(async()=>{console.log("🚀 Montage du composant Home - chargement des données..."),await Promise.all([r(),h()]),console.log("✅ Chargement terminé")}),(f,_)=>{const I=fe("router-link");return t(),s("div",dl,[e("section",ul,[e("div",cl,[e("div",ml,[e("div",pl,[e("div",gl,[e("div",vl,[p(l(xt),{class:"h-4 w-4"}),_[0]||(_[0]=e("span",null,"Nouveau au Gabon",-1))]),_[1]||(_[1]=ie('<h1 class="text-5xl lg:text-6xl xl:text-7xl font-bold text-black leading-none" data-v-9ff62910> Rendre l&#39;impossible <span class="text-[#0099cc]" data-v-9ff62910>accessible</span></h1><p class="text-xl lg:text-2xl text-gray-600 leading-relaxed" data-v-9ff62910> Des smartphones aux voitures, profitez de nos tombolas pour <strong class="text-[#0099cc]" data-v-9ff62910>acheter malin</strong> et obtenir des produits <strong class="text-[#0099cc]" data-v-9ff62910>à prix réduit</strong>. </p>',2))]),e("div",fl,[p(I,{to:"/products",class:"inline-flex items-center justify-center gap-2 bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold px-8 py-4 rounded-2xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl"},{default:oe(()=>[p(l(Be),{class:"h-5 w-5"}),_[2]||(_[2]=e("span",null,"Découvrir les produits",-1))]),_:1,__:[2]}),p(I,{to:"/how-it-works",class:"inline-flex items-center justify-center gap-2 border-2 border-[#0099cc] text-[#0099cc] hover:bg-[#0099cc]/5 font-semibold px-8 py-4 rounded-2xl transition-all duration-200"},{default:oe(()=>[p(l(ds),{class:"h-5 w-5"}),_[3]||(_[3]=e("span",null,"Comment ça marche",-1))]),_:1,__:[3]})]),e("div",xl,[e("div",bl,[p(l(at),{class:"h-6 w-6 text-[#0099cc]"}),_[4]||(_[4]=e("span",{class:"font-medium"},"100% sécurisé",-1))]),e("div",hl,[p(l(is),{class:"h-6 w-6 text-[#0099cc]"}),_[5]||(_[5]=e("span",{class:"font-medium"},"Produits authentiques",-1))]),e("div",yl,[p(l(Ot),{class:"h-6 w-6 text-[#0099cc]"}),_[6]||(_[6]=e("span",{class:"font-medium"},"Livraison gratuite",-1))])])]),e("div",_l,[e("div",wl,[e("div",$l,[e("div",kl,[e("img",{src:u.value?.image||l(ke),alt:u.value?.name||"Produit tombola",class:"w-full h-48 object-cover rounded-2xl bg-gray-100"},null,8,Cl),e("div",jl,o(j(u.value?.ticketPrice||1500)),1)]),e("div",Al,[e("div",null,[e("h3",Pl,o(u.value?.name||"iPhone 15 Pro Max"),1),e("p",Ml,"Valeur: "+o(j(u.value?.value||1299e3)),1)]),e("div",El,[e("div",Sl,[_[7]||(_[7]=e("span",null,"Progression",-1)),e("span",Dl,o(u.value?.progress||75)+"%",1)]),e("div",Tl,[e("div",{class:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full animate-pulse transition-all duration-500",style:Me({width:(u.value?.progress||75)+"%"})},null,4)]),e("div",Il,o(u.value?.soldTickets||750)+"/"+o(u.value?.totalTickets||1e3)+" tickets ",1)]),e("button",Ll,[p(l(De),{class:"h-5 w-5"}),_[8]||(_[8]=U(" Participer maintenant ",-1))])])]),e("div",Vl,[p(l(xt),{class:"h-4 w-4"}),_[9]||(_[9]=U(" Nouvelle tombola ",-1))]),u.value?.isEndingSoon?(t(),s("div",Fl,[p(l(Pe),{class:"h-4 w-4"}),_[10]||(_[10]=U(" Se termine bientôt ! ",-1))])):(t(),s("div",Rl,[p(l(Hs),{class:"h-4 w-4"}),_[11]||(_[11]=U(" Populaire ",-1))]))])])])])]),e("section",ql,[e("div",zl,[_[20]||(_[20]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Koumbaya en chiffres "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Rejoignez des milliers de participants qui ont déjà fait confiance à notre plateforme ")],-1)),e("div",Nl,[e("div",Ul,[e("div",Bl,[p(l(pt),{class:"h-10 w-10 text-[#0099cc]"})]),_[12]||(_[12]=e("div",{class:"text-4xl font-bold text-black mb-2"},"12 000+",-1)),_[13]||(_[13]=e("div",{class:"text-gray-600"},"Participants actifs",-1))]),e("div",Ol,[e("div",Hl,[p(l(Ye),{class:"h-10 w-10 text-[#0099cc]"})]),_[14]||(_[14]=e("div",{class:"text-4xl font-bold text-black mb-2"},"250+",-1)),_[15]||(_[15]=e("div",{class:"text-gray-600"},"Produits gagnés",-1))]),e("div",Gl,[e("div",Kl,[p(l(Ue),{class:"h-10 w-10 text-[#0099cc]"})]),_[16]||(_[16]=e("div",{class:"text-4xl font-bold text-black mb-2"},"500M+",-1)),_[17]||(_[17]=e("div",{class:"text-gray-600"},"FCFA distribués",-1))]),e("div",Wl,[e("div",Zl,[p(l(_t),{class:"h-10 w-10 text-[#0099cc]"})]),_[18]||(_[18]=e("div",{class:"text-4xl font-bold text-black mb-2"},"4.9/5",-1)),_[19]||(_[19]=e("div",{class:"text-gray-600"},"Note utilisateurs",-1))])])])]),e("section",Xl,[e("div",Jl,[_[22]||(_[22]=ie('<div class="text-center mb-16" data-v-9ff62910><h2 class="text-3xl md:text-4xl font-bold text-black mb-4" data-v-9ff62910> Simple comme bonjour </h2><p class="text-xl text-gray-600 max-w-3xl mx-auto" data-v-9ff62910> 3 étapes suffisent pour obtenir vos produits à prix cassés </p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12" data-v-9ff62910><div class="text-center group" data-v-9ff62910><div class="relative mx-auto w-24 h-24 mb-6" data-v-9ff62910><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-9ff62910></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-9ff62910><span class="text-2xl font-bold text-white" data-v-9ff62910>1</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-9ff62910>Choisissez votre produit</h3><p class="text-gray-600 leading-relaxed" data-v-9ff62910> Parcourez notre catalogue de produits authentiques et sélectionnez celui que vous souhaitez acquérir. </p></div><div class="text-center group" data-v-9ff62910><div class="relative mx-auto w-24 h-24 mb-6" data-v-9ff62910><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-9ff62910></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-9ff62910><span class="text-2xl font-bold text-white" data-v-9ff62910>2</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-9ff62910>Achetez vos tickets</h3><p class="text-gray-600 leading-relaxed" data-v-9ff62910> Participez à la tombola avec un petit budget. Plus vous prenez de tickets, meilleures sont vos chances d&#39;obtenir le produit. </p></div><div class="text-center group" data-v-9ff62910><div class="relative mx-auto w-24 h-24 mb-6" data-v-9ff62910><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-9ff62910></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-9ff62910><span class="text-2xl font-bold text-white" data-v-9ff62910>3</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-9ff62910>Obtenez votre produit</h3><p class="text-gray-600 leading-relaxed" data-v-9ff62910> Le tirage automatique désigne l&#39;acheteur. Nous livrons gratuitement partout au Gabon ! </p></div></div>',2)),e("div",Yl,[p(I,{to:"/how-it-works",class:"inline-flex items-center gap-2 bg-black hover:bg-gray-800 text-white font-semibold px-8 py-4 rounded-2xl transition-all duration-200"},{default:oe(()=>[_[21]||(_[21]=e("span",null,"En savoir plus",-1)),p(l(Xe),{class:"h-5 w-5"})]),_:1,__:[21]})])])]),e("section",Ql,[e("div",ed,[e("div",td,[_[24]||(_[24]=e("div",null,[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Produits en vedette "),e("p",{class:"text-xl text-gray-600"}," Découvrez les derniers produits - tombolas et achat direct ")],-1)),p(I,{to:"/products",class:"hidden md:inline-flex items-center gap-2 text-[#0099cc] hover:text-[#0088bb] font-semibold group"},{default:oe(()=>[_[23]||(_[23]=e("span",null,"Voir tout",-1)),p(l(Xe),{class:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]),_:1,__:[23]})]),e("div",sd,[(t(!0),s(te,null,se(M.value,F=>(t(),s("div",{key:F.id,onClick:C=>E(F),class:"bg-white rounded-3xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group border border-gray-100 relative overflow-hidden"},[e("div",rd,[F.sale_mode==="lottery"?(t(),s("span",ad,[p(l(De),{class:"h-4 w-4"}),_[25]||(_[25]=U(" Tombola ",-1))])):(t(),s("span",nd,[p(l(Js),{class:"h-4 w-4"}),_[26]||(_[26]=U(" Achat direct ",-1))]))]),e("div",id,[F.lottery_ends_soon&&F.sale_mode==="lottery"?(t(),s("span",ld,[p(l(Pe),{class:"h-4 w-4"}),_[27]||(_[27]=U(" Fin proche ! ",-1))])):F.isNew?(t(),s("span",dd,[p(l(xt),{class:"h-4 w-4"}),_[28]||(_[28]=U(" Nouveau ",-1))])):R("",!0)]),e("div",ud,[e("img",{src:F.image_url||F.main_image||F.image||"/images/products/placeholder.jpg",alt:F.name,class:"w-full h-48 object-cover rounded-2xl bg-gray-100 group-hover:scale-105 transition-transform duration-300"},null,8,cd),e("div",md,[F.sale_mode==="lottery"?(t(),s("div",pd,o(j(F.ticketPrice||F.ticket_price))+"/ticket ",1)):(t(),s("div",gd,o(j(F.price||F.value)),1))])]),e("div",vd,[e("div",null,[e("h3",{class:Q(["text-xl font-bold text-black group-hover:transition-colors",F.sale_mode==="lottery"?"group-hover:text-purple-600":"group-hover:text-[#0099cc]"])},o(F.name),3),F.sale_mode==="lottery"?(t(),s("p",fd," Valeur totale: "+o(j(F.value||F.price)),1)):(t(),s("p",xd,o(F.category?.name||"Catégorie"),1))]),F.sale_mode==="lottery"?(t(),s("div",bd,[e("div",hd,[_[29]||(_[29]=e("span",null,"Progression",-1)),e("span",yd,o(Math.round((F.soldTickets||0)/(F.totalTickets||1e3)*100))+"%",1)]),e("div",_d,[e("div",{class:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:Me({width:Math.round((F.soldTickets||0)/(F.totalTickets||1e3)*100)+"%"})},null,4)]),e("div",wd,o(F.soldTickets||0)+"/"+o(F.totalTickets||1e3)+" tickets vendus ",1)])):(t(),s("div",$d,_[30]||(_[30]=[e("span",{class:"text-sm text-gray-500"},"Statut",-1),e("span",{class:"text-sm font-medium text-green-600 flex items-center gap-1"},[e("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),U(" Disponible ")],-1)]))),e("button",{class:Q(["w-full font-semibold py-3 rounded-xl transition-all duration-200 group-hover:scale-105 group-hover:shadow-lg flex items-center justify-center gap-2",F.sale_mode==="lottery"?"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white":"bg-gradient-to-r from-[#0099cc] to-cyan-500 hover:from-[#0088bb] hover:to-cyan-600 text-white"])},[F.sale_mode==="lottery"?(t(),de(l(De),{key:0,class:"h-5 w-5"})):(t(),de(l(Ke),{key:1,class:"h-5 w-5"})),U(" "+o(F.sale_mode==="lottery"?"Participer maintenant":"Acheter maintenant"),1)],2)])],8,od))),128))]),e("div",kd,[p(I,{to:"/products",class:"inline-flex items-center gap-2 bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold px-8 py-4 rounded-2xl transition-all"},{default:oe(()=>[_[31]||(_[31]=e("span",null,"Voir tous les produits",-1)),p(l(Xe),{class:"h-5 w-5"})]),_:1,__:[31]})])])]),e("section",Cd,[e("div",jd,[_[32]||(_[32]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Ils ont acheté malin avec Koumbaya "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Découvrez les témoignages de nos clients satisfaits ")],-1)),e("div",Ad,[(t(!0),s(te,null,se(y.value,F=>(t(),s("div",{key:F.id,class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},[e("div",Pd,[e("img",{src:F.avatar,alt:F.name,class:"w-12 h-12 rounded-full bg-gray-200"},null,8,Md),e("div",Ed,[e("div",Sd,o(F.name),1),e("div",Dd,o(F.location),1)])]),e("div",Td,[e("div",Id,[(t(),s(te,null,se(5,C=>p(l(_t),{key:C,class:"h-5 w-5 fill-current"})),64))])]),e("blockquote",Ld,' "'+o(F.review)+'" ',1),e("div",Vd," A obtenu: "+o(F.won),1)]))),128))])])]),e("section",Fd,[e("div",Rd,[_[35]||(_[35]=e("h2",{class:"text-4xl md:text-5xl font-bold text-white mb-6"}," Votre prochain lot vous attend ",-1)),_[36]||(_[36]=e("p",{class:"text-xl text-blue-100 mb-8 leading-relaxed"}," Rejoignez la communauté Koumbaya et tentez votre chance dès aujourd'hui. L'inscription est gratuite et ne prend que quelques minutes. ",-1)),e("div",qd,[p(I,{to:"/register",class:"inline-flex items-center justify-center gap-2 bg-white text-[#0099cc] hover:text-[#0088bb] font-bold px-10 py-5 rounded-2xl transition-all duration-200 hover:scale-105 shadow-xl"},{default:oe(()=>[p(l(us),{class:"h-6 w-6"}),_[33]||(_[33]=e("span",null,"S'inscrire gratuitement",-1))]),_:1,__:[33]}),p(I,{to:"/products",class:"inline-flex items-center justify-center gap-2 border-2 border-white text-white hover:bg-white hover:text-[#0099cc] font-bold px-10 py-5 rounded-2xl transition-all duration-200"},{default:oe(()=>[p(l(Fe),{class:"h-6 w-6"}),_[34]||(_[34]=e("span",null,"Voir les produits",-1))]),_:1,__:[34]})])])])])}}},Nd=$e(zd,[["__scopeId","data-v-9ff62910"]]),Ud=["src","alt"],Bd={class:"text-xs font-medium"},Od={key:2,class:"absolute inset-0 flex items-center justify-center bg-gray-100"},Hd={name:"ProductImage"},ze=Object.assign(Hd,{props:{src:{type:String,default:""},alt:{type:String,default:""},fallbackText:{type:String,default:"Image non disponible"},containerClass:{type:String,default:"w-full h-48"},imageClass:{type:String,default:"w-full h-full object-cover"},fallbackClass:{type:String,default:"w-full h-full"}},setup(d){const m=d,T=V(!1),M=V(!1),u=re(()=>m.src?m.src.startsWith("http")||m.src.startsWith("data:image/")||m.src.startsWith("/")?m.src:`/storage/products/${m.src}`:""),r=()=>{T.value=!0,M.value=!1},h=()=>{T.value=!1,M.value=!1},{src:A}=js(m);return Ae(A,()=>{T.value=!1,M.value=!0}),(n,y)=>(t(),s("div",{class:Q(["relative overflow-hidden bg-gray-100 flex items-center justify-center",d.containerClass])},[!T.value&&u.value?(t(),s("img",{key:0,src:u.value,alt:d.alt||"Image du produit",class:Q(d.imageClass),onError:r,onLoad:h},null,42,Ud)):R("",!0),T.value||!u.value?(t(),s("div",{key:1,class:Q([d.fallbackClass,"flex flex-col items-center justify-center text-gray-600 bg-gray-100"])},[y[0]||(y[0]=e("svg",{class:"w-8 h-8 mb-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})],-1)),e("span",Bd,o(d.fallbackText),1)],2)):R("",!0),M.value&&!T.value?(t(),s("div",Od,y[1]||(y[1]=[e("svg",{class:"animate-spin h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):R("",!0)],2))}}),Gd={class:"min-h-screen bg-gray-50"},Kd={class:"bg-gradient-to-r from-blue-600 to-blue-600 text-white"},Wd={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Zd={class:"text-center"},Xd={class:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},Jd={class:"bg-white/20 rounded-lg p-4"},Yd={class:"text-2xl font-bold"},Qd={class:"bg-white/20 rounded-lg p-4"},eu={class:"text-2xl font-bold"},tu={class:"bg-white/20 rounded-lg p-4"},su={class:"text-2xl font-bold"},ou={class:"bg-white/20 rounded-lg p-4"},ru={class:"text-2xl font-bold"},au={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},nu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},iu={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},lu={class:"flex space-x-2"},du=["onClick"],uu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},cu={class:"flex gap-4"},mu=["disabled"],pu={key:0,class:"flex items-center text-blue-800"},gu={class:"text-sm mt-1"},vu={key:1,class:"flex items-center text-red-800"},fu={class:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8"},xu={key:0,class:"p-8 text-center"},bu={key:1,class:"p-6"},hu={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},yu={class:"flex items-center space-x-4"},_u=["src","alt"],wu={class:"flex-1"},$u={class:"font-medium text-gray-900"},ku={class:"text-sm text-gray-600 mb-1"},Cu={class:"text-sm font-medium text-blue-600"},ju={class:"text-xs text-gray-500"},Au={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Pu={key:0,class:"p-8 text-center"},Mu={key:1,class:"p-8 text-center text-gray-500"},Eu={key:2,class:"overflow-x-auto"},Su={class:"min-w-full divide-y divide-gray-200"},Du={class:"bg-white divide-y divide-gray-200"},Tu={class:"px-6 py-4 whitespace-nowrap"},Iu={class:"flex items-center"},Lu={class:"text-sm font-medium text-gray-900"},Vu={class:"text-sm text-gray-500"},Fu={class:"text-xs text-gray-600"},Ru={class:"px-6 py-4 whitespace-nowrap"},qu={class:"flex items-center"},zu={class:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3"},Nu={class:"text-sm font-medium text-gray-900"},Uu={class:"text-sm text-gray-500"},Bu={class:"px-6 py-4 whitespace-nowrap"},Ou={class:"text-sm font-mono font-medium text-gray-900"},Hu={class:"px-6 py-4 whitespace-nowrap"},Gu={class:"text-sm text-gray-900"},Ku={class:"w-16 bg-gray-200 rounded-full h-1.5 mt-1"},Wu={class:"text-xs text-gray-500"},Zu={class:"px-6 py-4 whitespace-nowrap"},Xu={class:"text-sm text-gray-900"},Ju={class:"text-xs text-gray-500"},Yu={class:"px-6 py-4 whitespace-nowrap"},Qu={class:"text-xs font-mono text-gray-600 bg-gray-100 rounded px-2 py-1"},ec=["onClick"],tc={__name:"Results",setup(d){const{get:m}=le(),T=V([]),M=V([]),u=V({}),r=V(!1),h=V(!1),A=V("month"),n=V(""),y=V(!1),j=V(null),E=[{value:"week",label:"Cette semaine"},{value:"month",label:"Ce mois"},{value:"year",label:"Cette année"}],f=async()=>{r.value=!0;try{const a=await m(`/public/results?period=${A.value}&limit=50`);T.value=a.data.results||[],u.value=a.data.stats||{}}catch(a){console.error("Erreur lors du chargement des résultats:",a)}finally{r.value=!1}},_=async()=>{h.value=!0;try{const a=await m("/public/results/recent-winners?limit=6");M.value=a.data.winners||[]}catch(a){console.error("Erreur lors du chargement des gagnants récents:",a)}finally{h.value=!1}},I=async()=>{if(n.value.trim()){y.value=!0,j.value=null;try{const a=await m(`/public/results/verify/${n.value.trim()}`);j.value=a.data,j.value.valid=!0}catch{j.value={valid:!1}}finally{y.value=!1}}},F=async a=>{try{await navigator.clipboard.writeText(a),window.$toast&&window.$toast.success("Code copié dans le presse-papiers!","✅ Copié")}catch(v){console.error("Erreur lors de la copie:",v)}},C=a=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0)+" FCFA",x=a=>a?a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(0)+"K":a.toString():"0",c=a=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a));return ue(async()=>{await Promise.all([f(),_()])}),(a,v)=>(t(),s("div",Gd,[e("div",Kd,[e("div",Wd,[e("div",Zd,[v[5]||(v[5]=e("h1",{class:"text-4xl font-bold mb-4"},"🏆 Résultats des Tombolas",-1)),v[6]||(v[6]=e("p",{class:"text-xl opacity-90 mb-8"}," Découvrez les gagnants et vérifiez les résultats officiels ",-1)),e("div",Xd,[e("div",Jd,[e("div",Yd,o(u.value.total_lotteries||0),1),v[1]||(v[1]=e("div",{class:"text-sm opacity-90"},"Tombolas terminées",-1))]),e("div",Qd,[e("div",eu,o(u.value.total_winners||0),1),v[2]||(v[2]=e("div",{class:"text-sm opacity-90"},"Gagnants heureux",-1))]),e("div",tu,[e("div",su,o(x(u.value.total_prizes_value)),1),v[3]||(v[3]=e("div",{class:"text-sm opacity-90"},"Valeur des prix",-1))]),e("div",ou,[e("div",ru,o(u.value.total_tickets_sold||0),1),v[4]||(v[4]=e("div",{class:"text-sm opacity-90"},"Tickets vendus",-1))])])])])]),e("div",au,[e("div",nu,[e("div",iu,[v[7]||(v[7]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Filtrer par période"),e("p",{class:"text-gray-600"},"Choisissez la période à afficher")],-1)),e("div",lu,[(t(),s(te,null,se(E,i=>e("button",{key:i.value,onClick:$=>{A.value=i.value,f()},class:Q(["px-4 py-2 rounded-md text-sm font-medium",A.value===i.value?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},o(i.label),11,du)),64))])])]),e("div",uu,[v[11]||(v[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"🔍 Vérifier un Résultat",-1)),e("div",cu,[G(e("input",{"onUpdate:modelValue":v[0]||(v[0]=i=>n.value=i),type:"text",placeholder:"Entrez le code de vérification...",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",onKeyup:$t(I,["enter"])},null,544),[[ee,n.value]]),e("button",{onClick:I,disabled:!n.value||y.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},o(y.value?"Vérification...":"Vérifier"),9,mu)]),j.value?(t(),s("div",{key:0,class:Q(["mt-4 p-4 rounded-lg",[j.value.valid?"bg-blue-50 border border-blue-200":"bg-red-50 border border-red-200"]])},[j.value.valid?(t(),s("div",pu,[p(l(Te),{class:"w-5 h-5 mr-2"}),e("div",null,[v[9]||(v[9]=e("div",{class:"font-medium"},"✅ Résultat vérifié",-1)),e("div",gu,[U(" Tombola "+o(j.value.lottery_number)+" - "+o(j.value.product_title)+" ",1),v[8]||(v[8]=e("br",null,null,-1)),U("Gagnant: "+o(j.value.winner_initial)+"**** le "+o(c(j.value.draw_date)),1)])])])):(t(),s("div",vu,[p(l(At),{class:"w-5 h-5 mr-2"}),v[10]||(v[10]=e("div",{class:"font-medium"},"Code invalide",-1))]))],2)):R("",!0)]),e("div",fu,[v[13]||(v[13]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"🎉 Gagnants Récents")],-1)),h.value?(t(),s("div",xu,v[12]||(v[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1)]))):(t(),s("div",bu,[e("div",hu,[(t(!0),s(te,null,se(M.value,i=>(t(),s("div",{key:i.lottery_number,class:"bg-gradient-to-r from-blue-50 to-blue-50 rounded-lg p-4 border border-blue-100"},[e("div",yu,[e("img",{src:i.product_image||"/images/products/placeholder.jpg",alt:i.product_title,class:"w-16 h-16 rounded-lg object-cover"},null,8,_u),e("div",wu,[e("div",$u,o(i.product_title),1),e("div",ku,o(C(i.product_value)),1),e("div",Cu," Gagnant: "+o(i.winner_initial)+"**** ("+o(i.winner_city)+") ",1),e("div",ju," Il y a "+o(i.days_ago)+" jour"+o(i.days_ago>1?"s":""),1)])])]))),128))])]))]),e("div",Au,[v[18]||(v[18]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"📋 Historique Complet des Résultats")],-1)),r.value?(t(),s("div",Pu,v[14]||(v[14]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des résultats...",-1)]))):T.value.length===0?(t(),s("div",Mu,[p(l(Ye),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),v[15]||(v[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun résultat",-1)),v[16]||(v[16]=e("p",null,"Aucune tombola terminée pour cette période.",-1))])):(t(),s("div",Eu,[e("table",Su,[v[17]||(v[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Gagnant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ticket Gagnant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participation "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date de Tirage "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Vérification ")])],-1)),e("tbody",Du,[(t(!0),s(te,null,se(T.value,i=>(t(),s("tr",{key:i.lottery_id,class:"hover:bg-gray-50"},[e("td",Tu,[e("div",Iu,[p(ze,{src:i.product.image_url||i.product.image,alt:i.product.title,"container-class":"w-12 h-12 rounded-lg mr-4","image-class":"w-12 h-12 rounded-lg object-cover","fallback-class":"w-12 h-12 rounded-lg","fallback-text":"Photo"},null,8,["src","alt"]),e("div",null,[e("div",Lu,o(i.product.title),1),e("div",Vu,o(i.product.category?.name||i.product.category||"Sans catégorie")+" • "+o(C(i.product.price)),1),e("div",Fu,o(i.lottery_number),1)])])]),e("td",Ru,[e("div",qu,[e("div",zu,o(i.winner.initial),1),e("div",null,[e("div",Nu,o(i.winner.name),1),e("div",Uu,o(i.winner.city),1)])])]),e("td",Bu,[e("div",Ou,o(i.winning_ticket),1)]),e("td",Hu,[e("div",Gu,o(i.sold_tickets)+"/"+o(i.total_tickets)+" tickets ",1),e("div",Ku,[e("div",{class:"bg-blue-600 h-1.5 rounded-full",style:Me({width:i.participation_rate+"%"})},null,4)]),e("div",Wu,o(i.participation_rate)+"%",1)]),e("td",Zu,[e("div",Xu,o(c(i.draw_date)),1),e("div",Ju,o(C(i.total_revenue))+" collectés ",1)]),e("td",Yu,[e("div",Qu,o(i.verification_code),1),e("button",{onClick:$=>F(i.verification_code),class:"text-xs text-blue-600 hover:text-blue-700 mt-1"}," Copier ",8,ec)])]))),128))])])]))])])]))}},sc={class:"min-h-screen bg-gray-50"},oc={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},rc={class:"bg-white rounded-lg shadow-lg border border-gray-200 p-8 mb-8"},ac={class:"max-w-md mx-auto"},nc={class:"mb-6"},ic=["disabled"],lc={key:0,class:"flex items-center justify-center"},dc={key:1},uc={key:0,class:"mb-8"},cc={key:0,class:"bg-white rounded-lg shadow-lg border-2 border-blue-200 overflow-hidden"},mc={class:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white p-6"},pc={class:"flex items-center justify-center"},gc={class:"p-8"},vc={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fc={class:"space-y-4"},xc={class:"space-y-2"},bc={class:"flex justify-between"},hc={class:"font-medium"},yc={class:"flex justify-between"},_c={class:"font-medium"},wc={class:"flex justify-between"},$c={class:"font-medium"},kc={class:"space-y-4"},Cc={class:"space-y-2"},jc={class:"flex justify-between"},Ac={class:"font-medium"},Pc={class:"flex justify-between"},Mc={class:"font-mono font-medium text-blue-600"},Ec={class:"flex justify-between"},Sc={class:"font-medium"},Dc={class:"mt-8 p-4 bg-blue-50 rounded-lg"},Tc={class:"flex items-start"},Ic={class:"text-sm text-blue-800"},Lc={key:1,class:"bg-white rounded-lg shadow-lg border-2 border-red-200"},Vc={class:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6"},Fc={class:"flex items-center justify-center"},Rc={class:"p-8"},qc={class:"text-center"},zc={class:"text-gray-700 mb-4"},Nc={class:"font-mono bg-gray-100 px-2 py-1 rounded"},Uc={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},Bc={class:"flex items-start"},Oc={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Hc={key:0,class:"text-center text-gray-500 py-8"},Gc={key:1,class:"space-y-3"},Kc={class:"font-mono text-sm text-gray-600"},Wc={class:"text-xs text-gray-500"},Zc={__name:"VerifyWinner",setup(d){const{get:m}=le(),T=V(""),M=V(!1),u=V(null),r=V([]),h=async()=>{if(!(!T.value.trim()||T.value.length!==8)){M.value=!0,u.value=null;try{const E=await m(`/public/results/verify/${T.value.trim()}`);u.value=E.data,u.value.valid=!0,A(T.value,!0)}catch{u.value={valid:!1,code:T.value.trim()},A(T.value,!1)}finally{M.value=!1}}},A=(E,f)=>{const _={id:Date.now(),code:E,valid:f,verified_at:new Date};r.value.unshift(_),r.value.length>5&&(r.value=r.value.slice(0,5)),localStorage.setItem("recent_verifications",JSON.stringify(r.value))},n=()=>{try{const E=localStorage.getItem("recent_verifications");E&&(r.value=JSON.parse(E).map(f=>({...f,verified_at:new Date(f.verified_at)})).slice(0,5))}catch(E){console.error("Failed to load recent verifications",E)}},y=E=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(E)),j=E=>{const _=new Date-E,I=Math.floor(_/6e4);if(I<1)return"À l'instant";if(I<60)return`${I}min`;const F=Math.floor(I/60);return F<24?`${F}h`:`${Math.floor(F/24)}j`};return ue(()=>{n()}),(E,f)=>(t(),s("div",sc,[f[24]||(f[24]=ie('<div class="bg-gradient-to-r from-blue-600 to-blue-600 text-white"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div class="text-center"><h1 class="text-4xl font-bold mb-4">🔍 Vérification de Gain</h1><p class="text-xl opacity-90 mb-8"> Vérifiez l&#39;authenticité d&#39;un résultat de tombola </p></div></div></div>',1)),e("div",oc,[e("div",rc,[f[5]||(f[5]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6 text-center"},[e("span",{class:"text-blue-600"},"🏆"),U(" Outil de Vérification Officiel ")],-1)),e("div",ac,[e("div",nc,[f[2]||(f[2]=e("label",{for:"verification-code",class:"block text-sm font-medium text-gray-700 mb-2"}," Code de Vérification ",-1)),G(e("input",{id:"verification-code","onUpdate:modelValue":f[0]||(f[0]=_=>T.value=_),type:"text",placeholder:"Ex: A1B2C3D4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center text-lg font-mono uppercase",maxlength:"8",onInput:f[1]||(f[1]=_=>T.value=_.target.value.toUpperCase()),onKeyup:$t(h,["enter"])},null,544),[[ee,T.value]]),f[3]||(f[3]=e("p",{class:"mt-2 text-sm text-gray-600"}," Entrez le code de 8 caractères fourni avec votre notification de gain ",-1))]),e("button",{onClick:h,disabled:!T.value||M.value||T.value.length!==8,class:"w-full py-3 px-6 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors duration-200"},[M.value?(t(),s("span",lc,f[4]||(f[4]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),U(" Vérification en cours... ",-1)]))):(t(),s("span",dc," 🔍 Vérifier le Gain "))],8,ic)])]),u.value?(t(),s("div",uc,[u.value.valid?(t(),s("div",cc,[e("div",mc,[e("div",pc,[p(l(Te),{class:"w-12 h-12 mr-4"}),f[6]||(f[6]=e("div",null,[e("h3",{class:"text-2xl font-bold"},"✅ GAIN VÉRIFIÉ"),e("p",{class:"text-blue-100"},"Ce résultat est authentique et officiel")],-1))])]),e("div",gc,[e("div",vc,[e("div",fc,[f[10]||(f[10]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"📋 Informations de la Tombola",-1)),e("div",xc,[e("div",bc,[f[7]||(f[7]=e("span",{class:"text-gray-600"},"Numéro :",-1)),e("span",hc,o(u.value.lottery_number),1)]),e("div",yc,[f[8]||(f[8]=e("span",{class:"text-gray-600"},"Produit :",-1)),e("span",_c,o(u.value.product_title),1)]),e("div",wc,[f[9]||(f[9]=e("span",{class:"text-gray-600"},"Date du tirage :",-1)),e("span",$c,o(y(u.value.draw_date)),1)])])]),e("div",kc,[f[14]||(f[14]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"🏆 Gagnant",-1)),e("div",Cc,[e("div",jc,[f[11]||(f[11]=e("span",{class:"text-gray-600"},"Identité :",-1)),e("span",Ac,o(u.value.winner_initial)+"****",1)]),e("div",Pc,[f[12]||(f[12]=e("span",{class:"text-gray-600"},"Code :",-1)),e("span",Mc,o(T.value),1)]),e("div",Ec,[f[13]||(f[13]=e("span",{class:"text-gray-600"},"Vérifié le :",-1)),e("span",Sc,o(y(u.value.verification_date)),1)])])])]),e("div",Dc,[e("div",Tc,[p(l(Oe),{class:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),e("div",Ic,[f[15]||(f[15]=e("p",{class:"font-medium mb-1"},"Certificat de Vérification",-1)),e("p",null,"Ce résultat a été vérifié dans notre système officiel. La tombola "+o(u.value.lottery_number)+" s'est terminée le "+o(y(u.value.draw_date))+" avec un tirage transparent et équitable.",1)])])])])])):(t(),s("div",Lc,[e("div",Vc,[e("div",Fc,[p(l(At),{class:"w-12 h-12 mr-4"}),f[16]||(f[16]=e("div",null,[e("h3",{class:"text-2xl font-bold"},"CODE INVALIDE"),e("p",{class:"text-red-100"},"Ce code de vérification n'existe pas")],-1))])]),e("div",Rc,[e("div",qc,[e("p",zc,[f[17]||(f[17]=U(" Le code ",-1)),e("span",Nc,o(T.value),1),f[18]||(f[18]=U(" ne correspond à aucun résultat officiel dans notre système. ",-1))]),e("div",Uc,[e("div",Bc,[p(l(He),{class:"w-5 h-5 text-yellow-500 mt-0.5 mr-3"}),f[19]||(f[19]=e("div",{class:"text-sm text-yellow-800"},[e("p",{class:"font-medium mb-1"},"Vérifications possibles :"),e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"Assurez-vous que le code est correct (8 caractères)"),e("li",null,"Vérifiez que le code provient d'une source officielle"),e("li",null,"Contactez notre support si vous pensez qu'il y a une erreur")])],-1))])])])])]))])):R("",!0),f[23]||(f[23]=ie('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"><h3 class="text-lg font-semibold text-gray-900 mb-4">ℹ️ Comment ça marche ?</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">1️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Recevez votre code</h4><p class="text-sm text-gray-600"> Après un tirage, le gagnant reçoit un code de vérification unique par email et SMS </p></div><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">2️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Vérifiez en ligne</h4><p class="text-sm text-gray-600"> Entrez le code sur cette page pour vérifier l&#39;authenticité du résultat </p></div><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">3️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Confirmez le gain</h4><p class="text-sm text-gray-600"> Un résultat valide confirme officiellement le gain et ses détails </p></div></div></div>',1)),e("div",Oc,[f[22]||(f[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"🔍 Vérifications Récentes",-1)),r.value.length===0?(t(),s("div",Hc,[p(l(ot),{class:"w-12 h-12 mx-auto text-gray-300 mb-3"}),f[20]||(f[20]=e("p",null,"Aucune vérification récente",-1))])):(t(),s("div",Gc,[(t(!0),s(te,null,se(r.value,_=>(t(),s("div",{key:_.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("span",Kc,o(_.code),1),f[21]||(f[21]=e("span",{class:"mx-2"},"→",-1)),e("span",{class:Q(["text-sm",_.valid?"text-blue-600":"text-red-600"])},o(_.valid?"✅ Valide":"Invalide"),3)]),e("span",Wc,o(j(_.verified_at)),1)]))),128))]))])])]))}},Xc={class:"min-h-screen bg-gray-50"},Jc={class:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white"},Yc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Qc={class:"text-center"},e0={class:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},t0={class:"bg-white/20 rounded-lg p-4"},s0={class:"text-2xl font-bold"},o0={class:"bg-white/20 rounded-lg p-4"},r0={class:"text-2xl font-bold"},a0={class:"bg-white/20 rounded-lg p-4"},n0={class:"text-2xl font-bold"},i0={class:"bg-white/20 rounded-lg p-4"},l0={class:"text-2xl font-bold"},d0={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},u0={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},c0={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},m0={class:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4"},p0=["value"],g0={class:"flex items-center space-x-4"},v0={class:"text-sm text-gray-500"},f0={key:0,class:"text-center py-12"},x0={key:1,class:"text-center py-12"},b0={key:2},h0={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},y0={class:"relative h-48 bg-gray-200"},_0=["src","alt"],w0={class:"absolute bottom-3 left-3"},$0={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white text-gray-900"},k0={class:"p-6"},C0={class:"mb-4"},j0={class:"text-lg font-semibold text-gray-900 mb-1"},A0={class:"text-2xl font-bold text-purple-600"},P0={class:"text-sm text-gray-500"},M0={class:"bg-blue-50 rounded-lg p-4 mb-4"},E0={class:"flex items-center"},S0={class:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3"},D0={class:"flex-1"},T0={class:"text-sm text-blue-700"},I0={class:"grid grid-cols-2 gap-4 mb-4"},L0={class:"text-center"},V0={class:"text-lg font-bold text-gray-900"},F0={class:"text-center"},R0={class:"text-lg font-bold text-gray-900"},q0={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},z0={class:"flex items-center justify-between"},N0={class:"text-sm text-gray-600"},U0=["onClick"],B0={key:0,class:"flex items-center justify-center space-x-2"},O0=["disabled"],H0=["onClick"],G0={key:1,class:"px-3 py-2 text-sm text-gray-500"},K0=["disabled"],W0={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Z0={class:"flex items-center justify-center min-h-screen px-4"},X0={class:"relative bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto"},J0={class:"p-6"},Y0={class:"flex items-center justify-between mb-4"},Q0={class:"space-y-6"},em={class:"flex items-start space-x-4"},tm=["src","alt"],sm={class:"flex-1"},om={class:"text-xl font-bold text-gray-900"},rm={class:"text-lg text-purple-600 font-semibold"},am={class:"text-sm text-gray-600"},nm={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},im={class:"flex items-center"},lm={class:"w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-4 text-lg font-bold"},dm={class:"font-medium text-blue-900"},um={class:"text-sm text-blue-700"},cm={class:"text-sm text-blue-600"},mm={class:"grid grid-cols-2 gap-4"},pm={class:"bg-gray-50 p-4 rounded-lg"},gm={class:"text-2xl font-bold text-gray-900"},vm={class:"text-xs text-gray-500"},fm={class:"bg-gray-50 p-4 rounded-lg"},xm={class:"text-2xl font-bold text-gray-900"},bm={class:"bg-gray-50 p-4 rounded-lg"},hm={class:"text-2xl font-bold text-gray-900"},ym={class:"bg-gray-50 p-4 rounded-lg"},_m={class:"text-2xl font-bold text-gray-900 font-mono"},wm={class:"text-sm text-gray-600 space-y-1"},Tt=12,$m={__name:"History",setup(d){const{get:m}=le(),T=V([]),M=V({}),u=V([]),r=V(!1),h=V(null),A=V({period:"all",category:"",sort:"date_desc"}),n=V(1),y=re(()=>{let a=[...T.value];switch(A.value.sort){case"date_asc":a.sort((v,i)=>new Date(v.draw_date)-new Date(i.draw_date));break;case"date_desc":a.sort((v,i)=>new Date(i.draw_date)-new Date(v.draw_date));break;case"value_asc":a.sort((v,i)=>v.product.price-i.product.price);break;case"value_desc":a.sort((v,i)=>i.product.price-v.product.price);break;case"participation_desc":a.sort((v,i)=>i.participation_rate-v.participation_rate);break}return a}),j=re(()=>Math.ceil(y.value.length/Tt)),E=re(()=>{const a=(n.value-1)*Tt,v=a+Tt;return y.value.slice(a,v)}),f=re(()=>{const a=[],v=n.value,i=j.value;if(i<=7)for(let $=1;$<=i;$++)a.push($);else if(v<=4){for(let $=1;$<=5;$++)a.push($);a.push("..."),a.push(i)}else if(v>=i-3){a.push(1),a.push("...");for(let $=i-4;$<=i;$++)a.push($)}else{a.push(1),a.push("...");for(let $=v-1;$<=v+1;$++)a.push($);a.push("..."),a.push(i)}return a}),_=async()=>{r.value=!0;try{const a=new URLSearchParams({period:A.value.period,limit:500});A.value.category&&a.append("category",A.value.category);const[v,i,$]=await Promise.all([m(`/public/results?${a}`),m("/public/results/stats"),m("/categories")]);T.value=v.data.results||[],M.value=v.data.stats||{},u.value=$.data||[]}catch(a){console.error("Erreur lors du chargement de l'historique:",a)}finally{r.value=!1}},I=()=>{A.value={period:"all",category:"",sort:"date_desc"},n.value=1},F=a=>{h.value=a},C=a=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0)+" FCFA",x=a=>a?a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(0)+"K":a.toString():"0",c=a=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a));return Ae(A,()=>{n.value=1},{deep:!0}),ue(()=>{_()}),(a,v)=>(t(),s("div",Xc,[e("div",Jc,[e("div",Yc,[e("div",Qc,[v[11]||(v[11]=e("h1",{class:"text-4xl font-bold mb-4"},"📚 Historique des Tombolas",-1)),v[12]||(v[12]=e("p",{class:"text-xl opacity-90 mb-8"}," Explorez l'historique complet de toutes nos tombolas terminées ",-1)),e("div",e0,[e("div",t0,[e("div",s0,o(M.value.total_lotteries||0),1),v[7]||(v[7]=e("div",{class:"text-sm opacity-90"},"Tombolas terminées",-1))]),e("div",o0,[e("div",r0,o(M.value.total_winners||0),1),v[8]||(v[8]=e("div",{class:"text-sm opacity-90"},"Gagnants heureux",-1))]),e("div",a0,[e("div",n0,o(x(M.value.total_prizes_value)),1),v[9]||(v[9]=e("div",{class:"text-sm opacity-90"},"Valeur totale",-1))]),e("div",i0,[e("div",l0,o(Math.round(M.value.average_participation_rate||0))+"%",1),v[10]||(v[10]=e("div",{class:"text-sm opacity-90"},"Participation moy.",-1))])])])])]),e("div",d0,[e("div",u0,[e("div",c0,[e("div",m0,[e("div",null,[v[14]||(v[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période",-1)),G(e("select",{"onUpdate:modelValue":v[0]||(v[0]=i=>A.value.period=i),onChange:_,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},v[13]||(v[13]=[e("option",{value:"all"},"Toute la période",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1),e("option",{value:"year"},"Cette année",-1)]),544),[[ne,A.value.period]])]),e("div",null,[v[16]||(v[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),G(e("select",{"onUpdate:modelValue":v[1]||(v[1]=i=>A.value.category=i),onChange:_,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},[v[15]||(v[15]=e("option",{value:""},"Toutes les catégories",-1)),(t(!0),s(te,null,se(u.value,i=>(t(),s("option",{key:i.id,value:i.id},o(i.name),9,p0))),128))],544),[[ne,A.value.category]])]),e("div",null,[v[18]||(v[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trier par",-1)),G(e("select",{"onUpdate:modelValue":v[2]||(v[2]=i=>A.value.sort=i),onChange:_,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},v[17]||(v[17]=[ie('<option value="date_desc">Plus récent</option><option value="date_asc">Plus ancien</option><option value="value_desc">Valeur croissante</option><option value="value_asc">Valeur décroissante</option><option value="participation_desc">Participation élevée</option>',5)]),544),[[ne,A.value.sort]])])]),e("div",g0,[e("button",{onClick:I,class:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"}," Réinitialiser "),e("div",v0,o(E.value.length)+" résultat(s) ",1)])])]),r.value?(t(),s("div",f0,v[19]||(v[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement de l'historique...",-1)]))):T.value.length===0?(t(),s("div",x0,[p(l(Vs),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),v[20]||(v[20]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Aucun historique",-1)),v[21]||(v[21]=e("p",{class:"text-gray-600"},"Aucune tombola terminée ne correspond à vos critères.",-1))])):(t(),s("div",b0,[e("div",h0,[(t(!0),s(te,null,se(E.value,i=>(t(),s("div",{key:i.lottery_id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200"},[e("div",y0,[i.product.image_url?(t(),s("img",{key:0,src:i.product.image_url,alt:i.product.title,class:"w-full h-full object-cover"},null,8,_0)):R("",!0),v[22]||(v[22]=e("div",{class:"absolute top-3 right-3"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"}," Terminé ")],-1)),e("div",w0,[e("span",$0,o(i.product.category?.name||i.product.category||"Sans catégorie"),1)])]),e("div",k0,[e("div",C0,[e("h3",j0,o(i.product.title),1),e("p",A0,o(C(i.product.price)),1),e("p",P0,"Tombola "+o(i.lottery_number),1)]),e("div",M0,[e("div",E0,[e("div",S0,o(i.winner.initial),1),e("div",D0,[v[23]||(v[23]=e("div",{class:"text-sm font-medium text-blue-900"},"🏆 Gagnant",-1)),e("div",T0,o(i.winner.name)+" • "+o(i.winner.city),1)])])]),e("div",I0,[e("div",L0,[e("div",V0,o(i.sold_tickets),1),v[24]||(v[24]=e("div",{class:"text-xs text-gray-500"},"Participants",-1))]),e("div",F0,[e("div",R0,o(i.participation_rate)+"%",1),v[25]||(v[25]=e("div",{class:"text-xs text-gray-500"},"Participation",-1))])]),e("div",q0,[e("div",{class:"bg-blue-500 h-2 rounded-full",style:Me({width:i.participation_rate+"%"})},null,4)]),e("div",z0,[e("div",N0,o(c(i.draw_date)),1),e("button",{onClick:$=>F(i),class:"text-purple-600 hover:text-purple-700 text-sm font-medium"}," Voir détails → ",8,U0)])])]))),128))]),j.value>1?(t(),s("div",B0,[e("button",{onClick:v[3]||(v[3]=i=>n.value=Math.max(1,n.value-1)),disabled:n.value===1,class:"px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,O0),(t(!0),s(te,null,se(f.value,i=>(t(),s(te,{key:i},[i!=="..."?(t(),s("button",{key:0,onClick:$=>n.value=i,class:Q(["px-4 py-2 text-sm font-medium border rounded-md",n.value===i?"bg-purple-600 text-white border-purple-600":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50"])},o(i),11,H0)):(t(),s("span",G0,"..."))],64))),128)),e("button",{onClick:v[4]||(v[4]=i=>n.value=Math.min(j.value,n.value+1)),disabled:n.value===j.value,class:"px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,K0)])):R("",!0)]))]),h.value?(t(),s("div",W0,[e("div",Z0,[e("div",{class:"fixed inset-0 bg-black/20",onClick:v[5]||(v[5]=i=>h.value=null)}),e("div",X0,[e("div",J0,[e("div",Y0,[v[26]||(v[26]=e("h3",{class:"text-lg font-semibold"},"Détails de la tombola",-1)),e("button",{onClick:v[6]||(v[6]=i=>h.value=null),class:"text-gray-400 hover:text-gray-600"},[p(l(Re),{class:"w-6 h-6"})])]),e("div",Q0,[e("div",em,[h.value.product.image_url?(t(),s("img",{key:0,src:h.value.product.image_url,alt:h.value.product.title,class:"w-24 h-24 rounded-lg object-cover"},null,8,tm)):R("",!0),e("div",sm,[e("h4",om,o(h.value.product.title),1),e("p",rm,o(C(h.value.product.price)),1),e("p",am,o(h.value.product.category?.name||h.value.product.category||"Sans catégorie"),1)])]),e("div",nm,[v[27]||(v[27]=e("h5",{class:"font-medium text-blue-900 mb-2"},"🏆 Gagnant officiel",-1)),e("div",im,[e("div",lm,o(h.value.winner.initial),1),e("div",null,[e("p",dm,o(h.value.winner.name),1),e("p",um,o(h.value.winner.city),1),e("p",cm,"Ticket: "+o(h.value.winning_ticket),1)])])]),e("div",mm,[e("div",pm,[e("div",gm,o(h.value.sold_tickets),1),v[28]||(v[28]=e("div",{class:"text-sm text-gray-600"},"Tickets vendus",-1)),e("div",vm,"sur "+o(h.value.total_tickets),1)]),e("div",fm,[e("div",xm,o(h.value.participation_rate)+"%",1),v[29]||(v[29]=e("div",{class:"text-sm text-gray-600"},"Participation",-1))]),e("div",bm,[e("div",hm,o(x(h.value.total_revenue)),1),v[30]||(v[30]=e("div",{class:"text-sm text-gray-600"},"Revenus",-1))]),e("div",ym,[e("div",_m,o(h.value.verification_code),1),v[31]||(v[31]=e("div",{class:"text-sm text-gray-600"},"Code vérif.",-1))])]),e("div",null,[v[34]||(v[34]=e("h5",{class:"font-medium text-gray-900 mb-3"},"📅 Chronologie",-1)),e("div",wm,[e("p",null,[v[32]||(v[32]=e("strong",null,"Tirage :",-1)),U(" "+o(c(h.value.draw_date)),1)]),e("p",null,[v[33]||(v[33]=e("strong",null,"Revenus :",-1)),U(" "+o(C(h.value.total_revenue)),1)])])])])])])])])):R("",!0)]))}},km={class:"relative overflow-hidden h-48"},Cm={class:"absolute top-3 left-3"},jm={key:0,class:"flex items-center bg-purple-600 text-white px-3 py-1.5 rounded-full shadow-lg"},Am={key:1,class:"flex items-center bg-[#0099cc] text-white px-3 py-1.5 rounded-full shadow-lg"},Pm={class:"absolute top-3 right-3"},Mm={key:0,class:"bg-yellow-500 text-white px-2 py-1 rounded-md text-xs font-medium shadow-sm"},Em={class:"absolute bottom-3 left-3"},Sm={class:"bg-black/70 backdrop-blur text-white px-2 py-1 rounded-md text-xs font-medium"},Dm={class:"p-5 space-y-4"},Tm={class:"font-bold text-lg text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-2"},Im={class:"text-gray-600 text-sm line-clamp-2"},Lm={key:0,class:"space-y-3"},Vm={class:"flex justify-between items-center bg-purple-50 rounded-lg p-3"},Fm={class:"text-xl font-bold text-purple-700"},Rm={class:"text-right"},qm={class:"text-lg font-semibold text-gray-900"},zm={key:0,class:"space-y-1"},Nm={class:"flex justify-between text-sm"},Um={class:"font-medium text-purple-700"},Bm={class:"w-full bg-gray-200 rounded-full h-2.5"},Om={class:"flex justify-between text-xs text-gray-500"},Hm={key:1,class:"flex items-center text-sm text-gray-600"},Gm={key:1,class:"space-y-3"},Km={class:"bg-blue-50 rounded-lg p-3"},Wm={class:"text-2xl font-bold text-[#0099cc]"},Zm={key:0,class:"flex items-center text-sm"},Xm={__name:"ProductCardV2",props:{product:{type:Object,required:!0}},emits:["view-product"],setup(d){const m=u=>new Intl.NumberFormat("fr-FR").format(u||0),T=u=>u?new Date(u).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"",M=u=>{if(!u.active_lottery)return 0;const r=u.active_lottery.sold_tickets||0,h=u.active_lottery.total_tickets||1;return Math.round(r/h*100)};return(u,r)=>(t(),s("div",{class:Q(["group cursor-pointer overflow-hidden bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100",{"ring-2 ring-purple-500":d.product.sale_mode==="lottery","ring-2 ring-[#0099cc]":d.product.sale_mode==="direct"}])},[e("div",km,[p(ze,{src:d.product.image_url||d.product.main_image||d.product.image,alt:d.product.name||d.product.title,"container-class":"w-full h-full","image-class":"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"},null,8,["src","alt"]),r[3]||(r[3]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",Cm,[d.product.sale_mode==="lottery"?(t(),s("div",jm,r[1]||(r[1]=[e("svg",{class:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 1 1 0 000 2H4v10a2 2 0 002 2h8a2 2 0 002-2V5h-2a1 1 0 100-2 2 2 0 012 2v10a4 4 0 01-4 4H6a4 4 0 01-4-4V5z","clip-rule":"evenodd"})],-1),e("span",{class:"text-sm font-semibold"},"Tombola",-1)]))):(t(),s("div",Am,r[2]||(r[2]=[e("svg",{class:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3z"}),e("path",{d:"M16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"})],-1),e("span",{class:"text-sm font-semibold"},"Achat direct",-1)])))]),e("div",Pm,[d.product.featured?(t(),s("span",Mm," ⭐ Vedette ")):R("",!0)]),e("div",Em,[e("span",Sm,o(d.product.category?.name||"Non catégorisé"),1)])]),e("div",Dm,[e("h3",Tm,o(d.product.name||d.product.title),1),e("p",Im,o(d.product.description||"Aucune description disponible"),1),d.product.sale_mode==="lottery"?(t(),s("div",Lm,[e("div",Vm,[e("div",null,[r[4]||(r[4]=e("p",{class:"text-xs text-gray-600"},"Prix du ticket",-1)),e("p",Fm,o(m(d.product.active_lottery?.ticket_price||d.product.ticket_price||1e3))+" FCFA",1)]),e("div",Rm,[r[5]||(r[5]=e("p",{class:"text-xs text-gray-600"},"Valeur du lot",-1)),e("p",qm,o(m(d.product.price))+" FCFA",1)])]),d.product.active_lottery?(t(),s("div",zm,[e("div",Nm,[r[6]||(r[6]=e("span",{class:"text-gray-600"},"Progression",-1)),e("span",Um,o(M(d.product))+"%",1)]),e("div",Bm,[e("div",{class:"bg-gradient-to-r from-purple-500 to-purple-700 h-2.5 rounded-full transition-all duration-500",style:Me({width:M(d.product)+"%"})},null,4)]),e("div",Om,[e("span",null,o(d.product.active_lottery.sold_tickets||0)+" tickets vendus",1),e("span",null,o(d.product.active_lottery.total_tickets||1e3)+" au total",1)])])):R("",!0),d.product.active_lottery?.draw_date?(t(),s("div",Hm,[p(l(Ut),{class:"w-4 h-4 mr-2 text-purple-600"}),e("span",null,"Tirage le "+o(T(d.product.active_lottery.draw_date)),1)])):R("",!0)])):(t(),s("div",Gm,[e("div",Km,[r[7]||(r[7]=e("p",{class:"text-xs text-gray-600 mb-1"},"Prix",-1)),e("p",Wm,o(m(d.product.price))+" FCFA",1)]),d.product.stock!==void 0?(t(),s("div",Zm,[r[8]||(r[8]=e("span",{class:"text-gray-600"},"Stock disponible:",-1)),e("span",{class:Q(["ml-2 font-medium",d.product.stock>0?"text-[#0099cc]":"text-red-600"])},o(d.product.stock>0?d.product.stock+" unités":"Épuisé"),3)])):R("",!0)])),e("button",{onClick:r[0]||(r[0]=h=>u.$emit("view-product",d.product)),class:Q(["w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center group-hover:shadow-md",d.product.sale_mode==="lottery"?"bg-purple-600 hover:bg-purple-700 text-white":"bg-[#0099cc] hover:bg-[#0088bb] text-white"])},[p(l(Be),{class:"w-5 h-5 mr-2"}),U(" "+o(d.product.sale_mode==="lottery"?"Participer à la tombola":"Acheter maintenant"),1)],2)])],2))}},ps=$e(Xm,[["__scopeId","data-v-24bc125a"]]);var Jm=typeof global=="object"&&global&&global.Object===Object&&global,Ym=typeof self=="object"&&self&&self.Object===Object&&self,gs=Jm||Ym||Function("return this")(),wt=gs.Symbol,vs=Object.prototype,Qm=vs.hasOwnProperty,ep=vs.toString,nt=wt?wt.toStringTag:void 0;function tp(d){var m=Qm.call(d,nt),T=d[nt];try{d[nt]=void 0;var M=!0}catch{}var u=ep.call(d);return M&&(m?d[nt]=T:delete d[nt]),u}var sp=Object.prototype,op=sp.toString;function rp(d){return op.call(d)}var ap="[object Null]",np="[object Undefined]",ts=wt?wt.toStringTag:void 0;function ip(d){return d==null?d===void 0?np:ap:ts&&ts in Object(d)?tp(d):rp(d)}function lp(d){return d!=null&&typeof d=="object"}var dp="[object Symbol]";function up(d){return typeof d=="symbol"||lp(d)&&ip(d)==dp}var cp=/\s/;function mp(d){for(var m=d.length;m--&&cp.test(d.charAt(m)););return m}var pp=/^\s+/;function gp(d){return d&&d.slice(0,mp(d)+1).replace(pp,"")}function qt(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}var ss=NaN,vp=/^[-+]0x[0-9a-f]+$/i,fp=/^0b[01]+$/i,xp=/^0o[0-7]+$/i,bp=parseInt;function os(d){if(typeof d=="number")return d;if(up(d))return ss;if(qt(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=qt(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=gp(d);var T=fp.test(d);return T||xp.test(d)?bp(d.slice(2),T?2:8):vp.test(d)?ss:+d}var It=function(){return gs.Date.now()},hp="Expected a function",yp=Math.max,_p=Math.min;function fs(d,m,T){var M,u,r,h,A,n,y=0,j=!1,E=!1,f=!0;if(typeof d!="function")throw new TypeError(hp);m=os(m)||0,qt(T)&&(j=!!T.leading,E="maxWait"in T,r=E?yp(os(T.maxWait)||0,m):r,f="trailing"in T?!!T.trailing:f);function _($){var L=M,Y=u;return M=u=void 0,y=$,h=d.apply(Y,L),h}function I($){return y=$,A=setTimeout(x,m),j?_($):h}function F($){var L=$-n,Y=$-y,J=m-L;return E?_p(J,r-Y):J}function C($){var L=$-n,Y=$-y;return n===void 0||L>=m||L<0||E&&Y>=r}function x(){var $=It();if(C($))return c($);A=setTimeout(x,F($))}function c($){return A=void 0,f&&M?_($):(M=u=void 0,h)}function a(){A!==void 0&&clearTimeout(A),y=0,M=n=u=A=void 0}function v(){return A===void 0?h:c(It())}function i(){var $=It(),L=C($);if(M=arguments,u=this,n=$,L){if(A===void 0)return I(n);if(E)return clearTimeout(A),A=setTimeout(x,m),_(n)}return A===void 0&&(A=setTimeout(x,m)),h}return i.cancel=a,i.flush=v,i}const wp={class:"min-h-screen bg-gray-50"},$p={class:"bg-white shadow-sm border-b"},kp={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 product-filter"},Cp={class:"flex flex-col lg:flex-row gap-6"},jp={class:"flex-1"},Ap={class:"relative"},Pp={class:"lg:w-48"},Mp={class:"lg:w-64"},Ep={key:0,disabled:""},Sp=["value"],Dp={key:0,class:"mt-2 text-sm text-red-600"},Tp={class:"lg:w-48"},Ip={class:"lg:w-48"},Lp={class:"py-12"},Vp={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Fp={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Rp={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},qp={key:2,class:"mt-8 flex justify-center"},zp={class:"flex space-x-2"},Np=["disabled"],Up={class:"px-4 py-2 text-gray-700"},Bp=["disabled"],Op={key:3,class:"text-center py-16"},Hp={class:"w-32 h-32 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},Gp={class:"bg-gradient-to-r from-[#0099cc] to-cyan-600 py-16"},Kp={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},Wp={class:"flex flex-col sm:flex-row gap-4 justify-center"},Lt=12,Zp={__name:"Products",setup(d){const m=be(),{get:T,loading:M}=le(),u=V(""),r=V(""),h=V(""),A=V(""),n=V("newest"),y=V([]),j=V([]),E=V(1),f=async()=>{try{const i=new URLSearchParams;if(u.value&&i.append("search",u.value),r.value&&i.append("category_id",r.value),h.value&&i.append("sale_mode",h.value),A.value){const[Y,J]=A.value.split("-");Y&&i.append("min_price",Y),J&&J!=="+"&&i.append("max_price",J)}const $=i.toString()?`/products?${i.toString()}`:"/products",L=await T($);L&&L.success&&L.data&&(y.value=L.data.products||L.data||[],E.value=1)}catch(i){console.error("Erreur lors du chargement des produits:",i),y.value=[]}},_=async()=>{try{console.log("Chargement des catégories...");const i=await T("/categories");console.log("Réponse API categories:",i),i&&i.success?(j.value=i.data||[],console.log("Catégories chargées:",j.value.length)):(console.log("Structure de réponse inattendue:",i),j.value=i?.data||i||[])}catch(i){console.error("Erreur lors du chargement des catégories:",i),j.value=[]}},I=re(()=>{let i=[...y.value];return n.value==="price-asc"?i.sort(($,L)=>$.price-L.price):n.value==="price-desc"?i.sort(($,L)=>L.price-$.price):n.value==="popular"?i.sort(($,L)=>{const Y=$.sale_mode==="lottery"?$.active_lottery?.sold_tickets||0:$.views_count||0;return(L.sale_mode==="lottery"?L.active_lottery?.sold_tickets||0:L.views_count||0)-Y}):n.value==="newest"&&i.sort(($,L)=>new Date(L.created_at)-new Date($.created_at)),i}),F=re(()=>{const i=(E.value-1)*Lt,$=i+Lt;return I.value.slice(i,$)}),C=re(()=>Math.ceil(I.value.length/Lt)),x=i=>{m.push({name:"public.product.detail",params:{id:i.id}})},c=()=>{u.value="",r.value="",h.value="",A.value="",n.value="newest",f()},a=fs(()=>{f()},300),v=()=>{f()};return ue(async()=>{await Promise.all([f(),_()])}),(i,$)=>{const L=fe("router-link");return t(),s("div",wp,[$[19]||($[19]=ie('<section class="bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0077aa] text-white py-16" data-v-c6640e87><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" data-v-c6640e87><div class="text-center" data-v-c6640e87><h1 class="text-4xl md:text-5xl font-bold mb-4" data-v-c6640e87> Découvrez nos <span class="text-white/80" data-v-c6640e87>produits incroyables</span></h1><p class="text-xl text-white/80 max-w-3xl mx-auto mb-8" data-v-c6640e87> Des smartphones dernière génération aux gadgets high-tech, tous nos produits sont garantis et à gagner facilement </p><div class="flex flex-wrap justify-center gap-4" data-v-c6640e87><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-c6640e87><span class="text-sm font-medium" data-v-c6640e87>✓ Produits authentiques</span></div><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-c6640e87><span class="text-sm font-medium" data-v-c6640e87>✓ Livraison gratuite</span></div><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-c6640e87><span class="text-sm font-medium" data-v-c6640e87>✓ Garantie constructeur</span></div></div></div></div></section>',1)),e("section",$p,[e("div",kp,[e("div",Cp,[e("div",jp,[e("div",Ap,[p(l(ot),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),G(e("input",{"onUpdate:modelValue":$[0]||($[0]=Y=>u.value=Y),onInput:$[1]||($[1]=(...Y)=>l(a)&&l(a)(...Y)),type:"text",placeholder:"Rechercher un produit...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 placeholder-gray-500 bg-white"},null,544),[[ee,u.value]])])]),e("div",Pp,[G(e("select",{"onUpdate:modelValue":$[2]||($[2]=Y=>h.value=Y),onChange:v,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},$[8]||($[8]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"direct"},"Achat direct",-1),e("option",{value:"lottery"},"Tombola",-1)]),544),[[ne,h.value]])]),e("div",Mp,[G(e("select",{"onUpdate:modelValue":$[3]||($[3]=Y=>r.value=Y),onChange:v,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},[$[9]||($[9]=e("option",{value:""},"Toutes catégories",-1)),j.value.length===0?(t(),s("option",Ep,"Aucune catégorie disponible")):R("",!0),(t(!0),s(te,null,se(j.value,Y=>(t(),s("option",{key:Y.id,value:Y.id},o(Y.name),9,Sp))),128))],544),[[ne,r.value]]),j.value.length===0?(t(),s("div",Dp," Aucune catégorie trouvée ("+o(j.value.length)+") ",1)):R("",!0)]),e("div",Tp,[G(e("select",{"onUpdate:modelValue":$[4]||($[4]=Y=>A.value=Y),onChange:v,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},$[10]||($[10]=[ie('<option value="" data-v-c6640e87>Tous les prix</option><option value="0-50000" data-v-c6640e87>0 - 50,000 FCFA</option><option value="50000-100000" data-v-c6640e87>50,000 - 100,000 FCFA</option><option value="100000-500000" data-v-c6640e87>100,000 - 500,000 FCFA</option><option value="500000+" data-v-c6640e87>Plus de 500,000 FCFA</option>',5)]),544),[[ne,A.value]])]),e("div",Ip,[G(e("select",{"onUpdate:modelValue":$[5]||($[5]=Y=>n.value=Y),onChange:v,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},$[11]||($[11]=[e("option",{value:"newest"},"Plus récents",-1),e("option",{value:"price-asc"},"Prix croissant",-1),e("option",{value:"price-desc"},"Prix décroissant",-1),e("option",{value:"popular"},"Plus populaires",-1)]),544),[[ne,n.value]])])])])]),e("section",Lp,[e("div",Vp,[l(M)?(t(),s("div",Fp,[(t(),s(te,null,se(12,Y=>e("div",{key:Y,class:"animate-pulse"},$[12]||($[12]=[ie('<div class="bg-white rounded-2xl p-6 shadow-sm" data-v-c6640e87><div class="w-full h-48 bg-gray-200 rounded-xl mb-4" data-v-c6640e87></div><div class="h-4 bg-gray-200 rounded mb-2" data-v-c6640e87></div><div class="h-4 bg-gray-200 rounded w-2/3 mb-4" data-v-c6640e87></div><div class="h-6 bg-gray-200 rounded w-1/3" data-v-c6640e87></div></div>',1)]))),64))])):(t(),s("div",Rp,[(t(!0),s(te,null,se(F.value,Y=>(t(),de(ps,{key:Y.id,product:Y,onViewProduct:x},null,8,["product"]))),128))])),C.value>1?(t(),s("div",qp,[e("nav",zp,[e("button",{onClick:$[6]||($[6]=Y=>E.value=Math.max(1,E.value-1)),disabled:E.value===1,class:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Np),e("span",Up," Page "+o(E.value)+" sur "+o(C.value),1),e("button",{onClick:$[7]||($[7]=Y=>E.value=Math.min(C.value,E.value+1)),disabled:E.value===C.value,class:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Bp)])])):R("",!0),!l(M)&&I.value.length===0?(t(),s("div",Op,[e("div",Hp,[p(l(ot),{class:"w-16 h-16 text-gray-400"})]),$[13]||($[13]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Aucun produit trouvé",-1)),$[14]||($[14]=e("p",{class:"text-gray-600 mb-6"},"Essayez de modifier vos critères de recherche",-1)),e("button",{onClick:c,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors"}," Réinitialiser les filtres ")])):R("",!0)])]),e("section",Gp,[e("div",Kp,[$[17]||($[17]=e("h2",{class:"text-3xl md:text-4xl font-bold text-white mb-4"}," Prêt à tenter votre chance ? ",-1)),$[18]||($[18]=e("p",{class:"text-xl text-blue-100 mb-8"}," Inscrivez-vous gratuitement et participez à vos premiers tirages ",-1)),e("div",Wp,[p(L,{to:"/register",class:"bg-white text-[#0099cc] px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-colors"},{default:oe(()=>$[15]||($[15]=[U(" S'inscrire gratuitement ",-1)])),_:1,__:[15]}),p(L,{to:"/login",class:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-[#0099cc] transition-all"},{default:oe(()=>$[16]||($[16]=[U(" Se connecter ",-1)])),_:1,__:[16]})])])])])}}},Xp=$e(Zp,[["__scopeId","data-v-c6640e87"]]),Jp={class:"min-h-screen bg-gray-50"},Yp={key:0,class:"animate-pulse"},Qp={key:1,class:"bg-white"},e1={class:"bg-gray-50 border-b"},t1={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},s1={class:"flex items-center space-x-2 text-sm"},o1={class:"text-gray-900 font-medium"},r1={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"},a1={class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},n1={class:"space-y-4"},i1={class:"relative overflow-hidden rounded-2xl bg-gray-100"},l1={key:0,class:"absolute top-4 right-4"},d1={class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold"},u1={key:1,class:"absolute top-4 right-4"},c1={key:2,class:"absolute top-4 left-4"},m1={class:"grid grid-cols-4 gap-4"},p1={class:"space-y-8"},g1={class:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4"},v1={class:"flex items-center gap-4 mb-6"},f1={class:"bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full font-semibold"},x1={class:"flex items-center text-yellow-500"},b1={class:"bg-gradient-to-r from-[#0099cc]/5 to-[#0099cc]/10 rounded-2xl p-6"},h1={class:"text-center"},y1={class:"text-sm text-gray-600 mb-2"},_1={class:"text-4xl font-bold text-[#0099cc] mb-2"},w1={key:0,class:"text-sm text-gray-600"},$1={class:"font-semibold text-[#0099cc]"},k1={key:1,class:"text-sm text-gray-600"},C1={key:0,class:"space-y-4"},j1={class:"space-y-3"},A1={class:"flex justify-between text-sm"},P1={class:"font-semibold"},M1={class:"w-full bg-gray-200 rounded-full h-4"},E1={class:"flex justify-between text-sm"},S1={class:"text-[#0099cc] font-medium"},D1={class:"text-gray-600"},T1={key:1,class:"bg-gray-50 rounded-2xl p-6 space-y-4"},I1={class:"grid grid-cols-2 gap-4 text-sm"},L1={class:"font-semibold"},V1={class:"font-semibold"},F1={key:2,class:"bg-green-50 rounded-2xl p-6 space-y-4"},R1={class:"space-y-3"},q1={class:"flex items-center gap-3"},z1={class:"flex items-center gap-3"},N1={class:"flex items-center gap-3"},U1={class:"flex items-center gap-3"},B1={class:"space-y-4"},O1={class:"grid grid-cols-2 gap-4"},H1=["title"],G1={class:"flex items-center gap-6 pt-6 border-t"},K1={class:"flex items-center gap-2 text-sm text-gray-600"},W1={class:"flex items-center gap-2 text-sm text-gray-600"},Z1={class:"flex items-center gap-2 text-sm text-gray-600"},X1={class:"mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8"},J1={class:"lg:col-span-2"},Y1={class:"prose max-w-none text-gray-700"},Q1={class:"text-lg leading-relaxed mb-6"},eg={class:"space-y-2 mb-6"},tg={class:"flex items-start gap-3"},sg={class:"flex items-start gap-3"},og={class:"flex items-start gap-3"},rg={class:"flex items-start gap-3"},ag={class:"space-y-6"},ng={class:"bg-gray-50 rounded-2xl p-6"},ig={class:"space-y-3 text-sm"},lg={class:"flex justify-between"},dg={class:"font-medium"},ug={class:"flex justify-between"},cg={class:"font-medium"},mg={class:"flex justify-between"},pg={class:"font-medium text-[#0099cc]"},gg={class:"bg-[#0099cc]/5 rounded-2xl p-6"},vg={class:"space-y-3 text-sm"},fg={class:"flex items-start gap-3"},xg={class:"flex items-start gap-3"},bg={class:"flex items-start gap-3"},hg={class:"flex items-start gap-3"},yg={class:"bg-gray-50 py-16"},_g={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},wg={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},$g=["onClick"],kg={class:"relative overflow-hidden rounded-xl mb-4"},Cg={class:"absolute top-2 right-2"},jg={class:"bg-[#0099cc] text-white px-2 py-1 rounded-full text-xs"},Ag={class:"font-semibold text-gray-900 mb-2"},Pg={class:"text-lg font-bold text-[#0099cc]"},Mg={key:2,class:"min-h-screen flex items-center justify-center"},Eg={class:"text-center"},Sg={class:"w-32 h-32 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},Dg={class:"text-xl font-semibold text-gray-900 mb-2"},Tg={class:"text-gray-600 mb-6"},Ig={class:"space-y-3"},Lg={__name:"ProductDetail",setup(d){const m=qe(),T=be(),{get:M}=le(),u=we(),r=V(!0),h=V(null),A=V(null),n=re(()=>h.value&&h.value.activeLottery&&h.value.activeLottery.id),y=V([{id:2,name:"MacBook Pro M3",value:25e5,ticketPrice:2500,image:ke},{id:3,name:"PlayStation 5",value:65e4,ticketPrice:1e3,image:ke},{id:4,name:"AirPods Pro 2",value:35e4,ticketPrice:500,image:ke},{id:5,name:"Tesla Model Y",value:45e6,ticketPrice:5e4,image:ke}]),j=v=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(v).replace("XAF","FCFA"),E=v=>v?new Date(v).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Non définie",f=v=>({electronics:"Électronique",fashion:"Mode",automotive:"Automobile",home:"Maison"})[v]||"Autre",_=()=>"5j 12h",I=()=>{u.isAuthenticated?u.isCustomer?T.push({name:"customer.product.detail",params:{id:m.params.id}}):u.isMerchant?T.push({name:"merchant.dashboard"}):T.push({name:"customer.product.detail",params:{id:m.params.id}}):T.push({name:"login",query:{redirect:`/products/${m.params.id}`,action:"participate"}})},F=()=>{u.isAuthenticated?u.isCustomer?T.push({name:"customer.product.detail",params:{id:m.params.id}}):u.isMerchant?T.push({name:"merchant.dashboard"}):T.push({name:"customer.product.detail",params:{id:m.params.id}}):T.push({name:"login",query:{redirect:`/products/${m.params.id}`,action:"buy"}})},C=()=>{if(!u.isAuthenticated){T.push({name:"login",query:{redirect:`/products/${m.params.id}`,action:"wishlist"}});return}window.$toast&&window.$toast.success("Produit ajouté aux favoris !","Favoris")},x=()=>{navigator.share?navigator.share({title:h.value.name,text:h.value.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),window.$toast&&window.$toast.success("Lien copié dans le presse-papier !","Partage"))},c=v=>{T.push({name:"public.product.detail",params:{id:v.id}})},a=async()=>{try{r.value=!0,A.value=null;const v=m.params.id,i=await M(`/products/${v}`);console.log("🔍 API Response structure:",i);let $=i.data?.product||i.product;if(console.log("📦 Product data:",$),!$)throw console.error("Product data is null/undefined"),console.error("Full response:",JSON.stringify(i,null,2)),new Error("Produit non trouvé dans la réponse API");const L=$.id%2===1;h.value={id:$.id,name:$.name||(L?"iPhone 15 Pro":"MacBook Pro M3"),description:$.description||(L?"Le dernier flagship d'Apple avec une caméra révolutionnaire et la puce A17 Pro":"Le MacBook Pro le plus puissant avec la puce M3 et un écran Liquid Retina XDR"),value:$.price||(L?75e4:12e5),ticketPrice:$.ticket_price||(L?1e3:0),image:$.image_url||$.main_image||ke,category:$.category?.name||"electronics",soldTickets:L?$.active_lottery?.sold_tickets||637:0,participants:L?$.active_lottery?.sold_tickets||637:0,drawDate:L?$.active_lottery?.end_date||new Date(Date.now()+10080*60*1e3):null,isNew:$.created_at?new Date($.created_at)>new Date(Date.now()-720*60*60*1e3):!1,activeLottery:L?$.active_lottery||{id:1,sold_tickets:637,end_date:new Date(Date.now()+10080*60*1e3)}:null,lotteries:$.lotteries||[]},console.log("✅ Product loaded successfully:",h.value.name)}catch(v){console.error("Erreur lors du chargement du produit:",v),A.value=v.response?.data?.message||"Erreur lors du chargement du produit",h.value=null}finally{r.value=!1}};return ue(()=>{a()}),(v,i)=>{const $=fe("router-link");return t(),s("div",Jp,[r.value?(t(),s("div",Yp,i[0]||(i[0]=[ie('<div class="bg-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"><div class="grid grid-cols-1 lg:grid-cols-2 gap-12"><div class="h-96 bg-gray-200 rounded-2xl"></div><div class="space-y-4"><div class="h-8 bg-gray-200 rounded"></div><div class="h-4 bg-gray-200 rounded w-3/4"></div><div class="h-20 bg-gray-200 rounded"></div></div></div></div></div>',1)]))):h.value?(t(),s("div",Qp,[e("div",e1,[e("div",t1,[e("nav",s1,[p($,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:oe(()=>i[1]||(i[1]=[U("Accueil",-1)])),_:1,__:[1]}),i[3]||(i[3]=e("span",{class:"text-gray-400"},"/",-1)),p($,{to:"/products",class:"text-gray-500 hover:text-gray-700"},{default:oe(()=>i[2]||(i[2]=[U("Produits",-1)])),_:1,__:[2]}),i[4]||(i[4]=e("span",{class:"text-gray-400"},"/",-1)),e("span",o1,o(h.value.name),1)])])]),e("div",r1,[e("div",a1,[e("div",n1,[e("div",i1,[p(ze,{src:h.value.image_url||h.value.main_image||h.value.image,alt:h.value.name,"container-class":"w-full h-96 lg:h-[500px]","image-class":"w-full h-full object-cover"},null,8,["src","alt"]),n.value?(t(),s("div",l1,[e("span",d1,o(j(h.value.ticketPrice))+" / ticket ",1)])):(t(),s("div",u1,i[5]||(i[5]=[e("span",{class:"bg-green-600 text-white px-4 py-2 rounded-full font-semibold"}," Achat direct ",-1)]))),h.value.isNew?(t(),s("div",c1,i[6]||(i[6]=[e("span",{class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold"}," Nouveau ",-1)]))):R("",!0)]),e("div",m1,[(t(),s(te,null,se(4,L=>e("div",{key:L,class:"relative overflow-hidden rounded-xl bg-gray-100 cursor-pointer hover:ring-2 hover:ring-[#0099cc] transition-all"},[p(ze,{src:h.value.image_url||h.value.main_image||h.value.image,alt:`${h.value.name} - Vue ${L}`,"container-class":"w-full h-20","image-class":"w-full h-full object-cover"},null,8,["src","alt"])])),64))])]),e("div",p1,[e("div",null,[e("h1",g1,o(h.value.name),1),e("div",v1,[e("span",f1,o(f(h.value.category)),1),e("div",x1,[(t(),s(te,null,se(5,L=>p(l(_t),{key:L,class:"h-5 w-5 fill-current"})),64)),i[7]||(i[7]=e("span",{class:"ml-2 text-gray-600"},"(4.8)",-1))])])]),e("div",b1,[e("div",h1,[e("div",y1,o(n.value?"Valeur du produit":"Prix"),1),e("div",_1,o(j(h.value.value)),1),n.value?(t(),s("div",w1,[i[8]||(i[8]=U(" Prix d'un ticket : ",-1)),e("span",$1,o(j(h.value.ticketPrice)),1)])):(t(),s("div",k1,i[9]||(i[9]=[e("span",{class:"font-semibold text-green-600"},"Disponible à l'achat direct",-1)])))])]),n.value?(t(),s("div",C1,[i[11]||(i[11]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Progression du tirage",-1)),e("div",j1,[e("div",A1,[i[10]||(i[10]=e("span",{class:"text-gray-600"},"Tickets vendus",-1)),e("span",P1,o(h.value.soldTickets)+" / 1000",1)]),e("div",M1,[e("div",{class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] h-4 rounded-full transition-all duration-500",style:Me({width:Math.round(h.value.soldTickets/1e3*100)+"%"})},null,4)]),e("div",E1,[e("span",S1,o(Math.round(h.value.soldTickets/1e3*100))+"% vendu",1),e("span",D1,o(1e3-h.value.soldTickets)+" tickets restants",1)])])])):R("",!0),n.value?(t(),s("div",T1,[i[16]||(i[16]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Informations du tirage",-1)),e("div",I1,[e("div",null,[i[12]||(i[12]=e("span",{class:"text-gray-600"},"Date limite :",-1)),e("p",L1,o(E(h.value.drawDate)),1)]),e("div",null,[i[13]||(i[13]=e("span",{class:"text-gray-600"},"Participants :",-1)),e("p",V1,o(h.value.participants||0),1)]),i[14]||(i[14]=e("div",null,[e("span",{class:"text-gray-600"},"Chances de gagner :"),e("p",{class:"font-semibold text-[#0099cc]"},"1 sur 1000")],-1)),i[15]||(i[15]=e("div",null,[e("span",{class:"text-gray-600"},"Statut :"),e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-[#0099cc]/10 text-[#0099cc]"}," En cours ")],-1))])])):(t(),s("div",F1,[i[21]||(i[21]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Achat direct",-1)),e("div",R1,[e("div",q1,[p(l(pe),{class:"h-5 w-5 text-green-600"}),i[17]||(i[17]=e("span",{class:"text-sm text-gray-700"},"Disponible immédiatement",-1))]),e("div",z1,[p(l(pe),{class:"h-5 w-5 text-green-600"}),i[18]||(i[18]=e("span",{class:"text-sm text-gray-700"},"Pas de tirage au sort",-1))]),e("div",N1,[p(l(pe),{class:"h-5 w-5 text-green-600"}),i[19]||(i[19]=e("span",{class:"text-sm text-gray-700"},"Livraison garantie",-1))]),e("div",U1,[p(l(pe),{class:"h-5 w-5 text-green-600"}),i[20]||(i[20]=e("span",{class:"text-sm text-gray-700"},"Paiement sécurisé",-1))])])])),e("div",B1,[n.value?(t(),s("button",{key:0,onClick:I,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},o(l(u).isAuthenticated?`🍀 Participer maintenant - ${j(h.value.ticketPrice)}`:`Se connecter pour participer - ${j(h.value.ticketPrice)}`),1)):(t(),s("button",{key:1,onClick:F,class:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},o(l(u).isAuthenticated?`🛒 Acheter maintenant - ${j(h.value.value)}`:`Se connecter pour acheter - ${j(h.value.value)}`),1)),e("div",O1,[e("button",{onClick:C,class:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-[#0099cc] text-gray-700 hover:text-[#0099cc] py-3 rounded-xl transition-all",title:l(u).isAuthenticated?"Ajouter aux favoris":"Se connecter pour ajouter aux favoris"},[p(l(Ks),{class:"h-5 w-5"}),U(" "+o((l(u).isAuthenticated,"Favoris")),1)],8,H1),e("button",{onClick:x,class:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-[#0099cc] text-gray-700 hover:text-[#0099cc] py-3 rounded-xl transition-all"},[p(l(Xs),{class:"h-5 w-5"}),i[22]||(i[22]=U(" Partager ",-1))])])]),e("div",G1,[e("div",K1,[p(l(at),{class:"h-5 w-5 text-[#0099cc]"}),i[23]||(i[23]=e("span",null,"Produit garanti",-1))]),e("div",W1,[p(l(Ot),{class:"h-5 w-5 text-[#0099cc]"}),i[24]||(i[24]=e("span",null,"Livraison gratuite",-1))]),e("div",Z1,[p(l(is),{class:"h-5 w-5 text-[#0099cc]"}),i[25]||(i[25]=e("span",null,"Authentique",-1))])])])]),e("div",X1,[e("div",J1,[i[32]||(i[32]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Description",-1)),e("div",Y1,[e("p",Q1,o(h.value.description),1),i[30]||(i[30]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Caractéristiques principales",-1)),e("ul",eg,[e("li",tg,[p(l(pe),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),i[26]||(i[26]=e("span",null,"Produit neuf avec garantie constructeur",-1))]),e("li",sg,[p(l(pe),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),i[27]||(i[27]=e("span",null,"Livraison express partout au Cameroun",-1))]),e("li",og,[p(l(pe),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),i[28]||(i[28]=e("span",null,"Service client disponible 24h/7j",-1))]),e("li",rg,[p(l(pe),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),i[29]||(i[29]=e("span",null,"Certification d'authenticité incluse",-1))])]),i[31]||(i[31]=ie('<h3 class="text-xl font-semibold text-gray-900 mb-4">Comment participer ?</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">1</div><h4 class="font-semibold mb-2">Achetez vos tickets</h4><p class="text-sm text-gray-600">Choisissez le nombre de tickets que vous souhaitez</p></div><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">2</div><h4 class="font-semibold mb-2">Attendez le tirage</h4><p class="text-sm text-gray-600">Le tirage se fait automatiquement à la date prévue</p></div><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">3</div><h4 class="font-semibold mb-2">Récupérez votre lot</h4><p class="text-sm text-gray-600">Si vous gagnez, nous vous livrons gratuitement</p></div></div>',2))])]),e("div",ag,[e("div",ng,[i[36]||(i[36]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Statistiques",-1)),e("div",ig,[e("div",lg,[i[33]||(i[33]=e("span",{class:"text-gray-600"},"Participants uniques",-1)),e("span",dg,o(h.value.participants||0),1)]),e("div",ug,[i[34]||(i[34]=e("span",{class:"text-gray-600"},"Tickets moyens/personne",-1)),e("span",cg,o(Math.round(h.value.soldTickets/Math.max(h.value.participants||1,1))),1)]),e("div",mg,[i[35]||(i[35]=e("span",{class:"text-gray-600"},"Temps restant",-1)),e("span",pg,o(_()),1)])])]),e("div",gg,[i[41]||(i[41]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Pourquoi Koumbaya ?",-1)),e("div",vg,[e("div",fg,[p(l(pe),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),i[37]||(i[37]=e("span",null,"Tirages transparents et vérifiables",-1))]),e("div",xg,[p(l(pe),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),i[38]||(i[38]=e("span",null,"Paiement 100% sécurisé",-1))]),e("div",bg,[p(l(pe),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),i[39]||(i[39]=e("span",null,"Support client réactif",-1))]),e("div",hg,[p(l(pe),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),i[40]||(i[40]=e("span",null,"Plus de 10 000+ gagnants",-1))])])])])])]),e("section",yg,[e("div",_g,[i[42]||(i[42]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-8"},"Produits similaires",-1)),e("div",wg,[(t(!0),s(te,null,se(y.value,L=>(t(),s("div",{key:L.id,onClick:Y=>c(L),class:"bg-white rounded-2xl p-6 shadow-sm hover:shadow-lg transition-all cursor-pointer"},[e("div",kg,[p(ze,{src:L.image,alt:L.name,"container-class":"w-full h-40","image-class":"w-full h-full object-cover"},null,8,["src","alt"]),e("div",Cg,[e("span",jg,o(j(L.ticketPrice)),1)])]),e("h3",Ag,o(L.name),1),e("div",Pg,o(j(L.value)),1)],8,$g))),128))])])])])):(t(),s("div",Mg,[e("div",Eg,[e("div",Sg,[p(l(je),{class:"w-16 h-16 text-gray-400"})]),e("h3",Dg,o(A.value?"Erreur de chargement":"Produit introuvable"),1),e("p",Tg,o(A.value||"Ce produit n'existe pas ou a été supprimé"),1),e("div",Ig,[A.value?(t(),s("button",{key:0,onClick:a,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors mr-4"}," Réessayer ")):R("",!0),p($,{to:"/products",class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors"},{default:oe(()=>i[43]||(i[43]=[U(" Retour aux produits ",-1)])),_:1,__:[43]})])])]))])}}},Vg={class:"min-h-screen bg-white"},Fg={class:"py-20"},Rg={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},qg={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12"},zg={class:"relative text-center group"},Ng={class:"relative mx-auto w-32 h-32 mb-8"},Ug={class:"hidden lg:block absolute -right-16 top-1/2 transform -translate-y-1/2"},Bg={class:"mt-6 bg-[#0099cc]/5 rounded-xl p-4"},Og={class:"flex items-center justify-center gap-2 text-[#0099cc] font-medium"},Hg={class:"relative text-center group"},Gg={class:"relative mx-auto w-32 h-32 mb-8"},Kg={class:"hidden lg:block absolute -right-16 top-1/2 transform -translate-y-1/2"},Wg={class:"mt-6 bg-[#0099cc]/5 rounded-xl p-4"},Zg={class:"flex items-center justify-center gap-2 text-[#0099cc] font-medium"},Xg={class:"relative text-center group"},Jg={class:"mt-6 bg-yellow-50 rounded-xl p-4"},Yg={class:"flex items-center justify-center gap-2 text-yellow-700 font-medium"},Qg={class:"py-20 bg-gray-50"},ev={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},tv={class:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center"},sv={class:"space-y-6"},ov={class:"flex gap-4"},rv={class:"flex-shrink-0"},av={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},nv={class:"flex gap-4"},iv={class:"flex-shrink-0"},lv={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},dv={class:"flex gap-4"},uv={class:"flex-shrink-0"},cv={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},mv={class:"flex gap-4"},pv={class:"flex-shrink-0"},gv={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},vv={class:"relative"},fv={class:"bg-white rounded-2xl p-8 shadow-xl border border-gray-100"},xv={class:"text-center mb-6"},bv={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},hv={class:"space-y-4"},yv={class:"bg-gray-50 rounded-lg p-4"},_v={class:"flex items-center justify-between mb-2"},wv={class:"bg-gray-50 rounded-lg p-4"},$v={class:"flex items-center justify-between mb-2"},kv={class:"bg-[#0099cc]/5 rounded-lg p-4 border border-[#0099cc]/20"},Cv={class:"flex items-center justify-between mb-2"},jv={class:"py-20"},Av={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},Pv={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Mv={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},Ev={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6"},Sv={class:"space-y-3 text-gray-600"},Dv={class:"flex items-center gap-3"},Tv={class:"flex items-center gap-3"},Iv={class:"flex items-center gap-3"},Lv={class:"flex items-center gap-3"},Vv={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},Fv={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6"},Rv={class:"space-y-3 text-gray-600"},qv={class:"flex items-center gap-3"},zv={class:"flex items-center gap-3"},Nv={class:"flex items-center gap-3"},Uv={class:"flex items-center gap-3"},Bv={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},Ov={class:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6"},Hv={class:"space-y-3 text-gray-600"},Gv={class:"flex items-center gap-3"},Kv={class:"flex items-center gap-3"},Wv={class:"flex items-center gap-3"},Zv={class:"flex items-center gap-3"},Xv={class:"py-20 bg-gray-50"},Jv={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},Yv={class:"space-y-6"},Qv=["onClick"],ef={class:"text-lg font-semibold text-gray-900"},tf={class:"py-20 bg-gradient-to-r from-[#0099cc] to-[#0088bb]"},sf={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},of={class:"flex flex-col sm:flex-row gap-4 justify-center"},rf={__name:"HowItWorks",setup(d){const m=V(null),T=V([{question:"Comment puis-je être sûr que le tirage est équitable ?",answer:"Notre système utilise un générateur de nombres aléatoires (RNG) certifié et audité régulièrement par des organismes indépendants. Tous les tirages sont enregistrés et vérifiables publiquement."},{question:"Que se passe-t-il si je gagne ?",answer:"Vous êtes immédiatement notifié par email et SMS. Notre équipe vous contacte dans les 24h pour organiser la livraison gratuite de votre lot. Vous recevez aussi un certificat d'authenticité."},{question:"Puis-je acheter plusieurs tickets pour le même produit ?",answer:"Oui, absolument ! Plus vous achetez de tickets, plus vous augmentez vos chances de gagner. Il n'y a pas de limite au nombre de tickets que vous pouvez acheter."},{question:"Les produits sont-ils vraiment authentiques ?",answer:"Tous nos produits sont 100% authentiques et neufs. Nous travaillons directement avec les distributeurs officiels et fournissons un certificat d'authenticité avec chaque lot."},{question:"Combien de temps ai-je pour réclamer mon lot ?",answer:"Vous avez 30 jours pour réclamer votre lot après le tirage. Passé ce délai, un nouveau tirage est organisé avec les tickets non gagnants."},{question:"Y a-t-il des frais cachés ?",answer:"Aucun frais caché ! Le prix affiché est le prix final. La livraison est gratuite partout au Gabon, et il n'y a aucun frais supplémentaire."}]),M=u=>{m.value=m.value===u?null:u};return(u,r)=>{const h=fe("router-link");return t(),s("div",Vg,[r[47]||(r[47]=e("section",{class:"bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0099cc] text-white py-20"},[e("div",{class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},[e("h1",{class:"text-4xl md:text-6xl font-bold mb-6"}," Comment ça marche ? "),e("p",{class:"text-xl md:text-2xl text-blue-100 leading-relaxed max-w-3xl mx-auto"}," Découvrez comment obtenir des produits incroyables à prix réduit en quelques clics seulement. C'est simple, transparent et malin ! ")])],-1)),e("section",Fg,[e("div",Rg,[r[12]||(r[12]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," 3 étapes pour acheter malin "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Notre système de tombola est conçu pour être simple et équitable pour tous les participants ")],-1)),e("div",qg,[e("div",zg,[e("div",Ng,[r[0]||(r[0]=e("div",{class:"absolute inset-0 bg-[#0099cc]/10 rounded-full"},null,-1)),r[1]||(r[1]=e("div",{class:"absolute inset-2 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[e("span",{class:"text-4xl font-bold text-white"},"1")],-1)),e("div",Ug,[p(l(Xe),{class:"h-8 w-8 text-[#0099cc]/30"})])]),r[3]||(r[3]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"Choisissez votre produit",-1)),r[4]||(r[4]=e("p",{class:"text-gray-600 leading-relaxed"}," Parcourez notre catalogue de produits authentiques : smartphones, ordinateurs, voitures, montres de luxe et bien plus encore. ",-1)),e("div",Bg,[e("div",Og,[p(l(Be),{class:"h-5 w-5"}),r[2]||(r[2]=e("span",null,"Plus de 100 produits disponibles",-1))])])]),e("div",Hg,[e("div",Gg,[r[5]||(r[5]=e("div",{class:"absolute inset-0 bg-[#0099cc]/10 rounded-full"},null,-1)),r[6]||(r[6]=e("div",{class:"absolute inset-2 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[e("span",{class:"text-4xl font-bold text-white"},"2")],-1)),e("div",Kg,[p(l(Xe),{class:"h-8 w-8 text-[#0099cc]/30"})])]),r[8]||(r[8]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"Achetez vos tickets",-1)),r[9]||(r[9]=e("p",{class:"text-gray-600 leading-relaxed"}," Chaque produit a un prix de ticket unique. Plus vous achetez de tickets, plus vous augmentez vos chances d'obtenir le produit à prix réduit. ",-1)),e("div",Wg,[e("div",Zg,[p(l(De),{class:"h-5 w-5"}),r[7]||(r[7]=e("span",null,"Tickets à partir de 500 FCFA",-1))])])]),e("div",Xg,[r[11]||(r[11]=ie('<div class="relative mx-auto w-32 h-32 mb-8"><div class="absolute inset-0 bg-yellow-100 rounded-full"></div><div class="absolute inset-2 bg-yellow-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"><span class="text-4xl font-bold text-white">3</span></div></div><h3 class="text-2xl font-bold text-gray-900 mb-4">Obtenez votre produit</h3><p class="text-gray-600 leading-relaxed"> Le tirage se fait automatiquement quand tous les tickets sont vendus. Si vous obtenez le produit, nous vous livrons gratuitement ! </p>',3)),e("div",Jg,[e("div",Yg,[p(l(Ye),{class:"h-5 w-5"}),r[10]||(r[10]=e("span",null,"Livraison gratuite partout",-1))])])])])])]),e("section",Qg,[e("div",ev,[r[25]||(r[25]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Comment fonctionne notre tombola ? "),e("p",{class:"text-xl text-gray-600"}," Notre système de tombola est 100% équitable et transparent ")],-1)),e("div",tv,[e("div",sv,[e("div",ov,[e("div",rv,[e("div",av,[p(l(pe),{class:"h-6 w-6 text-white"})])]),r[13]||(r[13]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Tirage automatique"),e("p",{class:"text-gray-600"}," Dès que tous les tickets sont vendus, le tirage se lance automatiquement. Aucune intervention humaine possible. ")],-1))]),e("div",nv,[e("div",iv,[e("div",lv,[p(l(Fe),{class:"h-6 w-6 text-white"})])]),r[14]||(r[14]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Transparence totale"),e("p",{class:"text-gray-600"}," Tous les tirages sont enregistrés et vérifiables. Vous pouvez consulter l'historique à tout moment. ")],-1))]),e("div",dv,[e("div",uv,[e("div",cv,[p(l(at),{class:"h-6 w-6 text-white"})])]),r[15]||(r[15]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Sécurité garantie"),e("p",{class:"text-gray-600"}," Notre algorithme de tirage est certifié et audité régulièrement pour assurer une équité parfaite. ")],-1))]),e("div",mv,[e("div",pv,[e("div",gv,[p(l(ct),{class:"h-6 w-6 text-white"})])]),r[16]||(r[16]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Notification immédiate"),e("p",{class:"text-gray-600"}," Les participants sélectionnés sont notifiés instantanément par email et SMS. Plus besoin d'attendre ! ")],-1))])]),e("div",vv,[e("div",fv,[e("div",xv,[e("div",bv,[p(l(Us),{class:"h-10 w-10 text-[#0099cc]"})]),r[17]||(r[17]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Algorithme RNG",-1)),r[18]||(r[18]=e("p",{class:"text-gray-600 text-sm mt-2"},"Générateur de nombres aléatoires certifié",-1))]),e("div",hv,[e("div",yv,[e("div",_v,[r[19]||(r[19]=e("span",{class:"text-sm text-gray-600"},"Étape 1",-1)),p(l(pe),{class:"h-4 w-4 text-[#0099cc]"})]),r[20]||(r[20]=e("div",{class:"text-sm font-medium text-gray-900"},"Collecte des tickets vendus",-1))]),e("div",wv,[e("div",$v,[r[21]||(r[21]=e("span",{class:"text-sm text-gray-600"},"Étape 2",-1)),p(l(pe),{class:"h-4 w-4 text-[#0099cc]"})]),r[22]||(r[22]=e("div",{class:"text-sm font-medium text-gray-900"},"Génération nombre aléatoire",-1))]),e("div",kv,[e("div",Cv,[r[23]||(r[23]=e("span",{class:"text-sm text-[#0099cc]"},"Étape 3",-1)),p(l(xt),{class:"h-4 w-4 text-[#0099cc]"})]),r[24]||(r[24]=e("div",{class:"text-sm font-medium text-gray-900"},"Désignation du participant sélectionné",-1))])])])])])])]),e("section",jv,[e("div",Av,[r[41]||(r[41]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Paiement sécurisé et livraison "),e("p",{class:"text-xl text-gray-600"}," Vos transactions sont protégées par les meilleurs systèmes de sécurité ")],-1)),e("div",Pv,[e("div",Mv,[e("div",Ev,[p(l(Ke),{class:"h-8 w-8 text-[#0099cc]"})]),r[30]||(r[30]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Moyens de paiement",-1)),e("ul",Sv,[e("li",Dv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[26]||(r[26]=e("span",null,"Mobile Money (MTN, Orange)",-1))]),e("li",Tv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[27]||(r[27]=e("span",null,"Carte bancaire Visa/Mastercard",-1))]),e("li",Iv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[28]||(r[28]=e("span",null,"Virement bancaire",-1))]),e("li",Lv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[29]||(r[29]=e("span",null,"Portefeuille électronique",-1))])])]),e("div",Vv,[e("div",Fv,[p(l(Bt),{class:"h-8 w-8 text-[#0099cc]"})]),r[35]||(r[35]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Sécurité des données",-1)),e("ul",Rv,[e("li",qv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[31]||(r[31]=e("span",null,"Chiffrement SSL 256 bits",-1))]),e("li",zv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[32]||(r[32]=e("span",null,"Conformité PCI DSS",-1))]),e("li",Nv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[33]||(r[33]=e("span",null,"Authentification 2 facteurs",-1))]),e("li",Uv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[34]||(r[34]=e("span",null,"Protection anti-fraude",-1))])])]),e("div",Bv,[e("div",Ov,[p(l(Ot),{class:"h-8 w-8 text-yellow-500"})]),r[40]||(r[40]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Livraison gratuite",-1)),e("ul",Hv,[e("li",Gv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[36]||(r[36]=e("span",null,"Livraison partout au Gabon",-1))]),e("li",Kv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[37]||(r[37]=e("span",null,"Suivi en temps réel",-1))]),e("li",Wv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[38]||(r[38]=e("span",null,"Délai 24-48h en ville",-1))]),e("li",Zv,[p(l(pe),{class:"h-4 w-4 text-[#0099cc]"}),r[39]||(r[39]=e("span",null,"Assurance colis incluse",-1))])])])])])]),e("section",Xv,[e("div",Jv,[r[42]||(r[42]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Questions fréquentes "),e("p",{class:"text-xl text-gray-600"}," Trouvez rapidement les réponses à vos questions ")],-1)),e("div",Yv,[(t(!0),s(te,null,se(T.value,(A,n)=>(t(),s("div",{key:n,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},[e("button",{onClick:y=>M(n),class:"w-full px-8 py-6 text-left flex items-center justify-between hover:bg-gray-50 transition-colors"},[e("span",ef,o(A.question),1),p(l(jt),{class:Q(["h-6 w-6 text-gray-400 transition-transform",m.value===n?"rotate-180":""])},null,8,["class"])],8,Qv),G(e("div",{class:"px-8 pb-6 text-gray-600 leading-relaxed"},o(A.answer),513),[[As,m.value===n]])]))),128))])])]),e("section",tf,[e("div",sf,[r[45]||(r[45]=e("h2",{class:"text-3xl md:text-4xl font-bold text-white mb-6"}," Prêt à acheter malin ? ",-1)),r[46]||(r[46]=e("p",{class:"text-xl text-blue-100 mb-8"}," Rejoignez les milliers de participants qui ont déjà acheté malin ",-1)),e("div",of,[p(h,{to:"/products",class:"bg-white text-[#0099cc] px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-colors shadow-lg"},{default:oe(()=>r[43]||(r[43]=[U(" Voir les produits ",-1)])),_:1,__:[43]}),p(h,{to:"/register",class:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-[#0099cc] transition-all"},{default:oe(()=>r[44]||(r[44]=[U(" S'inscrire gratuitement ",-1)])),_:1,__:[44]})])])])])}}},af={class:"min-h-screen bg-white"},nf={class:"py-20"},lf={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},df={class:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16"},uf={class:"text-center group"},cf={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-[#0099cc] transition-colors"},mf={class:"text-center group"},pf={class:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-blue-500 transition-colors"},gf={class:"text-center group"},vf={class:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-yellow-500 transition-colors"},ff={class:"py-20 bg-gray-50"},xf={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},bf={class:"grid grid-cols-1 lg:grid-cols-2 gap-16"},hf={class:"bg-white rounded-2xl p-8 shadow-lg"},yf={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_f={key:0,class:"text-red-500 text-sm mt-1"},wf={key:0,class:"text-red-500 text-sm mt-1"},$f={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},kf={key:0,class:"text-red-500 text-sm mt-1"},Cf={key:0,class:"text-red-500 text-sm mt-1"},jf={class:"flex items-start gap-3"},Af={for:"agree",class:"text-sm text-gray-600"},Pf=["disabled"],Mf={key:0,class:"flex items-center justify-center gap-2"},Ef={key:1},Sf={class:"space-y-8"},Df={class:"bg-white rounded-2xl p-8 shadow-lg"},Tf={class:"space-y-6"},If={class:"flex gap-4"},Lf={class:"flex-shrink-0"},Vf={class:"w-12 h-12 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},Ff={class:"flex gap-4"},Rf={class:"flex-shrink-0"},qf={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},zf={class:"bg-gradient-to-br from-[#0099cc] to-cyan-600 rounded-2xl p-8 text-white"},Nf={class:"grid grid-cols-2 gap-4"},Uf={href:"tel:+24107123456",class:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-4 hover:bg-white/20 transition-colors"},Bf={href:"https://wa.me/24107123456",target:"_blank",class:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-4 hover:bg-white/20 transition-colors"},Of={class:"bg-gray-100 rounded-2xl p-8"},Hf={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Gf={class:"flex items-center justify-center min-h-screen px-4 text-center"},Kf={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle bg-white shadow-xl rounded-2xl transform transition-all"},Wf={class:"text-center"},Zf={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Xf={__name:"Contact",setup(d){const m=V(!1),T=V(!1),M=me({name:"",email:"",phone:"",subject:"",message:"",agree:!1}),u=me({name:"",email:"",subject:"",message:""}),r=()=>{let A=!0;return Object.keys(u).forEach(n=>{u[n]=""}),M.name.trim()?M.name.trim().length<2&&(u.name="Le nom doit contenir au moins 2 caractères",A=!1):(u.name="Le nom est requis",A=!1),M.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.email)||(u.email="Format d'email invalide",A=!1):(u.email="L'email est requis",A=!1),M.subject||(u.subject="Veuillez sélectionner un sujet",A=!1),M.message.trim()?M.message.trim().length<10&&(u.message="Le message doit contenir au moins 10 caractères",A=!1):(u.message="Le message est requis",A=!1),A},h=async()=>{if(r()){m.value=!0;try{await new Promise(A=>setTimeout(A,1500)),Object.keys(M).forEach(A=>{A==="agree"?M[A]=!1:M[A]=""}),T.value=!0,window.$toast&&window.$toast.success("Message envoyé avec succès !","Contact")}catch{window.$toast&&window.$toast.error("Erreur lors de l'envoi du message","Erreur")}finally{m.value=!1}}};return(A,n)=>{const y=fe("router-link");return t(),s("div",af,[n[37]||(n[37]=e("section",{class:"bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0077aa] text-white py-20"},[e("div",{class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},[e("h1",{class:"text-4xl md:text-6xl font-bold mb-6"}," Contactez-nous "),e("p",{class:"text-xl md:text-2xl text-blue-100 leading-relaxed"}," Notre équipe est là pour répondre à toutes vos questions. N'hésitez pas à nous contacter ! ")])],-1)),e("section",nf,[e("div",lf,[e("div",df,[e("div",uf,[e("div",cf,[p(l(Je),{class:"h-10 w-10 text-[#0099cc] group-hover:text-white transition-colors"})]),n[8]||(n[8]=ie('<h3 class="text-xl font-semibold text-gray-900 mb-2">Téléphone</h3><p class="text-gray-600 mb-4">Appelez-nous directement</p><div class="space-y-2"><a href="tel:+24107123456" class="block text-[#0099cc] hover:text-[#0088bb] font-medium"> +241 07 12 34 56 </a><a href="tel:+24106987654" class="block text-[#0099cc] hover:text-[#0088bb] font-medium"> +241 06 98 76 54 </a></div><p class="text-sm text-gray-500 mt-2">Lun - Ven : 8h - 20h</p>',4))]),e("div",mf,[e("div",pf,[p(l(st),{class:"h-10 w-10 text-blue-500 group-hover:text-white transition-colors"})]),n[9]||(n[9]=ie('<h3 class="text-xl font-semibold text-gray-900 mb-2">Email</h3><p class="text-gray-600 mb-4">Écrivez-nous un message</p><div class="space-y-2"><a href="mailto:contact@koumbaya.ga" class="block text-blue-600 hover:text-blue-700 font-medium"> contact@koumbaya.ga </a><a href="mailto:support@koumbaya.ga" class="block text-blue-600 hover:text-blue-700 font-medium"> support@koumbaya.ga </a></div><p class="text-sm text-gray-500 mt-2">Réponse sous 24h</p>',4))]),e("div",gf,[e("div",vf,[p(l(Jt),{class:"h-10 w-10 text-yellow-500 group-hover:text-white transition-colors"})]),n[10]||(n[10]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"WhatsApp",-1)),n[11]||(n[11]=e("p",{class:"text-gray-600 mb-4"},"Chat en temps réel",-1)),n[12]||(n[12]=e("a",{href:"https://wa.me/24107123456",target:"_blank",class:"inline-block bg-[#0099cc] text-white px-6 py-3 rounded-xl font-medium hover:bg-[#0088bb] transition-colors"}," Chatter maintenant ",-1)),n[13]||(n[13]=e("p",{class:"text-sm text-gray-500 mt-2"},"Disponible 24h/7j",-1))])])])]),e("section",ff,[e("div",xf,[e("div",bf,[e("div",hf,[n[24]||(n[24]=e("div",{class:"mb-8"},[e("h2",{class:"text-2xl md:text-3xl font-bold text-gray-900 mb-4"}," Envoyez-nous un message "),e("p",{class:"text-gray-600"}," Remplissez le formulaire ci-dessous et nous vous répondrons dans les plus brefs délais. ")],-1)),e("form",{onSubmit:xe(h,["prevent"]),class:"space-y-6"},[e("div",yf,[e("div",null,[n[14]||(n[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom complet * ",-1)),G(e("input",{"onUpdate:modelValue":n[0]||(n[0]=j=>M.name=j),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",placeholder:"Votre nom"},null,512),[[ee,M.name]]),u.name?(t(),s("div",_f,o(u.name),1)):R("",!0)]),e("div",null,[n[15]||(n[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Adresse email * ",-1)),G(e("input",{"onUpdate:modelValue":n[1]||(n[1]=j=>M.email=j),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",placeholder:"votre@email.com"},null,512),[[ee,M.email]]),u.email?(t(),s("div",wf,o(u.email),1)):R("",!0)])]),e("div",$f,[e("div",null,[n[16]||(n[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Numéro de téléphone ",-1)),p(gt,{modelValue:M.phone,"onUpdate:modelValue":n[2]||(n[2]=j=>M.phone=j),placeholder:"Numéro de téléphone","initial-country":"ga"},null,8,["modelValue"])]),e("div",null,[n[18]||(n[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sujet * ",-1)),G(e("select",{"onUpdate:modelValue":n[3]||(n[3]=j=>M.subject=j),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all"},n[17]||(n[17]=[ie('<option value="">Choisir un sujet</option><option value="support">Support technique</option><option value="billing">Facturation</option><option value="product">Question sur un produit</option><option value="tombola">Question sur une tombola</option><option value="delivery">Livraison</option><option value="partnership">Partenariat</option><option value="other">Autre</option>',8)]),512),[[ne,M.subject]]),u.subject?(t(),s("div",kf,o(u.subject),1)):R("",!0)])]),e("div",null,[n[19]||(n[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Message * ",-1)),G(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=j=>M.message=j),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all resize-none",placeholder:"Décrivez votre demande en détail..."},null,512),[[ee,M.message]]),u.message?(t(),s("div",Cf,o(u.message),1)):R("",!0)]),e("div",jf,[G(e("input",{"onUpdate:modelValue":n[5]||(n[5]=j=>M.agree=j),type:"checkbox",id:"agree",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] border-gray-200 rounded focus:ring-[#0099cc]"},null,512),[[_e,M.agree]]),e("label",Af,[n[21]||(n[21]=U(" J'accepte que mes données soient utilisées pour traiter ma demande selon notre ",-1)),p(y,{to:"/privacy",class:"text-[#0099cc] hover:text-[#0088bb]"},{default:oe(()=>n[20]||(n[20]=[U("politique de confidentialité",-1)])),_:1,__:[20]}),n[22]||(n[22]=U(". ",-1))])]),e("button",{type:"submit",disabled:m.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 text-white font-semibold py-4 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},[m.value?(t(),s("span",Mf,n[23]||(n[23]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),U(" Envoi en cours... ",-1)]))):(t(),s("span",Ef,"Envoyer le message"))],8,Pf)],32)]),e("div",Sf,[e("div",Df,[n[27]||(n[27]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-6"},"Nos bureaux",-1)),e("div",Tf,[e("div",If,[e("div",Lf,[e("div",Vf,[p(l(Ft),{class:"h-6 w-6 text-[#0099cc]"})])]),n[25]||(n[25]=e("div",null,[e("h4",{class:"font-semibold text-gray-900 mb-2"},"Libreville (Siège social)"),e("p",{class:"text-gray-600 mb-2"},[U(" Boulevard Triomphal, Centre-ville"),e("br"),U(" Face à l'Hôtel Intercontinental"),e("br"),U(" BP 1234 Libreville, Gabon ")]),e("div",{class:"text-sm text-gray-500"},[e("p",null,"Lun - Ven : 8h00 - 18h00"),e("p",null,"Sam : 9h00 - 15h00")])],-1))]),e("div",Ff,[e("div",Rf,[e("div",qf,[p(l(Ft),{class:"h-6 w-6 text-blue-500"})])]),n[26]||(n[26]=e("div",null,[e("h4",{class:"font-semibold text-gray-900 mb-2"},"Port-Gentil"),e("p",{class:"text-gray-600 mb-2"},[U(" Avenue Savorgnan de Brazza"),e("br"),U(" Centre Commercial Delta"),e("br"),U(" BP 5678 Port-Gentil, Gabon ")]),e("div",{class:"text-sm text-gray-500"},[e("p",null,"Lun - Ven : 8h30 - 17h30"),e("p",null,"Sam : 9h00 - 14h00")])],-1))])])]),e("div",zf,[n[30]||(n[30]=e("h3",{class:"text-2xl font-bold mb-4"},"Besoin d'une réponse rapide ?",-1)),n[31]||(n[31]=e("p",{class:"text-blue-100 mb-6"}," Notre équipe de support est disponible pour vous aider immédiatement. ",-1)),e("div",Nf,[e("a",Uf,[p(l(Je),{class:"h-6 w-6"}),n[28]||(n[28]=e("div",{class:"text-left"},[e("div",{class:"font-medium"},"Appelez-nous"),e("div",{class:"text-sm text-blue-100"},"24h/7j")],-1))]),e("a",Bf,[p(l(Jt),{class:"h-6 w-6"}),n[29]||(n[29]=e("div",{class:"text-left"},[e("div",{class:"font-medium"},"WhatsApp"),e("div",{class:"text-sm text-blue-100"},"Chat live")],-1))])])]),e("div",Of,[n[33]||(n[33]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Consultez d'abord notre FAQ",-1)),n[34]||(n[34]=e("p",{class:"text-gray-600 mb-6"}," La plupart des questions trouvent leur réponse dans notre section FAQ. ",-1)),p(y,{to:"/how-it-works",class:"inline-flex items-center gap-2 bg-white text-gray-900 px-6 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm"},{default:oe(()=>[p(l(ds),{class:"h-5 w-5"}),n[32]||(n[32]=U(" Voir les questions fréquentes ",-1))]),_:1,__:[32]})])])])])]),T.value?(t(),s("div",Hf,[e("div",Gf,[e("div",{class:"fixed inset-0 bg-black/20 transition-opacity",onClick:n[6]||(n[6]=j=>T.value=!1)}),e("div",Kf,[e("div",Wf,[e("div",Zf,[p(l(Te),{class:"h-8 w-8 text-[#0099cc]"})]),n[35]||(n[35]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Message envoyé !",-1)),n[36]||(n[36]=e("p",{class:"text-gray-600 mb-6"}," Merci pour votre message. Nous vous répondrons dans les plus brefs délais. ",-1)),e("button",{onClick:n[7]||(n[7]=j=>T.value=!1),class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl font-medium transition-colors"}," Parfait ")])])])])):R("",!0)])}}};function Jf(){const{get:d,loading:m,error:T}=le(),M=V({ticketsBought:0,lotteriesParticipated:0,totalSpent:0,prizesWon:0}),u=V([]),r=V([]),h=re(()=>[{label:"Tickets achetés",value:M.value.ticketsBought.toString(),color:"bg-blue-500",icon:"TicketIcon"},{label:"Tombolas participées",value:M.value.lotteriesParticipated.toString(),color:"bg-[#0099cc]",icon:"GiftIcon"},{label:"Total dépensé",value:j(M.value.totalSpent),color:"bg-yellow-500",icon:"CurrencyDollarIcon"},{label:"Prix gagnés",value:M.value.prizesWon.toString(),color:"bg-purple-500",icon:"TrophyIcon"}]),A=async()=>{try{const _=await d("/tickets/my-tickets");if(_&&_.success){const I=Array.isArray(_.data)?_.data:[],F=new Set;let C=0,x=0;I.forEach(c=>{c.lottery_id&&F.add(c.lottery_id),C+=parseFloat(c.amount||0),c.status==="won"&&x++}),M.value={ticketsBought:I.length,lotteriesParticipated:F.size,totalSpent:C,prizesWon:x}}}catch(_){console.error("Erreur lors du chargement des statistiques:",_),M.value={ticketsBought:0,lotteriesParticipated:0,totalSpent:0,prizesWon:0}}},n=async()=>{try{const _=await d("/tickets/my-tickets?limit=5&order=desc");_&&_.success&&Array.isArray(_.data)?u.value=_.data.map(I=>({id:I.id,product:{id:I.product?.id||I.lottery?.product?.id,title:I.product?.name||I.lottery?.product?.name||"Produit inconnu",image:I.product?.image_url||I.lottery?.product?.image_url||"/images/products/placeholder.jpg"},quantity:I.quantity||1,total_price:j(I.amount||0),status:I.status||"active",purchased_at:new Date(I.created_at)})):u.value=[]}catch(_){console.error("Erreur lors du chargement des tickets récents:",_),u.value=[]}},y=async()=>{try{const _=await d("/lotteries/active?limit=6");_&&_.success&&Array.isArray(_.data)?r.value=_.data.map(I=>({id:I.id,product:{id:I.product?.id,title:I.product?.name||"Produit inconnu",price:j(I.product?.price||0),image:I.product?.image_url||I.product?.main_image||"/images/products/placeholder.jpg"},progress:Math.round(I.sold_tickets/I.total_tickets*100)||0,draw_date:new Date(I.end_date)})):r.value=[]}catch(_){console.error("Erreur lors du chargement des tombolas actives:",_),r.value=[]}},j=_=>{const I=parseFloat(_)||0;return I>=1e6?(I/1e6).toFixed(1)+"M FCFA":I>=1e3?(I/1e3).toFixed(0)+"k FCFA":I.toLocaleString()+" FCFA"};return{stats:h,recentTickets:u,activeLotteries:r,loading:m,error:T,loadDashboardData:async()=>{await Promise.all([A(),n(),y()])},loadDashboardStats:A,loadRecentTickets:n,loadActiveLotteries:y,formatCurrency:j,formatDate:_=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(_)}}const Yf={class:"mb-8"},Qf={class:"text-3xl font-bold text-gray-900"},ex={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},tx={class:"flex items-center"},sx={class:"ml-4"},ox={class:"text-sm font-medium text-gray-600"},rx={class:"text-2xl font-bold text-gray-900"},ax={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},nx={class:"flex"},ix={class:"ml-3"},lx={class:"mt-1 text-sm text-red-700"},dx={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-8"},ux={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cx={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},mx={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},px={class:"flex justify-between items-center mb-4"},gx={key:0,class:"text-center py-8"},vx={key:1,class:"space-y-4"},fx=["src","alt"],xx={class:"flex-1"},bx={class:"font-medium text-gray-900"},hx={class:"text-sm text-gray-600"},yx={class:"text-xs text-gray-500"},_x={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},wx={class:"flex justify-between items-center mb-4"},$x={class:"space-y-4"},kx={class:"flex items-start space-x-4"},Cx=["src","alt"],jx={class:"flex-1"},Ax={class:"font-medium text-gray-900 mb-1"},Px={class:"text-sm text-gray-600 mb-2"},Mx={class:"mb-3"},Ex={class:"flex justify-between text-sm text-gray-600 mb-1"},Sx={class:"w-full bg-gray-200 rounded-full h-2"},Dx={class:"flex justify-between items-center"},Tx={class:"text-xs text-gray-500"},Ix={__name:"Dashboard",setup(d){const m=we(),{stats:T,recentTickets:M,activeLotteries:u,loading:r,error:h,loadDashboardData:A,formatDate:n}=Jf(),y={TicketIcon:De,GiftIcon:Ye,CurrencyDollarIcon:Ue,TrophyIcon:Ge},j=re(()=>T.value.map(_=>({..._,icon:y[_.icon]||De}))),E=_=>({active:"Actif",won:"Gagné",lost:"Perdu",pending:"En attente"})[_]||_,f=async()=>{await A()};return ue(async()=>{await A()}),(_,I)=>{const F=fe("router-link");return t(),s("div",null,[e("div",Yf,[e("h1",Qf," Bonjour "+o(l(m).user?.first_name)+" ! ",1),I[0]||(I[0]=e("p",{class:"mt-2 text-gray-600"}," Voici un aperçu de vos activités sur la plateforme ",-1))]),e("div",ex,[l(r)?(t(),s(te,{key:0},se(4,C=>e("div",{key:C,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 animate-pulse"},I[1]||(I[1]=[ie('<div class="flex items-center"><div class="p-3 rounded-lg bg-gray-200"></div><div class="ml-4 flex-1"><div class="h-4 bg-gray-200 rounded w-20 mb-2"></div><div class="h-6 bg-gray-200 rounded w-16"></div></div></div>',1)]))),64)):(t(!0),s(te,{key:1},se(j.value,C=>(t(),s("div",{key:C.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200"},[e("div",tx,[e("div",{class:Q(["p-3 rounded-lg",C.color])},[(t(),de(Ce(C.icon),{class:"w-6 h-6 text-white"}))],2),e("div",sx,[e("p",ox,o(C.label),1),e("p",rx,o(C.value),1)])])]))),128))]),l(h)&&!l(r)?(t(),s("div",ax,[e("div",nx,[e("div",ix,[I[2]||(I[2]=e("h3",{class:"text-sm font-medium text-red-800"},"Erreur de chargement",-1)),e("p",lx,o(l(h)),1),e("button",{onClick:f,class:"mt-2 text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded"}," Réessayer ")])])])):R("",!0),e("div",dx,[I[6]||(I[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions rapides",-1)),e("div",ux,[p(F,{to:"/customer/products",class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-[#0099cc] hover:bg-blue-50 transition-colors"},{default:oe(()=>[p(l(Be),{class:"w-8 h-8 text-[#0099cc] mr-3"}),I[3]||(I[3]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Acheter des tickets"),e("p",{class:"text-sm text-gray-600"},"Découvrir les produits disponibles")],-1))]),_:1,__:[3]}),p(F,{to:"/customer/tickets",class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-black hover:bg-gray-50 transition-colors"},{default:oe(()=>[p(l(De),{class:"w-8 h-8 text-black mr-3"}),I[4]||(I[4]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Mes tickets"),e("p",{class:"text-sm text-gray-600"},"Voir mes participations")],-1))]),_:1,__:[4]}),p(F,{to:"/customer/profile",class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-[#0099cc] hover:bg-blue-50 transition-colors"},{default:oe(()=>[p(l(Ve),{class:"w-8 h-8 text-[#0099cc] mr-3"}),I[5]||(I[5]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Mon profil"),e("p",{class:"text-sm text-gray-600"},"Gérer mes informations")],-1))]),_:1,__:[5]})])]),e("div",cx,[e("div",mx,[e("div",px,[I[8]||(I[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Mes derniers tickets",-1)),p(F,{to:"/customer/tickets",class:"text-sm text-[#0099cc] hover:text-blue-700"},{default:oe(()=>I[7]||(I[7]=[U(" Voir tout ",-1)])),_:1,__:[7]})]),l(M).length===0?(t(),s("div",gx,[p(l(De),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),I[10]||(I[10]=e("p",{class:"text-gray-600"},"Aucun ticket acheté pour le moment",-1)),p(F,{to:"/customer/products",class:"inline-block mt-2 text-[#0099cc] hover:text-blue-700"},{default:oe(()=>I[9]||(I[9]=[U(" Acheter des tickets ",-1)])),_:1,__:[9]})])):(t(),s("div",vx,[(t(!0),s(te,null,se(l(M),C=>(t(),s("div",{key:C.id,class:"flex items-center space-x-4 p-3 border border-gray-200 rounded-lg"},[e("img",{src:C.product.image_url||C.product.main_image||C.product.image,alt:C.product.title,class:"w-12 h-12 rounded-lg object-cover"},null,8,fx),e("div",xx,[e("p",bx,o(C.product.title),1),e("p",hx,o(C.quantity)+" ticket"+o(C.quantity>1?"s":"")+" - "+o(C.total_price)+" FCFA ",1),e("p",yx,o(l(n)(C.purchased_at)),1)]),e("span",{class:Q(["px-2 py-1 text-xs font-medium rounded-full",C.status==="active"?"bg-[#0099cc] text-white":C.status==="won"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o(E(C.status)),3)]))),128))]))]),e("div",_x,[e("div",wx,[I[12]||(I[12]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Tombolas populaires",-1)),p(F,{to:"/customer/products",class:"text-sm text-[#0099cc] hover:text-blue-700"},{default:oe(()=>I[11]||(I[11]=[U(" Voir tout ",-1)])),_:1,__:[11]})]),e("div",$x,[(t(!0),s(te,null,se(l(u),C=>(t(),s("div",{key:C.id,class:"border border-gray-200 rounded-lg p-4 hover:border-[#0099cc] transition-colors"},[e("div",kx,[e("img",{src:C.product.image_url||C.product.main_image||C.product.image,alt:C.product.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,Cx),e("div",jx,[e("h4",Ax,o(C.product.title),1),e("p",Px,o(C.product.price)+" FCFA",1),e("div",Mx,[e("div",Ex,[I[13]||(I[13]=e("span",null,"Progression",-1)),e("span",null,o(C.progress)+"%",1)]),e("div",Sx,[e("div",{class:"bg-[#0099cc] h-2 rounded-full transition-all duration-300",style:Me({width:C.progress+"%"})},null,4)])]),e("div",Dx,[e("span",Tx," Tirage le "+o(l(n)(C.draw_date)),1),p(F,{to:`/customer/products/${C.product.id}`,class:"text-sm bg-[#0099cc] text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors"},{default:oe(()=>I[14]||(I[14]=[U(" Participer ",-1)])),_:2,__:[14]},1032,["to"])])])])]))),128))])])])])}}},Lx={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6 product-filter"},Vx={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},Fx={key:0,disabled:""},Rx=["value"],qx={key:0,class:"text-center py-12"},zx={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Nx={key:2,class:"text-center py-12"},Ux={key:3,class:"mt-8 flex justify-center"},Bx={class:"flex space-x-2"},Ox=["disabled"],Hx={class:"px-4 py-2 text-gray-700"},Gx=["disabled"],Vt=9,Kx={__name:"Products",setup(d){const{get:m,loading:T}=le();V(!0);const M=V([]),u=V([]),r=be(),h=V(1),A=V({search:"",category:"",saleMode:"",maxPrice:""}),n=re(()=>{const C=(h.value-1)*Vt,x=C+Vt;return M.value.slice(C,x)}),y=re(()=>Math.ceil(M.value.length/Vt)),j=async()=>{try{const C=new URLSearchParams;A.value.search&&C.append("search",A.value.search),A.value.category&&C.append("category_id",A.value.category),A.value.saleMode&&C.append("sale_mode",A.value.saleMode),A.value.maxPrice&&C.append("max_price",A.value.maxPrice);const x=C.toString()?`/products?${C.toString()}`:"/products",c=await m(x);c&&c.success&&c.data&&(M.value=c.data.products||c.data||[],h.value=1)}catch(C){console.error("Erreur lors du chargement des produits:",C),M.value=[]}},E=async()=>{try{console.log("Customer - Chargement des catégories...");const C=await m("/categories");console.log("Customer - Réponse API categories:",C),C&&C.success?(u.value=C.data||[],console.log("Customer - Catégories chargées:",u.value.length)):(console.log("Customer - Structure de réponse inattendue:",C),u.value=C?.data||C||[])}catch(C){console.error("Customer - Erreur lors du chargement des catégories:",C),u.value=[]}},f=()=>{A.value={search:"",category:"",saleMode:"",maxPrice:""},j()},_=fs(()=>{j()},300),I=()=>{j()},F=C=>{r.push({name:"customer.product.detail",params:{id:C.id}})};return ue(async()=>{await Promise.all([j(),E()])}),(C,x)=>(t(),s("div",null,[x[18]||(x[18]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Produits disponibles"),e("p",{class:"mt-2 text-gray-600"},"Découvrez tous les produits que vous pouvez gagner")],-1)),e("div",Lx,[e("div",Vx,[e("div",null,[x[7]||(x[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":x[0]||(x[0]=c=>A.value.search=c),onInput:x[1]||(x[1]=(...c)=>l(_)&&l(_)(...c)),type:"text",placeholder:"Nom du produit...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 placeholder-gray-500 bg-white"},null,544),[[ee,A.value.search]])]),e("div",null,[x[9]||(x[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de vente",-1)),G(e("select",{"onUpdate:modelValue":x[2]||(x[2]=c=>A.value.saleMode=c),onChange:I,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white"},x[8]||(x[8]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"direct"},"Achat direct",-1),e("option",{value:"lottery"},"Tombola",-1)]),544),[[ne,A.value.saleMode]])]),e("div",null,[x[11]||(x[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),G(e("select",{"onUpdate:modelValue":x[3]||(x[3]=c=>A.value.category=c),onChange:I,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white"},[x[10]||(x[10]=e("option",{value:""},"Toutes les catégories",-1)),u.value.length===0?(t(),s("option",Fx,"Aucune catégorie disponible")):R("",!0),(t(!0),s(te,null,se(u.value,c=>(t(),s("option",{key:c.id,value:c.id},o(c.name),9,Rx))),128))],544),[[ne,A.value.category]])]),e("div",null,[x[13]||(x[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix max",-1)),G(e("select",{"onUpdate:modelValue":x[4]||(x[4]=c=>A.value.maxPrice=c),onChange:I,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 bg-white"},x[12]||(x[12]=[ie('<option value="">Tous les prix</option><option value="100000">100,000 FCFA</option><option value="500000">500,000 FCFA</option><option value="1000000">1,000,000 FCFA</option><option value="2000000">2,000,000+ FCFA</option>',5)]),544),[[ne,A.value.maxPrice]])]),e("div",{class:"flex items-end"},[e("button",{onClick:f,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),l(T)?(t(),s("div",qx,x[14]||(x[14]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des produits...",-1)]))):(t(),s("div",zx,[(t(!0),s(te,null,se(n.value,c=>(t(),de(ps,{key:c.id,product:c,onViewProduct:F},null,8,["product"]))),128))])),!l(T)&&M.value.length===0?(t(),s("div",Nx,[p(l(Be),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),x[15]||(x[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun produit trouvé",-1)),x[16]||(x[16]=e("p",{class:"text-gray-600"},"Essayez de modifier vos filtres de recherche",-1))])):R("",!0),y.value>1?(t(),s("div",Ux,[e("nav",Bx,[e("button",{onClick:x[5]||(x[5]=c=>h.value=Math.max(1,h.value-1)),disabled:h.value===1,class:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Ox),e("span",Hx," Page "+o(h.value)+" sur "+o(y.value),1),e("button",{onClick:x[6]||(x[6]=c=>h.value=Math.min(y.value,h.value+1)),disabled:h.value===y.value,class:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Gx)])])):R("",!0),R("",!0)]))}},Wx={key:0,class:"text-center py-12"},Zx={key:1,class:"max-w-7xl mx-auto"},Xx={class:"mb-6"},Jx={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Yx={class:"relative"},Qx={class:"absolute top-4 left-4"},e2={key:0,class:"absolute top-4 right-4"},t2={key:0,class:"grid grid-cols-4 gap-2 mt-4"},s2={class:"mb-6"},o2={class:"text-3xl font-bold text-gray-900 mb-4"},r2={class:"text-lg text-gray-600 mb-4"},a2={class:"flex items-center space-x-4 mb-6"},n2={class:"text-center"},i2={class:"text-3xl font-bold text-blue-600"},l2={class:"text-sm text-gray-500"},d2={key:0,class:"text-center"},u2={class:"text-xl font-semibold text-gray-900"},c2={key:0,class:"mb-6"},m2={class:"flex justify-between text-sm text-gray-600 mb-2"},p2={class:"w-full bg-gray-200 rounded-full h-3"},g2={class:"flex justify-between text-xs text-gray-500 mt-1"},v2={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg"},f2={class:"flex items-center mb-2"},x2={class:"font-medium text-gray-900"},b2={class:"flex items-center"},h2={class:"text-gray-600"},y2={class:"bg-white border border-gray-200 rounded-xl p-6 mb-6"},_2={key:0},w2={class:"flex items-center space-x-4 mb-4"},$2={class:"flex items-center space-x-2"},k2=["disabled"],C2=["max"],j2=["disabled"],A2={class:"flex justify-between items-center mb-4"},P2={class:"text-2xl font-bold text-blue-600"},M2=["disabled"],E2={key:0},S2={key:1},D2={key:2},T2={key:1},I2={class:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},L2={class:"flex items-center mb-2"},V2={class:"flex justify-between items-center mb-6"},F2={class:"text-3xl font-bold text-blue-600"},R2=["disabled"],q2={key:0},z2={class:"mb-8"},N2={class:"border-b border-gray-200 mb-6"},U2={class:"flex space-x-8"},B2=["onClick"],O2={key:0,class:"prose max-w-none"},H2={class:"text-gray-600 leading-relaxed"},G2={key:0,class:"space-y-2"},K2={class:"text-gray-600"},W2={key:1,class:"prose max-w-none"},Z2={key:2},X2={class:"text-lg font-semibold mb-3"},J2={key:0,class:"text-center py-8"},Y2={key:1,class:"space-y-3"},Q2={class:"flex items-center"},eb={class:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},tb={class:"ml-3 text-gray-900"},sb={class:"text-sm text-gray-600"},ob={key:2,class:"text-center py-12"},rb={__name:"ProductDetail",setup(d){const m=qe(),T=be(),{get:M,post:u,loading:r}=le(),h=we(),A=V(!1),n=V(null),y=V(1),j=V("description"),E=V(""),f=V([]),_=[{key:"description",label:"Description"},{key:"rules",label:"Règles"},{key:"participants",label:"Participants"}],I=re(()=>n.value&&(n.value.lottery||n.value.active_lottery)&&(n.value.lottery?.total_tickets>0||n.value.active_lottery?.total_tickets>0)),F=re(()=>{if(!n.value)return 0;const b=n.value.lottery||n.value.active_lottery;return b?(b.ticket_price||n.value.ticket_price||0)*y.value:0}),C=()=>{if(!n.value)return 0;const b=n.value.lottery||n.value.active_lottery;if(!b)return 0;const q=b.sold_tickets||0,Z=b.total_tickets||1;return Math.round(q/Z*100)},x=b=>b==null||isNaN(b)?"0":new Intl.NumberFormat("fr-FR").format(Number(b)),c=()=>{const b=n.value.lottery||n.value.active_lottery,q=(b?.total_tickets||0)-(b?.sold_tickets||0);y.value<q&&y.value++},a=()=>{y.value>1&&y.value--},v=b=>{if(!b)return"";const q=new Date(b);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(q)},i=b=>{if(!b)return"";const q=new Date,k=new Date(b)-q,D=Math.floor(k/(1e3*60*60*24));if(D>7)return`Plus de ${D} jours restants`;if(D>0)return`${D} jour${D>1?"s":""} restant${D>1?"s":""}`;{const g=Math.floor(k/36e5);return g>0?`${g}h restantes`:"Se termine bientôt"}},$=b=>({active:"Actif",ending_soon:"Bientôt terminé",completed:"Terminé"})[b]||b,L=async()=>{A.value=!0;try{const b=n.value.lottery||n.value.active_lottery,Z=(b?.ticket_price||n.value.ticket_price||0)*y.value,k=h.user?.phone;if(!k){window.$toast&&window.$toast.error("Veuillez ajouter un numéro de téléphone à votre profil avant d'effectuer un achat.","📱 Téléphone requis");return}const D=await u("/tickets/purchase",{lottery_id:b?.id,quantity:y.value,phone_number:k,total_amount:Z});if(D&&D.success)window.$toast&&window.$toast.success(D.message||"Commande créée avec succès !","✅ Commande créée"),T.push({path:"/payment/method",query:{transaction_id:D.data.transaction_id,amount:Z,lottery_id:b?.id,quantity:y.value}});else throw new Error(D?.message||"Erreur lors de la création de la commande")}catch(b){console.error("Error purchasing tickets:",b);const q=b.response?.data?.message||b.message||"Erreur lors de l'achat des tickets";window.$toast&&window.$toast.error(""+q," Erreur d'achat")}finally{A.value=!1}},Y=async()=>{A.value=!0;try{const b=await u("/payments/initiate",{product_id:n.value.id,type:"product_purchase",amount:n.value.price});if(b&&b.success)window.$toast&&window.$toast.success("🎉 Produit acheté avec succès ! Vous recevrez une confirmation par SMS.","✅ Achat confirmé"),await J();else throw new Error(b?.message||"Erreur lors de l'achat")}catch(b){console.error("Error purchasing product directly:",b);const q=b.response?.data?.message||b.message||"Erreur lors de l'achat";window.$toast&&window.$toast.error(" "+q," Erreur d'achat")}finally{A.value=!1}},J=async()=>{try{const b=m.params.id;console.log("Loading product ID:",b);const q=await M(`/products/${b}`);console.log("Product API response:",q),q&&q.success&&q.data?(n.value=q.data,E.value=n.value.image||"/images/products/placeholder.jpg",(n.value.lottery||n.value.active_lottery)&&await z()):q&&q.data?(n.value=q.data,E.value=n.value.image||"/images/products/placeholder.jpg"):(console.error("Product not found in response:",q),n.value=null)}catch(b){console.error("Error loading product:",b),n.value=null}},z=async()=>{try{const b=n.value.lottery||n.value.active_lottery;b&&(console.log("Participants endpoint not available yet for lottery:",b.id),f.value=[])}catch(b){console.error("Error loading participants:",b),f.value=[]}};return ue(()=>{J()}),(b,q)=>{const Z=fe("router-link");return l(r)?(t(),s("div",Wx,q[1]||(q[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement du produit...",-1)]))):n.value?(t(),s("div",Zx,[e("div",Xx,[p(Z,{to:"/customer/products",class:"inline-flex items-center text-gray-600 hover:text-gray-900"},{default:oe(()=>[p(l(kt),{class:"w-5 h-5 mr-2"}),q[2]||(q[2]=U(" Retour aux produits ",-1))]),_:1,__:[2]})]),e("div",Jx,[e("div",null,[e("div",Yx,[p(ze,{src:n.value.image_url||n.value.main_image||n.value.image,alt:n.value.title||n.value.name,"container-class":"w-full h-96 rounded-xl overflow-hidden","image-class":"w-full h-96 object-cover","fallback-text":"Image non disponible"},null,8,["src","alt"]),e("div",Qx,[e("span",{class:Q(["px-3 py-1 text-sm font-medium rounded-full",n.value.status==="active"?"bg-blue-100 text-blue-800":n.value.status==="ending_soon"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o($(n.value.status)),3)]),n.value.featured?(t(),s("div",e2,[p(l(_t),{class:"w-8 h-8 text-yellow-500 fill-current"})])):R("",!0)]),n.value.gallery&&n.value.gallery.length>0?(t(),s("div",t2,[(t(!0),s(te,null,se(n.value.gallery,(k,D)=>(t(),de(ze,{key:D,src:k,alt:`${n.value.title||n.value.name} ${D+1}`,"container-class":"w-full h-20 rounded-lg overflow-hidden cursor-pointer hover:opacity-75 transition-opacity","image-class":"w-full h-20 object-cover",onClick:g=>E.value=k},null,8,["src","alt","onClick"]))),128))])):R("",!0)]),e("div",null,[e("div",s2,[e("h1",o2,o(n.value.title||n.value.name),1),e("p",r2,o(n.value.description),1),e("div",a2,[e("div",n2,[e("div",i2,o(x(n.value.price))+" FCFA",1),e("div",l2,o(I.value?"Valeur du produit":"Prix"),1)]),I.value?(t(),s("div",d2,[e("div",u2,o(x(n.value.lottery?.ticket_price||n.value.active_lottery?.ticket_price||n.value.ticket_price||0))+" FCFA",1),q[3]||(q[3]=e("div",{class:"text-sm text-gray-500"},"Prix par ticket",-1))])):R("",!0)]),I.value?(t(),s("div",c2,[e("div",m2,[q[4]||(q[4]=e("span",null,"Progression de la tombola",-1)),e("span",null,o(C())+"% ("+o(n.value.lottery?.sold_tickets||n.value.active_lottery?.sold_tickets||0)+"/"+o(n.value.lottery?.total_tickets||n.value.active_lottery?.total_tickets||0)+")",1)]),e("div",p2,[e("div",{class:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:Me({width:C()+"%"})},null,4)]),e("div",g2,[q[5]||(q[5]=e("span",null,"0 tickets",-1)),e("span",null,o(n.value.lottery?.total_tickets||n.value.active_lottery?.total_tickets||0)+" tickets",1)])])):R("",!0),I.value?(t(),s("div",v2,[e("div",f2,[p(l(Ut),{class:"w-5 h-5 text-gray-600 mr-2"}),e("span",x2,"Date de tirage: "+o(v(n.value.lottery?.draw_date||n.value.active_lottery?.draw_date)),1)]),e("div",b2,[p(l(Pe),{class:"w-5 h-5 text-gray-600 mr-2"}),e("span",h2,o(i(n.value.lottery?.draw_date||n.value.active_lottery?.draw_date)),1)])])):R("",!0)]),e("div",y2,[I.value?(t(),s("div",_2,[q[8]||(q[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Acheter des tickets",-1)),e("div",w2,[q[6]||(q[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nombre de tickets:",-1)),e("div",$2,[e("button",{onClick:a,class:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",disabled:y.value<=1},[p(l(Zs),{class:"w-4 h-4"})],8,k2),G(e("input",{"onUpdate:modelValue":q[0]||(q[0]=k=>y.value=k),type:"number",min:"1",max:(n.value.lottery?.total_tickets||n.value.active_lottery?.total_tickets||0)-(n.value.lottery?.sold_tickets||n.value.active_lottery?.sold_tickets||0),class:"w-20 text-center border border-gray-300 rounded-md py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,C2),[[ee,y.value]]),e("button",{onClick:c,class:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",disabled:y.value>=(n.value.lottery?.total_tickets||0)-(n.value.lottery?.sold_tickets||0)},[p(l(Rt),{class:"w-4 h-4"})],8,j2)])]),e("div",A2,[q[7]||(q[7]=e("span",{class:"text-gray-600"},"Total à payer:",-1)),e("span",P2,o(x(F.value))+" FCFA",1)]),e("button",{onClick:L,disabled:A.value||n.value.status!=="active",class:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[A.value?(t(),s("span",E2,"Achat en cours...")):n.value.status!=="active"?(t(),s("span",S2,"Tombola terminée")):(t(),s("span",D2,"Acheter "+o(y.value)+" ticket"+o(y.value>1?"s":""),1))],8,M2)])):(t(),s("div",T2,[q[14]||(q[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Acheter ce produit",-1)),e("div",I2,[e("div",L2,[p(l(Te),{class:"w-5 h-5 text-[#0099cc] mr-2"}),q[9]||(q[9]=e("span",{class:"font-medium text-blue-900"},"Achat direct disponible",-1))]),q[10]||(q[10]=e("p",{class:"text-sm text-blue-700"}," Ce produit peut être acheté directement sans passer par une tombola. ",-1))]),e("div",V2,[q[11]||(q[11]=e("span",{class:"text-gray-600 text-lg"},"Prix:",-1)),e("span",F2,o(n.value.price)+" FCFA",1)]),e("button",{onClick:Y,disabled:A.value,class:"w-full bg-[#0099cc] text-white py-3 rounded-lg font-medium hover:bg-[#0088bb] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center space-x-2"},[A.value?(t(),s("span",q2,"Achat en cours...")):(t(),s(te,{key:1},[q[12]||(q[12]=e("span",null,"🛒",-1)),q[13]||(q[13]=e("span",null,"Acheter maintenant",-1))],64))],8,R2)]))])])]),e("div",z2,[e("div",N2,[e("nav",U2,[(t(),s(te,null,se(_,k=>e("button",{key:k.key,onClick:D=>j.value=k.key,class:Q(["py-2 px-1 border-b-2 font-medium text-sm",j.value===k.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},o(k.label),11,B2)),64))])]),j.value==="description"?(t(),s("div",O2,[q[15]||(q[15]=e("h3",{class:"text-lg font-semibold mb-3"},"Description détaillée",-1)),e("p",H2,o(n.value.detailed_description||n.value.description),1),q[16]||(q[16]=e("h4",{class:"text-md font-semibold mt-6 mb-3"},"Caractéristiques",-1)),n.value.features?(t(),s("ul",G2,[(t(!0),s(te,null,se(n.value.features,k=>(t(),s("li",{key:k,class:"flex items-center"},[p(l(Te),{class:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0"}),e("span",K2,o(k),1)]))),128))])):R("",!0)])):R("",!0),j.value==="rules"?(t(),s("div",W2,q[17]||(q[17]=[e("h3",{class:"text-lg font-semibold mb-3"},"Règles de la tombola",-1),e("div",{class:"space-y-4 text-gray-600"},[e("p",null,"• Chaque ticket acheté vous donne une chance de gagner ce produit"),e("p",null,"• Le tirage aura lieu à la date indiquée une fois tous les tickets vendus"),e("p",null,"• Le gagnant sera choisi de manière aléatoire et équitable"),e("p",null,"• Vous serez notifié par email et SMS si vous gagnez"),e("p",null,"• Les prix non réclamés dans les 30 jours seront remis en jeu")],-1)]))):R("",!0),j.value==="participants"?(t(),s("div",Z2,[e("h3",X2,"Participants ("+o(n.value.sold_tickets)+")",1),f.value.length===0?(t(),s("div",J2,[p(l(pt),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),q[18]||(q[18]=e("p",{class:"text-gray-600"},"Soyez le premier à participer !",-1))])):(t(),s("div",Y2,[(t(!0),s(te,null,se(f.value,k=>(t(),s("div",{key:k.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Q2,[e("div",eb,o(k.name.charAt(0).toUpperCase()),1),e("span",tb,o(k.name),1)]),e("span",sb,o(k.tickets)+" ticket"+o(k.tickets>1?"s":""),1)]))),128))]))])):R("",!0)])])):(t(),s("div",ob,[p(l(He),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),q[20]||(q[20]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Produit introuvable",-1)),q[21]||(q[21]=e("p",{class:"text-gray-600 mb-4"},"Le produit que vous cherchez n'existe pas ou a été supprimé",-1)),p(Z,{to:"/customer/products",class:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},{default:oe(()=>q[19]||(q[19]=[U(" Retour aux produits ",-1)])),_:1,__:[19]})]))}}},ab={class:"avatar-upload-container"},nb={class:"relative group"},ib=["src","alt"],lb={key:1,class:"flex flex-col items-center justify-center text-gray-400"},db={class:"text-white text-center"},ub={key:0,class:"absolute inset-0 bg-black bg-opacity-60 rounded-full flex items-center justify-center"},cb={class:"mt-4 text-center"},mb={class:"text-sm text-gray-600 mb-2"},pb={class:"text-xs text-gray-500"},gb={key:0,class:"flex justify-center space-x-2 mt-3"},vb=["disabled"],fb=["disabled"],xb={key:0,class:"mt-2 text-center"},bb={class:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md px-3 py-2"},hb={key:1,class:"mt-2 text-center"},yb={class:"text-sm text-green-600 bg-green-50 border border-green-200 rounded-md px-3 py-2"},_b={__name:"AvatarUpload",props:{currentAvatarUrl:{type:String,default:null},uploadEndpoint:{type:String,default:"/user/avatar"},fieldName:{type:String,default:"avatar"},altText:{type:String,default:"Photo de profil"},helpText:{type:String,default:null},maxSizeMB:{type:Number,default:5}},emits:["success","error","upload-start","upload-end"],setup(d,{emit:m}){const T=d,M=m,{post:u}=le(),r=V(null),h=V(null),A=V(null),n=V(!1),y=V(""),j=V(""),E=re(()=>T.maxSizeMB*1024*1024),f=()=>{n.value||r.value?.click()},_=C=>{const x=C.target.files?.[0];if(!x)return;if(y.value="",j.value="",!x.type.startsWith("image/")){y.value="Veuillez sélectionner un fichier image valide.";return}if(x.size>E.value){y.value=`La taille du fichier ne doit pas dépasser ${T.maxSizeMB}MB.`;return}h.value=x;const c=new FileReader;c.onload=a=>{A.value=a.target.result},c.readAsDataURL(x)},I=()=>{h.value=null,A.value=null,y.value="",j.value="",r.value&&(r.value.value="")},F=async()=>{if(h.value)try{n.value=!0,y.value="",j.value="",M("upload-start");const C=new FormData;C.append(T.fieldName,h.value),console.log("Uploading avatar:",h.value),console.log("Using endpoint:",T.uploadEndpoint),console.log("Field name:",T.fieldName),console.log("FormData entries:");for(let c of C.entries())console.log(c[0]+": ",c[1]);console.log("Testing simple FormData upload...");const x=await u(T.uploadEndpoint,C);if(console.log("Upload response:",x),x&&(x.success||x.data)){const c=x.data?.avatar_url||x.avatar_url;j.value="Photo de profil mise à jour avec succès !",setTimeout(()=>{h.value=null,A.value=null,j.value=""},2e3),M("success",{avatar_url:c,response:x})}else throw new Error(x?.message||"Upload failed")}catch(C){console.error("Error uploading avatar:",C);let x="Erreur lors de l'upload de l'image.";if(C.response?.data?.message)x=C.response.data.message;else if(C.response?.data?.errors){const c=C.response.data.errors;x=Object.values(c).flat().join(", ")}else C.message&&(x=C.message);y.value=x,M("error",C)}finally{n.value=!1,M("upload-end")}};return(C,x)=>(t(),s("div",ab,[e("div",nb,[e("div",{class:"w-24 h-24 rounded-full overflow-hidden border-4 border-gray-200 bg-gray-100 flex items-center justify-center cursor-pointer hover:border-blue-400 transition-colors duration-200",onClick:f},[A.value||d.currentAvatarUrl?(t(),s("img",{key:0,src:A.value||d.currentAvatarUrl,alt:d.altText,class:"w-full h-full object-cover"},null,8,ib)):(t(),s("div",lb,[p(l(Ve),{class:"h-8 w-8 mb-1"}),x[0]||(x[0]=e("span",{class:"text-xs"},"Photo",-1))]))]),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",onClick:f},[e("div",db,[p(l(qs),{class:"h-6 w-6 mx-auto mb-1"}),x[1]||(x[1]=e("span",{class:"text-xs"},"Modifier",-1))])]),n.value?(t(),s("div",ub,x[2]||(x[2]=[e("div",{class:"text-white text-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mx-auto mb-1"}),e("span",{class:"text-xs"},"Upload...")],-1)]))):R("",!0)]),e("input",{ref_key:"fileInput",ref:r,type:"file",accept:"image/*",class:"hidden",onChange:_},null,544),e("div",cb,[e("p",mb,o(d.helpText||"Cliquez sur la photo pour la modifier"),1),e("p",pb," Formats acceptés: JPG, PNG, GIF (max "+o(d.maxSizeMB)+"MB) ",1),A.value?(t(),s("div",gb,[e("button",{onClick:F,disabled:n.value,class:"px-4 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"},[p(l(Ns),{class:"h-4 w-4"}),U(" "+o(n.value?"Upload...":"Sauvegarder"),1)],8,vb),e("button",{onClick:I,disabled:n.value,class:"px-4 py-2 bg-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-400 disabled:opacity-50"}," Annuler ",8,fb)])):R("",!0)]),y.value?(t(),s("div",xb,[e("p",bb,o(y.value),1)])):R("",!0),j.value?(t(),s("div",hb,[e("p",yb,o(j.value),1)])):R("",!0)]))}},xs=$e(_b,[["__scopeId","data-v-1379c5b0"]]),wb={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},$b={class:"lg:col-span-1"},kb={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Cb={class:"text-center mb-6"},jb={class:"mt-4 text-lg font-semibold text-gray-900"},Ab={class:"text-sm text-gray-600"},Pb={class:"space-y-1"},Mb=["onClick"],Eb={class:"lg:col-span-2"},Sb={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Db={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Tb={class:"mt-6 flex justify-end"},Ib=["disabled"],Lb={key:0},Vb={key:1},Fb={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Rb={class:"space-y-4"},qb={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},zb={class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"},Nb={class:"mt-6 flex justify-end"},Ub=["disabled"],Bb={key:0},Ob={key:1},Hb={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Gb={class:"space-y-6"},Kb={class:"border-b border-gray-200 pb-6"},Wb=["disabled"],Zb={key:0},Xb={key:1},Jb={class:"border-b border-gray-200 pb-6"},Yb={class:"flex justify-between items-start"},Qb={class:"space-y-3"},eh={class:"flex items-center"},th={class:"font-medium text-gray-900"},sh={class:"text-sm text-gray-600"},oh={class:"flex items-center"},rh={key:0,class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mr-3"},ah=["onClick"],nh={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ih={class:"space-y-6"},lh={class:"text-lg font-medium text-gray-900 mb-3"},dh={class:"space-y-3"},uh={class:"flex-1"},ch={class:"font-medium text-gray-900"},mh={class:"text-sm text-gray-600"},ph={class:"ml-4 flex space-x-4"},gh={class:"flex items-center"},vh=["onUpdate:modelValue"],fh={class:"flex items-center"},xh=["onUpdate:modelValue"],bh={class:"mt-6 flex justify-end"},hh=["disabled"],yh={key:0},_h={key:1},wh={__name:"Profile",setup(d){we();const{get:m,put:T,post:M}=le(),u=V("personal"),r=V(!1),h=V(!1),A=V(!1),n=V(!1),y=V(null),j=[{key:"personal",label:"Informations personnelles",icon:Ve},{key:"address",label:"Adresse",icon:Ft},{key:"security",label:"Sécurité",icon:at},{key:"notifications",label:"Notifications",icon:ct}],E=me({id:null,first_name:"",last_name:"",email:"",phone:"",birth_date:"",gender:"",avatar:null,two_factor_enabled:!1,address:{address:"",city:"",postal_code:"",country_id:null,state:""}}),f=me({first_name:E.first_name,last_name:E.last_name,email:E.email,phone:E.phone,birth_date:E.birth_date,gender:E.gender}),_=me({address:E.address.address,city:E.address.city,postal_code:E.address.postal_code,country_id:E.address.country_id}),I=me({current_password:"",new_password:"",confirm_password:""}),F=V([]),C=V([]),x=[{key:"lottery",title:"Tombolas",notifications:[{key:"draw_results",title:"Résultats des tirages",description:"Être notifié des résultats des tombolas auxquelles vous participez"},{key:"new_lottery",title:"Nouvelles tombolas",description:"Être informé des nouveaux produits mis en tombola"},{key:"ending_soon",title:"Fin de tombola",description:"Rappel quand une tombola se termine bientôt"}]},{key:"account",title:"Compte",notifications:[{key:"login",title:"Nouvelle connexion",description:"Être alerté des nouvelles connexions à votre compte"},{key:"profile_update",title:"Modification du profil",description:"Confirmation des modifications de votre profil"}]}],c=me({draw_results:{email:!0,sms:!0},new_lottery:{email:!0,sms:!1},ending_soon:{email:!0,sms:!0},login:{email:!0,sms:!1},profile_update:{email:!0,sms:!1}}),a=async()=>{if(!f.first_name||!f.first_name.trim()){window.$toast&&window.$toast.error("Le prénom est requis","❌ Validation");return}if(!f.last_name||!f.last_name.trim()){window.$toast&&window.$toast.error("Le nom de famille est requis","❌ Validation");return}if(!f.email||!f.email.trim()){window.$toast&&window.$toast.error("L'email est requis","❌ Validation");return}r.value=!0;try{console.log("Updating personal info with data:",f);const w=await T("/user/profile",f);if(console.log("Update personal info response:",w),w&&w.success)Object.assign(E,f),window.$toast&&window.$toast.success("Informations personnelles mises à jour avec succès","✅ Profil mis à jour");else throw new Error(w?.message||"Erreur lors de la mise à jour")}catch(w){if(console.error("Error updating personal info:",w),console.error("Error details:",w.response?.data),w.response?.status===422&&w.response?.data?.errors){const P=w.response.data.errors,N=[];Object.keys(P).forEach(X=>{P[X].forEach(K=>{let O=K;K.includes("validation.required")&&(O=`${{first_name:"Le prénom",last_name:"Le nom de famille",email:"L'email",phone:"Le téléphone"}[X]||X} est requis`),N.push(O)})}),window.$toast&&window.$toast.error(N.join(", "),"❌ Erreurs de validation")}else window.$toast&&window.$toast.error("Erreur lors de la mise à jour: "+(w.response?.data?.message||w.message),"❌ Erreur")}finally{r.value=!1}},v=async()=>{const w={first_name:f.first_name||E.first_name||"",last_name:f.last_name||E.last_name||"",email:f.email||E.email||"",phone:f.phone||E.phone||"",birth_date:f.birth_date||E.birth_date||null,gender:f.gender||E.gender||null,..._};if(!w.first_name||!w.first_name.trim()){window.$toast&&window.$toast.error("Le prénom est requis pour mettre à jour l'adresse","❌ Validation");return}if(!w.last_name||!w.last_name.trim()){window.$toast&&window.$toast.error("Le nom de famille est requis pour mettre à jour l'adresse","❌ Validation");return}h.value=!0;try{console.log("Updating address with data:",w);const P=await T("/user/profile",w);if(console.log("Update address response:",P),P&&P.success)Object.assign(E,_),window.$toast&&window.$toast.success("Adresse mise à jour avec succès","✅ Adresse");else throw new Error(P?.message||"Erreur lors de la mise à jour")}catch(P){if(console.error("Error updating address:",P),console.error("Error details:",P.response?.data),P.response?.status===422&&P.response?.data?.errors){const N=P.response.data.errors,X=[];Object.keys(N).forEach(W=>{N[W].forEach(O=>{let ae=O;O.includes("validation.required")&&(ae=`${{first_name:"Le prénom",last_name:"Le nom de famille",email:"L'email",phone:"Le téléphone",address:"L'adresse",city:"La ville",postal_code:"Le code postal",country:"Le pays"}[W]||W} est requis`),X.push(ae)})}),window.$toast&&window.$toast.error(X.join(", "),"❌ Erreurs de validation")}else window.$toast&&window.$toast.error("Erreur lors de la mise à jour de l'adresse: "+(P.response?.data?.message||P.message),"❌ Erreur")}finally{h.value=!1}},i=async()=>{if(I.new_password!==I.confirm_password){window.$toast&&window.$toast.error("Les mots de passe ne correspondent pas","❌ Erreur de validation");return}A.value=!0;try{const w=await T("/user/password",{current_password:I.current_password,new_password:I.new_password,new_password_confirmation:I.confirm_password});if(w&&w.success)Object.assign(I,{current_password:"",new_password:"",confirm_password:""}),window.$toast&&window.$toast.success("Mot de passe mis à jour avec succès","✅ Sécurité");else throw new Error(w?.message||"Erreur lors de la mise à jour")}catch(w){console.error("Error updating password:",w),window.$toast&&window.$toast.error("Erreur lors de la mise à jour du mot de passe","❌ Erreur")}finally{A.value=!1}},$=async()=>{n.value=!0;try{const w=await T("/user/preferences/detailed",{email_notifications:{lottery_results:c.draw_results.email,new_lotteries:c.new_lottery.email,ending_soon:c.ending_soon.email,account_updates:c.profile_update.email,login_alerts:c.login.email},sms_notifications:{lottery_results:c.draw_results.sms,new_lotteries:c.new_lottery.sms,ending_soon:c.ending_soon.sms,account_updates:c.profile_update.sms,login_alerts:c.login.sms},push_notifications:!0,marketing_emails:!0});if(w&&w.success)window.$toast&&window.$toast.success("Préférences de notifications mises à jour","✅ Notifications");else throw new Error(w?.message||"Erreur lors de la mise à jour")}catch(w){console.error("Error updating notifications:",w),window.$toast&&window.$toast.error("Erreur lors de la mise à jour des notifications","❌ Erreur")}finally{n.value=!1}},L=async()=>{try{const w=await M("/user/2fa/toggle",{enabled:!E.two_factor_enabled});if(w&&w.success)E.two_factor_enabled=!E.two_factor_enabled,window.$toast&&window.$toast.success(`Authentification à deux facteurs ${E.two_factor_enabled?"activée":"désactivée"}`,"✅ Sécurité mise à jour");else throw new Error(w?.message||"Erreur lors de la modification")}catch(w){console.error("Error toggling two-factor authentication:",w),window.$toast&&window.$toast.error("Erreur lors de la modification de l'authentification à deux facteurs","❌ Erreur")}},Y=async w=>{try{const P=await M(`/user/sessions/${w}/revoke`);if(P&&P.success)C.value=C.value.filter(N=>N.id!==w),window.$toast&&window.$toast.success("Session révoquée avec succès","✅ Sécurité");else throw new Error(P?.message||"Erreur lors de la révocation")}catch(P){console.error("Error revoking session:",P),window.$toast&&window.$toast.error("Erreur lors de la révocation de la session","❌ Erreur")}},J=()=>`https://ui-avatars.com/api/?name=${encodeURIComponent((E.first_name||"")+"+"+(E.last_name||""))}&background=3b82f6&color=ffffff&size=128`,z=async w=>{console.log("Avatar upload success:",w),E.avatar_url=w.avatar_url,window.$toast&&window.$toast.success("Photo de profil mise à jour avec succès","✅ Avatar"),await q()},b=w=>{console.error("Avatar upload error:",w),window.$toast&&window.$toast.error("Erreur lors de l'upload de l'avatar","❌ Erreur")},q=async()=>{try{const w=await m("/user/profile");if(console.log("Profile API response:",w),w&&w.success&&w.data&&w.data.user){const P=w.data.user;Object.assign(E,P),Object.assign(f,{first_name:P.first_name||"",last_name:P.last_name||"",email:P.email||"",phone:P.phone||"",birth_date:P.birth_date||"",gender:P.gender||""}),Object.assign(_,{address:P.address||"",city:P.city||"",postal_code:P.postal_code||"",country_id:P.country_id||null}),console.log("User data loaded:",P),console.log("Personal form:",f),console.log("Address form:",_),setTimeout(()=>{y.value&&f.phone&&y.value.setNumber(f.phone)},100)}else if(w&&w.data){const P=w.data;Object.assign(E,P),Object.assign(f,{first_name:P.first_name||"",last_name:P.last_name||"",email:P.email||"",phone:P.phone||"",birth_date:P.birth_date||"",gender:P.gender||""}),Object.assign(_,{address:P.address||"",city:P.city||"",postal_code:P.postal_code||"",country_id:P.country_id||null}),setTimeout(()=>{y.value&&f.phone&&y.value.setNumber(f.phone)},100)}}catch(w){console.error("Error loading user profile:",w)}},Z=async()=>{try{const w=await m("/countries");w&&w.data&&(F.value=w.data)}catch(w){console.error("Error loading countries:",w)}},k=async()=>{try{const w=await m("/user/preferences");if(w&&w.data&&w.data.preferences){const P=w.data.preferences;P.email_notifications&&(c.draw_results.email=P.email_notifications.lottery_results||!0,c.new_lottery.email=P.email_notifications.new_lotteries||!0,c.ending_soon.email=P.email_notifications.ending_soon||!0,c.profile_update.email=P.email_notifications.account_updates||!0,c.login.email=P.email_notifications.login_alerts||!0),P.sms_notifications&&(c.draw_results.sms=P.sms_notifications.lottery_results||!1,c.new_lottery.sms=P.sms_notifications.new_lotteries||!1,c.ending_soon.sms=P.sms_notifications.ending_soon||!1,c.profile_update.sms=P.sms_notifications.account_updates||!1,c.login.sms=P.sms_notifications.login_alerts||!1)}}catch(w){console.error("Error loading user preferences:",w)}},D=w=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(w)),g=async()=>{try{const w=await m("/user/sessions");w&&w.data&&w.data.sessions&&(C.value=w.data.sessions.map(P=>({id:P.id,device_name:P.user_agent?.includes("Mobile")?"Mobile":"Desktop",device_type:P.user_agent?.includes("Mobile")?"mobile":"desktop",location:`${P.city||"Inconnue"}, ${P.country||"Inconnue"}`,last_active:P.last_activity,is_current:P.is_current})))}catch(w){console.error("Error loading sessions:",w)}};return ue(async()=>{await Promise.all([q(),Z(),k(),g()])}),(w,P)=>(t(),s("div",null,[P[36]||(P[36]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mon profil"),e("p",{class:"mt-2 text-gray-600"},"Gérez vos informations personnelles et préférences")],-1)),e("div",wb,[e("div",$b,[e("div",kb,[e("div",Cb,[p(xs,{"current-avatar-url":E.avatar_url||J(),"upload-endpoint":"/user/avatar","field-name":"avatar","alt-text":`Photo de profil de ${E.first_name} ${E.last_name}`,"help-text":"Cliquez pour modifier votre photo de profil","max-size-m-b":5,onSuccess:z,onError:b},null,8,["current-avatar-url","alt-text"]),e("h3",jb,o(E.first_name)+" "+o(E.last_name),1),e("p",Ab,o(E.email),1)]),e("nav",Pb,[(t(),s(te,null,se(j,N=>e("button",{key:N.key,onClick:X=>u.value=N.key,class:Q(["w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",u.value===N.key?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"])},[(t(),de(Ce(N.icon),{class:"w-5 h-5 mr-3"})),U(" "+o(N.label),1)],10,Mb)),64))])])]),e("div",Eb,[u.value==="personal"?(t(),s("div",Sb,[P[19]||(P[19]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations personnelles",-1)),e("form",{onSubmit:xe(a,["prevent"])},[e("div",Db,[e("div",null,[P[12]||(P[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[U(" Prénom "),e("span",{class:"text-red-500"},"*")],-1)),G(e("input",{"onUpdate:modelValue":P[0]||(P[0]=N=>f.first_name=N),type:"text",required:"",placeholder:"Votre prénom",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,f.first_name]])]),e("div",null,[P[13]||(P[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[U(" Nom "),e("span",{class:"text-red-500"},"*")],-1)),G(e("input",{"onUpdate:modelValue":P[1]||(P[1]=N=>f.last_name=N),type:"text",required:"",placeholder:"Votre nom de famille",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,f.last_name]])]),e("div",null,[P[14]||(P[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[U(" Email "),e("span",{class:"text-red-500"},"*")],-1)),G(e("input",{"onUpdate:modelValue":P[2]||(P[2]=N=>f.email=N),type:"email",required:"",placeholder:"votre@email.com",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,f.email]])]),e("div",null,[P[15]||(P[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),p(gt,{ref_key:"phoneInputRef",ref:y,modelValue:f.phone,"onUpdate:modelValue":P[3]||(P[3]=N=>f.phone=N),class:"w-full","initial-country":"ga","preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"]},null,8,["modelValue"])]),e("div",null,[P[16]||(P[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de naissance",-1)),G(e("input",{"onUpdate:modelValue":P[4]||(P[4]=N=>f.birth_date=N),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[ee,f.birth_date]])]),e("div",null,[P[18]||(P[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Genre",-1)),G(e("select",{"onUpdate:modelValue":P[5]||(P[5]=N=>f.gender=N),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},P[17]||(P[17]=[e("option",{value:""},"Sélectionner...",-1),e("option",{value:"male"},"Homme",-1),e("option",{value:"female"},"Femme",-1),e("option",{value:"other"},"Autre",-1)]),512),[[ne,f.gender]])])]),e("div",Tb,[e("button",{type:"submit",disabled:r.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[r.value?(t(),s("span",Lb,"Mise à jour...")):(t(),s("span",Vb,"Mettre à jour"))],8,Ib)])],32)])):R("",!0),u.value==="address"?(t(),s("div",Fb,[P[25]||(P[25]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Adresse",-1)),e("form",{onSubmit:xe(v,["prevent"])},[e("div",Rb,[e("div",null,[P[20]||(P[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse",-1)),G(e("input",{"onUpdate:modelValue":P[6]||(P[6]=N=>_.address=N),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[ee,_.address]])]),e("div",qb,[e("div",null,[P[21]||(P[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),G(e("input",{"onUpdate:modelValue":P[7]||(P[7]=N=>_.city=N),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[ee,_.city]])]),e("div",null,[P[22]||(P[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code postal",-1)),G(e("input",{"onUpdate:modelValue":P[8]||(P[8]=N=>_.postal_code=N),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[ee,_.postal_code]])])]),e("div",null,[P[24]||(P[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays",-1)),e("div",zb,[U(o(E.country?.name||"Non spécifié")+" ",1),P[23]||(P[23]=e("div",{class:"text-xs text-gray-500 mt-1"},"Le pays n'est pas modifiable après l'inscription",-1))])])]),e("div",Nb,[e("button",{type:"submit",disabled:h.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[h.value?(t(),s("span",Bb,"Mise à jour...")):(t(),s("span",Ob,"Mettre à jour"))],8,Ub)])],32)])):R("",!0),u.value==="security"?(t(),s("div",Hb,[P[32]||(P[32]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Sécurité",-1)),e("div",Gb,[e("div",Kb,[P[29]||(P[29]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Changer le mot de passe",-1)),e("form",{onSubmit:xe(i,["prevent"]),class:"space-y-4"},[e("div",null,[P[26]||(P[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel",-1)),G(e("input",{"onUpdate:modelValue":P[9]||(P[9]=N=>I.current_password=N),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[ee,I.current_password]])]),e("div",null,[P[27]||(P[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),G(e("input",{"onUpdate:modelValue":P[10]||(P[10]=N=>I.new_password=N),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[ee,I.new_password]])]),e("div",null,[P[28]||(P[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le nouveau mot de passe",-1)),G(e("input",{"onUpdate:modelValue":P[11]||(P[11]=N=>I.confirm_password=N),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[ee,I.confirm_password]])]),e("button",{type:"submit",disabled:A.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[A.value?(t(),s("span",Zb,"Mise à jour...")):(t(),s("span",Xb,"Changer le mot de passe"))],8,Wb)],32)]),e("div",Jb,[e("div",Yb,[P[30]||(P[30]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Authentification à deux facteurs"),e("p",{class:"text-sm text-gray-600 mt-1"},"Ajoutez une couche de sécurité supplémentaire à votre compte")],-1)),e("button",{onClick:L,class:Q(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",E.two_factor_enabled?"bg-blue-600":"bg-gray-200"])},[e("span",{class:Q(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",E.two_factor_enabled?"translate-x-5":"translate-x-0"])},null,2)],2)])]),e("div",null,[P[31]||(P[31]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Sessions de connexion",-1)),e("div",Qb,[(t(!0),s(te,null,se(C.value,N=>(t(),s("div",{key:N.id,class:"flex justify-between items-center p-4 border border-gray-200 rounded-lg"},[e("div",eh,[N.device_type==="mobile"?(t(),de(l(it),{key:0,class:"w-6 h-6 text-gray-600 mr-3"})):(t(),de(l(ls),{key:1,class:"w-6 h-6 text-gray-600 mr-3"})),e("div",null,[e("p",th,o(N.device_name),1),e("p",sh,o(N.location)+" • "+o(D(N.last_active)),1)])]),e("div",oh,[N.is_current?(t(),s("span",rh," Session actuelle ")):R("",!0),N.is_current?R("",!0):(t(),s("button",{key:1,onClick:X=>Y(N.id),class:"text-sm text-red-600 hover:text-red-700"}," Révoquer ",8,ah))])]))),128))])])])])):R("",!0),u.value==="notifications"?(t(),s("div",nh,[P[35]||(P[35]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Préférences de notification",-1)),e("form",{onSubmit:xe($,["prevent"])},[e("div",ih,[(t(),s(te,null,se(x,N=>e("div",{key:N.key,class:"border-b border-gray-200 pb-6 last:border-b-0 last:pb-0"},[e("h3",lh,o(N.title),1),e("div",dh,[(t(!0),s(te,null,se(N.notifications,X=>(t(),s("div",{key:X.key,class:"flex justify-between items-start"},[e("div",uh,[e("p",ch,o(X.title),1),e("p",mh,o(X.description),1)]),e("div",ph,[e("label",gh,[G(e("input",{"onUpdate:modelValue":W=>c[X.key].email=W,type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,vh),[[_e,c[X.key].email]]),P[33]||(P[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Email",-1))]),e("label",fh,[G(e("input",{"onUpdate:modelValue":W=>c[X.key].sms=W,type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,xh),[[_e,c[X.key].sms]]),P[34]||(P[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"SMS",-1))])])]))),128))])])),64))]),e("div",bh,[e("button",{type:"submit",disabled:n.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[n.value?(t(),s("span",yh,"Mise à jour...")):(t(),s("span",_h,"Sauvegarder les préférences"))],8,hh)])],32)])):R("",!0)])])]))}};function $h(){const{get:d,post:m,loading:T,error:M}=le(),u=V([]),r=V({totalTickets:0,prizesWon:0,totalSpent:0,activeTickets:0}),h=V(1),A=V(!0),n=V(10),y=V(0),j=V({search:"",status:"",period:""}),E=re(()=>{let z=u.value;if(j.value.search){const b=j.value.search.toLowerCase();z=z.filter(q=>q.product.title.toLowerCase().includes(b)||q.product.description.toLowerCase().includes(b))}if(j.value.status&&(z=z.filter(b=>b.status===j.value.status)),j.value.period){const b=new Date,q=j.value.period;z=z.filter(Z=>{const k=new Date(Z.purchased_at);if(q==="week"){const D=new Date(b.getTime()-6048e5);return k>=D}else if(q==="month"){const D=new Date(b.getFullYear(),b.getMonth()-1,b.getDate());return k>=D}else if(q==="quarter"){const D=new Date(b.getFullYear(),b.getMonth()-3,b.getDate());return k>=D}return!0})}return z.sort((b,q)=>new Date(q.purchased_at)-new Date(b.purchased_at))}),f=re(()=>[{label:"Total tickets",value:r.value.totalTickets.toString(),color:"bg-blue-500",icon:"TicketIcon"},{label:"Prix gagnés",value:r.value.prizesWon.toString(),color:"bg-blue-500",icon:"TrophyIcon"},{label:"Total dépensé",value:$(r.value.totalSpent),color:"bg-yellow-500",icon:"CurrencyDollarIcon"},{label:"En cours",value:r.value.activeTickets.toString(),color:"bg-purple-500",icon:"ClockIcon"}]),_=async(z=1,b=!1)=>{try{const q=new URLSearchParams({page:z.toString(),per_page:n.value.toString()});j.value.search&&q.append("search",j.value.search),j.value.status&&q.append("status",j.value.status),j.value.period&&q.append("period",j.value.period);const Z=await d(`/tickets/my-tickets?${q.toString()}`);if(Z&&Z.success){const k=Z.data||[],D=Z.pagination||{},g=k.map(w=>({id:w.id,product:{id:w.product?.id||w.lottery?.product?.id,title:w.product?.name||w.lottery?.product?.name||"Produit inconnu",description:w.product?.description||w.lottery?.product?.description||"",image:w.product?.image_url||w.lottery?.product?.image_url||"/images/products/placeholder.jpg"},lottery:{id:w.lottery?.id,draw_date:new Date(w.lottery?.end_date||w.lottery?.draw_date),progress:Math.round(w.lottery?.sold_tickets/w.lottery?.total_tickets*100)||0,winning_number:w.lottery?.winning_number||null},quantity:w.quantity||1,total_price:w.amount||0,status:w.status||"active",purchased_at:new Date(w.created_at),ticket_numbers:w.ticket_numbers||[],winning_number:w.winning_number||null,prize_claimed:w.prize_claimed||!1}));b?u.value=[...u.value,...g]:u.value=g,h.value=D.current_page||z,y.value=D.total||g.length,A.value=D.current_page<D.last_page,C()}}catch(q){console.error("Erreur lors du chargement des tickets:",q)}},I=async()=>{A.value&&!T.value&&await _(h.value+1,!0)},F=async()=>{h.value=1,await _(1,!1)},C=()=>{const z=u.value.length,b=u.value.filter(k=>k.status==="won").length,q=u.value.reduce((k,D)=>{const g=parseFloat(D.total_price)||0;return k+g},0),Z=u.value.filter(k=>k.status==="active"||k.status==="pending").length;r.value={totalTickets:z,prizesWon:b,totalSpent:q,activeTickets:Z}},x=async z=>{try{const b=await m(`/tickets/${z}/claim-prize`);if(b&&b.success){const q=u.value.findIndex(Z=>Z.id===z);return q!==-1&&(u.value[q].prize_claimed=!0),b}}catch(b){throw console.error("Erreur lors de la réclamation du prix:",b),b}},c=async z=>{try{const b=await d(`/tickets/${z}/download`);if(b)if(typeof b=="string"&&b.startsWith("http")){const q=document.createElement("a");q.href=b,q.setAttribute("download",`ticket-${z}.pdf`),q.setAttribute("target","_blank"),document.body.appendChild(q),q.click(),q.remove()}else{const q=window.URL.createObjectURL(new Blob([b])),Z=document.createElement("a");Z.href=q,Z.setAttribute("download",`ticket-${z}.pdf`),document.body.appendChild(Z),Z.click(),Z.remove(),window.URL.revokeObjectURL(q)}}catch(b){throw console.error("Erreur lors du téléchargement du ticket:",b),b}},a=()=>{j.value={search:"",status:"",period:""},F()},v=()=>{F()};Ae(()=>j.value,()=>{clearTimeout(i),i=setTimeout(()=>{v()},500)},{deep:!0});let i=null;const $=z=>{const b=parseFloat(z)||0;return b>=1e6?(b/1e6).toFixed(1)+"M FCFA":b>=1e3?(b/1e3).toFixed(0)+"k FCFA":b.toLocaleString("fr-FR")+" FCFA"};return{tickets:u,filteredTickets:E,stats:f,filters:j,currentPage:h,hasMore:A,total:y,loading:T,error:M,loadTickets:_,loadMore:I,refreshTickets:F,claimPrize:x,downloadTicket:c,resetFilters:a,applyFilters:v,formatCurrency:$,formatDate:z=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(z)),getRemainingTime:(z,b)=>{if(b==="lost"||b==="won")return"Tirage terminé";const q=new Date,k=new Date(z)-q;if(k<=0)return"Tirage en cours";const D=Math.floor(k/(1e3*60*60*24)),g=Math.floor(k%(1e3*60*60*24)/(1e3*60*60));return D>0?`Tirage dans ${D} jour${D>1?"s":""}`:g>0?`Tirage dans ${g}h`:`Tirage dans ${Math.floor(k%36e5/6e4)}min`},getStatusLabel:z=>({active:"En cours",won:"Gagné",lost:"Perdu",pending:"Tirage imminent"})[z]||z}}const kh={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Ch={class:"flex items-center"},jh={class:"ml-4"},Ah={class:"text-sm font-medium text-gray-600"},Ph={class:"text-2xl font-bold text-gray-900"},Mh={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6"},Eh={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Sh={class:"flex items-end"},Dh={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Th={class:"flex"},Ih={class:"ml-3"},Lh={class:"mt-2 text-sm text-red-700"},Vh={class:"mt-4"},Fh={key:1,class:"text-center py-12"},Rh={key:2,class:"text-center py-12"},qh={class:"text-lg font-medium text-gray-900 mb-2"},zh={class:"text-gray-600 mb-4"},Nh={key:3,class:"space-y-4"},Uh={class:"p-6"},Bh={class:"flex items-start space-x-4"},Oh={class:"flex-shrink-0"},Hh=["src","alt"],Gh={class:"flex-1 min-w-0"},Kh={class:"flex justify-between items-start mb-2"},Wh={class:"text-lg font-semibold text-gray-900"},Zh={class:"text-sm text-gray-600"},Xh={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},Jh={class:"text-sm font-semibold text-gray-900"},Yh={class:"text-sm font-semibold text-gray-900"},Qh={class:"text-sm font-semibold text-gray-900"},ey={class:"text-sm font-semibold text-gray-900"},ty={class:"mb-4"},sy={class:"flex flex-wrap gap-2"},oy={key:0,class:"mb-4"},ry={class:"flex justify-between text-xs text-gray-600 mb-1"},ay={class:"w-full bg-gray-200 rounded-full h-2"},ny={key:1,class:"bg-blue-50 p-4 rounded-lg mb-4"},iy={class:"flex items-center mb-2"},ly={class:"text-sm text-blue-800"},dy={class:"text-sm text-blue-800"},uy={key:0,class:"mt-3"},cy=["onClick","disabled"],my={key:1,class:"mt-3"},py={class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800"},gy={key:2,class:"bg-red-50 p-4 rounded-lg mb-4"},vy={class:"flex items-center mb-2"},fy={class:"text-sm text-red-800"},xy={class:"text-sm text-red-800"},by={class:"flex justify-between items-center"},hy={class:"text-sm text-gray-500"},yy={class:"flex space-x-2"},_y=["onClick","disabled"],wy={key:4,class:"text-center mt-8"},$y={__name:"MyTickets",setup(d){const{filteredTickets:m,stats:T,filters:M,hasMore:u,loading:r,error:h,loadTickets:A,loadMore:n,claimPrize:y,downloadTicket:j,resetFilters:E,formatCurrency:f,formatDate:_,getRemainingTime:I,getStatusLabel:F}=$h(),C={TicketIcon:De,TrophyIcon:Ge,CurrencyDollarIcon:Ue,ClockIcon:Pe},x=async a=>{try{await y(a),console.log("Prix réclamé avec succès")}catch(v){console.error("Erreur lors de la réclamation du prix:",v),window.$toast&&window.$toast.error("Erreur lors de la réclamation du prix. Veuillez réessayer.","Erreur")}},c=async a=>{try{await j(a)}catch(v){console.error("Erreur lors du téléchargement:",v),window.$toast&&window.$toast.error("Erreur lors du téléchargement. Veuillez réessayer.","Erreur")}};return ue(()=>{A()}),(a,v)=>{const i=fe("router-link");return t(),s("div",null,[v[25]||(v[25]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mes tickets"),e("p",{class:"mt-2 text-gray-600"},"Suivez vos participations aux tombolas")],-1)),e("div",kh,[(t(!0),s(te,null,se(l(T),$=>(t(),s("div",{key:$.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},[e("div",Ch,[e("div",{class:Q(["p-3 rounded-lg",$.color])},[(t(),de(Ce(C[$.icon]),{class:"w-6 h-6 text-white"}))],2),e("div",jh,[e("p",Ah,o($.label),1),e("p",Ph,o($.value),1)])])]))),128))]),e("div",Mh,[e("div",Eh,[e("div",null,[v[6]||(v[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":v[0]||(v[0]=$=>l(M).search=$),type:"text",placeholder:"Nom du produit...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,l(M).search]])]),e("div",null,[v[8]||(v[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":v[1]||(v[1]=$=>l(M).status=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},v[7]||(v[7]=[ie('<option value="">Tous les statuts</option><option value="active">En cours</option><option value="won">Gagné</option><option value="lost">Perdu</option><option value="pending">En attente</option>',5)]),512),[[ne,l(M).status]])]),e("div",null,[v[10]||(v[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période",-1)),G(e("select",{"onUpdate:modelValue":v[2]||(v[2]=$=>l(M).period=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},v[9]||(v[9]=[e("option",{value:""},"Toutes les périodes",-1),e("option",{value:"week"},"Cette semaine",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1)]),512),[[ne,l(M).period]])]),e("div",Sh,[e("button",{onClick:v[3]||(v[3]=(...$)=>l(E)&&l(E)(...$)),class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),l(h)?(t(),s("div",Dh,[e("div",Th,[p(l(je),{class:"h-5 w-5 text-red-400"}),e("div",Ih,[v[11]||(v[11]=e("h3",{class:"text-sm font-medium text-red-800"}," Erreur de chargement ",-1)),e("div",Lh,[e("p",null,o(l(h)),1)]),e("div",Vh,[e("button",{onClick:v[4]||(v[4]=$=>l(A)()),class:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded-md hover:bg-red-200 transition-colors"}," Réessayer ")])])])])):R("",!0),l(r)?(t(),s("div",Fh,v[12]||(v[12]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement de vos tickets...",-1)]))):l(m).length===0?(t(),s("div",Rh,[p(l(De),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e("h3",qh,o(l(m).length===0&&!l(M).search&&!l(M).status&&!l(M).period?"Aucun ticket acheté":"Aucun résultat trouvé"),1),e("p",zh,o(l(m).length===0&&!l(M).search&&!l(M).status&&!l(M).period?"Vous n'avez pas encore participé à des tombolas":"Essayez de modifier vos filtres de recherche"),1),l(m).length===0&&!l(M).search&&!l(M).status&&!l(M).period?(t(),de(i,{key:0,to:"/customer/products",class:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},{default:oe(()=>v[13]||(v[13]=[U(" Découvrir les produits ",-1)])),_:1,__:[13]})):R("",!0)])):(t(),s("div",Nh,[(t(!0),s(te,null,se(l(m),$=>(t(),s("div",{key:$.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},[e("div",Uh,[e("div",Bh,[e("div",Oh,[e("img",{src:$.product.image_url||$.product.main_image||$.product.image,alt:$.product.title,class:"w-20 h-20 rounded-lg object-cover"},null,8,Hh)]),e("div",Gh,[e("div",Kh,[e("div",null,[e("h3",Wh,o($.product.title),1),e("p",Zh,o($.product.description),1)]),e("span",{class:Q(["px-3 py-1 text-sm font-medium rounded-full",$.status==="won"?"bg-blue-100 text-blue-800":$.status==="lost"?"bg-red-100 text-red-800":$.status==="active"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},o(l(F)($.status)),3)]),e("div",Xh,[e("div",null,[v[14]||(v[14]=e("p",{class:"text-xs text-gray-500"},"Tickets achetés",-1)),e("p",Jh,o($.quantity),1)]),e("div",null,[v[15]||(v[15]=e("p",{class:"text-xs text-gray-500"},"Total payé",-1)),e("p",Yh,o(l(f)($.total_price)),1)]),e("div",null,[v[16]||(v[16]=e("p",{class:"text-xs text-gray-500"},"Date d'achat",-1)),e("p",Qh,o(l(_)($.purchased_at)),1)]),e("div",null,[v[17]||(v[17]=e("p",{class:"text-xs text-gray-500"},"Tirage",-1)),e("p",ey,o(l(_)($.lottery.draw_date)),1)])]),e("div",ty,[v[18]||(v[18]=e("p",{class:"text-xs text-gray-500 mb-2"},"Vos numéros de tickets",-1)),e("div",sy,[(t(!0),s(te,null,se($.ticket_numbers,L=>(t(),s("span",{key:L,class:Q(["px-2 py-1 text-xs font-mono rounded border",$.winning_number===L?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-50 text-gray-700 border-gray-300"])}," #"+o(L),3))),128))])]),$.status==="active"?(t(),s("div",oy,[e("div",ry,[v[19]||(v[19]=e("span",null,"Progression de la tombola",-1)),e("span",null,o($.lottery.progress)+"%",1)]),e("div",ay,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Me({width:$.lottery.progress+"%"})},null,4)])])):R("",!0),$.status==="won"?(t(),s("div",ny,[e("div",iy,[p(l(Ge),{class:"w-5 h-5 text-blue-600 mr-2"}),v[20]||(v[20]=e("p",{class:"font-semibold text-blue-900"},"Félicitations ! Vous avez gagné !",-1))]),e("p",ly,"Numéro gagnant: #"+o($.winning_number),1),e("p",dy,"Tirage effectué le "+o(l(_)($.lottery.draw_date)),1),$.prize_claimed?(t(),s("div",my,[e("span",py,[p(l(Te),{class:"w-4 h-4 mr-1"}),v[21]||(v[21]=U(" Prix réclamé ",-1))])])):(t(),s("div",uy,[e("button",{onClick:L=>x($.id),disabled:l(r),class:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},o(l(r)?"Réclamation...":"Réclamer mon prix"),9,cy)]))])):R("",!0),$.status==="lost"?(t(),s("div",gy,[e("div",vy,[p(l(je),{class:"w-5 h-5 text-red-600 mr-2"}),v[22]||(v[22]=e("p",{class:"font-semibold text-red-900"},"Pas de chance cette fois-ci",-1))]),e("p",fy,"Numéro gagnant: #"+o($.winning_number),1),e("p",xy,"Tirage effectué le "+o(l(_)($.lottery.draw_date)),1)])):R("",!0),e("div",by,[e("div",hy,o(l(I)($.lottery.draw_date,$.status)),1),e("div",yy,[p(i,{to:`/customer/products/${$.product.id}`,class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},{default:oe(()=>v[23]||(v[23]=[U(" Voir le produit ",-1)])),_:2,__:[23]},1032,["to"]),e("button",{onClick:L=>c($.id),disabled:l(r),class:"text-sm text-gray-600 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed"},o(l(r)?"Téléchargement...":"Télécharger"),9,_y)])])])])])]))),128))])),!l(r)&&l(m).length>0&&l(u)?(t(),s("div",wy,[e("button",{onClick:v[5]||(v[5]=(...$)=>l(n)&&l(n)(...$)),class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-blue-600 bg-blue-50 hover:bg-blue-100"},[v[24]||(v[24]=U(" Charger plus de tickets ",-1)),p(l(zt),{class:"ml-2 w-5 h-5"})])])):R("",!0)])}}},ky={class:"min-h-screen bg-gray-50 py-8"},Cy={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},jy={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},Ay={class:"flex items-center justify-between"},Py={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},My={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ey={class:"flex items-center"},Sy={class:"text-2xl font-bold text-gray-900"},Dy={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ty={class:"flex items-center"},Iy={class:"text-2xl font-bold text-gray-900"},Ly={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Vy={class:"flex items-center"},Fy={class:"text-2xl font-bold text-gray-900"},Ry={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},qy={class:"flex items-center"},zy={class:"text-2xl font-bold text-gray-900"},Ny={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-8"},Uy={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},By={class:"flex items-center space-x-4"},Oy={class:"text-sm text-gray-500"},Hy={key:0,class:"text-center py-12"},Gy={key:1,class:"text-center py-12"},Ky={key:2,class:"space-y-4"},Wy={class:"flex items-start justify-between"},Zy={class:"flex-1"},Xy={class:"flex items-center space-x-3 mb-2"},Jy={class:"font-mono text-sm text-gray-600"},Yy={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Qy={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},e_={class:"text-lg font-semibold text-gray-900"},t_={class:"text-sm font-medium"},s_={class:"text-sm"},o_={key:0,class:"bg-gray-50 rounded-lg p-3 mb-4"},r_={class:"font-medium"},a_={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4"},n_={class:"text-sm text-red-700 mt-1"},i_={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"},l_={class:"text-sm text-blue-700 mt-1"},d_={class:"flex space-x-2 ml-4"},u_=["onClick"],c_=["onClick"],m_={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},p_={class:"flex items-center justify-center min-h-screen px-4"},g_={class:"relative bg-white rounded-lg max-w-lg w-full"},v_={class:"p-6"},f_={class:"flex items-center justify-between mb-4"},x_={class:"space-y-4"},b_=["value"],h_={class:"flex justify-end space-x-3 mt-6"},y_=["disabled"],__={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},w_={class:"flex items-center justify-center min-h-screen px-4"},$_={class:"relative bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto"},k_={class:"p-6"},C_={class:"flex items-center justify-between mb-6"},j_={class:"space-y-6"},A_={class:"grid grid-cols-2 gap-4"},P_={class:"font-mono font-medium"},M_={class:"grid grid-cols-2 gap-4"},E_={class:"text-xl font-semibold text-blue-600"},S_={class:"bg-gray-50 rounded-lg p-4"},D_={class:"grid grid-cols-2 gap-4"},T_={class:"font-mono"},I_={key:0,class:"bg-blue-50 rounded-lg p-4"},L_={class:"mt-2"},V_={class:"space-y-2"},F_={class:"flex justify-between"},R_={class:"text-sm"},q_={key:0,class:"flex justify-between"},z_={class:"text-sm"},N_={key:1,class:"flex justify-between"},U_={class:"text-sm"},B_={key:2,class:"flex justify-between"},O_={class:"text-sm"},H_={__name:"Refunds",setup(d){const{get:m,post:T}=le(),M=V([]),u=V({}),r=V(!1),h=V(""),A=V(!1),n=V(!1),y=V(null),j=V([]),E=V({transaction_id:"",reason:"",notes:""}),f=async()=>{r.value=!0;try{const z=new URLSearchParams({limit:50});h.value&&z.append("status",h.value);const b=await m(`/refunds?${z}`);M.value=b.data.refunds||[],u.value=b.data.stats||{}}catch(z){console.error("Error loading refunds:",z)}finally{r.value=!1}},_=async()=>{try{const z=await m("/transactions?status=completed&limit=100");j.value=z.data.transactions?.filter(b=>!b.has_refund)||[]}catch(z){console.error("Error loading transactions:",z)}},I=async()=>{n.value=!0;try{const z=await T("/refunds",E.value);M.value.unshift(z.data.refund),u.value.total_refunds=(u.value.total_refunds||0)+1,u.value.pending_refunds=(u.value.pending_refunds||0)+1,E.value={transaction_id:"",reason:"",notes:""},A.value=!1,window.$toast&&window.$toast.success("Demande de remboursement créée avec succès!","✅ Demande créée")}catch(z){console.error("Error creating refund:",z),window.$toast&&window.$toast.error("Erreur lors de la création de la demande","❌ Erreur")}finally{n.value=!1}},F=async z=>{if(confirm("Êtes-vous sûr de vouloir annuler cette demande ?"))try{await T(`/refunds/${z.id}/cancel`);const b=M.value.findIndex(q=>q.id===z.id);b!==-1&&(M.value[b].status="rejected",M.value[b].rejection_reason="Annulé par l'utilisateur"),window.$toast&&window.$toast.success("Demande annulée avec succès","✅ Annulation")}catch(b){console.error("Error cancelling refund:",b),window.$toast&&window.$toast.error("Erreur lors de l'annulation","❌ Erreur")}},C=z=>{y.value=z},x=()=>{A.value=!1,E.value={transaction_id:"",reason:"",notes:""}},c=()=>{h.value="",f()},a=z=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(z||0)+" FCFA",v=z=>z?z>=1e6?(z/1e6).toFixed(1)+"M":z>=1e3?(z/1e3).toFixed(0)+"K":z.toString():"0",i=z=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(z)),$=z=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",processed:"bg-purple-100 text-purple-800",completed:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800"})[z]||"bg-gray-100 text-gray-800",L=z=>({pending:"⏳ En attente",approved:"✅ Approuvé",processed:"🔄 En traitement",completed:"✅ Terminé",rejected:"❌ Rejeté",failed:"❌ Échec"})[z]||z,Y=z=>({insufficient_participants:"Participants insuffisants",lottery_cancelled:"Tombola annulée",accidental_purchase:"Achat accidentel",changed_mind:"Changement d'avis",duplicate_purchase:"Achat en double",technical_issue:"Problème technique",system_error:"Erreur système",other:"Autre"})[z]||z,J=z=>({mobile_money:"Mobile Money",bank_transfer:"Virement bancaire",wallet_credit:"Crédit portefeuille"})[z]||z;return ue(async()=>{await Promise.all([f(),_()])}),(z,b)=>(t(),s("div",ky,[e("div",Cy,[e("div",jy,[e("div",Ay,[b[8]||(b[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"💸 Mes Remboursements"),e("p",{class:"text-gray-600 mt-1"},"Gérez vos demandes de remboursement")],-1)),e("button",{onClick:b[0]||(b[0]=q=>A.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," ➕ Nouvelle demande ")])]),e("div",Py,[e("div",My,[e("div",Ey,[b[10]||(b[10]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"}," 💰 ",-1)),e("div",null,[e("div",Sy,o(u.value.total_refunds||0),1),b[9]||(b[9]=e("div",{class:"text-sm text-gray-600"},"Remboursements",-1))])])]),e("div",Dy,[e("div",Ty,[b[12]||(b[12]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"}," ✅ ",-1)),e("div",null,[e("div",Iy,o(v(u.value.total_amount_refunded)),1),b[11]||(b[11]=e("div",{class:"text-sm text-gray-600"},"Montant remboursé",-1))])])]),e("div",Ly,[e("div",Vy,[b[14]||(b[14]=e("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4"}," ⏳ ",-1)),e("div",null,[e("div",Fy,o(u.value.pending_refunds||0),1),b[13]||(b[13]=e("div",{class:"text-sm text-gray-600"},"En attente",-1))])])]),e("div",Ry,[e("div",qy,[b[16]||(b[16]=e("div",{class:"p-3 rounded-full bg-red-100 text-red-600 mr-4"}," X ",-1)),e("div",null,[e("div",zy,o(u.value.rejected_refunds||0),1),b[15]||(b[15]=e("div",{class:"text-sm text-gray-600"},"Rejetées",-1))])])])]),e("div",Ny,[e("div",Uy,[e("div",By,[G(e("select",{"onUpdate:modelValue":b[1]||(b[1]=q=>h.value=q),onChange:f,class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},b[17]||(b[17]=[ie('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="approved">Approuvé</option><option value="processed">Traité</option><option value="completed">Terminé</option><option value="rejected">Rejeté</option>',6)]),544),[[ne,h.value]]),e("button",{onClick:c,class:"px-3 py-2 text-gray-600 hover:text-gray-800 text-sm"}," Réinitialiser ")]),e("div",Oy,o(M.value.length)+" remboursement(s) ",1)])]),r.value?(t(),s("div",Hy,b[18]||(b[18]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des remboursements...",-1)]))):M.value.length===0?(t(),s("div",Gy,[p(l(dt),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),b[19]||(b[19]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Aucun remboursement",-1)),b[20]||(b[20]=e("p",{class:"text-gray-600 mb-6"},"Vous n'avez pas encore de demande de remboursement.",-1)),e("button",{onClick:b[2]||(b[2]=q=>A.value=!0),class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Faire une demande ")])):(t(),s("div",Ky,[(t(!0),s(te,null,se(M.value,q=>(t(),s("div",{key:q.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow"},[e("div",Wy,[e("div",Zy,[e("div",Xy,[e("span",Jy,o(q.refund_number),1),e("span",{class:Q(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",$(q.status)])},o(L(q.status)),3),q.auto_processed?(t(),s("span",Yy," 🤖 Automatique ")):R("",!0)]),e("div",Qy,[e("div",null,[b[21]||(b[21]=e("div",{class:"text-sm text-gray-600"},"Montant",-1)),e("div",e_,o(a(q.amount)),1)]),e("div",null,[b[22]||(b[22]=e("div",{class:"text-sm text-gray-600"},"Raison",-1)),e("div",t_,o(Y(q.reason)),1)]),e("div",null,[b[23]||(b[23]=e("div",{class:"text-sm text-gray-600"},"Date de demande",-1)),e("div",s_,o(i(q.created_at)),1)])]),q.lottery?(t(),s("div",o_,[b[24]||(b[24]=e("div",{class:"text-sm text-gray-600"},"Tombola concernée",-1)),e("div",r_,o(q.lottery.lottery_number)+" - "+o(q.lottery.product_title),1)])):R("",!0),q.rejection_reason?(t(),s("div",a_,[b[25]||(b[25]=e("div",{class:"text-sm font-medium text-red-800"},"Raison du rejet",-1)),e("div",n_,o(q.rejection_reason),1)])):R("",!0),q.notes?(t(),s("div",i_,[b[26]||(b[26]=e("div",{class:"text-sm font-medium text-blue-800"},"Notes",-1)),e("div",l_,o(q.notes),1)])):R("",!0)]),e("div",d_,[e("button",{onClick:Z=>C(q),class:"px-3 py-2 text-blue-600 hover:text-blue-700 text-sm font-medium"}," Détails ",8,u_),q.status==="pending"?(t(),s("button",{key:0,onClick:Z=>F(q),class:"px-3 py-2 text-red-600 hover:text-red-700 text-sm font-medium"}," Annuler ",8,c_)):R("",!0)])])]))),128))]))]),A.value?(t(),s("div",m_,[e("div",p_,[e("div",{class:"fixed inset-0 bg-black/20",onClick:x}),e("div",g_,[e("div",v_,[e("div",f_,[b[27]||(b[27]=e("h3",{class:"text-lg font-semibold"},"Nouvelle demande de remboursement",-1)),e("button",{onClick:x,class:"text-gray-400 hover:text-gray-600"},[p(l(Re),{class:"w-6 h-6"})])]),e("form",{onSubmit:xe(I,["prevent"])},[e("div",x_,[e("div",null,[b[29]||(b[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Transaction à rembourser",-1)),G(e("select",{"onUpdate:modelValue":b[3]||(b[3]=q=>E.value.transaction_id=q),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[b[28]||(b[28]=e("option",{value:""},"Sélectionnez une transaction",-1)),(t(!0),s(te,null,se(j.value,q=>(t(),s("option",{key:q.id,value:q.id},o(q.reference)+" - "+o(a(q.amount))+" "+o(q.lottery?`(${q.lottery.lottery_number})`:""),9,b_))),128))],512),[[ne,E.value.transaction_id]])]),e("div",null,[b[31]||(b[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Raison du remboursement",-1)),G(e("select",{"onUpdate:modelValue":b[4]||(b[4]=q=>E.value.reason=q),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},b[30]||(b[30]=[ie('<option value="">Sélectionnez une raison</option><option value="accidental_purchase">Achat accidentel</option><option value="changed_mind">Changement d&#39;avis</option><option value="duplicate_purchase">Achat en double</option><option value="technical_issue">Problème technique</option><option value="other">Autre</option>',6)]),512),[[ne,E.value.reason]])]),e("div",null,[b[32]||(b[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Explication (optionnel)",-1)),G(e("textarea",{"onUpdate:modelValue":b[5]||(b[5]=q=>E.value.notes=q),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Décrivez votre situation..."},null,512),[[ee,E.value.notes]])])]),e("div",h_,[e("button",{type:"button",onClick:x,class:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg"}," Annuler "),e("button",{type:"submit",disabled:n.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},o(n.value?"Création...":"Créer la demande"),9,y_)])],32)])])])])):R("",!0),y.value?(t(),s("div",__,[e("div",w_,[e("div",{class:"fixed inset-0 bg-black/20",onClick:b[6]||(b[6]=q=>y.value=null)}),e("div",$_,[e("div",k_,[e("div",C_,[b[33]||(b[33]=e("h3",{class:"text-lg font-semibold"},"Détails du remboursement",-1)),e("button",{onClick:b[7]||(b[7]=q=>y.value=null),class:"text-gray-400 hover:text-gray-600"},[p(l(Re),{class:"w-6 h-6"})])]),e("div",j_,[e("div",A_,[e("div",null,[b[34]||(b[34]=e("div",{class:"text-sm text-gray-600"},"Numéro",-1)),e("div",P_,o(y.value.refund_number),1)]),e("div",null,[b[35]||(b[35]=e("div",{class:"text-sm text-gray-600"},"Statut",-1)),e("span",{class:Q(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",$(y.value.status)])},o(L(y.value.status)),3)])]),e("div",M_,[e("div",null,[b[36]||(b[36]=e("div",{class:"text-sm text-gray-600"},"Montant",-1)),e("div",E_,o(a(y.value.amount)),1)]),e("div",null,[b[37]||(b[37]=e("div",{class:"text-sm text-gray-600"},"Méthode de remboursement",-1)),e("div",null,o(J(y.value.refund_method)),1)])]),e("div",S_,[b[40]||(b[40]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Transaction originale",-1)),e("div",D_,[e("div",null,[b[38]||(b[38]=e("div",{class:"text-sm text-gray-600"},"Référence",-1)),e("div",T_,o(y.value.transaction.reference),1)]),e("div",null,[b[39]||(b[39]=e("div",{class:"text-sm text-gray-600"},"Montant",-1)),e("div",null,o(a(y.value.transaction.amount)),1)])])]),y.value.lottery?(t(),s("div",I_,[b[43]||(b[43]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Tombola concernée",-1)),e("div",null,[b[41]||(b[41]=e("div",{class:"text-sm text-gray-600"},"Numéro",-1)),e("div",null,o(y.value.lottery.lottery_number),1)]),e("div",L_,[b[42]||(b[42]=e("div",{class:"text-sm text-gray-600"},"Produit",-1)),e("div",null,o(y.value.lottery.product_title),1)])])):R("",!0),e("div",null,[b[48]||(b[48]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Chronologie",-1)),e("div",V_,[e("div",F_,[b[44]||(b[44]=e("span",{class:"text-sm text-gray-600"},"Demande créée",-1)),e("span",R_,o(i(y.value.created_at)),1)]),y.value.approved_at?(t(),s("div",q_,[b[45]||(b[45]=e("span",{class:"text-sm text-gray-600"},"Approuvé",-1)),e("span",z_,o(i(y.value.approved_at)),1)])):R("",!0),y.value.processed_at?(t(),s("div",N_,[b[46]||(b[46]=e("span",{class:"text-sm text-gray-600"},"Traité",-1)),e("span",U_,o(i(y.value.processed_at)),1)])):R("",!0),y.value.rejected_at?(t(),s("div",B_,[b[47]||(b[47]=e("span",{class:"text-sm text-gray-600"},"Rejeté",-1)),e("span",O_,o(i(y.value.rejected_at)),1)])):R("",!0)])])])])])])])):R("",!0)]))}};function Pt(){const d=(m,T="info",M=3e3)=>{T==="error"?(console.error(m),alert("Erreur: "+m)):(console.log(m),alert(m))};return{success:m=>d(m,"success"),error:m=>d(m,"error"),info:m=>d(m,"info"),warning:m=>d(m,"warning")}}const G_={class:"order-tracking"},K_={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},W_={class:"bg-white rounded-lg shadow p-6"},Z_={class:"flex items-center"},X_={class:"ml-4"},J_={class:"text-2xl font-semibold text-gray-900"},Y_={class:"bg-white rounded-lg shadow p-6"},Q_={class:"flex items-center"},ew={class:"ml-4"},tw={class:"text-2xl font-semibold text-gray-900"},sw={class:"bg-white rounded-lg shadow p-6"},ow={class:"flex items-center"},rw={class:"ml-4"},aw={class:"text-2xl font-semibold text-gray-900"},nw={class:"bg-white rounded-lg shadow p-6"},iw={class:"flex items-center"},lw={class:"ml-4"},dw={class:"text-2xl font-semibold text-gray-900"},uw={class:"bg-white rounded-lg shadow p-6 mb-8"},cw={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mw={class:"flex items-end"},pw={class:"bg-white rounded-lg shadow overflow-hidden"},gw={key:0,class:"p-8 text-center"},vw={key:1,class:"p-8 text-center"},fw={key:2},xw={class:"px-6 py-4"},bw={class:"flex justify-between items-start"},hw={class:"flex-1"},yw={class:"flex items-center space-x-3 mb-2"},_w={class:"text-lg font-medium text-gray-900"},ww={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},$w={class:"text-sm text-gray-600 mb-2"},kw={key:0},Cw={class:"flex items-center space-x-4 text-sm text-gray-500"},jw={key:0},Aw={class:"flex space-x-2"},Pw={key:3,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},Mw={class:"flex justify-between items-center"},Ew={class:"text-sm text-gray-600"},Sw={class:"flex space-x-1"},Dw=["disabled"],Tw=["onClick"],Iw=["disabled"],Lw={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Vw={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white"},Fw={class:"mt-3"},Rw={key:0},qw={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},zw={class:"space-y-2"},Nw={class:"flex justify-between"},Uw={class:"text-sm font-medium"},Bw={class:"flex justify-between"},Ow={class:"flex justify-between"},Hw={class:"text-sm"},Gw={class:"flex justify-between"},Kw={class:"text-sm font-medium"},Ww={class:"flex justify-between"},Zw={class:"text-sm"},Xw={class:"flex justify-between"},Jw={class:"text-sm"},Yw={key:0,class:"flex justify-between"},Qw={class:"text-sm"},e5={key:0},t5={class:"border rounded-lg p-4"},s5={class:"font-medium"},o5={class:"text-sm text-gray-600 mt-1"},r5={key:1,class:"mt-6"},a5={class:"border rounded-lg p-4"},n5={class:"font-medium"},i5={class:"text-sm text-gray-600 mt-2"},l5={key:0},d5={key:0,class:"mt-6"},u5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},c5={class:"flex justify-between items-start"},m5={class:"font-medium"},p5={class:"text-sm text-gray-600"},g5={class:"text-right"},v5={key:0,class:"text-sm text-green-600 mt-1"},f5={__name:"OrderTracking",setup(d){const{apiRequest:m}=le(),{showError:T}=Pt(),M=V([]),u=V({total_orders:0,completed_orders:0,pending_orders:0,total_tickets_purchased:0}),r=V(null),h=V(!1),A=V(!1),n=V(null),y=me({search:"",status:"",type:""}),j=async()=>{try{const c=await m("/api/orders/stats","GET");u.value=c.data}catch(c){console.error("Erreur lors du chargement des statistiques:",c)}},E=async(c=1)=>{h.value=!0;try{const a=new URLSearchParams({page:c,per_page:10});y.search&&a.append("q",y.search),y.status&&a.append("status",y.status),y.type&&a.append("type",y.type);const v=await m(`/api/orders?${a.toString()}`,"GET");M.value=v.data,r.value=v.pagination}catch(a){T("Erreur lors du chargement des commandes"),console.error("Erreur:",a)}finally{h.value=!1}},f=()=>{A.value=!1,n.value=null},_=c=>({completed:"Complété",pending:"En attente",payment_initiated:"Paiement initié",failed:"Échoué",paid:"Payé",refunded:"Remboursé"})[c]||c,I=c=>({ticket_purchase:"Achat de billet",direct_purchase:"Achat direct"})[c]||c,F=c=>`px-2 py-1 text-xs rounded-full font-medium ${{completed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",payment_initiated:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",paid:"bg-green-100 text-green-800",refunded:"bg-gray-100 text-gray-800"}[c]||"bg-gray-100 text-gray-800"}`,C=c=>new Date(c).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=()=>{if(!r.value)return[];const c=r.value.current_page,a=r.value.last_page,v=[];for(let i=Math.max(1,c-2);i<=Math.min(a,c+2);i++)v.push(i);return v};return Ae(()=>[y.status,y.type],()=>{E(1)},{deep:!0}),ue(()=>{j(),E()}),(c,a)=>{const v=fe("router-link");return t(),s("div",G_,[a[37]||(a[37]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi de mes commandes"),e("p",{class:"text-gray-600"},"Suivez l'état de vos commandes et billets de loterie")],-1)),e("div",K_,[e("div",W_,[e("div",Z_,[a[8]||(a[8]=e("div",{class:"p-3 rounded-full bg-blue-100"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})])],-1)),e("div",X_,[a[7]||(a[7]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Commandes",-1)),e("p",J_,o(u.value.total_orders),1)])])]),e("div",Y_,[e("div",Q_,[a[10]||(a[10]=e("div",{class:"p-3 rounded-full bg-green-100"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ew,[a[9]||(a[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Complétées",-1)),e("p",tw,o(u.value.completed_orders),1)])])]),e("div",sw,[e("div",ow,[a[12]||(a[12]=e("div",{class:"p-3 rounded-full bg-yellow-100"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",rw,[a[11]||(a[11]=e("p",{class:"text-sm font-medium text-gray-600"},"En attente",-1)),e("p",aw,o(u.value.pending_orders),1)])])]),e("div",nw,[e("div",iw,[a[14]||(a[14]=e("div",{class:"p-3 rounded-full bg-purple-100"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",lw,[a[13]||(a[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Billets Achetés",-1)),e("p",dw,o(u.value.total_tickets_purchased),1)])])])]),e("div",uw,[e("div",cw,[e("div",null,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),G(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=i=>y.search=i),placeholder:"Numéro de commande ou ticket...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:a[1]||(a[1]=$t(i=>E(1),["enter"]))},null,544),[[ee,y.search]])]),e("div",null,[a[17]||(a[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":a[2]||(a[2]=i=>y.status=i),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},a[16]||(a[16]=[ie('<option value="" data-v-448be14d>Tous les statuts</option><option value="completed" data-v-448be14d>Complété</option><option value="pending" data-v-448be14d>En attente</option><option value="payment_initiated" data-v-448be14d>Paiement initié</option><option value="failed" data-v-448be14d>Échoué</option>',5)]),512),[[ne,y.status]])]),e("div",null,[a[19]||(a[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),G(e("select",{"onUpdate:modelValue":a[3]||(a[3]=i=>y.type=i),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},a[18]||(a[18]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"ticket_purchase"},"Achat de billet",-1),e("option",{value:"direct_purchase"},"Achat direct",-1)]),512),[[ne,y.type]])]),e("div",mw,[e("button",{onClick:a[4]||(a[4]=i=>E(1)),class:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-200"}," Rechercher ")])])]),e("div",pw,[a[23]||(a[23]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Mes commandes")],-1)),h.value?(t(),s("div",gw,a[20]||(a[20]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-gray-500 mt-4"},"Chargement des commandes...",-1)]))):M.value.length===0?(t(),s("div",vw,a[21]||(a[21]=[e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2 2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-4.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 009.586 13H7"})],-1),e("p",{class:"text-gray-500"},"Aucune commande trouvée",-1)]))):(t(),s("div",fw,[(t(!0),s(te,null,se(M.value,i=>(t(),s("div",{key:i.id,class:"border-b border-gray-200 hover:bg-gray-50 transition duration-200"},[e("div",xw,[e("div",bw,[e("div",hw,[e("div",yw,[e("h3",_w,"#"+o(i.transaction_id),1),e("span",{class:Q(F(i.status))},o(_(i.status)),3),e("span",ww,o(I(i.type)),1)]),e("div",$w,[U(o(i.product?i.product.name:"Produit supprimé")+" ",1),i.lottery?(t(),s("span",kw," - Loterie #"+o(i.lottery.lottery_number),1)):R("",!0)]),e("div",Cw,[e("span",null,o(C(i.created_at)),1),e("span",null,o(i.amount)+" "+o(i.currency),1),i.quantity?(t(),s("span",jw,o(i.quantity)+" billet(s)",1)):R("",!0)])]),e("div",Aw,[p(v,{to:{name:"customer.order.detail",params:{id:i.transaction_id}},class:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700"},{default:oe(()=>a[22]||(a[22]=[U(" Détails ",-1)])),_:2,__:[22]},1032,["to"])])])])]))),128))])),r.value&&r.value.last_page>1?(t(),s("div",Pw,[e("div",Mw,[e("div",Ew," Affichage de "+o((r.value.current_page-1)*r.value.per_page+1)+" à "+o(Math.min(r.value.current_page*r.value.per_page,r.value.total))+" sur "+o(r.value.total)+" résultats ",1),e("div",Sw,[e("button",{onClick:a[5]||(a[5]=i=>E(r.value.current_page-1)),disabled:r.value.current_page<=1,class:"px-3 py-1 border rounded text-gray-700 hover:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"}," Précédent ",8,Dw),(t(!0),s(te,null,se(x(),i=>(t(),s("button",{key:i,onClick:$=>E(i),class:Q(["px-3 py-1 border rounded",i===r.value.current_page?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"])},o(i),11,Tw))),128)),e("button",{onClick:a[6]||(a[6]=i=>E(r.value.current_page+1)),disabled:r.value.current_page>=r.value.last_page,class:"px-3 py-1 border rounded text-gray-700 hover:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"}," Suivant ",8,Iw)])])])):R("",!0)]),A.value?(t(),s("div",Lw,[e("div",Vw,[e("div",Fw,[e("div",{class:"flex justify-between items-center mb-4"},[a[25]||(a[25]=e("h3",{class:"text-lg font-medium text-gray-900"},"Détails de la commande",-1)),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600"},a[24]||(a[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),n.value?(t(),s("div",Rw,[e("div",qw,[e("div",null,[a[33]||(a[33]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Informations de la commande",-1)),e("dl",zw,[e("div",Nw,[a[26]||(a[26]=e("dt",{class:"text-sm text-gray-600"},"Référence:",-1)),e("dd",Uw,o(n.value.transaction_id),1)]),e("div",Bw,[a[27]||(a[27]=e("dt",{class:"text-sm text-gray-600"},"Statut:",-1)),e("dd",null,[e("span",{class:Q(F(n.value.status))},o(_(n.value.status)),3)])]),e("div",Ow,[a[28]||(a[28]=e("dt",{class:"text-sm text-gray-600"},"Type:",-1)),e("dd",Hw,o(I(n.value.type)),1)]),e("div",Gw,[a[29]||(a[29]=e("dt",{class:"text-sm text-gray-600"},"Montant:",-1)),e("dd",Kw,o(n.value.amount)+" "+o(n.value.currency),1)]),e("div",Ww,[a[30]||(a[30]=e("dt",{class:"text-sm text-gray-600"},"Méthode de paiement:",-1)),e("dd",Zw,o(n.value.payment_method||"Non spécifié"),1)]),e("div",Xw,[a[31]||(a[31]=e("dt",{class:"text-sm text-gray-600"},"Date de création:",-1)),e("dd",Jw,o(C(n.value.created_at)),1)]),n.value.completed_at?(t(),s("div",Yw,[a[32]||(a[32]=e("dt",{class:"text-sm text-gray-600"},"Date de completion:",-1)),e("dd",Qw,o(C(n.value.completed_at)),1)])):R("",!0)])]),e("div",null,[n.value.product?(t(),s("div",e5,[a[34]||(a[34]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Produit",-1)),e("div",t5,[e("h5",s5,o(n.value.product.name),1),e("p",o5,o(n.value.product.description||""),1)])])):R("",!0),n.value.lottery?(t(),s("div",r5,[a[35]||(a[35]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Loterie",-1)),e("div",a5,[e("h5",n5,o(n.value.lottery.title),1),e("div",i5,[e("p",null,"Numéro: "+o(n.value.lottery.lottery_number),1),e("p",null,"Prix du billet: "+o(n.value.lottery.ticket_price)+" "+o(n.value.currency),1),e("p",null,"Billets vendus: "+o(n.value.lottery.sold_tickets)+"/"+o(n.value.lottery.max_tickets),1),n.value.lottery.draw_date?(t(),s("p",l5,"Date du tirage: "+o(C(n.value.lottery.draw_date)),1)):R("",!0)])])])):R("",!0)])]),n.value.tickets&&n.value.tickets.length>0?(t(),s("div",d5,[a[36]||(a[36]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Billets de loterie",-1)),e("div",u5,[(t(!0),s(te,null,se(n.value.tickets,i=>(t(),s("div",{key:i.id,class:Q(["border rounded-lg p-4",i.is_winner?"bg-green-50 border-green-200":"bg-gray-50"])},[e("div",c5,[e("div",null,[e("p",m5,o(i.ticket_number),1),e("p",p5,o(i.price_paid)+" "+o(n.value.currency),1)]),e("div",g5,[e("span",{class:Q(F(i.status))},o(_(i.status)),3),i.is_winner?(t(),s("p",v5,"🎉 Gagnant!")):R("",!0)])])],2))),128))])])):R("",!0)])):R("",!0)])])])):R("",!0)])}}},x5=$e(f5,[["__scopeId","data-v-448be14d"]]),b5={class:"payments-page"},h5={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},y5={class:"bg-white rounded-lg shadow p-6"},_5={class:"flex items-center"},w5={class:"ml-4"},$5={class:"text-2xl font-semibold text-gray-900"},k5={class:"bg-white rounded-lg shadow p-6"},C5={class:"flex items-center"},j5={class:"ml-4"},A5={class:"text-2xl font-semibold text-gray-900"},P5={class:"bg-white rounded-lg shadow p-6"},M5={class:"flex items-center"},E5={class:"ml-4"},S5={class:"text-2xl font-semibold text-gray-900"},D5={class:"bg-white rounded-lg shadow p-6"},T5={class:"flex items-center"},I5={class:"ml-4"},L5={class:"text-2xl font-semibold text-gray-900"},V5={class:"bg-white rounded-lg shadow p-6 mb-8"},F5={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},R5={class:"flex items-end"},q5={class:"bg-white rounded-lg shadow overflow-hidden"},z5={key:0,class:"p-8 text-center"},N5={key:1,class:"p-8 text-center"},U5={key:2},B5={class:"px-6 py-4"},O5={class:"flex justify-between items-start"},H5={class:"flex-1"},G5={class:"flex items-center space-x-3 mb-2"},K5={class:"text-lg font-medium text-gray-900"},W5={class:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full"},Z5={class:"text-sm text-gray-600 mb-2"},X5={key:0},J5={key:1},Y5={key:2},Q5={class:"flex items-center space-x-4 text-sm text-gray-500"},e4={key:0},t4={key:0,class:"mt-2 text-xs text-orange-600"},s4={class:"flex space-x-2"},o4=["onClick"],r4={key:3,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},a4={class:"flex justify-between items-center"},n4={class:"text-sm text-gray-600"},i4={class:"flex space-x-1"},l4=["disabled"],d4=["onClick"],u4=["disabled"],c4={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},m4={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white"},p4={class:"mt-3"},g4={key:0},v4={class:"grid grid-cols-1 gap-6"},f4={class:"space-y-2"},x4={class:"flex justify-between"},b4={class:"text-sm font-medium"},h4={class:"flex justify-between"},y4={class:"flex justify-between"},_4={class:"text-sm font-medium"},w4={class:"flex justify-between"},$4={class:"text-sm"},k4={key:0,class:"flex justify-between"},C4={class:"text-sm"},j4={class:"flex justify-between"},A4={class:"text-sm"},P4={key:1,class:"flex justify-between"},M4={class:"text-sm"},E4={key:2,class:"flex justify-between"},S4={class:"text-sm"},D4={key:0},T4={class:"border rounded-lg p-4 bg-gray-50"},I4={class:"font-medium"},L4={class:"text-sm text-gray-600 mt-1"},V4={class:"mt-2 text-xs text-gray-500"},F4={__name:"Payments",setup(d){const m=be(),{apiRequest:T}=le(),{showError:M}=Pt(),u=V([]),r=V({successful_payments:0,pending_payments:0,failed_payments:0,total_amount:0}),h=V(null),A=V(!1),n=V(!1),y=V(null),j=me({search:"",status:"",method:""}),E=async()=>{try{const $=await T("/api/payments/stats","GET");$.success&&(r.value=$.data)}catch($){console.error("Erreur lors du chargement des statistiques:",$);try{const L=await T("/api/orders/stats","GET");L.success&&(r.value={successful_payments:L.data.completed_orders,pending_payments:L.data.pending_orders,failed_payments:L.data.failed_orders,total_amount:L.data.total_amount_spent||0})}catch(L){console.error("Erreur lors du chargement des statistiques de fallback:",L)}}},f=async($=1)=>{A.value=!0;try{const L=new URLSearchParams({page:$,per_page:10});j.search&&L.append("search",j.search),j.status&&L.append("status",j.status),j.method&&L.append("method",j.method);try{const Y=await T(`/api/payments?${L.toString()}`,"GET");Y.success&&(u.value=Y.data,h.value=Y.pagination)}catch(Y){console.log("API paiements non disponible, utilisation de l'API commandes:",Y);const J=await T(`/api/orders?${L.toString()}`,"GET");J.success&&(u.value=J.data.map(z=>({id:z.id,billing_id:z.external_transaction_id,amount:z.amount,status:z.status==="completed"?"paid":z.status,payment_method:z.payment_method||"airtel_money",phone_number:z.phone_number,transaction_id:z.transaction_id,transaction:z,created_at:z.created_at,updated_at:z.updated_at,timeout_at:z.status==="pending"?z.expires_at:null})),h.value=J.pagination)}}catch(L){M("Erreur lors du chargement des paiements"),console.error("Erreur:",L)}finally{A.value=!1}},_=$=>{m.push({name:"payment.phone",query:{transaction_id:$,retry:"true"}})},I=()=>{n.value=!1,y.value=null},F=$=>({paid:"Payé",pending:"En attente",payment_initiated:"Paiement initié",failed:"Échoué",expired:"Expiré",completed:"Payé"})[$]||$,C=$=>({airtel_money:"Airtel Money",moov_money:"Moov Money"})[$]||$||"Non spécifié",x=$=>({ticket_purchase:"Achat de billet",direct_purchase:"Achat direct"})[$]||$,c=$=>`px-2 py-1 text-xs rounded-full font-medium ${{paid:"bg-green-100 text-green-800",completed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",payment_initiated:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"}[$]||"bg-gray-100 text-gray-800"}`,a=$=>new Date($).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=$=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format($||0).replace("XAF","FCFA"),i=()=>{if(!h.value)return[];const $=h.value.current_page,L=h.value.last_page,Y=[];for(let J=Math.max(1,$-2);J<=Math.min(L,$+2);J++)Y.push(J);return Y};return Ae(()=>[j.status,j.method],()=>{f(1)},{deep:!0}),ue(()=>{E(),f()}),($,L)=>{const Y=fe("router-link");return t(),s("div",b5,[L[36]||(L[36]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Mes Paiements"),e("p",{class:"text-gray-600"},"Consultez l'historique de vos paiements et transactions")],-1)),e("div",h5,[e("div",y5,[e("div",_5,[L[8]||(L[8]=e("div",{class:"p-3 rounded-full bg-green-100"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",w5,[L[7]||(L[7]=e("p",{class:"text-sm font-medium text-gray-600"},"Paiements Réussis",-1)),e("p",$5,o(r.value.successful_payments),1)])])]),e("div",k5,[e("div",C5,[L[10]||(L[10]=e("div",{class:"p-3 rounded-full bg-yellow-100"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",j5,[L[9]||(L[9]=e("p",{class:"text-sm font-medium text-gray-600"},"En Attente",-1)),e("p",A5,o(r.value.pending_payments),1)])])]),e("div",P5,[e("div",M5,[L[12]||(L[12]=e("div",{class:"p-3 rounded-full bg-red-100"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("div",E5,[L[11]||(L[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Échoués",-1)),e("p",S5,o(r.value.failed_payments),1)])])]),e("div",D5,[e("div",T5,[L[14]||(L[14]=e("div",{class:"p-3 rounded-full bg-blue-100"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",I5,[L[13]||(L[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Payé",-1)),e("p",L5,o(v(r.value.total_amount)),1)])])])]),e("div",V5,[e("div",F5,[e("div",null,[L[15]||(L[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),G(e("input",{type:"text","onUpdate:modelValue":L[0]||(L[0]=J=>j.search=J),placeholder:"Référence ou ID de paiement...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:L[1]||(L[1]=$t(J=>f(1),["enter"]))},null,544),[[ee,j.search]])]),e("div",null,[L[17]||(L[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":L[2]||(L[2]=J=>j.status=J),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},L[16]||(L[16]=[ie('<option value="" data-v-55c0b806>Tous les statuts</option><option value="paid" data-v-55c0b806>Payé</option><option value="pending" data-v-55c0b806>En attente</option><option value="failed" data-v-55c0b806>Échoué</option><option value="expired" data-v-55c0b806>Expiré</option>',5)]),512),[[ne,j.status]])]),e("div",null,[L[19]||(L[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Méthode",-1)),G(e("select",{"onUpdate:modelValue":L[3]||(L[3]=J=>j.method=J),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},L[18]||(L[18]=[e("option",{value:""},"Toutes les méthodes",-1),e("option",{value:"airtel_money"},"Airtel Money",-1),e("option",{value:"moov_money"},"Moov Money",-1)]),512),[[ne,j.method]])]),e("div",R5,[e("button",{onClick:L[4]||(L[4]=J=>f(1)),class:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-200"}," Rechercher ")])])]),e("div",q5,[L[23]||(L[23]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Historique des paiements")],-1)),A.value?(t(),s("div",z5,L[20]||(L[20]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"text-gray-500 mt-4"},"Chargement des paiements...",-1)]))):u.value.length===0?(t(),s("div",N5,L[21]||(L[21]=[e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"text-gray-500"},"Aucun paiement trouvé",-1)]))):(t(),s("div",U5,[(t(!0),s(te,null,se(u.value,J=>(t(),s("div",{key:J.id,class:"border-b border-gray-200 hover:bg-gray-50 transition duration-200"},[e("div",B5,[e("div",O5,[e("div",H5,[e("div",G5,[e("h3",K5,"#"+o(J.billing_id||J.id),1),e("span",{class:Q(c(J.status))},o(F(J.status)),3),e("span",W5,o(C(J.payment_method)),1)]),e("div",Z5,[J.transaction&&J.transaction.product?(t(),s("span",X5,o(J.transaction.product.name),1)):J.transaction&&J.transaction.lottery?(t(),s("span",J5," Loterie #"+o(J.transaction.lottery.lottery_number),1)):(t(),s("span",Y5," Paiement "))]),e("div",Q5,[e("span",null,o(a(J.created_at)),1),e("span",null,o(v(J.amount)),1),J.phone_number?(t(),s("span",e4,o(J.phone_number),1)):R("",!0)]),J.status==="pending"&&J.timeout_at?(t(),s("div",t4," Expire le "+o(a(J.timeout_at)),1)):R("",!0)]),e("div",s4,[p(Y,{to:{name:"customer.payment.detail",params:{id:J.id}},class:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700"},{default:oe(()=>L[22]||(L[22]=[U(" Détails ",-1)])),_:2,__:[22]},1032,["to"]),J.status==="expired"&&J.transaction_id?(t(),s("button",{key:0,onClick:z=>_(J.transaction_id),class:"bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700"}," Relancer ",8,o4)):R("",!0)])])])]))),128))])),h.value&&h.value.last_page>1?(t(),s("div",r4,[e("div",a4,[e("div",n4," Affichage de "+o((h.value.current_page-1)*h.value.per_page+1)+" à "+o(Math.min(h.value.current_page*h.value.per_page,h.value.total))+" sur "+o(h.value.total)+" résultats ",1),e("div",i4,[e("button",{onClick:L[5]||(L[5]=J=>f(h.value.current_page-1)),disabled:h.value.current_page<=1,class:"px-3 py-1 border rounded text-gray-700 hover:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"}," Précédent ",8,l4),(t(!0),s(te,null,se(i(),J=>(t(),s("button",{key:J,onClick:z=>f(J),class:Q(["px-3 py-1 border rounded",J===h.value.current_page?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"])},o(J),11,d4))),128)),e("button",{onClick:L[6]||(L[6]=J=>f(h.value.current_page+1)),disabled:h.value.current_page>=h.value.last_page,class:"px-3 py-1 border rounded text-gray-700 hover:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed"}," Suivant ",8,u4)])])])):R("",!0)]),n.value?(t(),s("div",c4,[e("div",m4,[e("div",p4,[e("div",{class:"flex justify-between items-center mb-4"},[L[25]||(L[25]=e("h3",{class:"text-lg font-medium text-gray-900"},"Détails du paiement",-1)),e("button",{onClick:I,class:"text-gray-400 hover:text-gray-600"},L[24]||(L[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),y.value?(t(),s("div",g4,[e("div",v4,[e("div",null,[L[34]||(L[34]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Informations du paiement",-1)),e("dl",f4,[e("div",x4,[L[26]||(L[26]=e("dt",{class:"text-sm text-gray-600"},"ID de paiement:",-1)),e("dd",b4,o(y.value.billing_id||y.value.id),1)]),e("div",h4,[L[27]||(L[27]=e("dt",{class:"text-sm text-gray-600"},"Statut:",-1)),e("dd",null,[e("span",{class:Q(c(y.value.status))},o(F(y.value.status)),3)])]),e("div",y4,[L[28]||(L[28]=e("dt",{class:"text-sm text-gray-600"},"Montant:",-1)),e("dd",_4,o(v(y.value.amount)),1)]),e("div",w4,[L[29]||(L[29]=e("dt",{class:"text-sm text-gray-600"},"Méthode:",-1)),e("dd",$4,o(C(y.value.payment_method)),1)]),y.value.phone_number?(t(),s("div",k4,[L[30]||(L[30]=e("dt",{class:"text-sm text-gray-600"},"Téléphone:",-1)),e("dd",C4,"+241 "+o(y.value.phone_number),1)])):R("",!0),e("div",j4,[L[31]||(L[31]=e("dt",{class:"text-sm text-gray-600"},"Date de création:",-1)),e("dd",A4,o(a(y.value.created_at)),1)]),y.value.updated_at?(t(),s("div",P4,[L[32]||(L[32]=e("dt",{class:"text-sm text-gray-600"},"Dernière mise à jour:",-1)),e("dd",M4,o(a(y.value.updated_at)),1)])):R("",!0),y.value.timeout_at?(t(),s("div",E4,[L[33]||(L[33]=e("dt",{class:"text-sm text-gray-600"},"Expiration:",-1)),e("dd",S4,o(a(y.value.timeout_at)),1)])):R("",!0)])]),y.value.transaction?(t(),s("div",D4,[L[35]||(L[35]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Transaction associée",-1)),e("div",T4,[e("p",I4,o(y.value.transaction.reference),1),e("p",L4,o(y.value.transaction.description||"Aucune description"),1),e("div",V4," Type: "+o(x(y.value.transaction.type)),1)])])):R("",!0)])])):R("",!0)])])])):R("",!0)])}}},R4=$e(F4,[["__scopeId","data-v-55c0b806"]]),q4={class:"order-detail"},z4={key:0,class:"flex justify-center items-center min-h-64"},N4={key:1,class:"text-center py-12"},U4={class:"text-gray-600 mb-4"},B4={key:2},O4={class:"mb-8"},H4={class:"flex items-center justify-between"},G4={class:"text-3xl font-bold text-gray-900"},K4={class:"text-gray-600 mt-2"},W4={class:"flex items-center space-x-3"},Z4={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},X4={class:"lg:col-span-2 space-y-6"},J4={class:"bg-white rounded-lg shadow p-6"},Y4={class:"space-y-4"},Q4={class:"flex items-center"},e3={class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},t3={class:"ml-4"},s3={class:"text-sm text-gray-500"},o3={key:0,class:"flex items-center"},r3={class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},a3={class:"ml-4"},n3={class:"text-sm text-gray-500"},i3={key:1,class:"flex items-center"},l3={class:"flex-shrink-0 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},d3={class:"ml-4"},u3={class:"text-sm text-gray-500"},c3={key:2,class:"flex items-center"},m3={class:"flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},p3={class:"ml-4"},g3={class:"text-sm text-gray-500"},v3={key:0,class:"text-sm text-gray-500"},f3={class:"bg-white rounded-lg shadow p-6"},x3={key:0,class:"flex items-start space-x-4 mb-6"},b3={class:"flex-shrink-0 w-16 h-16 bg-gray-200 rounded-lg overflow-hidden"},h3=["src","alt"],y3={key:1,class:"w-full h-full flex items-center justify-center"},_3={class:"flex-1"},w3={class:"text-lg font-medium text-gray-900"},$3={class:"text-sm text-gray-600 mt-1"},k3={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},C3={key:0},j3={key:1,class:"border rounded-lg p-4 bg-blue-50"},A3={class:"flex items-center mb-3"},P3={class:"text-lg font-medium text-gray-900"},M3={class:"grid grid-cols-2 gap-4 text-sm"},E3={class:"font-medium ml-2"},S3={class:"font-medium ml-2"},D3={class:"font-medium ml-2"},T3={key:0},I3={class:"font-medium ml-2"},L3={key:0,class:"mt-3 p-3 bg-green-100 rounded-lg"},V3={class:"flex items-center"},F3={class:"text-sm font-medium text-green-800"},R3={key:0,class:"bg-white rounded-lg shadow p-6"},q3={class:"text-lg font-semibold text-gray-900 mb-4"},z3={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},N3={class:"flex justify-between items-start"},U3={class:"font-medium text-gray-900"},B3={class:"text-sm text-gray-600"},O3={class:"text-right"},H3={key:0,class:"mt-1"},G3={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},K3={key:0,class:"mt-2 text-xs text-gray-500"},W3={class:"space-y-6"},Z3={class:"bg-white rounded-lg shadow p-6"},X3={class:"space-y-3"},J3={class:"flex justify-between text-sm"},Y3={class:"font-medium"},Q3={class:"border-t pt-3"},e6={class:"flex justify-between"},t6={class:"text-base font-medium text-gray-900"},s6={class:"bg-white rounded-lg shadow p-6"},o6={class:"space-y-3 text-sm"},r6={class:"font-medium font-mono"},a6={key:0},n6={class:"font-medium"},i6={key:1},l6={class:"font-medium"},d6={class:"bg-white rounded-lg shadow p-6"},u6={class:"space-y-3"},c6={__name:"OrderDetail",setup(d){const m=qe(),T=be(),{apiRequest:M}=le(),{showSuccess:u}=Pt(),r=V(null),h=V(!0),A=V(null),n=async()=>{try{h.value=!0;const x=m.params.id,c=await M(`/api/orders/${x}`,"GET");c.success?r.value=c.data:A.value=c.message||"Commande non trouvée"}catch(x){console.error("Erreur lors du chargement de la commande:",x),A.value="Erreur lors du chargement de la commande"}finally{h.value=!1}},y=()=>{T.push({name:"payment.phone",query:{transaction_id:r.value.transaction_id,retry:"true"}})},j=()=>{u("Fonctionnalité de téléchargement en cours de développement")},E=x=>({completed:"Complété",pending:"En attente",payment_initiated:"Paiement initié",failed:"Échoué",paid:"Payé",refunded:"Remboursé"})[x]||x,f=x=>({lottery:"Loterie",direct:"Achat direct"})[x]||x,_=x=>({airtel_money:"Airtel Money",moov_money:"Moov Money"})[x]||x||"Non spécifié",I=x=>`px-2 py-1 text-xs rounded-full font-medium ${{completed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",payment_initiated:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",paid:"bg-green-100 text-green-800",refunded:"bg-gray-100 text-gray-800"}[x]||"bg-gray-100 text-gray-800"}`,F=x=>x?new Date(x).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Non défini",C=x=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(x||0).replace("XAF","FCFA");return ue(()=>{n()}),(x,c)=>{const a=fe("router-link");return t(),s("div",q4,[h.value?(t(),s("div",z4,c[1]||(c[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):A.value?(t(),s("div",N4,[c[3]||(c[3]=e("svg",{class:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),c[4]||(c[4]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Commande introuvable",-1)),e("p",U4,o(A.value),1),p(a,{to:"/customer/orders",class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:oe(()=>c[2]||(c[2]=[U(" Retour aux commandes ",-1)])),_:1,__:[2]})])):r.value?(t(),s("div",B4,[e("div",O4,[e("div",H4,[e("div",null,[e("h1",G4,"Commande #"+o(r.value.transaction_id),1),e("p",K4,o(F(r.value.created_at)),1)]),e("div",W4,[e("span",{class:Q(I(r.value.status))},o(E(r.value.status)),3),e("button",{onClick:c[0]||(c[0]=v=>x.$router.go(-1)),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors"},[p(l(kt),{class:"w-4 h-4 inline mr-2"}),c[5]||(c[5]=U(" Retour ",-1))])])])]),e("div",Z4,[e("div",X4,[e("div",J4,[c[10]||(c[10]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Statut de la commande",-1)),e("div",Y4,[e("div",Q4,[e("div",e3,[p(l(pe),{class:"w-5 h-5 text-green-600"})]),e("div",t3,[c[6]||(c[6]=e("p",{class:"text-sm font-medium text-gray-900"},"Commande créée",-1)),e("p",s3,o(F(r.value.created_at)),1)])]),r.value.paid_at||r.value.completed_at?(t(),s("div",o3,[e("div",r3,[p(l(pe),{class:"w-5 h-5 text-green-600"})]),e("div",a3,[c[7]||(c[7]=e("p",{class:"text-sm font-medium text-gray-900"},"Paiement confirmé",-1)),e("p",n3,o(F(r.value.completed_at||r.value.paid_at)),1)])])):R("",!0),r.value.status==="pending"?(t(),s("div",i3,[e("div",l3,[p(l(Pe),{class:"w-5 h-5 text-yellow-600"})]),e("div",d3,[c[8]||(c[8]=e("p",{class:"text-sm font-medium text-gray-900"},"En attente de paiement",-1)),e("p",u3,"Expire le "+o(F(r.value.expires_at)),1)])])):R("",!0),r.value.status==="failed"?(t(),s("div",c3,[e("div",m3,[p(l(Re),{class:"w-5 h-5 text-red-600"})]),e("div",p3,[c[9]||(c[9]=e("p",{class:"text-sm font-medium text-gray-900"},"Paiement échoué",-1)),e("p",g3,o(r.value.failure_reason||"Raison non spécifiée"),1),r.value.failed_at?(t(),s("p",v3,o(F(r.value.failed_at)),1)):R("",!0)])])):R("",!0)])]),e("div",f3,[c[15]||(c[15]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Détails de l'achat",-1)),r.value.product?(t(),s("div",x3,[e("div",b3,[r.value.product.image?(t(),s("img",{key:0,src:r.value.product.image,alt:r.value.product.name,class:"w-full h-full object-cover"},null,8,h3)):(t(),s("div",y3,[p(l(Be),{class:"w-8 h-8 text-gray-400"})]))]),e("div",_3,[e("h3",w3,o(r.value.product.name),1),e("p",$3,o(r.value.product.description),1),e("div",k3,[e("span",null,"Mode: "+o(f(r.value.product.sale_mode)),1),r.value.quantity?(t(),s("span",C3,"Quantité: "+o(r.value.quantity),1)):R("",!0)])])])):R("",!0),r.value.lottery?(t(),s("div",j3,[e("div",A3,[p(l(De),{class:"w-5 h-5 text-blue-600 mr-2"}),e("h3",P3,o(r.value.lottery.title),1)]),e("div",M3,[e("div",null,[c[11]||(c[11]=e("span",{class:"text-gray-600"},"Numéro de loterie:",-1)),e("span",E3,o(r.value.lottery.lottery_number),1)]),e("div",null,[c[12]||(c[12]=e("span",{class:"text-gray-600"},"Prix du billet:",-1)),e("span",S3,o(C(r.value.lottery.ticket_price)),1)]),e("div",null,[c[13]||(c[13]=e("span",{class:"text-gray-600"},"Billets vendus:",-1)),e("span",D3,o(r.value.lottery.sold_tickets)+"/"+o(r.value.lottery.max_tickets),1)]),r.value.lottery.draw_date?(t(),s("div",T3,[c[14]||(c[14]=e("span",{class:"text-gray-600"},"Date du tirage:",-1)),e("span",I3,o(F(r.value.lottery.draw_date)),1)])):R("",!0)]),r.value.lottery.winner_ticket_number?(t(),s("div",L3,[e("div",V3,[p(l(Ge),{class:"w-5 h-5 text-green-600 mr-2"}),e("span",F3," Billet gagnant: "+o(r.value.lottery.winner_ticket_number),1)])])):R("",!0)])):R("",!0)]),r.value.tickets&&r.value.tickets.length>0?(t(),s("div",R3,[e("h2",q3," Billets de loterie ("+o(r.value.tickets.length)+") ",1),e("div",z3,[(t(!0),s(te,null,se(r.value.tickets,v=>(t(),s("div",{key:v.id,class:Q(["border rounded-lg p-4 transition-colors",v.is_winner?"bg-green-50 border-green-200 ring-2 ring-green-500":"bg-gray-50 border-gray-200"])},[e("div",N3,[e("div",null,[e("p",U3,o(v.ticket_number),1),e("p",B3,o(C(v.price_paid)),1)]),e("div",O3,[e("span",{class:Q(I(v.status))},o(E(v.status)),3),v.is_winner?(t(),s("div",H3,[e("span",G3,[p(l(Ge),{class:"w-3 h-3 mr-1"}),c[16]||(c[16]=U(" Gagnant ",-1))])])):R("",!0)])]),v.purchased_at?(t(),s("div",K3," Acheté le "+o(F(v.purchased_at)),1)):R("",!0)],2))),128))])])):R("",!0)]),e("div",W3,[e("div",Z3,[c[19]||(c[19]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Résumé financier",-1)),e("dl",X3,[e("div",J3,[c[17]||(c[17]=e("dt",{class:"text-gray-600"},"Sous-total:",-1)),e("dd",Y3,o(C(r.value.amount)),1)]),e("div",Q3,[e("div",e6,[c[18]||(c[18]=e("dt",{class:"text-base font-medium text-gray-900"},"Total:",-1)),e("dd",t6,o(C(r.value.amount)),1)])])])]),e("div",s6,[c[23]||(c[23]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informations de paiement",-1)),e("dl",o6,[e("div",null,[c[20]||(c[20]=e("dt",{class:"text-gray-600"},"Référence:",-1)),e("dd",r6,o(r.value.reference),1)]),r.value.payment_method?(t(),s("div",a6,[c[21]||(c[21]=e("dt",{class:"text-gray-600"},"Méthode:",-1)),e("dd",n6,o(_(r.value.payment_method)),1)])):R("",!0),r.value.phone_number?(t(),s("div",i6,[c[22]||(c[22]=e("dt",{class:"text-gray-600"},"Téléphone:",-1)),e("dd",l6,"+241 "+o(r.value.phone_number),1)])):R("",!0)])]),e("div",d6,[c[27]||(c[27]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions",-1)),e("div",u6,[r.value.status==="failed"?(t(),s("button",{key:0,onClick:y,class:"w-full bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors"},[p(l(Ne),{class:"w-4 h-4 inline mr-2"}),c[24]||(c[24]=U(" Réessayer le paiement ",-1))])):R("",!0),e("button",{onClick:j,class:"w-full bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors"},[p(l(mt),{class:"w-4 h-4 inline mr-2"}),c[25]||(c[25]=U(" Télécharger le reçu ",-1))]),p(a,{to:"/customer/orders",class:"w-full block text-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},{default:oe(()=>c[26]||(c[26]=[U(" Voir toutes les commandes ",-1)])),_:1,__:[26]})])])])])])):R("",!0)])}}},m6=$e(c6,[["__scopeId","data-v-c1888059"]]),Ht="/build/assets/am-CfOZUG_l.png",Gt="/build/assets/mm-BaxcDjGZ.png",p6={class:"payment-detail"},g6={key:0,class:"flex justify-center items-center min-h-64"},v6={key:1,class:"text-center py-12"},f6={class:"text-gray-600 mb-4"},x6={key:2},b6={class:"mb-8"},h6={class:"flex items-center justify-between"},y6={class:"text-3xl font-bold text-gray-900"},_6={class:"text-gray-600 mt-2"},w6={class:"flex items-center space-x-3"},$6={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},k6={class:"lg:col-span-2 space-y-6"},C6={class:"bg-white rounded-lg shadow p-6"},j6={class:"space-y-4"},A6={class:"flex items-center"},P6={class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},M6={class:"ml-4"},E6={class:"text-sm text-gray-500"},S6={key:0,class:"flex items-center"},D6={class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},T6={class:"ml-4"},I6={class:"text-sm text-gray-500"},L6={key:1,class:"flex items-center"},V6={class:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},F6={class:"ml-4"},R6={class:"text-sm text-gray-500"},q6={key:2,class:"flex items-center"},z6={class:"flex-shrink-0 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},N6={key:3,class:"flex items-center"},U6={class:"flex-shrink-0 w-8 h-8 bg-red-100 rounded-full flex items-center justify-center"},B6={class:"ml-4"},O6={class:"text-sm font-medium text-gray-900"},H6={key:0,class:"text-sm text-gray-500"},G6={class:"bg-white rounded-lg shadow p-6"},K6={class:"flex items-center space-x-4"},W6={class:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center"},Z6=["src","alt"],X6={class:"text-lg font-medium text-gray-900"},J6={key:0,class:"text-sm text-gray-600"},Y6={key:1,class:"text-sm text-gray-500"},Q6={key:0,class:"bg-white rounded-lg shadow p-6"},e$={key:0,class:"flex items-start space-x-4 mb-4"},t$={class:"flex-shrink-0 w-16 h-16 bg-gray-200 rounded-lg overflow-hidden"},s$=["src","alt"],o$={key:1,class:"w-full h-full flex items-center justify-center"},r$={class:"flex-1"},a$={class:"text-lg font-medium text-gray-900"},n$={class:"text-sm text-gray-600 mt-1"},i$={class:"mt-2 flex items-center space-x-4 text-sm text-gray-500"},l$={key:0},d$={key:1,class:"border rounded-lg p-4 bg-blue-50"},u$={class:"flex items-center mb-3"},c$={class:"text-lg font-medium text-gray-900"},m$={class:"grid grid-cols-2 gap-4 text-sm"},p$={class:"font-medium ml-2"},g$={class:"font-medium ml-2"},v$={key:2,class:"mt-4"},f$={class:"text-md font-medium text-gray-900 mb-3"},x$={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},b$={class:"flex justify-between items-center"},h$={class:"font-medium"},y$={class:"flex items-center space-x-2"},_$={key:1,class:"bg-white rounded-lg shadow p-6"},w$={class:"bg-gray-50 rounded-lg p-4"},$$={class:"text-sm text-gray-700 whitespace-pre-wrap"},k$={class:"space-y-6"},C$={class:"bg-white rounded-lg shadow p-6"},j$={class:"space-y-3"},A$={class:"flex justify-between text-sm"},P$={class:"font-medium"},M$={class:"flex justify-between text-sm"},E$={class:"font-medium"},S$={class:"border-t pt-3"},D$={class:"flex justify-between"},T$={class:"text-base font-medium text-gray-900"},I$={class:"bg-white rounded-lg shadow p-6"},L$={class:"space-y-3 text-sm"},V$={key:0},F$={class:"font-medium font-mono break-all"},R$={key:1},q$={class:"font-medium font-mono"},z$={key:2},N$={class:"font-medium font-mono break-all"},U$={key:3},B$={class:"font-medium"},O$={key:4},H$={class:"font-medium"},G$={class:"bg-white rounded-lg shadow p-6"},K$={class:"space-y-3"},W$={__name:"PaymentDetail",setup(d){const m=qe(),T=be(),{apiRequest:M}=le(),{showSuccess:u}=Pt(),r=V(null),h=V(!0),A=V(null),n=async()=>{try{h.value=!0;const c=m.params.id,a=await M(`/api/payments/${c}`,"GET");a.success?r.value=a.data:A.value=a.message||"Paiement non trouvé"}catch(c){console.error("Erreur lors du chargement du paiement:",c),A.value="Erreur lors du chargement du paiement"}finally{h.value=!1}},y=()=>{r.value.transaction&&T.push({name:"payment.phone",query:{transaction_id:r.value.transaction.transaction_id,retry:"true"}})},j=()=>{r.value.transaction&&T.push({name:"customer.order.detail",params:{id:r.value.transaction.transaction_id}})},E=()=>{u("Fonctionnalité de téléchargement en cours de développement")},f=c=>({paid:"Payé",pending:"En attente",failed:"Échoué",expired:"Expiré",processed:"Traité"})[c]||c,_=c=>({airtel_money:"Airtel Money",moov_money:"Moov Money"})[c]||c||"Non spécifié",I=c=>({airtel_money:Ht,moov_money:Gt})[c],F=(c,a=!1)=>`${a?"px-1 py-0.5 text-xs":"px-2 py-1 text-xs"} rounded-full font-medium ${{paid:"bg-green-100 text-green-800",processed:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"}[c]||"bg-gray-100 text-gray-800"}`,C=c=>c?new Date(c).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Non défini",x=c=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(c||0).replace("XAF","FCFA");return ue(()=>{n()}),(c,a)=>{const v=fe("router-link");return t(),s("div",p6,[h.value?(t(),s("div",g6,a[1]||(a[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):A.value?(t(),s("div",v6,[a[3]||(a[3]=e("svg",{class:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),a[4]||(a[4]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Paiement introuvable",-1)),e("p",f6,o(A.value),1),p(v,{to:"/customer/payments",class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:oe(()=>a[2]||(a[2]=[U(" Retour aux paiements ",-1)])),_:1,__:[2]})])):r.value?(t(),s("div",x6,[e("div",b6,[e("div",h6,[e("div",null,[e("h1",y6," Paiement #"+o(r.value.ebilling_id||r.value.id),1),e("p",_6,o(C(r.value.created_at)),1)]),e("div",w6,[e("span",{class:Q(F(r.value.status))},o(f(r.value.status)),3),e("button",{onClick:a[0]||(a[0]=i=>c.$router.go(-1)),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors"},[p(l(kt),{class:"w-4 h-4 inline mr-2"}),a[5]||(a[5]=U(" Retour ",-1))])])])]),e("div",$6,[e("div",k6,[e("div",C6,[a[10]||(a[10]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Statut du paiement",-1)),e("div",j6,[e("div",A6,[e("div",P6,[p(l(pe),{class:"w-5 h-5 text-green-600"})]),e("div",M6,[a[6]||(a[6]=e("p",{class:"text-sm font-medium text-gray-900"},"Paiement initié",-1)),e("p",E6,o(C(r.value.created_at)),1)])]),r.value.paid_at?(t(),s("div",S6,[e("div",D6,[p(l(pe),{class:"w-5 h-5 text-green-600"})]),e("div",T6,[a[7]||(a[7]=e("p",{class:"text-sm font-medium text-gray-900"},"Paiement confirmé",-1)),e("p",I6,o(C(r.value.paid_at)),1)])])):R("",!0),r.value.processed_at?(t(),s("div",L6,[e("div",V6,[p(l(pe),{class:"w-5 h-5 text-green-600"})]),e("div",F6,[a[8]||(a[8]=e("p",{class:"text-sm font-medium text-gray-900"},"Paiement traité",-1)),e("p",R6,o(C(r.value.processed_at)),1)])])):R("",!0),r.value.status==="pending"?(t(),s("div",q6,[e("div",z6,[p(l(Pe),{class:"w-5 h-5 text-yellow-600"})]),a[9]||(a[9]=e("div",{class:"ml-4"},[e("p",{class:"text-sm font-medium text-gray-900"},"En attente de confirmation"),e("p",{class:"text-sm text-gray-500"},"Veuillez confirmer sur votre téléphone")],-1))])):R("",!0),r.value.status==="failed"||r.value.status==="expired"?(t(),s("div",N6,[e("div",U6,[p(l(Re),{class:"w-5 h-5 text-red-600"})]),e("div",B6,[e("p",O6,o(r.value.status==="expired"?"Paiement expiré":"Paiement échoué"),1),r.value.gateway_response&&r.value.gateway_response.failure_reason?(t(),s("p",H6,o(r.value.gateway_response.failure_reason),1)):R("",!0)])])):R("",!0)])]),e("div",G6,[a[11]||(a[11]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Méthode de paiement",-1)),e("div",K6,[e("div",W6,[I(r.value.payment_method)?(t(),s("img",{key:0,src:I(r.value.payment_method),alt:_(r.value.payment_method),class:"w-12 h-12 object-contain"},null,8,Z6)):(t(),de(l(Ke),{key:1,class:"w-8 h-8 text-gray-400"}))]),e("div",null,[e("h3",X6,o(_(r.value.payment_method)),1),r.value.customer_phone?(t(),s("p",J6," +241 "+o(r.value.customer_phone),1)):R("",!0),r.value.gateway?(t(),s("p",Y6," Via "+o(r.value.gateway.display_name),1)):R("",!0)])])]),r.value.transaction?(t(),s("div",Q6,[a[14]||(a[14]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Transaction associée",-1)),r.value.transaction.product?(t(),s("div",e$,[e("div",t$,[r.value.transaction.product.image?(t(),s("img",{key:0,src:r.value.transaction.product.image,alt:r.value.transaction.product.name,class:"w-full h-full object-cover"},null,8,s$)):(t(),s("div",o$,[p(l(Be),{class:"w-8 h-8 text-gray-400"})]))]),e("div",r$,[e("h3",a$,o(r.value.transaction.product.name),1),e("p",n$,o(r.value.transaction.product.description),1),e("div",i$,[e("span",null,"Référence: "+o(r.value.transaction.reference),1),r.value.transaction.quantity?(t(),s("span",l$,"Quantité: "+o(r.value.transaction.quantity),1)):R("",!0)])])])):R("",!0),r.value.transaction.lottery?(t(),s("div",d$,[e("div",u$,[p(l(De),{class:"w-5 h-5 text-blue-600 mr-2"}),e("h3",c$,o(r.value.transaction.lottery.title),1)]),e("div",m$,[e("div",null,[a[12]||(a[12]=e("span",{class:"text-gray-600"},"Numéro de loterie:",-1)),e("span",p$,o(r.value.transaction.lottery.lottery_number),1)]),e("div",null,[a[13]||(a[13]=e("span",{class:"text-gray-600"},"Prix du billet:",-1)),e("span",g$,o(x(r.value.transaction.lottery.ticket_price)),1)])])])):R("",!0),r.value.transaction.tickets&&r.value.transaction.tickets.length>0?(t(),s("div",v$,[e("h3",f$," Billets achetés ("+o(r.value.transaction.tickets.length)+") ",1),e("div",x$,[(t(!0),s(te,null,se(r.value.transaction.tickets,i=>(t(),s("div",{key:i.id,class:Q(["border rounded-lg p-3 text-sm",i.is_winner?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"])},[e("div",b$,[e("span",h$,o(i.ticket_number),1),e("div",y$,[e("span",{class:Q(F(i.status,!0))},o(f(i.status)),3),i.is_winner?(t(),de(l(Ge),{key:0,class:"w-4 h-4 text-green-600"})):R("",!0)])])],2))),128))])])):R("",!0)])):R("",!0),r.value.gateway_response?(t(),s("div",_$,[a[15]||(a[15]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Réponse de la passerelle",-1)),e("div",w$,[e("pre",$$,o(JSON.stringify(r.value.gateway_response,null,2)),1)])])):R("",!0)]),e("div",k$,[e("div",C$,[a[19]||(a[19]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Résumé du paiement",-1)),e("dl",j$,[e("div",A$,[a[16]||(a[16]=e("dt",{class:"text-gray-600"},"Montant:",-1)),e("dd",P$,o(x(r.value.amount)),1)]),e("div",M$,[a[17]||(a[17]=e("dt",{class:"text-gray-600"},"Devise:",-1)),e("dd",E$,o(r.value.currency||"XAF"),1)]),e("div",S$,[e("div",D$,[a[18]||(a[18]=e("dt",{class:"text-base font-medium text-gray-900"},"Total:",-1)),e("dd",T$,o(x(r.value.amount)),1)])])])]),e("div",I$,[a[25]||(a[25]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Détails techniques",-1)),e("dl",L$,[r.value.reference?(t(),s("div",V$,[a[20]||(a[20]=e("dt",{class:"text-gray-600"},"Référence:",-1)),e("dd",F$,o(r.value.reference),1)])):R("",!0),r.value.ebilling_id?(t(),s("div",R$,[a[21]||(a[21]=e("dt",{class:"text-gray-600"},"ID E-Billing:",-1)),e("dd",q$,o(r.value.ebilling_id),1)])):R("",!0),r.value.external_transaction_id?(t(),s("div",z$,[a[22]||(a[22]=e("dt",{class:"text-gray-600"},"ID Transaction externe:",-1)),e("dd",N$,o(r.value.external_transaction_id),1)])):R("",!0),r.value.customer_name?(t(),s("div",U$,[a[23]||(a[23]=e("dt",{class:"text-gray-600"},"Nom du client:",-1)),e("dd",B$,o(r.value.customer_name),1)])):R("",!0),r.value.customer_email?(t(),s("div",O$,[a[24]||(a[24]=e("dt",{class:"text-gray-600"},"Email:",-1)),e("dd",H$,o(r.value.customer_email),1)])):R("",!0)])]),e("div",G$,[a[30]||(a[30]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions",-1)),e("div",K$,[r.value.status==="failed"||r.value.status==="expired"?(t(),s("button",{key:0,onClick:y,class:"w-full bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors"},[p(l(Ne),{class:"w-4 h-4 inline mr-2"}),a[26]||(a[26]=U(" Réessayer le paiement ",-1))])):R("",!0),r.value.transaction?(t(),s("button",{key:1,onClick:j,class:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},[p(l(Fe),{class:"w-4 h-4 inline mr-2"}),a[27]||(a[27]=U(" Voir la commande ",-1))])):R("",!0),e("button",{onClick:E,class:"w-full bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors"},[p(l(mt),{class:"w-4 h-4 inline mr-2"}),a[28]||(a[28]=U(" Télécharger le reçu ",-1))]),p(v,{to:"/customer/payments",class:"w-full block text-center bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors"},{default:oe(()=>a[29]||(a[29]=[U(" Voir tous les paiements ",-1)])),_:1,__:[29]})])])])])])):R("",!0)])}}},Z$=$e(W$,[["__scopeId","data-v-bf89ffba"]]),X$={class:"min-h-screen bg-gray-50 py-8"},J$={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8"},Y$={class:"text-center mb-8"},Q$={class:"mb-6"},e9=["src"],t9={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},s9={class:"flex items-center space-x-4 mb-4"},o9=["src","alt"],r9={class:"flex-1"},a9={class:"font-medium text-gray-900"},n9={class:"text-sm text-gray-600"},i9={key:0},l9={key:1},d9={class:"text-right"},u9={class:"text-lg font-bold text-gray-900"},c9={key:0,class:"text-sm text-gray-500"},m9={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},p9={class:"space-y-4"},g9={class:"space-y-3"},v9={class:"text-sm font-medium text-gray-700 flex items-center"},f9={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},x9={class:"flex items-center space-x-3"},b9={class:"w-12 h-12 rounded-lg overflow-hidden flex items-center justify-center bg-white border border-gray-200"},h9=["src"],y9={class:"ml-auto"},_9={key:0,class:"w-full h-full rounded-full bg-white transform scale-50"},w9={class:"flex items-center space-x-3"},$9={class:"w-12 h-12 rounded-lg overflow-hidden flex items-center justify-center bg-white border border-gray-200"},k9=["src"],C9={class:"ml-auto"},j9={key:0,class:"w-full h-full rounded-full bg-white transform scale-50"},A9={class:"pt-4 border-t border-gray-200"},P9={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 opacity-50"},M9={class:"p-4 border-2 border-gray-100 rounded-lg bg-gray-50"},E9={class:"flex items-center space-x-3"},S9={class:"w-10 h-10 bg-gray-300 rounded-lg flex items-center justify-center"},D9={class:"p-4 border-2 border-gray-100 rounded-lg bg-gray-50"},T9={class:"flex items-center space-x-3"},I9={class:"w-10 h-10 bg-gray-300 rounded-lg flex items-center justify-center"},L9={class:"mt-8 flex items-center justify-between"},V9=["disabled"],F9={key:0},R9={key:1},q9={class:"mt-6 text-center"},z9={class:"flex items-center justify-center text-sm text-gray-500"},N9={__name:"PaymentMethod",setup(d){const m=qe(),T=be(),M=V(""),u=V(!1),r=V({type:"ticket",productName:"",quantity:1,unitPrice:0,totalAmount:0,image:"",transactionId:null}),h=j=>{M.value=j},A=()=>{T.back()},n=()=>{M.value&&(u.value=!0,T.push({name:"payment.phone",query:{method:M.value,transaction_id:r.value.transactionId,amount:r.value.totalAmount}}))},y=j=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(j).replace("XAF","FCFA");return ue(()=>{const{type:j,product:E,quantity:f,amount:_,transaction_id:I}=m.query;if(!I){T.push("/");return}r.value={type:j||"ticket",productName:E||"Produit",quantity:parseInt(f)||1,unitPrice:parseFloat(_)/(parseInt(f)||1),totalAmount:parseFloat(_)||0,image:"",transactionId:I}}),(j,E)=>(t(),s("div",X$,[e("div",J$,[e("div",Y$,[e("div",Q$,[e("img",{src:l(We),alt:"Koumbaya",class:"h-12 mx-auto"},null,8,e9)]),E[2]||(E[2]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Méthode de paiement",-1)),E[3]||(E[3]=e("p",{class:"mt-2 text-gray-600"},"Choisissez votre mode de paiement préféré",-1))]),e("div",t9,[E[4]||(E[4]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Résumé de votre commande",-1)),e("div",s9,[e("img",{src:r.value.image||"/images/products/placeholder.jpg",alt:r.value.productName,class:"w-16 h-16 object-cover rounded-lg"},null,8,o9),e("div",r9,[e("h3",a9,o(r.value.productName),1),e("p",n9,[r.value.type==="ticket"?(t(),s("span",i9,o(r.value.quantity)+" ticket(s) • "+o(y(r.value.unitPrice))+"/ticket ",1)):(t(),s("span",l9," Achat direct • "+o(y(r.value.unitPrice)),1))])]),e("div",d9,[e("div",u9,o(y(r.value.totalAmount)),1),r.value.type==="ticket"?(t(),s("div",c9,o(r.value.quantity)+" x "+o(y(r.value.unitPrice)),1)):R("",!0)])])]),e("div",m9,[E[13]||(E[13]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-6"},"Sélectionnez votre méthode de paiement",-1)),e("div",p9,[e("div",g9,[e("h3",v9,[p(l(Je),{class:"h-5 w-5 mr-2 text-blue-500"}),E[5]||(E[5]=U(" Mobile Money ",-1))]),e("div",f9,[e("div",{onClick:E[0]||(E[0]=f=>h("airtel_money")),class:Q(["p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",M.value==="airtel_money"?"border-red-500 bg-red-50 ring-2 ring-red-200":"border-gray-200 hover:border-red-300 hover:bg-red-50"])},[e("div",x9,[e("div",b9,[e("img",{src:l(Ht),alt:"Airtel Money",class:"w-10 h-10 object-contain"},null,8,h9)]),E[6]||(E[6]=e("div",{class:"flex-1"},[e("div",{class:"font-medium text-gray-900"},"Airtel Money"),e("div",{class:"text-sm text-gray-500"},"Paiement mobile")],-1)),e("div",y9,[e("div",{class:Q(["w-4 h-4 rounded-full border-2",M.value==="airtel_money"?"border-red-500 bg-red-500":"border-gray-300"])},[M.value==="airtel_money"?(t(),s("div",_9)):R("",!0)],2)])])],2),e("div",{onClick:E[1]||(E[1]=f=>h("moov_money")),class:Q(["p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",M.value==="moov_money"?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"])},[e("div",w9,[e("div",$9,[e("img",{src:l(Gt),alt:"Moov Money",class:"w-10 h-10 object-contain"},null,8,k9)]),E[7]||(E[7]=e("div",{class:"flex-1"},[e("div",{class:"font-medium text-gray-900"},"Moov Money"),e("div",{class:"text-sm text-gray-500"},"Paiement mobile")],-1)),e("div",C9,[e("div",{class:Q(["w-4 h-4 rounded-full border-2",M.value==="moov_money"?"border-blue-500 bg-blue-500":"border-gray-300"])},[M.value==="moov_money"?(t(),s("div",j9)):R("",!0)],2)])])],2)])]),e("div",A9,[E[10]||(E[10]=e("h3",{class:"text-sm font-medium text-gray-400 mb-3"},"Bientôt disponible",-1)),e("div",P9,[e("div",M9,[e("div",E9,[e("div",S9,[p(l(Ke),{class:"h-6 w-6 text-gray-500"})]),E[8]||(E[8]=e("div",null,[e("div",{class:"font-medium text-gray-500"},"Carte bancaire"),e("div",{class:"text-sm text-gray-400"},"Visa, Mastercard")],-1))])]),e("div",D9,[e("div",T9,[e("div",I9,[p(l(Rs),{class:"h-6 w-6 text-gray-500"})]),E[9]||(E[9]=e("div",null,[e("div",{class:"font-medium text-gray-500"},"Virement bancaire"),e("div",{class:"text-sm text-gray-400"},"IBAN, SWIFT")],-1))])])])])]),e("div",L9,[e("button",{onClick:A,class:"flex items-center text-gray-600 hover:text-gray-900 transition-colors"},[p(l(kt),{class:"h-5 w-5 mr-2"}),E[11]||(E[11]=U(" Retour ",-1))]),e("button",{onClick:n,disabled:!M.value||u.value,class:"bg-[#0099cc] hover:bg-[#0088bb] disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-8 py-3 rounded-xl transition-all duration-200 flex items-center"},[u.value?(t(),s("span",F9,"Traitement...")):(t(),s("span",R9,[E[12]||(E[12]=U(" Continuer ",-1)),p(l(Xe),{class:"h-5 w-5 ml-2"})]))],8,V9)])]),e("div",q9,[e("div",z9,[p(l(at),{class:"h-5 w-5 mr-2 text-green-500"}),E[14]||(E[14]=U(" Paiement 100% sécurisé et chiffré ",-1))])])])]))}},U9={class:"min-h-screen bg-gray-50 py-8"},B9={class:"max-w-md mx-auto px-4 sm:px-6 lg:px-8"},O9={class:"text-center mb-8"},H9={class:"mb-6"},G9=["src"],K9={class:"w-20 h-20 mx-auto mb-4 rounded-lg overflow-hidden flex items-center justify-center bg-white border border-gray-200 shadow-sm"},W9=["src","alt"],Z9={class:"text-2xl font-bold text-gray-900"},X9={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 text-center"},J9={class:"text-3xl font-bold text-gray-900"},Y9={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},Q9=["placeholder"],e8={key:0,class:"mt-1 text-sm text-red-600"},t8={class:"mt-2 text-xs text-gray-500"},s8={class:"space-y-3"},o8=["disabled"],r8={key:0},a8={key:1},n8={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},i8={class:"flex items-start"},l8={__name:"PhoneInput",setup(d){const m=qe(),T=be(),{post:M}=le(),u=V("airtel_money"),r=V("airtel"),h=V(""),A=V(!1),n=V({}),y=V(0),j=V(null),E=re(()=>r.value&&h.value.length===9&&_()),f=c=>{let a=c.target.value.replace(/\D/g,"");a.length<=9&&(h.value=a),I()},_=()=>{const c=h.value;return r.value==="airtel"?c.startsWith("074")||c.startsWith("077")||c.startsWith("076"):r.value==="moov"?c.startsWith("065")||c.startsWith("062")||c.startsWith("066")||c.startsWith("060"):!1},I=()=>{n.value={};const c=h.value;if(!c)return n.value.phone="Le numéro de téléphone est requis",!1;if(c.length!==9)return n.value.phone="Le numéro doit contenir 9 chiffres",!1;if(!_()){const a=r.value==="airtel"?"074, 077 ou 076":"065, 062, 066 ou 060";return n.value.phone=`Le numéro doit commencer par ${a} pour ${r.value==="airtel"?"Airtel":"Moov"}`,!1}return!0},F=async()=>{if(!(!I()||!E.value)){A.value=!0;try{const c=await M("/payments/initiate-from-transaction",{transaction_id:m.query.transaction_id,phone:h.value,operator:r.value});c.success?T.push({name:"payment.confirmation",query:{bill_id:c.data.bill_id,reference:c.data.reference,amount:c.data.amount,phone:h.value,operator:r.value,transaction_id:c.data.transaction_id}}):window.$toast&&window.$toast.error(c.message||"Erreur lors de l'initiation du paiement","❌ Erreur")}catch(c){console.error("Payment initiation error:",c),window.$toast&&window.$toast.error("Erreur lors de l'initiation du paiement","❌ Erreur")}finally{A.value=!1}}},C=()=>{T.back()},x=c=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(c).replace("XAF","FCFA");return ue(()=>{u.value=m.query.method||"airtel_money",y.value=parseFloat(m.query.amount)||0,j.value=m.query.transaction_id,u.value==="airtel_money"?r.value="airtel":u.value==="moov_money"&&(r.value="moov"),m.query.transaction_id||T.push("/")}),(c,a)=>(t(),s("div",U9,[e("div",B9,[e("div",O9,[e("div",H9,[e("img",{src:l(We),alt:"Koumbaya",class:"h-12 mx-auto"},null,8,G9)]),e("div",K9,[e("img",{src:u.value==="airtel_money"?l(Ht):l(Gt),alt:u.value==="airtel_money"?"Airtel Money":"Moov Money",class:"w-16 h-16 object-contain"},null,8,W9)]),e("h1",Z9,o(u.value==="airtel_money"?"Airtel Money":"Moov Money"),1),a[1]||(a[1]=e("p",{class:"mt-2 text-gray-600"},"Saisissez votre numéro de téléphone",-1))]),e("div",X9,[a[2]||(a[2]=e("div",{class:"text-sm text-gray-500 mb-1"},"Montant à payer",-1)),e("div",J9,o(x(y.value)),1)]),e("div",Y9,[e("form",{onSubmit:xe(F,["prevent"]),class:"space-y-6"},[e("div",null,[a[3]||(a[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Numéro de téléphone ",-1)),G(e("input",{"onUpdate:modelValue":a[0]||(a[0]=v=>h.value=v),type:"tel",placeholder:r.value==="airtel"?"074010203":"065010203",maxlength:"9",class:Q(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",r.value==="airtel"?"focus:ring-red-500":"focus:ring-blue-500",n.value.phone?"border-red-300":""]),onInput:f},null,42,Q9),[[ee,h.value]]),n.value.phone?(t(),s("div",e8,o(n.value.phone),1)):R("",!0),e("div",t8," Format: "+o(r.value==="airtel"?"074010203 (074, 077, 076 pour Airtel)":"065010203 (065, 062, 066, 060 pour Moov)"),1)]),e("div",s8,[e("button",{type:"submit",disabled:!E.value||A.value,class:Q(["w-full py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center",r.value==="airtel"?"bg-red-600 hover:bg-red-700 disabled:bg-red-300":"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300","text-white disabled:cursor-not-allowed"])},[A.value?(t(),s("span",r8,a[4]||(a[4]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"},null,-1),U(" Traitement... ",-1)]))):(t(),s("span",a8,[U(" Payer "+o(x(y.value))+" ",1),p(l(Xe),{class:"h-5 w-5 ml-2"})]))],10,o8),e("button",{type:"button",onClick:C,class:"w-full py-3 px-4 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors"}," Retour ")])],32)]),e("div",n8,[e("div",i8,[p(l(Oe),{class:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),a[5]||(a[5]=e("div",{class:"text-sm text-blue-700"},[e("p",{class:"font-medium mb-1"},"Instructions de paiement :"),e("ul",{class:"space-y-1 text-xs"},[e("li",null,"• Assurez-vous d'avoir suffisamment de crédit"),e("li",null,"• Gardez votre téléphone près de vous"),e("li",null,"• Vous recevrez un code de confirmation USSD")])],-1))])])])]))}},d8={class:"min-h-screen bg-gray-50 py-8"},u8={class:"max-w-md mx-auto px-4 sm:px-6 lg:px-8"},c8={class:"text-center mb-8"},m8={class:"mb-6"},p8=["src"],g8={class:"text-2xl font-bold text-gray-900 mb-2"},v8={class:"text-gray-600"},f8={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},x8={class:"text-center"},b8={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},h8={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},y8={class:"space-y-3"},_8={class:"flex justify-between"},w8={class:"font-semibold text-gray-900"},$8={class:"flex justify-between"},k8={class:"font-semibold text-gray-900"},C8={class:"flex justify-between"},j8={class:"font-semibold text-gray-900"},A8={class:"flex justify-between"},P8={class:"font-semibold text-gray-900 font-mono text-sm"},M8={class:"flex justify-between text-lg"},E8={class:"font-bold text-gray-900"},S8={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},D8={class:"flex items-start"},T8={class:"text-sm text-blue-700"},I8={class:"space-y-1 text-xs"},L8={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},V8={class:"flex items-start"},F8={class:"text-sm text-red-700"},R8={class:"text-xs"},q8={key:3,class:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6"},z8={class:"flex items-start"},N8={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6"},U8={class:"flex items-start"},B8={class:"space-y-3"},O8=["disabled"],H8={key:0},G8={key:1},K8={__name:"PaymentConfirmation",setup(d){const m=qe(),T=be(),{get:M,post:u}=le(),r=V("pending"),h=V(90),A=V(!1),n=V(""),y=V(null),j=V(null),E=V(""),f=V(""),_=V(0),I=V(""),F=V(""),C=()=>{switch(r.value){case"pending":return{bg:"bg-blue-100",icon:"text-blue-600"};case"success":return{bg:"bg-green-100",icon:"text-green-600"};case"failed":return{bg:"bg-red-100",icon:"text-red-600"};case"expired":return{bg:"bg-orange-100",icon:"text-orange-600"};default:return{bg:"bg-gray-100",icon:"text-gray-600"}}},x=()=>{switch(r.value){case"pending":return Pe;case"success":return Te;case"failed":case"expired":return He;default:return Pe}},c=()=>{switch(r.value){case"pending":return"Paiement en cours...";case"success":return"Paiement réussi !";case"failed":return"Paiement échoué";case"expired":return"Paiement expiré";default:return"Traitement..."}},a=()=>{switch(r.value){case"pending":return"Confirmez le paiement sur votre téléphone";case"success":return"Votre paiement a été traité avec succès";case"failed":return"Une erreur est survenue lors du paiement";case"expired":return"Le délai de paiement a expiré";default:return"Veuillez patienter..."}},v=Z=>{const k=Math.floor(Z/60),D=Z%60;return`${k}:${D.toString().padStart(2,"0")}`},i=Z=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(Z).replace("XAF","FCFA"),$=()=>{y.value=setInterval(()=>{h.value>0?h.value--:(r.value="expired",clearInterval(y.value),clearInterval(j.value))},1e3)},L=async()=>{if(E.value){A.value=!0;try{const Z=await M(`/payments/status/${E.value}`);if(Z.success){const k=Z.data.status;k==="paid"?(r.value="success",clearInterval(y.value),clearInterval(j.value),window.$toast&&window.$toast.success("Paiement confirmé avec succès !","✅ Succès")):k==="failed"&&(r.value="failed",n.value=Z.data.error_message||"",clearInterval(y.value),clearInterval(j.value))}}catch(Z){console.error("Error checking payment status:",Z)}finally{A.value=!1}}},Y=()=>{j.value=setInterval(()=>{r.value==="pending"&&L()},5e3)},J=async()=>{if(!(!E.value||!F.value)){A.value=!0;try{const Z=await u("/payments/retry-ussd",{bill_id:E.value,operator:F.value});Z.success?(r.value="pending",h.value=90,$(),Y(),window.$toast&&window.$toast.success("Push USSD relancé avec succès !","✅ Succès")):window.$toast&&window.$toast.error(Z.message||"Erreur lors du relancement du push USSD","❌ Erreur")}catch(Z){console.error("Error retrying USSD push:",Z),window.$toast&&window.$toast.error("Erreur lors du relancement du push USSD","❌ Erreur")}finally{A.value=!1}}},z=()=>{T.push({name:"payment.phone",query:m.query})},b=()=>{T.push("/profile")},q=()=>{T.push("/")};return ue(()=>{if(E.value=m.query.bill_id||"",f.value=m.query.reference||"",_.value=parseFloat(m.query.amount)||0,I.value=m.query.phone||"",F.value=m.query.operator||"",!E.value||!_.value){T.push("/");return}$(),Y(),L()}),rt(()=>{y.value&&clearInterval(y.value),j.value&&clearInterval(j.value)}),(Z,k)=>(t(),s("div",d8,[e("div",u8,[e("div",c8,[e("div",m8,[e("img",{src:l(We),alt:"Koumbaya",class:"h-12 mx-auto"},null,8,p8)]),e("div",{class:Q(["w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center",C().bg])},[(t(),de(Ce(x()),{class:Q(["h-10 w-10",C().icon])},null,8,["class"]))],2),e("h1",g8,o(c()),1),e("p",v8,o(a()),1)]),r.value==="pending"?(t(),s("div",f8,[e("div",x8,[e("div",{class:Q(["text-4xl font-bold mb-2",h.value<=30?"text-red-600":"text-blue-600"])},o(v(h.value)),3),k[0]||(k[0]=e("div",{class:"text-sm text-gray-500 mb-4"}," Temps restant pour confirmer le paiement ",-1)),e("div",b8,[e("div",{class:Q(["h-2 rounded-full transition-all duration-1000",h.value<=30?"bg-red-500":"bg-blue-500"]),style:Me({width:h.value/90*100+"%"})},null,6)]),k[1]||(k[1]=e("div",{class:"text-xs text-gray-400"}," Le paiement expirera automatiquement à la fin du timer ",-1))])])):R("",!0),e("div",h8,[k[8]||(k[8]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Détails du paiement",-1)),e("div",y8,[e("div",_8,[k[2]||(k[2]=e("span",{class:"text-gray-600"},"Montant",-1)),e("span",w8,o(i(_.value)),1)]),e("div",$8,[k[3]||(k[3]=e("span",{class:"text-gray-600"},"Opérateur",-1)),e("span",k8,o(F.value==="airtel"?"Airtel Money":"Moov Money"),1)]),e("div",C8,[k[4]||(k[4]=e("span",{class:"text-gray-600"},"Téléphone",-1)),e("span",j8,"+241 "+o(I.value),1)]),e("div",A8,[k[5]||(k[5]=e("span",{class:"text-gray-600"},"Référence",-1)),e("span",P8,o(f.value),1)]),k[7]||(k[7]=e("hr",{class:"my-3"},null,-1)),e("div",M8,[k[6]||(k[6]=e("span",{class:"font-semibold text-gray-900"},"Total",-1)),e("span",E8,o(i(_.value)),1)])])]),r.value==="pending"?(t(),s("div",S8,[e("div",D8,[p(l(Oe),{class:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),e("div",T8,[k[13]||(k[13]=e("p",{class:"font-medium mb-2"},"Instructions importantes :",-1)),k[14]||(k[14]=e("div",{class:"bg-white rounded-lg p-3 mb-3 border border-blue-200"},[e("p",{class:"font-semibold text-blue-800 text-sm"},"📱 Gardez votre téléphone à portée de main"),e("p",{class:"text-xs text-blue-600 mt-1"},"Vous devez valider la transaction avec votre code PIN secret")],-1)),e("ol",I8,[k[9]||(k[9]=e("li",null,"1. Vous allez recevoir un code USSD sur votre téléphone",-1)),k[10]||(k[10]=e("li",null,"2. Composez le code reçu sur votre clavier",-1)),e("li",null,"3. Suivez les instructions de "+o(F.value==="airtel"?"Airtel Money":"Moov Money"),1),k[11]||(k[11]=e("li",null,"4. Confirmez le paiement avec votre code PIN secret",-1)),k[12]||(k[12]=e("li",null,"5. Le paiement sera confirmé automatiquement",-1))])])])])):r.value==="failed"?(t(),s("div",L8,[e("div",V8,[p(l(He),{class:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e("div",F8,[k[15]||(k[15]=e("p",{class:"font-medium mb-2"},"Le paiement a échoué",-1)),e("p",R8,o(n.value||"Veuillez réessayer ou vérifier votre solde."),1)])])])):r.value==="expired"?(t(),s("div",q8,[e("div",z8,[p(l(Pe),{class:"h-5 w-5 text-orange-500 mt-0.5 mr-3 flex-shrink-0"}),k[16]||(k[16]=e("div",{class:"text-sm text-orange-700"},[e("p",{class:"font-medium mb-2"},"Paiement expiré"),e("p",{class:"text-xs"},"Le délai de 90 secondes est écoulé. Veuillez recommencer le processus.")],-1))])])):r.value==="success"?(t(),s("div",N8,[e("div",U8,[p(l(Te),{class:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),k[17]||(k[17]=e("div",{class:"text-sm text-green-700"},[e("p",{class:"font-medium mb-2"},"Paiement confirmé !"),e("p",{class:"text-xs"},"Votre commande a été traitée avec succès. Vous allez recevoir une confirmation par email.")],-1))])])):R("",!0),e("div",B8,[r.value==="success"?(t(),s("button",{key:0,onClick:b,class:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all duration-200 flex items-center justify-center"},[p(l(Ve),{class:"h-5 w-5 mr-2"}),k[18]||(k[18]=U(" Voir mes achats ",-1))])):R("",!0),r.value==="expired"?(t(),s("button",{key:1,onClick:J,disabled:A.value,class:"w-full py-3 px-4 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-300 text-white font-semibold rounded-lg transition-all duration-200 flex items-center justify-center"},[A.value?(t(),s("span",H8,k[19]||(k[19]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"},null,-1),U(" Relance... ",-1)]))):(t(),s("span",G8,[p(l(Ne),{class:"h-5 w-5 mr-2"}),k[20]||(k[20]=U(" Relancer le push USSD ",-1))]))],8,O8)):R("",!0),r.value==="failed"?(t(),s("button",{key:2,onClick:z,class:"w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-all duration-200 flex items-center justify-center"},[p(l(Ne),{class:"h-5 w-5 mr-2"}),k[21]||(k[21]=U(" Réessayer le paiement ",-1))])):R("",!0),e("button",{onClick:q,class:"w-full py-3 px-4 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors"}," Retour à l'accueil ")])])]))}};function W8(){const{get:d,loading:m,error:T}=le(),M=V({users:{total:0,active:0,growth:0},products:{total:0,active:0,growth:0},lotteries:{total:0,active:0,growth:0},revenue:{total:0,monthly:0,growth:0}}),u=V([]),r=V([]),h=V([]),A=re(()=>[{label:"Utilisateurs actifs",value:f(M.value.users.active),change:M.value.users.growth,icon:"UsersIcon",bgColor:"bg-[#0099cc]/10",iconColor:"text-[#0099cc]"},{label:"Produits en vente",value:f(M.value.products.active),change:M.value.products.growth,icon:"ShoppingBagIcon",bgColor:"bg-blue-100",iconColor:"text-blue-600"},{label:"Tombolas actives",value:f(M.value.lotteries.active),change:M.value.lotteries.growth,icon:"GiftIcon",bgColor:"bg-yellow-100",iconColor:"text-yellow-600"},{label:"Revenus mensuel",value:_(M.value.revenue.monthly),change:M.value.revenue.growth,icon:"CurrencyDollarIcon",bgColor:"bg-purple-100",iconColor:"text-purple-600"}]),n=async()=>{try{const x=await d("/admin/dashboard/stats");x&&x.success&&(M.value={users:{total:x.data.users?.total||0,active:x.data.users?.active||0,growth:x.data.users?.growth||0},products:{total:x.data.products?.total||0,active:x.data.products?.active||0,growth:x.data.products?.growth||0},lotteries:{total:x.data.lotteries?.total||0,active:x.data.lotteries?.active||0,growth:x.data.lotteries?.growth||0},revenue:{total:x.data.revenue?.total||0,monthly:x.data.revenue?.monthly||0,growth:x.data.revenue?.growth||0}})}catch(x){console.error("Erreur lors du chargement des statistiques:",x),M.value={users:{total:2543,active:1876,growth:12.5},products:{total:186,active:134,growth:8.2},lotteries:{total:45,active:24,growth:-2.1},revenue:{total:125e6,monthly:452e5,growth:15.3}}}},y=async()=>{try{const x=await d("/admin/lotteries/recent?limit=5");x&&x.success&&(u.value=x.data.map(c=>({id:c.id,lottery_number:c.lottery_number,product:{name:c.product?.name||"Produit inconnu",image:c.product?.image_url||c.product?.main_image||"/images/products/placeholder.jpg"},status:c.status,statusLabel:I(c.status),sold_tickets:c.sold_tickets||0,total_tickets:c.total_tickets||0,end_date:c.end_date})))}catch(x){console.error("Erreur lors du chargement des tombolas récentes:",x),u.value=[]}},j=async()=>{try{const x=await d("/admin/activities/recent?limit=10");x&&x.success&&(r.value=x.data.map(c=>({id:c.id,type:c.type,icon:F(c.type),title:c.title,description:c.description,time:new Date(c.created_at)})))}catch(x){console.error("Erreur lors du chargement des activités récentes:",x),r.value=[]}},E=async()=>{try{const x=await d("/admin/products/top?limit=5");x&&x.success&&(h.value=x.data.map(c=>({id:c.id,title:c.name,sales:c.total_tickets_sold||0,growth:c.growth_percentage||0,image:c.image_url||c.main_image||"/images/products/placeholder.jpg"})))}catch(x){console.error("Erreur lors du chargement des produits populaires:",x),h.value=[]}},f=x=>x>=1e6?(x/1e6).toFixed(1)+"M":x>=1e3?(x/1e3).toFixed(1)+"k":x.toLocaleString(),_=x=>x>=1e6?(x/1e6).toFixed(1)+"M FCFA":x>=1e3?(x/1e3).toFixed(0)+"k FCFA":x.toLocaleString()+" FCFA",I=x=>({active:"Active",completed:"Terminée",pending:"En attente",cancelled:"Annulée",draft:"Brouillon"})[x]||x,F=x=>({user:"UsersIcon",product:"ShoppingBagIcon",payment:"CurrencyDollarIcon",lottery:"GiftIcon",transaction:"BanknotesIcon"})[x]||"InformationCircleIcon";return{stats:A,recentLotteries:u,recentActivities:r,topProducts:h,loading:m,error:T,loadDashboardData:async()=>{await Promise.all([n(),y(),j(),E()])},loadDashboardStats:n,loadRecentLotteries:y,loadRecentActivities:j,loadTopProducts:E,formatNumber:f,formatCurrency:_,getStatusLabel:I,getActivityIcon:F}}const Z8={class:"space-y-6"},X8={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},J8={class:"flex items-center"},Y8={class:"ml-4"},Q8={class:"text-sm font-medium text-gray-600"},e7={class:"text-2xl font-bold text-gray-900"},t7={class:"mt-4 pt-4 border-t border-gray-100"},s7={class:"flex items-center text-sm"},o7={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},r7={class:"flex"},a7={class:"ml-3"},n7={class:"mt-1 text-sm text-red-700"},i7={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},l7={class:"lg:col-span-2 space-y-6"},d7={class:"admin-card"},u7={class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},c7={class:"text-center"},m7={class:"admin-card"},p7={class:"overflow-x-auto"},g7={class:"min-w-full"},v7={class:"bg-white divide-y divide-gray-200"},f7={class:"px-6 py-4 whitespace-nowrap"},x7={class:"flex items-center"},b7={class:"ml-4"},h7={class:"text-sm font-medium text-gray-900"},y7={class:"text-sm text-gray-500"},_7={class:"px-6 py-4 whitespace-nowrap"},w7={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},$7={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},k7={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},C7=["onClick"],j7={class:"space-y-6"},A7={class:"admin-card"},P7={key:0,class:"space-y-4"},M7={key:1,class:"space-y-4"},E7={class:"flex-1 min-w-0"},S7={class:"text-sm font-medium text-gray-900"},D7={class:"text-sm text-gray-600"},T7={class:"text-xs text-gray-500 mt-1"},I7={key:2,class:"text-center py-6 text-gray-500"},L7={class:"admin-card"},V7={class:"space-y-4"},F7={class:"flex-shrink-0"},R7={class:"inline-flex items-center justify-center w-6 h-6 text-sm font-bold text-gray-600"},q7={class:"flex-1 min-w-0"},z7={class:"text-sm font-medium text-gray-900 truncate"},N7={class:"flex items-center space-x-2 mt-1"},U7={class:"text-xs text-gray-500"},B7={class:"admin-card"},O7={class:"space-y-3"},H7={__name:"Dashboard",setup(d){const m=be();le();const{stats:T,recentLotteries:M,recentActivities:u,topProducts:r,loading:h,error:A,loadDashboardData:n}=W8(),y={UsersIcon:pt,ShoppingBagIcon:Be,GiftIcon:Ye,CurrencyDollarIcon:Ue,BanknotesIcon:dt,InformationCircleIcon:Oe},j=re(()=>T.value.map(v=>({...v,icon:y[v.icon]||Oe}))),E=re(()=>u.value.map(v=>({...v,icon:y[v.icon]||Oe}))),f=v=>new Date(v).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),_=v=>{const $=Math.floor((new Date-v)/1e3);return $<60?`il y a ${$}s`:$<3600?`il y a ${Math.floor($/60)}min`:$<86400?`il y a ${Math.floor($/3600)}h`:`il y a ${Math.floor($/86400)}j`},I=async()=>{await n()},F=()=>{m.push("/admin/users")},C=()=>{m.push("/admin/lotteries")},x=()=>{window.$toast&&window.$toast.info("Fonctionnalité des activités détaillées en cours de développement","ℹ️ Information")},c=v=>{window.$toast&&window.$toast.info(`Affichage des détails de la tombola ${v.lottery_number}`,"👁️ Détails")},a=async()=>{try{window.$toast&&window.$toast.info("Génération du rapport en cours...","📊 Rapport"),await new Promise(v=>setTimeout(v,2e3)),window.$toast&&window.$toast.success("Rapport généré avec succès!","✅ Rapport")}catch{window.$toast&&window.$toast.error("Erreur lors de la génération du rapport","❌ Erreur")}};return ue(async()=>{await n()}),(v,i)=>(t(),s("div",Z8,[i[15]||(i[15]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de bord"),e("p",{class:"mt-2 text-gray-600"},"Vue d'ensemble des activités de la plateforme Koumbaya")],-1)),e("div",X8,[l(h)?(t(),s(te,{key:0},se(4,$=>e("div",{key:$,class:"admin-card animate-pulse"},i[0]||(i[0]=[ie('<div class="flex items-center"><div class="p-3 rounded-lg bg-gray-200"></div><div class="ml-4 flex-1"><div class="h-4 bg-gray-200 rounded w-20 mb-2"></div><div class="h-6 bg-gray-200 rounded w-16"></div></div></div><div class="mt-4 pt-4 border-t border-gray-100"><div class="h-4 bg-gray-200 rounded w-24"></div></div>',2)]))),64)):(t(!0),s(te,{key:1},se(j.value,$=>(t(),s("div",{key:$.label,class:"admin-card hover:shadow-md transition-shadow duration-200"},[e("div",J8,[e("div",{class:Q(["p-3 rounded-lg",$.bgColor])},[(t(),de(Ce($.icon),{class:Q(["w-6 h-6",$.iconColor])},null,8,["class"]))],2),e("div",Y8,[e("p",Q8,o($.label),1),e("p",e7,o($.value),1)])]),e("div",t7,[e("div",s7,[e("span",{class:Q(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",$.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(t(),de(Ce($.change>=0?l(ns):l(zt)),{class:"w-3 h-3 mr-1"})),U(" "+o(Math.abs($.change))+"% ",1)],2),i[1]||(i[1]=e("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),l(A)&&!l(h)?(t(),s("div",o7,[e("div",r7,[e("div",a7,[i[2]||(i[2]=e("h3",{class:"text-sm font-medium text-red-800"},"Erreur de chargement",-1)),e("p",n7,o(l(A)),1),e("button",{onClick:I,class:"mt-2 text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded"}," Réessayer ")])])])):R("",!0),e("div",i7,[e("div",l7,[e("div",d7,[i[5]||(i[5]=ie('<div class="admin-card-header"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-900">Revenus mensuels</h3><div class="flex items-center space-x-2"><button class="text-sm text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md hover:bg-gray-100">30j</button><button class="text-sm bg-[#0099cc]/10 text-[#0099cc] px-3 py-1 rounded-md">90j</button><button class="text-sm text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md hover:bg-gray-100">1an</button></div></div></div>',1)),e("div",u7,[e("div",c7,[p(l(Ct),{class:"w-12 h-12 text-gray-400 mx-auto mb-2"}),i[3]||(i[3]=e("p",{class:"text-gray-500"},"Graphique des revenus",-1)),i[4]||(i[4]=e("p",{class:"text-xs text-gray-400"},"Données en cours de chargement...",-1))])])]),e("div",m7,[i[7]||(i[7]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tombolas récentes")],-1)),e("div",p7,[e("table",g7,[i[6]||(i[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Produit"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date de fin"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",v7,[(t(!0),s(te,null,se(l(M),$=>(t(),s("tr",{key:$.id,class:"hover:bg-gray-50"},[e("td",f7,[e("div",x7,[p(ze,{src:$.product.image_url||$.product.main_image||$.product.image,alt:$.product.name,"container-class":"h-10 w-10 rounded-lg","image-class":"h-full w-full object-cover rounded-lg","fallback-class":"h-full w-full rounded-lg"},null,8,["src","alt"]),e("div",b7,[e("div",h7,o($.product.name),1),e("div",y7,o($.lottery_number),1)])])]),e("td",_7,[e("span",{class:Q(["inline-flex px-2 py-1 text-xs font-medium rounded-full",$.status==="active"?"admin-badge-success":$.status==="completed"?"bg-gray-100 text-gray-800":"admin-badge-warning"])},o($.statusLabel),3)]),e("td",w7,o($.sold_tickets)+"/"+o($.total_tickets),1),e("td",$7,o(f($.end_date)),1),e("td",k7,[e("button",{onClick:L=>c($),class:"text-[#0099cc] hover:text-[#0088bb] mr-3"}," Voir ",8,C7),$.status==="active"?(t(),s("button",{key:0,onClick:C,class:"text-orange-600 hover:text-orange-900"}," Modifier ")):R("",!0)])]))),128))])])])])]),e("div",j7,[e("div",A7,[i[10]||(i[10]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Activités récentes")],-1)),l(h)?(t(),s("div",P7,[(t(),s(te,null,se(4,$=>e("div",{key:$,class:"flex items-start space-x-3 p-3 animate-pulse"},i[8]||(i[8]=[ie('<div class="w-8 h-8 bg-gray-200 rounded-full flex-shrink-0"></div><div class="flex-1 min-w-0 space-y-2"><div class="h-4 bg-gray-200 rounded w-32"></div><div class="h-3 bg-gray-200 rounded w-48"></div><div class="h-3 bg-gray-200 rounded w-16"></div></div>',2)]))),64))])):E.value.length>0?(t(),s("div",M7,[(t(!0),s(te,null,se(E.value,$=>(t(),s("div",{key:$.id,class:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[e("div",{class:Q(["w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",$.type==="user"?"bg-[#0099cc]/10 text-[#0099cc]":$.type==="product"?"bg-blue-100 text-blue-600":$.type==="payment"?"bg-yellow-100 text-yellow-600":"bg-purple-100 text-purple-600"])},[(t(),de(Ce($.icon),{class:"w-4 h-4"}))],2),e("div",E7,[e("p",S7,o($.title),1),e("p",D7,o($.description),1),e("p",T7,o(_($.time)),1)])]))),128))])):(t(),s("div",I7,[p(l(Oe),{class:"w-8 h-8 mx-auto mb-2 text-gray-400"}),i[9]||(i[9]=e("p",{class:"text-sm"},"Aucune activité récente",-1))])),e("div",{class:"mt-4 pt-4 border-t border-gray-100"},[e("button",{onClick:x,class:"admin-btn-secondary w-full text-sm"}," Voir toutes les activités ")])]),e("div",L7,[i[11]||(i[11]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Produits populaires")],-1)),e("div",V7,[(t(!0),s(te,null,se(l(r),($,L)=>(t(),s("div",{key:$.id,class:"flex items-center space-x-3"},[e("div",F7,[e("span",R7,o(L+1),1)]),p(ze,{src:$.image_url||$.main_image||$.image,alt:$.title,"container-class":"w-10 h-10 rounded-lg flex-shrink-0","image-class":"w-full h-full object-cover rounded-lg","fallback-class":"w-full h-full rounded-lg"},null,8,["src","alt"]),e("div",q7,[e("p",z7,o($.title),1),e("div",N7,[e("p",U7,o($.sales)+" tickets",1),e("span",{class:Q(["text-xs font-medium",$.growth>0?"text-blue-600":"text-red-600"])},o($.growth>0?"+":"")+o($.growth)+"% ",3)])])]))),128))])]),e("div",B7,[i[14]||(i[14]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Actions rapides")],-1)),e("div",O7,[e("button",{onClick:F,class:"admin-btn-primary w-full justify-center"},[p(l(us),{class:"w-4 h-4 mr-2"}),i[12]||(i[12]=U(" Gérer les utilisateurs ",-1))]),e("button",{onClick:a,class:"admin-btn-secondary w-full justify-center"},[p(l(Bs),{class:"w-4 h-4 mr-2"}),i[13]||(i[13]=U(" Générer rapport ",-1))])])])])])]))}},G7={class:"px-6"},K7={class:"mb-8"},W7={class:"flex justify-between items-center"},Z7={class:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6"},X7={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},J7=["value"],Y7={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Q7={class:"px-6 py-4 border-b border-gray-200"},ek={class:"flex justify-between items-center"},tk={class:"text-lg font-semibold text-gray-900"},sk={class:"flex space-x-2"},ok={class:"p-2 text-gray-400 hover:text-gray-600"},rk={key:0,class:"p-8 text-center"},ak={key:1,class:"overflow-x-auto"},nk={class:"min-w-full divide-y divide-gray-200"},ik={class:"bg-white divide-y divide-gray-200"},lk={class:"px-6 py-4 whitespace-nowrap"},dk={class:"flex items-center"},uk={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},ck={class:"text-sm font-medium text-gray-700"},mk={class:"ml-4"},pk={class:"text-sm font-medium text-gray-900"},gk={key:0,class:"text-sm text-gray-500"},vk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},fk={class:"px-6 py-4 whitespace-nowrap"},xk={class:"px-6 py-4 whitespace-nowrap"},bk={class:"flex items-center space-x-2"},hk={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},yk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_k={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},wk={class:"flex space-x-2"},$k=["onClick"],kk=["onClick"],Ck={class:"px-6 py-3 border-t border-gray-200"},jk={class:"flex items-center justify-between"},Ak={class:"text-sm text-gray-700"},Pk={class:"flex space-x-2"},Mk=["disabled"],Ek=["disabled"],Sk={__name:"UserManagement",setup(d){const{get:m,post:T}=le(),M=V([]),u=V(!1);V(!1);const r=V(1),h=V(20),A=V(0),n=V([]),y=me({search:"",role:"",status:""});Ae(()=>y,()=>{r.value=1,_()},{deep:!0});const j=re(()=>M.value),E=re(()=>M.value),f=re(()=>Math.ceil(A.value/h.value)),_=async()=>{u.value=!0;try{const v=new URLSearchParams;v.append("page",r.value),v.append("per_page",h.value),y.search&&v.append("search",y.search),y.role&&v.append("role",y.role),y.status&&v.append("status",y.status);const i=await m(`/admin/users?${v.toString()}`);i&&i.data&&(M.value=i.data.users||[],A.value=i.data.pagination?.total||0,n.value=i.data.available_roles||[])}catch(v){console.error("Erreur lors du chargement des utilisateurs:",v),M.value=[]}finally{u.value=!1}},I=()=>{y.search="",y.role="",y.status="",r.value=1},F=v=>{console.log("Éditer utilisateur:",v)},C=async v=>{try{const i=await T(`/admin/users/${v.id}/toggle-status`);i&&i.success&&(await _(),window.$toast&&window.$toast.success(i.message||"Statut modifié","✓ Succès"))}catch(i){console.error("Erreur lors de la modification du statut:",i),window.$toast&&window.$toast.error("Erreur lors de la modification du statut","✘ Erreur")}},x=v=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(v)),c=v=>({"Super Admin":"Super Admin",Admin:"Administrateur",Agent:"Agent","Agent Back Office":"Agent BO",Marchand:"Marchand",Client:"Client"})[v]||v,a=v=>({"Super Admin":"bg-purple-100 text-purple-800",Admin:"bg-red-100 text-red-800",Agent:"bg-yellow-100 text-yellow-800","Agent Back Office":"bg-orange-100 text-orange-800",Marchand:"bg-blue-100 text-blue-800",Client:"bg-green-100 text-green-800"})[v]||"bg-gray-100 text-gray-800";return Ae(r,()=>{_()}),ue(()=>{_()}),(v,i)=>(t(),s("div",G7,[e("div",K7,[e("div",W7,[i[6]||(i[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des Utilisateurs"),e("p",{class:"mt-2 text-gray-600"},"Gérez tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:_,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"},[p(l(Ne),{class:Q(["w-5 h-5 inline mr-2",u.value?"animate-spin":""])},null,8,["class"]),i[5]||(i[5]=U(" Recharger ",-1))])])]),e("div",Z7,[e("div",X7,[e("div",null,[i[7]||(i[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":i[0]||(i[0]=$=>y.search=$),type:"text",placeholder:"Nom, email...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,y.search]])]),e("div",null,[i[9]||(i[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),G(e("select",{"onUpdate:modelValue":i[1]||(i[1]=$=>y.role=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[i[8]||(i[8]=e("option",{value:""},"Tous les rôles",-1)),(t(!0),s(te,null,se(n.value,$=>(t(),s("option",{key:$.value,value:$.value},o($.label),9,J7))),128))],512),[[ne,y.role]])]),e("div",null,[i[11]||(i[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":i[2]||(i[2]=$=>y.status=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},i[10]||(i[10]=[ie('<option value="">Tous les statuts</option><option value="active">Actif</option><option value="inactive">Inactif</option><option value="verified">Vérifié</option><option value="unverified">Non vérifié</option>',5)]),512),[[ne,y.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:I,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),e("div",Y7,[e("div",Q7,[e("div",ek,[e("h3",tk," Utilisateurs ("+o(j.value.length)+") ",1),e("div",sk,[e("button",ok,[p(l(Ne),{class:"w-5 h-5"})])])])]),u.value?(t(),s("div",rk,i[12]||(i[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)]))):(t(),s("div",ak,[e("table",nk,[i[13]||(i[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Inscription "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ik,[(t(!0),s(te,null,se(E.value,$=>(t(),s("tr",{key:$.id,class:"hover:bg-gray-50"},[e("td",lk,[e("div",dk,[e("div",uk,[e("span",ck,o($.first_name[0])+o($.last_name[0]),1)]),e("div",mk,[e("div",pk,o($.first_name)+" "+o($.last_name),1),$.phone?(t(),s("div",gk,o($.phone),1)):R("",!0)])])]),e("td",vk,o($.email),1),e("td",fk,[e("span",{class:Q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",a($.primary_role)])},o(c($.primary_role)),3)]),e("td",xk,[e("div",bk,[e("span",{class:Q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",$.is_active?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},o($.is_active?"Actif":"Inactif"),3),$.verified_at?(t(),s("span",hk," Vérifié ")):R("",!0)])]),e("td",yk,o(x($.created_at)),1),e("td",_k,[e("div",wk,[e("button",{onClick:L=>F($),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,$k),e("button",{onClick:L=>C($),class:Q($.is_active?"text-red-600 hover:text-red-900":"text-blue-600 hover:text-blue-900")},o($.is_active?"Désactiver":"Activer"),11,kk)])])]))),128))])])])),e("div",Ck,[e("div",jk,[e("div",Ak," Affichage de "+o((r.value-1)*h.value+1)+" à "+o(Math.min(r.value*h.value,A.value))+" sur "+o(A.value)+" résultats ",1),e("div",Pk,[e("button",{onClick:i[3]||(i[3]=$=>r.value--),disabled:r.value===1,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Précédent ",8,Mk),e("button",{onClick:i[4]||(i[4]=$=>r.value++),disabled:r.value===f.value,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Suivant ",8,Ek)])])])])]))}},Dk={class:"mb-8 flex justify-between items-center"},Tk={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Ik={class:"flex items-center"},Lk={class:"ml-4"},Vk={class:"text-sm font-medium text-gray-600"},Fk={class:"text-2xl font-bold text-gray-900"},Rk={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6"},qk={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},zk=["value"],Nk={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Uk={key:0,class:"text-center py-12"},Bk={key:1},Ok={class:"px-6 py-3 bg-gray-50 border-b border-gray-200"},Hk={class:"flex justify-between items-center"},Gk={class:"text-lg font-semibold text-gray-900"},Kk={class:"overflow-x-auto"},Wk={class:"min-w-full divide-y divide-gray-200"},Zk={class:"bg-white divide-y divide-gray-200"},Xk={class:"px-6 py-4 whitespace-nowrap"},Jk={class:"flex items-center"},Yk={class:"w-16 h-16 flex-shrink-0"},Qk={class:"ml-4"},eC={class:"text-sm font-medium text-gray-900"},tC={class:"text-sm text-gray-500 line-clamp-2"},sC={class:"px-6 py-4 whitespace-nowrap"},oC={class:"text-sm text-gray-900"},rC={class:"px-6 py-4 whitespace-nowrap"},aC={class:"text-sm text-gray-900"},nC={key:0,class:"text-xs text-gray-500"},iC={class:"px-6 py-4 whitespace-nowrap"},lC={key:0,class:"text-sm text-gray-900"},dC={key:1,class:"text-xs text-gray-500"},uC={class:"px-6 py-4 whitespace-nowrap"},cC={class:"px-6 py-4 whitespace-nowrap"},mC={key:0},pC={class:"flex items-center"},gC={class:"w-16 bg-gray-200 rounded-full h-2 mr-2"},vC={class:"text-xs text-gray-600"},fC={class:"text-xs text-gray-500 mt-1"},xC={key:1,class:"text-xs text-gray-500"},bC={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},hC={class:"flex space-x-2"},yC=["onClick"],_C=["onClick"],wC=["onClick"],$C={class:"px-6 py-3 border-t border-gray-200"},kC={class:"flex items-center justify-between"},CC={class:"text-sm text-gray-700"},jC={class:"flex space-x-2"},AC=["disabled"],PC=["disabled"],MC={key:0,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},EC={class:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},SC={class:"px-6 py-4 space-y-4"},DC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},TC=["value"],IC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},LC={key:0},VC={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},FC={class:"flex items-center pt-6"},RC={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},qC=["disabled"],zC={key:0},NC={key:1},UC={__name:"ProductManagement",setup(d){const{get:m,put:T,delete:M}=le(),u=be(),r=V(!1),h=V(!1),A=V(!1),n=V(null),y=V([]),j=V([]),E=V(1),f=V(0),_=V(20),I=me({search:"",category:"",status:""}),F=V([{label:"Total produits",value:"0",color:"bg-blue-500",icon:Be},{label:"Actifs",value:"0",color:"bg-green-500",icon:Ge},{label:"Valeur totale",value:"0 FCFA",color:"bg-yellow-500",icon:Ue},{label:"En tombola",value:"0 FCFA",color:"bg-purple-500",icon:Ct}]),C=me({name:"",description:"",price:"",ticket_price:"",category_id:"",sale_mode:"direct",status:"draft",is_featured:!1});Ae(()=>I,()=>{E.value=1,c()},{deep:!0}),Ae(E,()=>{c()});const x=re(()=>Math.ceil(f.value/_.value)),c=async()=>{r.value=!0;try{const k=new URLSearchParams;k.append("page",E.value),k.append("per_page",_.value),I.search&&k.append("search",I.search),I.category&&k.append("category_id",I.category),I.status&&k.append("status",I.status);const D=await m(`/admin/products?${k.toString()}`);D&&D.data&&(y.value=D.data.products||[],f.value=D.data.pagination?.total||0,j.value=D.data.categories||[],D.data.stats&&(F.value[0].value=D.data.stats.total?.toString()||"0",F.value[1].value=D.data.stats.active?.toString()||"0",F.value[2].value=z(D.data.stats.total_value||0)+" FCFA",F.value[3].value=z(D.data.stats.total_lottery_value||0)+" FCFA"))}catch(k){console.error("Erreur lors du chargement des produits:",k),y.value=[]}finally{r.value=!1}},a=async()=>{h.value=!0;try{const k=await T(`/admin/products/${n.value.id}`,C);k&&k.success&&(await c(),A.value=!1,Y(),window.$toast&&window.$toast.success("Produit mis à jour avec succès","✓ Succès"))}catch(k){console.error("Erreur lors de la mise à jour:",k),window.$toast&&window.$toast.error("Erreur lors de la mise à jour","✗ Erreur")}finally{h.value=!1}},v=async k=>{if(confirm("Voulez-vous vraiment supprimer ce produit ? Cette action est irréversible."))try{const D=await M(`/admin/products/${k}`);D&&D.success&&(await c(),window.$toast&&window.$toast.success("Produit supprimé avec succès","✓ Succès"))}catch(D){if(console.error("Erreur lors de la suppression:",D),window.$toast){const g=D.response?.data?.message||"Erreur lors de la suppression";window.$toast.error(g,"✗ Erreur")}}},i=k=>{n.value=k,Object.assign(C,{name:k.name,description:k.description,price:k.price,ticket_price:k.ticket_price,category_id:k.category_id,sale_mode:k.sale_mode,status:k.status,is_featured:k.is_featured||!1}),A.value=!0},$=k=>{u.push(`/admin/products/${k}`)},L=()=>{A.value=!1,Y()},Y=()=>{Object.assign(C,{name:"",description:"",price:"",ticket_price:"",category_id:"",sale_mode:"direct",status:"draft",is_featured:!1}),n.value=null},J=()=>{I.search="",I.category="",I.status="",E.value=1},z=k=>new Intl.NumberFormat("fr-FR").format(k||0),b=k=>({active:"Actif",draft:"Brouillon",completed:"Terminé",cancelled:"Annulé"})[k]||k,q=k=>({active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[k]||"bg-gray-100 text-gray-800",Z=k=>({direct:"Vente directe",lottery:"Tombola"})[k]||k;return ue(()=>{c()}),(k,D)=>(t(),s("div",null,[e("div",Dk,[D[14]||(D[14]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des produits"),e("p",{class:"mt-2 text-gray-600"},"Gérez les produits disponibles pour les tombolas")],-1)),e("button",{onClick:c,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center"},[p(l(Ne),{class:Q(["w-5 h-5 mr-2",r.value?"animate-spin":""])},null,8,["class"]),D[13]||(D[13]=U(" Actualiser ",-1))])]),e("div",Tk,[(t(!0),s(te,null,se(F.value,g=>(t(),s("div",{key:g.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},[e("div",Ik,[e("div",{class:Q(["p-3 rounded-lg",g.color])},[(t(),de(Ce(g.icon),{class:"w-6 h-6 text-white"}))],2),e("div",Lk,[e("p",Vk,o(g.label),1),e("p",Fk,o(g.value),1)])])]))),128))]),e("div",Rk,[e("div",qk,[e("div",null,[D[15]||(D[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":D[0]||(D[0]=g=>I.search=g),type:"text",placeholder:"Nom du produit...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,I.search]])]),e("div",null,[D[17]||(D[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),G(e("select",{"onUpdate:modelValue":D[1]||(D[1]=g=>I.category=g),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[D[16]||(D[16]=e("option",{value:""},"Toutes les catégories",-1)),(t(!0),s(te,null,se(j.value,g=>(t(),s("option",{key:g.id,value:g.id},o(g.name),9,zk))),128))],512),[[ne,I.category]])]),e("div",null,[D[19]||(D[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":D[2]||(D[2]=g=>I.status=g),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},D[18]||(D[18]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"completed"},"Terminé",-1)]),512),[[ne,I.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:J,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),e("div",Nk,[r.value?(t(),s("div",Uk,D[20]||(D[20]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des produits...",-1)]))):(t(),s("div",Bk,[e("div",Ok,[e("div",Hk,[e("h3",Gk,o(f.value)+" produit"+o(f.value>1?"s":""),1)])]),e("div",Kk,[e("table",Wk,[D[21]||(D[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Catégorie "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Prix "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Marchand "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tombola "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Zk,[(t(!0),s(te,null,se(y.value,g=>(t(),s("tr",{key:g.id,class:"hover:bg-gray-50"},[e("td",Xk,[e("div",Jk,[e("div",Yk,[p(ze,{src:g.image_url||g.main_image,alt:g.name,"container-class":"w-16 h-16 rounded-lg","image-class":"w-full h-full object-cover rounded-lg"},null,8,["src","alt"])]),e("div",Qk,[e("div",eC,o(g.name),1),e("div",tC,o(g.description),1)])])]),e("td",sC,[e("span",oC,o(g.category?.name||"N/A"),1)]),e("td",rC,[e("div",aC,o(z(g.price))+" FCFA",1),g.sale_mode==="lottery"?(t(),s("div",nC,o(z(g.ticket_price))+" FCFA/ticket ",1)):R("",!0)]),e("td",iC,[g.merchant?(t(),s("div",lC,o(g.merchant.name),1)):R("",!0),g.merchant?(t(),s("div",dC,o(g.merchant.email),1)):R("",!0)]),e("td",uC,[e("span",{class:Q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",q(g.status)])},o(b(g.status)),3)]),e("td",cC,[g.lottery?(t(),s("div",mC,[e("div",pC,[e("div",gC,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:Me({width:g.lottery.progress+"%"})},null,4)]),e("span",vC,o(g.lottery.progress)+"%",1)]),e("div",fC,o(g.lottery.sold_tickets)+"/"+o(g.lottery.total_tickets)+" tickets ",1)])):(t(),s("span",xC,o(Z(g.sale_mode)),1))]),e("td",bC,[e("div",hC,[e("button",{onClick:w=>i(g),class:"text-blue-600 hover:text-blue-900",title:"Modifier"},[p(l(yt),{class:"w-4 h-4"})],8,yC),e("button",{onClick:w=>$(g.id),class:"text-blue-600 hover:text-blue-900",title:"Voir"},[p(l(Fe),{class:"w-4 h-4"})],8,_C),e("button",{onClick:w=>v(g.id),class:"text-red-600 hover:text-red-900",title:"Supprimer"},[p(l(bt),{class:"w-4 h-4"})],8,wC)])])]))),128))])])]),e("div",$C,[e("div",kC,[e("div",CC," Affichage de "+o((E.value-1)*_.value+1)+" à "+o(Math.min(E.value*_.value,f.value))+" sur "+o(f.value)+" résultats ",1),e("div",jC,[e("button",{onClick:D[3]||(D[3]=g=>E.value--),disabled:E.value===1,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Précédent ",8,AC),e("button",{onClick:D[4]||(D[4]=g=>E.value++),disabled:E.value===x.value,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Suivant ",8,PC)])])])]))]),A.value?(t(),s("div",MC,[e("div",EC,[D[31]||(D[31]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"}," Modifier le produit ")],-1)),e("form",{onSubmit:D[12]||(D[12]=xe(g=>a(),["prevent"]))},[e("div",SC,[e("div",DC,[e("div",null,[D[22]||(D[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),G(e("input",{"onUpdate:modelValue":D[5]||(D[5]=g=>C.name=g),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,C.name]])]),e("div",null,[D[24]||(D[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),G(e("select",{"onUpdate:modelValue":D[6]||(D[6]=g=>C.category_id=g),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[D[23]||(D[23]=e("option",{value:""},"Sélectionner une catégorie",-1)),(t(!0),s(te,null,se(j.value,g=>(t(),s("option",{key:g.id,value:g.id},o(g.name),9,TC))),128))],512),[[ne,C.category_id]])])]),e("div",null,[D[25]||(D[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),G(e("textarea",{"onUpdate:modelValue":D[7]||(D[7]=g=>C.description=g),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,C.description]])]),e("div",IC,[e("div",null,[D[26]||(D[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix du produit (FCFA) *",-1)),G(e("input",{"onUpdate:modelValue":D[8]||(D[8]=g=>C.price=g),type:"number",required:"",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,C.price,void 0,{number:!0}]])]),C.sale_mode==="lottery"?(t(),s("div",LC,[D[27]||(D[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix par ticket (FCFA)",-1)),G(e("input",{"onUpdate:modelValue":D[9]||(D[9]=g=>C.ticket_price=g),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,C.ticket_price,void 0,{number:!0}]])])):R("",!0)]),e("div",VC,[e("div",null,[D[29]||(D[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":D[10]||(D[10]=g=>C.status=g),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},D[28]||(D[28]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"completed"},"Terminé",-1),e("option",{value:"cancelled"},"Annulé",-1)]),512),[[ne,C.status]])]),e("div",FC,[G(e("input",{"onUpdate:modelValue":D[11]||(D[11]=g=>C.is_featured=g),type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[_e,C.is_featured]]),D[30]||(D[30]=e("label",{class:"ml-2 text-sm text-gray-700"},"Produit en vedette",-1))])])]),e("div",RC,[e("button",{type:"button",onClick:L,class:"px-4 py-2 text-gray-600 hover:text-gray-900"}," Annuler "),e("button",{type:"submit",disabled:h.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"},[h.value?(t(),s("span",zC,"Enregistrement...")):(t(),s("span",NC,"Modifier"))],8,qC)])],32)])])):R("",!0)]))}},BC=$e(UC,[["__scopeId","data-v-3bfa4d60"]]),OC={class:"mb-8"},HC={class:"flex justify-between items-center"},GC=["disabled"],KC={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},WC={class:"flex items-center"},ZC={class:"ml-4"},XC={class:"text-sm font-medium text-gray-600"},JC={class:"text-2xl font-bold text-gray-900"},YC={class:"mb-8"},QC={class:"border-b border-gray-200"},ej={class:"flex space-x-8"},tj=["onClick"],sj={key:0,class:"ml-2 bg-gray-100 text-gray-600 py-1 px-2 rounded-full text-xs"},oj={class:"mt-4 flex justify-between items-center"},rj={class:"flex space-x-3"},aj={class:"text-sm text-gray-500"},nj={key:0,class:"text-center py-12"},ij={key:1},lj={class:"bg-white rounded-lg shadow-sm border border-gray-200"},dj={key:0,class:"text-center py-12"},uj={key:1,class:"divide-y divide-gray-200"},cj={class:"flex items-center justify-between"},mj={class:"flex items-center space-x-4"},pj=["src","alt"],gj={class:"text-lg font-semibold text-gray-900"},vj={class:"text-sm text-gray-600"},fj={class:"flex items-center space-x-4 mt-2"},xj={class:"text-sm font-medium text-blue-600"},bj={class:"text-sm text-gray-500"},hj={class:"flex space-x-3"},yj=["onClick"],_j=["onClick","disabled"],wj={key:0},$j={key:1},kj={class:"mt-4"},Cj={class:"w-full bg-gray-200 rounded-full h-2"},jj={key:2},Aj={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Pj={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Mj={class:"flex space-x-2"},Ej={class:"overflow-x-auto"},Sj={class:"min-w-full divide-y divide-gray-200"},Dj={class:"bg-white divide-y divide-gray-200"},Tj={class:"px-6 py-4 whitespace-nowrap"},Ij={class:"flex items-center"},Lj=["src","alt"],Vj={class:"ml-4"},Fj={class:"text-sm font-medium text-gray-900"},Rj={class:"text-sm text-gray-500"},qj={class:"px-6 py-4 whitespace-nowrap"},zj={class:"text-sm text-gray-900"},Nj={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},Uj={class:"text-xs text-gray-500 mt-1"},Bj={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Oj={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Hj={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Gj={class:"flex space-x-2"},Kj=["onClick"],Wj=["onClick"],Zj={key:3},Xj={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Jj={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Yj={class:"flex space-x-2"},Qj={class:"divide-y divide-gray-200"},eA={class:"flex items-start justify-between"},tA={class:"flex items-start space-x-4"},sA=["src","alt"],oA={class:"text-lg font-semibold text-gray-900"},rA={class:"text-sm text-gray-600"},aA={class:"flex items-center space-x-4 mt-2"},nA={class:"text-sm text-gray-500"},iA={class:"text-sm font-medium text-blue-600"},lA={class:"text-right"},dA={class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800"},uA={class:"mt-2 text-sm text-gray-600"},cA={key:0,class:"mt-4 bg-green-50 p-4 rounded-lg"},mA={class:"flex items-center justify-between"},pA={class:"flex items-center"},gA={class:"font-semibold text-green-900"},vA={class:"text-sm text-green-800"},fA={class:"text-right"},xA={class:"text-sm text-green-800"},bA={class:"text-sm text-green-600"},hA={class:"flex justify-end space-x-2 mt-4"},yA=["onClick"],_A=["onClick"],wA={key:4,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},$A={class:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},kA={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},CA={class:"text-lg font-semibold text-gray-900"},jA={class:"px-6 py-4"},AA={class:"mb-4"},PA={class:"overflow-x-auto"},MA={class:"min-w-full divide-y divide-gray-200"},EA={class:"bg-white divide-y divide-gray-200"},SA={class:"px-6 py-4 whitespace-nowrap"},DA={class:"text-sm font-medium text-gray-900"},TA={class:"text-sm text-gray-500"},IA={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},LA={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},VA={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},FA={key:5,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},RA={class:"bg-white rounded-lg max-w-md w-full mx-4"},qA={class:"px-6 py-4"},zA={class:"text-gray-600 mb-4"},NA={class:"font-semibold"},UA={class:"bg-gray-50 p-4 rounded-lg mb-4"},BA={class:"text-sm text-gray-600"},OA={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},HA=["disabled"],GA={key:0},KA={key:1},WA={__name:"LotteryManagement",setup(d){const{get:m,post:T}=le(),M=V(!1),u=V("pending"),r=V(!1),h=V(!1),A=V(!1),n=V(null),y=V(""),j=V({}),E=V([]),f=V(1),_=V(1),I=V(20),F=re(()=>[{key:"pending",label:"Tirages en attente",count:j.value.pending_draws||0},{key:"active",label:"Tombolas actives",count:j.value.active_lotteries||0},{key:"completed",label:"Historique",count:j.value.completed_lotteries||0}]),C=re(()=>[{label:"Tirages en attente",value:j.value.pending_draws||"0",color:"bg-yellow-500",icon:Pe},{label:"Actives",value:j.value.active_lotteries||"0",color:"bg-blue-500",icon:Ge},{label:"Revenus totaux",value:z(j.value.total_revenue||0)+" FCFA",color:"bg-green-500",icon:Ue},{label:"Taux de participation",value:Math.round(j.value.average_participation_rate||0)+"%",color:"bg-purple-500",icon:Ct}]),x=me({search:""}),c=me({search:"",period:""}),a=re(()=>E.value.filter(W=>W.status==="active"&&!W.is_drawn&&new Date(W.end_date)<=new Date)),v=re(()=>E.value.filter(W=>W.status==="active"&&new Date(W.end_date)>new Date)),i=re(()=>E.value.filter(W=>W.status==="completed"||W.is_drawn)),$=re(()=>{let W=v.value;if(x.search){const K=x.search.toLowerCase();W=W.filter(O=>O.product?.title?.toLowerCase().includes(K)||O.product?.name?.toLowerCase().includes(K)||O.product?.description?.toLowerCase().includes(K)||O.lottery_number?.toLowerCase().includes(K))}return W}),L=re(()=>{let W=i.value;if(c.search){const K=c.search.toLowerCase();W=W.filter(O=>O.product?.title?.toLowerCase().includes(K)||O.product?.name?.toLowerCase().includes(K)||O.winner?.first_name?.toLowerCase().includes(K)||O.winner?.last_name?.toLowerCase().includes(K)||O.winner?.email?.toLowerCase().includes(K)||O.lottery_number?.toLowerCase().includes(K))}if(c.period){const K=new Date,O=c.period;W=W.filter(ae=>{const ce=new Date(ae.draw_date||ae.created_at);if(O==="week"){const ge=new Date(K.getTime()-6048e5);return ce>=ge}else if(O==="month"){const ge=new Date(K.getFullYear(),K.getMonth()-1,K.getDate());return ce>=ge}else if(O==="quarter"){const ge=new Date(K.getFullYear(),K.getMonth()-3,K.getDate());return ce>=ge}return!0})}return W}),Y=re(()=>{if(!n.value?.participants_list)return[];let W=n.value.participants_list;if(y.value){const K=y.value.toLowerCase();W=W.filter(O=>{const ae=O.user;return`${ae?.first_name||""} ${ae?.last_name||""}`.toLowerCase().includes(K)||ae?.email?.toLowerCase().includes(K)})}return W}),J=W=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(W)),z=W=>new Intl.NumberFormat("fr-FR").format(W||0);Ae(u,()=>{q()});const b=async()=>{try{const W=await m("/admin/lotteries/statistics");W&&(j.value=W)}catch(W){console.error("Erreur lors du chargement des statistiques:",W)}},q=async()=>{M.value=!0;try{const W=new URLSearchParams;W.append("per_page",I.value),W.append("page",f.value),u.value==="active"||u.value==="pending"?(W.append("status","active"),W.append("is_drawn","false")):u.value==="completed"&&W.append("is_drawn","true");const K=await m(`/admin/lotteries?${W.toString()}`);K&&K.data&&(E.value=K.data.map(O=>({...O,progress:O.sold_tickets&&O.total_tickets?Math.round(O.sold_tickets/O.total_tickets*100):0})),f.value=K.current_page||1,_.value=K.last_page||1)}catch(W){console.error("Erreur lors du chargement des tombolas:",W),E.value=[]}finally{M.value=!1}},Z=async()=>{await Promise.all([b(),q()])},k=async W=>{try{const K=await m(`/admin/lotteries/${W.id}`);K&&(n.value=K,h.value=!0)}catch(K){console.error("Erreur lors du chargement des participants:",K),window.$toast&&window.$toast.error("Erreur lors du chargement des participants","✗ Erreur")}},D=W=>{n.value=W,A.value=!0},g=async()=>{r.value=!0;try{const W=await T(`/admin/lotteries/${n.value.id}/draw`);W&&W.success&&(window.$toast&&window.$toast.success("Tirage effectué avec succès","✓ Succès"),await Z(),u.value="completed")}catch(W){if(console.error("Erreur lors du tirage:",W),window.$toast){const K=W.response?.data?.message||"Erreur lors du tirage";window.$toast.error(K,"✗ Erreur")}}finally{r.value=!1,A.value=!1,n.value=null}},w=W=>{console.log("Edit lottery:",W.id)},P=async W=>{try{const K=await m(`/admin/lotteries/${W.id}`);K&&console.log("Draw details:",K)}catch(K){console.error("Erreur lors du chargement des détails:",K)}},N=async W=>{try{const K=await m(`/admin/lotteries/${W.id}/export`);if(K){const O=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),ae=URL.createObjectURL(O),ce=document.createElement("a");ce.href=ae,ce.download=`lottery-${W.lottery_number}-export.json`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(ae),window.$toast&&window.$toast.success("Export téléchargé avec succès","✓ Succès")}}catch(K){console.error("Erreur lors de l'export:",K),window.$toast&&window.$toast.error("Erreur lors de l'export","✗ Erreur")}},X=async()=>{try{const W=await m("/admin/lotteries/eligible-for-draw");W&&(console.log("Eligible draws:",W),window.$toast&&window.$toast.info(`${W.count} tirages disponibles`,"ℹ Info"))}catch(W){console.error("Erreur lors du chargement des tirages disponibles:",W)}};return ue(()=>{b(),q()}),(W,K)=>(t(),s("div",null,[e("div",OC,[e("div",HC,[K[8]||(K[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des tombolas"),e("p",{class:"mt-2 text-gray-600"},"Gérez les tirages et suivez les résultats des tombolas")],-1)),e("button",{onClick:Z,disabled:M.value,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:bg-gray-400"},[(t(),s("svg",{class:Q(["w-4 h-4 mr-2",M.value?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K[6]||(K[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),K[7]||(K[7]=U(" Actualiser ",-1))],8,GC)])]),e("div",KC,[(t(!0),s(te,null,se(C.value,O=>(t(),s("div",{key:O.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},[e("div",WC,[e("div",{class:Q(["p-3 rounded-lg",O.color])},[(t(),de(Ce(O.icon),{class:"w-6 h-6 text-white"}))],2),e("div",ZC,[e("p",XC,o(O.label),1),e("p",JC,o(O.value),1)])])]))),128))]),e("div",YC,[e("div",QC,[e("nav",ej,[(t(!0),s(te,null,se(F.value,O=>(t(),s("button",{key:O.key,onClick:ae=>u.value=O.key,class:Q(["py-2 px-1 border-b-2 font-medium text-sm",u.value===O.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[U(o(O.label)+" ",1),O.count!==void 0?(t(),s("span",sj,o(O.count),1)):R("",!0)],10,tj))),128))])]),e("div",oj,[e("div",rj,[e("button",{onClick:X,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700"},[K[9]||(K[9]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),U(" Tirages disponibles ("+o(j.value.pending_draws||0)+") ",1)])]),e("div",aj," Dernière mise à jour : "+o(new Date().toLocaleTimeString("fr-FR")),1)])]),M.value?(t(),s("div",nj,K[10]||(K[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des tombolas...",-1)]))):u.value==="pending"?(t(),s("div",ij,[e("div",lj,[K[13]||(K[13]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tirages en attente"),e("p",{class:"text-sm text-gray-600"},"Tombolas prêtes pour le tirage")],-1)),a.value.length===0?(t(),s("div",dj,[p(l(Pe),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),K[11]||(K[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun tirage en attente",-1)),K[12]||(K[12]=e("p",{class:"text-gray-600"},"Toutes les tombolas sont à jour",-1))])):(t(),s("div",uj,[(t(!0),s(te,null,se(a.value,O=>(t(),s("div",{key:O.id,class:"p-6 hover:bg-gray-50"},[e("div",cj,[e("div",mj,[e("img",{src:O.product?.image_url||O.product?.main_image||"/images/placeholder.jpg",alt:O.product?.title||O.product?.name,class:"w-16 h-16 rounded-lg object-cover"},null,8,pj),e("div",null,[e("h4",gj,o(O.product?.title||O.product?.name),1),e("p",vj,o(O.product?.description),1),e("div",fj,[e("span",xj,o(O.sold_tickets||0)+"/"+o(O.total_tickets)+" tickets vendus ",1),e("span",bj," Tirage prévu: "+o(J(O.draw_date||O.end_date)),1)])])]),e("div",hj,[e("button",{onClick:ae=>k(O),class:"px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Voir participants ",8,yj),e("button",{onClick:ae=>D(O),disabled:r.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[r.value?(t(),s("span",wj,"Tirage...")):(t(),s("span",$j,"Effectuer le tirage"))],8,_j)])]),e("div",kj,[e("div",Cj,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Me({width:O.progress+"%"})},null,4)])])]))),128))]))])])):u.value==="active"?(t(),s("div",jj,[e("div",Aj,[e("div",Pj,[K[14]||(K[14]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tombolas actives"),e("p",{class:"text-sm text-gray-600"},"Tombolas en cours de vente")],-1)),e("div",Mj,[G(e("input",{"onUpdate:modelValue":K[0]||(K[0]=O=>x.search=O),type:"text",placeholder:"Rechercher...",class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,x.search]])])]),e("div",Ej,[e("table",Sj,[K[15]||(K[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Progression "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Revenus "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date de tirage "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Dj,[(t(!0),s(te,null,se($.value,O=>(t(),s("tr",{key:O.id,class:"hover:bg-gray-50"},[e("td",Tj,[e("div",Ij,[e("img",{src:O.product?.image_url||O.product?.main_image||"/images/placeholder.jpg",alt:O.product?.title||O.product?.name,class:"w-12 h-12 rounded-lg object-cover"},null,8,Lj),e("div",Vj,[e("div",Fj,o(O.product?.title||O.product?.name),1),e("div",Rj,o(z(O.product?.price||0))+" FCFA",1)])])]),e("td",qj,[e("div",zj,o(O.progress)+"%",1),e("div",Nj,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:Me({width:O.progress+"%"})},null,4)]),e("div",Uj,o(O.sold_tickets||0)+"/"+o(O.total_tickets),1)]),e("td",Bj,o(z((O.sold_tickets||0)*(O.ticket_price||0)))+" FCFA ",1),e("td",Oj,o(J(O.draw_date||O.end_date)),1),e("td",Hj,[e("div",Gj,[e("button",{onClick:ae=>w(O),class:"text-blue-600 hover:text-blue-900",title:"Modifier"},[p(l(yt),{class:"w-4 h-4"})],8,Kj),e("button",{onClick:ae=>k(O),class:"text-blue-600 hover:text-blue-900",title:"Voir participants"},[p(l(pt),{class:"w-4 h-4"})],8,Wj)])])]))),128))])])])])])):u.value==="completed"?(t(),s("div",Zj,[e("div",Xj,[e("div",Jj,[K[17]||(K[17]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tirages terminés"),e("p",{class:"text-sm text-gray-600"},"Historique des tombolas terminées")],-1)),e("div",Yj,[G(e("input",{"onUpdate:modelValue":K[1]||(K[1]=O=>c.search=O),type:"text",placeholder:"Rechercher...",class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,c.search]]),G(e("select",{"onUpdate:modelValue":K[2]||(K[2]=O=>c.period=O),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},K[16]||(K[16]=[e("option",{value:""},"Toutes les périodes",-1),e("option",{value:"week"},"Cette semaine",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1)]),512),[[ne,c.period]])])]),e("div",Qj,[(t(!0),s(te,null,se(L.value,O=>(t(),s("div",{key:O.id,class:"p-6"},[e("div",eA,[e("div",tA,[e("img",{src:O.product?.image_url||O.product?.main_image||"/images/placeholder.jpg",alt:O.product?.title||O.product?.name,class:"w-16 h-16 rounded-lg object-cover"},null,8,sA),e("div",null,[e("h4",oA,o(O.product?.title||O.product?.name),1),e("p",rA,o(O.product?.description),1),e("div",aA,[e("span",nA," Tirage effectué: "+o(J(O.draw_date||O.updated_at)),1),e("span",iA," Revenus: "+o(z((O.sold_tickets||0)*(O.ticket_price||0)))+" FCFA ",1)])])]),e("div",lA,[e("span",dA,[p(l(Te),{class:"w-4 h-4 mr-1"}),K[18]||(K[18]=U(" Terminé ",-1))]),e("div",uA," Gagnant: "+o(O.winner?`${O.winner.first_name} ${O.winner.last_name}`:"Non réclamé"),1)])]),O.winner?(t(),s("div",cA,[e("div",mA,[e("div",pA,[p(l(Ge),{class:"w-5 h-5 text-green-600 mr-2"}),e("div",null,[e("p",gA,o(O.winner.first_name)+" "+o(O.winner.last_name),1),e("p",vA,"Ticket gagnant: #"+o(O.winning_ticket_number||"N/A"),1)])]),e("div",fA,[e("p",xA,o(O.winner.email),1),e("p",bA,o(O.winner.phone),1)])])])):R("",!0),e("div",hA,[e("button",{onClick:ae=>P(O),class:"px-3 py-1 text-sm text-blue-600 hover:text-blue-800"}," Voir détails ",8,yA),e("button",{onClick:ae=>N(O),class:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800"}," Exporter ",8,_A)])]))),128))])])])):R("",!0),h.value?(t(),s("div",wA,[e("div",$A,[e("div",kA,[e("h3",CA," Participants - "+o(n.value?.product?.title||n.value?.product?.name),1),e("button",{onClick:K[3]||(K[3]=O=>h.value=!1),class:"text-gray-400 hover:text-gray-600"},[p(l(Re),{class:"w-6 h-6"})])]),e("div",jA,[e("div",AA,[G(e("input",{"onUpdate:modelValue":K[4]||(K[4]=O=>y.value=O),type:"text",placeholder:"Rechercher un participant...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[ee,y.value]])]),e("div",PA,[e("table",MA,[K[19]||(K[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tickets "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total payé "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date d'achat ")])],-1)),e("tbody",EA,[(t(!0),s(te,null,se(Y.value,O=>(t(),s("tr",{key:O.user?.id,class:"hover:bg-gray-50"},[e("td",SA,[e("div",null,[e("div",DA,o(O.user?.first_name)+" "+o(O.user?.last_name),1),e("div",TA,o(O.user?.email),1)])]),e("td",IA,o(O.tickets_count),1),e("td",LA,o(z(O.total_spent))+" FCFA ",1),e("td",VA,o(J(O.tickets?.[0]?.purchased_at||O.tickets?.[0]?.created_at)),1)]))),128))])])])])])])):R("",!0),A.value?(t(),s("div",FA,[e("div",RA,[K[25]||(K[25]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Confirmer le tirage")],-1)),e("div",qA,[e("p",zA,[K[20]||(K[20]=U(" Êtes-vous sûr de vouloir effectuer le tirage pour ",-1)),e("span",NA,o(n.value?.product?.title||n.value?.product?.name),1),K[21]||(K[21]=U(" ? ",-1))]),e("div",UA,[e("p",BA,[U(" • "+o(n.value?.sold_tickets||0)+" tickets vendus",1),K[22]||(K[22]=e("br",null,null,-1)),U(" • "+o(n.value?.participants_list?.length||0)+" participants",1),K[23]||(K[23]=e("br",null,null,-1)),U(" • Revenus: "+o(z((n.value?.sold_tickets||0)*(n.value?.ticket_price||0)))+" FCFA ",1)])]),K[24]||(K[24]=e("p",{class:"text-sm text-red-600"}," ⚠️ Cette action est irréversible. Le gagnant sera choisi aléatoirement. ",-1))]),e("div",OA,[e("button",{onClick:K[5]||(K[5]=O=>A.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-900"}," Annuler "),e("button",{onClick:g,disabled:r.value,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400"},[r.value?(t(),s("span",GA,"Tirage en cours...")):(t(),s("span",KA,"Effectuer le tirage"))],8,HA)])])])):R("",!0)]))}},ZA={name:"PhoneInputAdmin",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Numéro de téléphone"},preferredCountries:{type:Array,default:()=>["ga","cm","ci","cg","cf","td","gq","fr"]},initialCountry:{type:String,default:"ga"}},data(){return{phoneNumber:this.modelValue,iti:null}},watch:{phoneNumber(d){this.$emit("update:modelValue",d)},modelValue(d){d!==this.phoneNumber&&(this.phoneNumber=d,this.iti&&this.$refs.phoneInput&&d&&this.iti.setNumber(d))}},mounted(){this.initializeIntlTelInput()},beforeUnmount(){this.iti&&this.iti.destroy()},methods:{initializeIntlTelInput(){const d=this.$refs.phoneInput;this.iti=ms(d,{preferredCountries:this.preferredCountries,initialCountry:this.initialCountry,separateDialCode:!0,customPlaceholder:(m,T)=>m}),d.addEventListener("input",m=>{this.phoneNumber=m.target.value,this.emitAllData()}),d.addEventListener("countrychange",()=>{this.emitAllData()}),setTimeout(()=>{this.modelValue&&this.iti.setNumber(this.modelValue),this.emitAllData()},100)},emitAllData(){if(this.iti&&this.iti.getSelectedCountryData)try{const d=this.iti.getSelectedCountryData(),m=this.phoneNumber||"";let T="";m.trim()&&(m.startsWith("+")?T=m:T=`+${d.dialCode}${m}`);const M=this.validatePhoneNumber(m,d);this.$emit("update:modelValue",T),this.$emit("phone-change",{number:m,fullNumber:T,countryCode:d.dialCode,countryIso2:d.iso2,isValid:M})}catch(d){console.warn("PhoneInputAdmin: Error emitting data",d)}},validatePhoneNumber(d,m){if(!d||!d.trim())return!1;const M={ga:{min:7,max:8},cm:{min:8,max:9},ci:{min:8,max:10},fr:{min:9,max:10},ca:{min:10,max:10},cg:{min:8,max:9},cf:{min:8,max:8},td:{min:8,max:8},gq:{min:9,max:9}}[m.iso2]||{min:7,max:15},u=d.replace(/[^\d]/g,"");return u.length>=M.min&&u.length<=M.max},getNumber(){if(this.iti&&this.iti.getSelectedCountryData){const d=this.iti.getSelectedCountryData(),m=this.phoneNumber||"";if(m.trim())return m.startsWith("+")?m:`+${d.dialCode}${m}`}return""},isValidNumber(){if(this.iti&&this.iti.getSelectedCountryData){const d=this.iti.getSelectedCountryData();return this.validatePhoneNumber(this.phoneNumber,d)}return!1}}},XA={class:"phone-input-wrapper"},JA=["placeholder"];function YA(d,m,T,M,u,r){return t(),s("div",XA,[e("input",{ref:"phoneInput",type:"tel",class:"admin-input",placeholder:T.placeholder},null,8,JA)])}const bs=$e(ZA,[["render",YA],["__scopeId","data-v-2c35b97e"]]),QA={class:"space-y-6"},eP={class:"flex justify-between items-center"},tP={class:"flex space-x-3"},sP={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},oP={class:"lg:col-span-1"},rP={class:"admin-card space-y-1"},aP=["onClick"],nP={class:"lg:col-span-3"},iP={class:"admin-card"},lP={key:0,class:"p-6"},dP={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},uP={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},cP={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mP=["value"],pP=["value"],gP={class:"flex justify-end"},vP=["disabled"],fP={key:1,class:"p-6"},xP={class:"admin-card-header mb-6"},bP={class:"flex justify-between items-center"},hP={class:"mb-6"},yP={class:"w-full md:w-1/2 lg:w-1/3"},_P={class:"overflow-x-auto"},wP={class:"min-w-full divide-y divide-gray-200"},$P={class:"bg-white divide-y divide-gray-200"},kP={class:"px-6 py-4 whitespace-nowrap"},CP={class:"flex items-center"},jP=["src","alt"],AP={class:"text-sm font-medium text-gray-900"},PP={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},MP={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},EP={class:"px-6 py-4 whitespace-nowrap"},SP={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},DP={class:"flex space-x-2"},TP=["onClick"],IP=["onClick"],LP=["onClick"],VP={key:2,class:"p-6"},FP={class:"admin-card-header mb-6"},RP={class:"flex justify-between items-center"},qP={class:"mb-6"},zP={class:"w-full md:w-1/2 lg:w-1/3"},NP={class:"overflow-x-auto"},UP={class:"min-w-full divide-y divide-gray-200"},BP={class:"bg-white divide-y divide-gray-200"},OP={class:"px-6 py-4 whitespace-nowrap"},HP={class:"flex items-center"},GP={class:"text-2xl mr-3"},KP={class:"text-sm font-medium text-gray-900"},WP={class:"text-sm text-gray-500"},ZP={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},XP={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},JP={class:"px-6 py-4 whitespace-nowrap"},YP={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},QP={class:"flex space-x-2"},eM=["onClick"],tM=["onClick"],sM=["onClick"],oM={key:3,class:"p-6"},rM={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},aM={class:"space-y-4"},nM={class:"space-y-3"},iM={class:"flex items-center"},lM={class:"flex items-center space-x-2"},dM={class:"font-medium text-gray-900"},uM={key:0,class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},cM={key:1,class:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full"},mM={class:"text-sm text-gray-600"},pM={class:"flex items-center space-x-3"},gM={class:"relative inline-flex items-center cursor-pointer"},vM=["onUpdate:modelValue"],fM=["onClick","disabled"],xM={class:"flex justify-end"},bM=["disabled"],hM={key:4,class:"p-6"},yM={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},wM={class:"space-y-4"},$M={class:"space-y-3"},kM={class:"flex items-center justify-between"},CM={class:"relative inline-flex items-center cursor-pointer"},jM={class:"flex items-center justify-between"},AM={class:"relative inline-flex items-center cursor-pointer"},PM={class:"flex justify-end"},MM=["disabled"],EM={key:5,class:"p-6"},SM={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},DM={class:"space-y-4"},TM={class:"space-y-3"},IM={class:"font-medium text-gray-900"},LM={class:"text-sm text-gray-600"},VM={class:"relative inline-flex items-center cursor-pointer"},FM=["onUpdate:modelValue"],RM={class:"flex justify-end"},qM=["disabled"],zM={key:6,class:"p-6"},NM={class:"space-y-6"},UM={class:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg"},BM={class:"flex items-center justify-between"},OM={class:"relative inline-flex items-center cursor-pointer"},HM={key:0,class:"mt-4"},GM={class:"space-y-4"},KM={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},WM=["disabled"],ZM=["disabled"],XM=["disabled"],JM=["disabled"],YM={class:"flex justify-end"},QM=["disabled"],eE={key:0,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},tE={class:"bg-white rounded-lg max-w-md w-full mx-4"},sE={class:"px-6 py-4 border-b border-gray-200"},oE={class:"text-lg font-semibold text-gray-900"},rE={class:"px-6 py-4 space-y-4"},aE={class:"flex items-center"},nE={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},iE=["disabled"],lE={key:0},dE={key:1},uE={key:1,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},cE={class:"bg-white rounded-lg max-w-md w-full mx-4"},mE={class:"px-6 py-4 border-b border-gray-200"},pE={class:"text-lg font-semibold text-gray-900"},gE={class:"px-6 py-4 space-y-4"},vE={class:"flex items-center"},fE={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},xE=["disabled"],bE={key:0},hE={key:1},yE={key:2,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},_E={class:"bg-white rounded-lg max-w-2xl w-full mx-4"},wE={class:"px-6 py-4 border-b border-gray-200"},$E={class:"text-lg font-semibold text-gray-900"},kE={class:"px-6 py-4 space-y-6"},CE={key:0},jE={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},AE={key:1},PE={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ME={key:2},EE={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},SE={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},DE=["disabled"],TE={key:0},IE={key:1},LE={__name:"Settings",setup(d){const{get:m,post:T,put:M}=le(),u=V(!1),r=V("general"),h=[{id:"general",name:"Général",icon:Ze},{id:"countries",name:"Pays",icon:Gs},{id:"languages",name:"Langues",icon:Ws},{id:"payment",name:"Paiements",icon:Ue},{id:"lottery",name:"Tombolas",icon:Ye},{id:"notifications",name:"Notifications",icon:ct},{id:"maintenance",name:"Maintenance",icon:Ys}],A=me({app_name:"",app_url:"",app_description:"",contact_email:"",contact_phone:"",default_language:"fr",default_country:"GA"}),n=me({default_currency:"XAF",platform_commission:0}),y=V([{id:"ebilling",name:"eBilling",description:"Passerelle eBilling (Airtel Money, Moov Money)",icon:it,active:!0,type:"gateway",config:{merchant_id:"",api_key:"",secret_key:"",environment:"sandbox"}},{id:"airtel_money",name:"Airtel Money",description:"Paiement mobile via Airtel Money (eBilling)",icon:it,active:!0,type:"mobile_money",gateway:"ebilling"},{id:"moov_money",name:"Moov Money",description:"Paiement mobile via Moov Money (eBilling)",icon:it,active:!0,type:"mobile_money",gateway:"ebilling"},{id:"flutterwave",name:"Flutterwave",description:"Passerelle Flutterwave (Cards, Mobile Money, Bank Transfer)",icon:Ke,active:!1,type:"gateway",config:{public_key:"",secret_key:"",environment:"sandbox"}},{id:"paystack",name:"Paystack",description:"Passerelle Paystack (Cards, USSD, Bank Transfer)",icon:Ke,active:!1,type:"gateway",config:{public_key:"",secret_key:"",environment:"sandbox"}},{id:"bank_transfer",name:"Virement bancaire",description:"Paiement par virement bancaire local",icon:dt,active:!1,type:"bank_transfer"}]),j=me({min_ticket_price:0,max_ticket_price:0,min_participants:0,max_duration_days:0,auto_refund:!1,auto_draw:!1}),E=me({from_email:"",from_name:""}),f=V([]),_=me({maintenance_mode:!1,maintenance_message:""}),I=V([]),F=V([]),C=V(!1),x=V(!1),c=V(!1),a=V(!1),v=V(!1),i=V(null),$=V(null),L=V(null),Y=me({name:"",code:"",currency:"",flag:"",is_active:!0}),J=me({name:"",native_name:"",code:"",flag:"",direction:"ltr",is_active:!0}),z=me({search:""}),b=me({search:""}),q=re(()=>I.value.filter(H=>H.is_active)),Z=re(()=>F.value.filter(H=>H.is_active)),k=(H,S,B)=>{H.response?.status===404?(console.info(`API ${S} pas encore implémentée, simulation du succès`),window.$toast&&window.$toast.info(`${B} (API en développement)`,"ℹ️ Développement")):window.$toast&&window.$toast.error(`Erreur lors de ${S.toLowerCase()}`,"✗ Erreur")},D=async()=>{u.value=!0;try{const H=await m("/admin/settings");H&&H.success&&H.data&&(Object.assign(A,H.data.general||{}),Object.assign(n,H.data.payment||{}),Object.assign(j,H.data.lottery||{}),Object.assign(E,H.data.notifications||{}),Object.assign(_,H.data.maintenance||{}),H.data.payment_methods&&y.value.forEach(S=>{const B=H.data.payment_methods.find(Ee=>Ee.id===S.id);B&&(S.active=B.active)}),H.data.countries&&(I.value=H.data.countries),H.data.languages&&(F.value=H.data.languages),H.data.notification_types&&(f.value=H.data.notification_types))}catch(H){console.error("Error loading settings:",H),H.response?.status!==404?window.$toast&&window.$toast.error("Erreur lors du chargement des paramètres","✗ Erreur"):(console.info("API /admin/settings pas encore implémentée, chargement des données par défaut"),Object.assign(A,{app_name:"Koumbaya",app_url:"https://koumbaya.com",app_description:"Plateforme de tombolas en ligne",contact_email:"contact@koumbaya.com",contact_phone:"+241 XX XX XX XX",default_language:"fr",default_country:"GA"}),Object.assign(n,{default_currency:"XAF",platform_commission:5}),Object.assign(j,{min_ticket_price:1e3,max_ticket_price:1e5,min_participants:10,max_duration_days:30,auto_refund:!0,auto_draw:!1}),Object.assign(E,{from_email:"noreply@koumbaya.com",from_name:"Koumbaya"}),Object.assign(_,{maintenance_mode:!1,maintenance_message:"La plateforme est temporairement en maintenance. Nous reviendrons bientôt !"}),I.value=[{id:1,name:"Gabon",code:"GA",currency:"XAF",flag:"https://flagcdn.com/w40/ga.png",is_active:!0},{id:2,name:"France",code:"FR",currency:"EUR",flag:"https://flagcdn.com/w40/fr.png",is_active:!0}],F.value=[{id:1,name:"Français",native_name:"Français",code:"fr",flag:"🇫🇷",direction:"ltr",is_active:!0},{id:2,name:"English",native_name:"English",code:"en",flag:"🇺🇸",direction:"ltr",is_active:!0}],f.value=[{id:"new_user",name:"Nouvel utilisateur",description:"Email de bienvenue aux nouveaux utilisateurs",enabled:!0},{id:"lottery_winner",name:"Gagnant tombola",description:"Notification au gagnant d'une tombola",enabled:!0}])}finally{u.value=!1}},g=async()=>{u.value=!0;try{const H=await M("/admin/settings/general",A);H&&H.success&&window.$toast&&window.$toast.success("Paramètres généraux sauvegardés","✅ Succès")}catch(H){console.error("Error updating general settings:",H),k(H,"/admin/settings/general","Paramètres généraux sauvegardés")}finally{u.value=!1}},w=async()=>{u.value=!0;try{const H=await M("/admin/settings/payment",{...n,payment_methods:y.value});H&&H.success&&window.$toast&&window.$toast.success("Paramètres de paiement sauvegardés","✅ Succès")}catch(H){console.error("Error updating payment settings:",H),window.$toast&&window.$toast.error("Erreur lors de la sauvegarde","✗ Erreur")}finally{u.value=!1}},P=async()=>{u.value=!0;try{const H=await M("/admin/settings/lottery",j);H&&H.success&&window.$toast&&window.$toast.success("Paramètres des tombolas sauvegardés","✅ Succès")}catch(H){console.error("Error updating lottery settings:",H),window.$toast&&window.$toast.error("Erreur lors de la sauvegarde","✗ Erreur")}finally{u.value=!1}},N=async()=>{u.value=!0;try{const H=await M("/admin/settings/notifications",{...E,notification_types:f.value});H&&H.success&&window.$toast&&window.$toast.success("Paramètres de notifications sauvegardés","✅ Succès")}catch(H){console.error("Error updating notification settings:",H),window.$toast&&window.$toast.error("Erreur lors de la sauvegarde","✗ Erreur")}finally{u.value=!1}},X=async()=>{u.value=!0;try{const H=await M("/admin/settings/maintenance",_);H&&H.success&&window.$toast&&window.$toast.success("Paramètres de maintenance sauvegardés","✅ Succès")}catch(H){console.error("Error updating maintenance settings:",H),window.$toast&&window.$toast.error("Erreur lors de la sauvegarde","✗ Erreur")}finally{u.value=!1}},W=async()=>{await D(),window.$toast&&window.$toast.info("Paramètres rechargés","ℹ️ Information")},K=async()=>{u.value=!0;try{const H=await T("/admin/settings/backup");H&&H.success&&window.$toast&&window.$toast.success("Sauvegarde créée avec succès","✅ Sauvegarde")}catch(H){console.error("Error creating backup:",H),window.$toast&&window.$toast.error("Erreur lors de la sauvegarde","✗ Erreur")}finally{u.value=!1}},O=H=>{H.type==="gateway"&&H.config?(L.value=H,v.value=!0):window.$toast&&window.$toast.info(`Configuration non disponible pour ${H.name}`,"ℹ️ Information")},ae=async()=>{if(confirm("Vider le cache de l'application ?")){u.value=!0;try{const H=await T("/admin/settings/cache/clear");H&&H.success&&window.$toast&&window.$toast.success("Cache vidé avec succès","✅ Maintenance")}catch(H){console.error("Error clearing cache:",H),window.$toast&&window.$toast.error("Erreur lors du vidage du cache","✗ Erreur")}finally{u.value=!1}}},ce=async()=>{if(confirm("Optimiser la base de données ? Cette opération peut prendre du temps.")){u.value=!0;try{const H=await T("/admin/settings/database/optimize");H&&H.success&&window.$toast&&window.$toast.success("Base de données optimisée","✅ Maintenance")}catch(H){console.error("Error optimizing database:",H),window.$toast&&window.$toast.error("Erreur lors de l'optimisation","✗ Erreur")}finally{u.value=!1}}},ge=async()=>{u.value=!0;try{const H=await T("/admin/settings/sitemap/generate");H&&H.success&&window.$toast&&window.$toast.success("Sitemap généré avec succès","✅ Maintenance")}catch(H){console.error("Error generating sitemap:",H),window.$toast&&window.$toast.error("Erreur lors de la génération du sitemap","✗ Erreur")}finally{u.value=!1}},ve=async()=>{u.value=!0;try{const H=await T("/admin/settings/email/test");H&&H.success&&window.$toast&&window.$toast.success("Email de test envoyé","✅ Test")}catch(H){console.error("Error testing email:",H),window.$toast&&window.$toast.error("Erreur lors du test email","✗ Erreur")}finally{u.value=!1}},Ie=re(()=>{let H=I.value;if(z.search){const S=z.search.toLowerCase();H=H.filter(B=>B.name?.toLowerCase().includes(S)||B.iso_code_2?.toLowerCase().includes(S)||B.iso_code_3?.toLowerCase().includes(S))}return H}),he=re(()=>{let H=F.value;if(b.search){const S=b.search.toLowerCase();H=H.filter(B=>B.name.toLowerCase().includes(S)||B.native_name.toLowerCase().includes(S)||B.code.toLowerCase().includes(S))}return H}),ye=H=>{i.value=H,Object.assign(Y,{name:H.name,code:H.iso_code_2,currency:H.currency_code,flag:H.flag,is_active:H.is_active}),x.value=!0},Qe=async()=>{u.value=!0;try{const H=await T("/admin/countries",Y);if(H&&H.success){const S={id:Date.now(),...Y};I.value.unshift(S),ft(),window.$toast&&window.$toast.success("Pays créé avec succès","✅ Création")}}catch(H){console.error("Error creating country:",H),window.$toast&&window.$toast.error("Erreur lors de la création du pays","✗ Erreur")}finally{u.value=!1}},et=async()=>{u.value=!0;try{const H=await M(`/admin/countries/${i.value.id}`,Y);if(H&&H.success){const S=I.value.findIndex(B=>B.id===i.value.id);S!==-1&&(I.value[S]={...I.value[S],...Y}),ft(),window.$toast&&window.$toast.success("Pays modifié avec succès","✅ Modification")}}catch(H){console.error("Error updating country:",H),window.$toast&&window.$toast.error("Erreur lors de la modification du pays","✗ Erreur")}finally{u.value=!1}},vt=async H=>{try{const S=await M(`/admin/countries/${H.id}/toggle-status`);S&&S.success&&(H.is_active=!H.is_active,window.$toast&&window.$toast.success(`Pays ${H.is_active?"activé":"désactivé"}`,"✅ Statut"))}catch(S){console.error("Error toggling country status:",S),window.$toast&&window.$toast.error("Erreur lors du changement de statut","✗ Erreur")}},Mt=async H=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce pays ?"))try{const S=await T(`/admin/countries/${H}/delete`);S&&S.success&&(I.value=I.value.filter(B=>B.id!==H),window.$toast&&window.$toast.success("Pays supprimé avec succès","✅ Suppression"))}catch(S){console.error("Error deleting country:",S),window.$toast&&window.$toast.error("Erreur lors de la suppression du pays","✗ Erreur")}},ft=()=>{C.value=!1,x.value=!1,i.value=null,Object.assign(Y,{name:"",code:"",currency:"",flag:"",is_active:!0})},hs=H=>{$.value=H,Object.assign(J,{name:H.name,native_name:H.native_name,code:H.code,flag:H.flag,direction:H.direction,is_active:H.is_active}),a.value=!0},ys=async()=>{u.value=!0;try{const H=await T("/admin/languages",J);if(H&&H.success){const S={id:Date.now(),...J};F.value.unshift(S),Et(),window.$toast&&window.$toast.success("Langue créée avec succès","✅ Création")}}catch(H){console.error("Error creating language:",H),window.$toast&&window.$toast.error("Erreur lors de la création de la langue","✗ Erreur")}finally{u.value=!1}},_s=async()=>{u.value=!0;try{const H=await M(`/admin/languages/${$.value.id}`,J);if(H&&H.success){const S=F.value.findIndex(B=>B.id===$.value.id);S!==-1&&(F.value[S]={...F.value[S],...J}),Et(),window.$toast&&window.$toast.success("Langue modifiée avec succès","✅ Modification")}}catch(H){console.error("Error updating language:",H),window.$toast&&window.$toast.error("Erreur lors de la modification de la langue","✗ Erreur")}finally{u.value=!1}},ws=async H=>{try{const S=await M(`/admin/languages/${H.id}/toggle-status`);S&&S.success&&(H.is_active=!H.is_active,window.$toast&&window.$toast.success(`Langue ${H.is_active?"activée":"désactivée"}`,"✅ Statut"))}catch(S){console.error("Error toggling language status:",S),window.$toast&&window.$toast.error("Erreur lors du changement de statut","✗ Erreur")}},$s=async H=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette langue ?"))try{const S=await T(`/admin/languages/${H}/delete`);S&&S.success&&(F.value=F.value.filter(B=>B.id!==H),window.$toast&&window.$toast.success("Langue supprimée avec succès","✅ Suppression"))}catch(S){console.error("Error deleting language:",S),window.$toast&&window.$toast.error("Erreur lors de la suppression de la langue","✗ Erreur")}},Et=()=>{c.value=!1,a.value=!1,$.value=null,Object.assign(J,{name:"",native_name:"",code:"",flag:"",direction:"ltr",is_active:!0})},ks=async()=>{u.value=!0;try{const H=await M(`/admin/settings/payment-methods/${L.value.id}`,{config:L.value.config,active:L.value.active});H&&H.success&&(window.$toast&&window.$toast.success(`Configuration ${L.value.name} sauvegardée`,"✅ Configuration"),Zt())}catch(H){console.error("Error updating payment method config:",H),window.$toast&&window.$toast.error("Erreur lors de la sauvegarde de la configuration","✗ Erreur")}finally{u.value=!1}},Zt=()=>{v.value=!1,L.value=null};return ue(()=>{D()}),(H,S)=>(t(),s("div",QA,[e("div",eP,[S[48]||(S[48]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Paramètres système"),e("p",{class:"mt-2 text-gray-600"},"Configuration et paramètres généraux de la plateforme")],-1)),e("div",tP,[e("button",{onClick:W,class:"admin-btn-secondary"},[p(l(Ne),{class:"w-4 h-4 mr-2"}),S[46]||(S[46]=U(" Actualiser ",-1))]),e("button",{onClick:K,class:"admin-btn-accent"},[p(l(mt),{class:"w-4 h-4 mr-2"}),S[47]||(S[47]=U(" Sauvegarder ",-1))])])]),e("div",sP,[e("div",oP,[e("nav",rP,[(t(),s(te,null,se(h,B=>e("button",{key:B.id,onClick:Ee=>r.value=B.id,class:Q(["w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center",r.value===B.id?"bg-[#0099cc]/10 text-[#0099cc] border border-[#0099cc]/20":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"])},[(t(),de(Ce(B.icon),{class:"w-5 h-5 mr-3"})),U(" "+o(B.name),1)],10,aP)),64))])]),e("div",nP,[e("div",iP,[r.value==="general"?(t(),s("div",lP,[S[56]||(S[56]=e("div",{class:"admin-card-header mb-6"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Paramètres généraux")],-1)),e("form",{onSubmit:xe(g,["prevent"]),class:"space-y-6"},[e("div",dP,[e("div",null,[S[49]||(S[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme",-1)),G(e("input",{"onUpdate:modelValue":S[0]||(S[0]=B=>A.app_name=B),type:"text",class:"admin-input",placeholder:"Koumbaya"},null,512),[[ee,A.app_name]])]),e("div",null,[S[50]||(S[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL de base",-1)),G(e("input",{"onUpdate:modelValue":S[1]||(S[1]=B=>A.app_url=B),type:"url",class:"admin-input",placeholder:"https://koumbaya.com"},null,512),[[ee,A.app_url]])])]),e("div",null,[S[51]||(S[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description de la plateforme",-1)),G(e("textarea",{"onUpdate:modelValue":S[2]||(S[2]=B=>A.app_description=B),rows:"3",class:"admin-input",placeholder:"Description de votre plateforme..."},null,512),[[ee,A.app_description]])]),e("div",uP,[e("div",null,[S[52]||(S[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact",-1)),G(e("input",{"onUpdate:modelValue":S[3]||(S[3]=B=>A.contact_email=B),type:"email",class:"admin-input",placeholder:"contact@koumbaya.com"},null,512),[[ee,A.contact_email]])]),e("div",null,[S[53]||(S[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone de contact",-1)),p(bs,{modelValue:A.contact_phone,"onUpdate:modelValue":S[4]||(S[4]=B=>A.contact_phone=B),placeholder:"Téléphone de contact","initial-country":"ga"},null,8,["modelValue"])])]),e("div",cP,[e("div",null,[S[54]||(S[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue par défaut",-1)),G(e("select",{"onUpdate:modelValue":S[5]||(S[5]=B=>A.default_language=B),class:"admin-input"},[(t(!0),s(te,null,se(Z.value,B=>(t(),s("option",{key:B.id,value:B.code},o(B.name),9,mP))),128))],512),[[ne,A.default_language]])]),e("div",null,[S[55]||(S[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays par défaut",-1)),G(e("select",{"onUpdate:modelValue":S[6]||(S[6]=B=>A.default_country=B),class:"admin-input"},[(t(!0),s(te,null,se(q.value,B=>(t(),s("option",{key:B.id,value:B.iso_code_2},o(B.name),9,pP))),128))],512),[[ne,A.default_country]])])]),e("div",gP,[e("button",{type:"submit",disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},o(u.value?"Sauvegarde...":"Sauvegarder"),9,vP)])],32)])):R("",!0),r.value==="countries"?(t(),s("div",fP,[e("div",xP,[e("div",bP,[S[58]||(S[58]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Gestion des pays"),e("p",{class:"text-sm text-gray-600"},"Configurez les pays disponibles sur la plateforme")],-1)),e("button",{onClick:S[7]||(S[7]=B=>C.value=!0),class:"admin-btn-primary flex items-center"},[p(l(Rt),{class:"w-4 h-4 mr-2"}),S[57]||(S[57]=U(" Ajouter un pays ",-1))])])]),e("div",hP,[e("div",yP,[G(e("input",{"onUpdate:modelValue":S[8]||(S[8]=B=>z.search=B),type:"text",placeholder:"Rechercher un pays...",class:"admin-input"},null,512),[[ee,z.search]])])]),e("div",_P,[e("table",wP,[S[59]||(S[59]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pays "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Code "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Devise "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",$P,[(t(!0),s(te,null,se(Ie.value,B=>(t(),s("tr",{key:B.id,class:"hover:bg-gray-50"},[e("td",kP,[e("div",CP,[B.flag?(t(),s("img",{key:0,src:B.flag,alt:B.name,class:"w-6 h-4 rounded object-cover mr-3"},null,8,jP)):R("",!0),e("div",AP,o(B.name),1)])]),e("td",PP,o(B.iso_code_2),1),e("td",MP,o(B.currency_code),1),e("td",EP,[e("span",{class:Q(["px-2 py-1 text-xs font-medium rounded-full",B.is_active?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},o(B.is_active?"Actif":"Inactif"),3)]),e("td",SP,[e("div",DP,[e("button",{onClick:Ee=>ye(B),class:"text-blue-600 hover:text-blue-900"},[p(l(yt),{class:"w-4 h-4"})],8,TP),e("button",{onClick:Ee=>vt(B),class:"text-blue-600 hover:text-blue-900 text-xs"},o(B.is_active?"Désactiver":"Activer"),9,IP),e("button",{onClick:Ee=>Mt(B.id),class:"text-red-600 hover:text-red-900"},[p(l(bt),{class:"w-4 h-4"})],8,LP)])])]))),128))])])])])):R("",!0),r.value==="languages"?(t(),s("div",VP,[e("div",FP,[e("div",RP,[S[61]||(S[61]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Gestion des langues"),e("p",{class:"text-sm text-gray-600"},"Configurez les langues disponibles sur la plateforme")],-1)),e("button",{onClick:S[9]||(S[9]=B=>c.value=!0),class:"admin-btn-primary flex items-center"},[p(l(Rt),{class:"w-4 h-4 mr-2"}),S[60]||(S[60]=U(" Ajouter une langue ",-1))])])]),e("div",qP,[e("div",zP,[G(e("input",{"onUpdate:modelValue":S[10]||(S[10]=B=>b.search=B),type:"text",placeholder:"Rechercher une langue...",class:"admin-input"},null,512),[[ee,b.search]])])]),e("div",NP,[e("table",UP,[S[62]||(S[62]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Langue "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Code "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Direction "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",BP,[(t(!0),s(te,null,se(he.value,B=>(t(),s("tr",{key:B.id,class:"hover:bg-gray-50"},[e("td",OP,[e("div",HP,[e("span",GP,o(B.flag),1),e("div",null,[e("div",KP,o(B.name),1),e("div",WP,o(B.native_name),1)])])]),e("td",ZP,o(B.code),1),e("td",XP,o(B.direction==="rtl"?"Droite à gauche":"Gauche à droite"),1),e("td",JP,[e("span",{class:Q(["px-2 py-1 text-xs font-medium rounded-full",B.is_active?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},o(B.is_active?"Actif":"Inactif"),3)]),e("td",YP,[e("div",QP,[e("button",{onClick:Ee=>hs(B),class:"text-blue-600 hover:text-blue-900"},[p(l(yt),{class:"w-4 h-4"})],8,eM),e("button",{onClick:Ee=>ws(B),class:"text-blue-600 hover:text-blue-900 text-xs"},o(B.is_active?"Désactiver":"Activer"),9,tM),e("button",{onClick:Ee=>$s(B.id),class:"text-red-600 hover:text-red-900"},[p(l(bt),{class:"w-4 h-4"})],8,sM)])])]))),128))])])])])):R("",!0),r.value==="payment"?(t(),s("div",oM,[S[68]||(S[68]=e("div",{class:"admin-card-header mb-6"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Paramètres de paiement")],-1)),e("form",{onSubmit:xe(w,["prevent"]),class:"space-y-6"},[e("div",rM,[e("div",null,[S[64]||(S[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise par défaut",-1)),G(e("select",{"onUpdate:modelValue":S[11]||(S[11]=B=>n.default_currency=B),class:"admin-input"},S[63]||(S[63]=[e("option",{value:"XAF"},"Franc CFA Afrique Centrale (XAF)",-1),e("option",{value:"XOF"},"Franc CFA Afrique de l'Ouest (XOF)",-1),e("option",{value:"EUR"},"Euro (EUR)",-1),e("option",{value:"USD"},"Dollar US (USD)",-1)]),512),[[ne,n.default_currency]])]),e("div",null,[S[65]||(S[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission plateforme (%)",-1)),G(e("input",{"onUpdate:modelValue":S[12]||(S[12]=B=>n.platform_commission=B),type:"number",min:"0",max:"100",step:"0.1",class:"admin-input",placeholder:"5.0"},null,512),[[ee,n.platform_commission,void 0,{number:!0}]])])]),e("div",aM,[S[67]||(S[67]=e("h4",{class:"font-medium text-gray-900"},"Méthodes de paiement actives",-1)),e("div",nM,[(t(!0),s(te,null,se(y.value,B=>(t(),s("div",{key:B.id,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",iM,[(t(),de(Ce(B.icon),{class:Q(["w-6 h-6 mr-3",{"text-green-500":B.active,"text-gray-400":!B.active}])},null,8,["class"])),e("div",null,[e("div",lM,[e("p",dM,o(B.name),1),B.type==="gateway"?(t(),s("span",uM," Passerelle ")):B.gateway?(t(),s("span",cM," via "+o(B.gateway),1)):R("",!0)]),e("p",mM,o(B.description),1)])]),e("div",pM,[e("label",gM,[G(e("input",{"onUpdate:modelValue":Ee=>B.active=Ee,type:"checkbox",class:"sr-only peer"},null,8,vM),[[_e,B.active]]),S[66]||(S[66]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#0099cc]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0099cc]"},null,-1))]),e("button",{onClick:Ee=>O(B),class:Q([{"text-[#0099cc] hover:text-[#0088bb]":B.type==="gateway"||B.config,"text-gray-300 cursor-not-allowed":B.type!=="gateway"&&!B.config},"text-sm transition-colors"]),disabled:B.type!=="gateway"&&!B.config},[p(l(Ze),{class:"w-4 h-4"})],10,fM)])]))),128))])]),e("div",xM,[e("button",{type:"submit",disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},o(u.value?"Sauvegarde...":"Sauvegarder"),9,bM)])],32)])):R("",!0),r.value==="lottery"?(t(),s("div",hM,[S[78]||(S[78]=e("div",{class:"admin-card-header mb-6"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Paramètres des tombolas")],-1)),e("form",{onSubmit:xe(P,["prevent"]),class:"space-y-6"},[e("div",yM,[e("div",null,[S[69]||(S[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix minimum ticket (FCFA)",-1)),G(e("input",{"onUpdate:modelValue":S[13]||(S[13]=B=>j.min_ticket_price=B),type:"number",min:"100",class:"admin-input",placeholder:"1000"},null,512),[[ee,j.min_ticket_price,void 0,{number:!0}]])]),e("div",null,[S[70]||(S[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix maximum ticket (FCFA)",-1)),G(e("input",{"onUpdate:modelValue":S[14]||(S[14]=B=>j.max_ticket_price=B),type:"number",min:"1000",class:"admin-input",placeholder:"100000"},null,512),[[ee,j.max_ticket_price,void 0,{number:!0}]])])]),e("div",_M,[e("div",null,[S[71]||(S[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Participants minimum par tombola",-1)),G(e("input",{"onUpdate:modelValue":S[15]||(S[15]=B=>j.min_participants=B),type:"number",min:"2",class:"admin-input",placeholder:"10"},null,512),[[ee,j.min_participants,void 0,{number:!0}]])]),e("div",null,[S[72]||(S[72]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Durée maximum (jours)",-1)),G(e("input",{"onUpdate:modelValue":S[16]||(S[16]=B=>j.max_duration_days=B),type:"number",min:"1",class:"admin-input",placeholder:"30"},null,512),[[ee,j.max_duration_days,void 0,{number:!0}]])])]),e("div",wM,[S[77]||(S[77]=e("h4",{class:"font-medium text-gray-900"},"Options automatiques",-1)),e("div",$M,[e("div",kM,[S[74]||(S[74]=e("div",null,[e("h5",{class:"font-medium text-gray-900"},"Remboursement automatique"),e("p",{class:"text-sm text-gray-600"},"Rembourser automatiquement si pas assez de participants")],-1)),e("label",CM,[G(e("input",{"onUpdate:modelValue":S[17]||(S[17]=B=>j.auto_refund=B),type:"checkbox",class:"sr-only peer"},null,512),[[_e,j.auto_refund]]),S[73]||(S[73]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#0099cc]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0099cc]"},null,-1))])]),e("div",jM,[S[76]||(S[76]=e("div",null,[e("h5",{class:"font-medium text-gray-900"},"Tirage automatique"),e("p",{class:"text-sm text-gray-600"},"Effectuer le tirage automatiquement à la date de fin")],-1)),e("label",AM,[G(e("input",{"onUpdate:modelValue":S[18]||(S[18]=B=>j.auto_draw=B),type:"checkbox",class:"sr-only peer"},null,512),[[_e,j.auto_draw]]),S[75]||(S[75]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#0099cc]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0099cc]"},null,-1))])])])]),e("div",PM,[e("button",{type:"submit",disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},o(u.value?"Sauvegarde...":"Sauvegarder"),9,MM)])],32)])):R("",!0),r.value==="notifications"?(t(),s("div",EM,[S[83]||(S[83]=e("div",{class:"admin-card-header mb-6"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Paramètres de notifications")],-1)),e("form",{onSubmit:xe(N,["prevent"]),class:"space-y-6"},[e("div",SM,[e("div",null,[S[79]||(S[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email expéditeur",-1)),G(e("input",{"onUpdate:modelValue":S[19]||(S[19]=B=>E.from_email=B),type:"email",class:"admin-input",placeholder:"noreply@koumbaya.com"},null,512),[[ee,E.from_email]])]),e("div",null,[S[80]||(S[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom expéditeur",-1)),G(e("input",{"onUpdate:modelValue":S[20]||(S[20]=B=>E.from_name=B),type:"text",class:"admin-input",placeholder:"Koumbaya"},null,512),[[ee,E.from_name]])])]),e("div",DM,[S[82]||(S[82]=e("h4",{class:"font-medium text-gray-900"},"Types de notifications automatiques",-1)),e("div",TM,[(t(!0),s(te,null,se(f.value,B=>(t(),s("div",{key:B.id,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},[e("div",null,[e("p",IM,o(B.name),1),e("p",LM,o(B.description),1)]),e("label",VM,[G(e("input",{"onUpdate:modelValue":Ee=>B.enabled=Ee,type:"checkbox",class:"sr-only peer"},null,8,FM),[[_e,B.enabled]]),S[81]||(S[81]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#0099cc]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0099cc]"},null,-1))])]))),128))])]),e("div",RM,[e("button",{type:"submit",disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},o(u.value?"Sauvegarde...":"Sauvegarder"),9,qM)])],32)])):R("",!0),r.value==="maintenance"?(t(),s("div",zM,[S[92]||(S[92]=e("div",{class:"admin-card-header mb-6"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Maintenance et sécurité")],-1)),e("div",NM,[e("div",UM,[e("div",BM,[S[85]||(S[85]=e("div",null,[e("h4",{class:"font-medium text-yellow-800"},"Mode maintenance"),e("p",{class:"text-sm text-yellow-700"},"Désactiver temporairement l'accès public à la plateforme")],-1)),e("label",OM,[G(e("input",{"onUpdate:modelValue":S[21]||(S[21]=B=>_.maintenance_mode=B),type:"checkbox",class:"sr-only peer"},null,512),[[_e,_.maintenance_mode]]),S[84]||(S[84]=e("div",{class:"w-11 h-6 bg-yellow-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-yellow-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"},null,-1))])]),_.maintenance_mode?(t(),s("div",HM,[S[86]||(S[86]=e("label",{class:"block text-sm font-medium text-yellow-800 mb-2"},"Message de maintenance",-1)),G(e("textarea",{"onUpdate:modelValue":S[22]||(S[22]=B=>_.maintenance_message=B),rows:"2",class:"w-full border border-yellow-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-yellow-50",placeholder:"La plateforme est temporairement en maintenance..."},null,512),[[ee,_.maintenance_message]])])):R("",!0)]),e("div",GM,[S[91]||(S[91]=e("h4",{class:"font-medium text-gray-900"},"Actions de maintenance",-1)),e("div",KM,[e("button",{onClick:ae,disabled:u.value,class:"admin-btn-secondary justify-center disabled:opacity-50"},[p(l(bt),{class:"w-4 h-4 mr-2"}),S[87]||(S[87]=U(" Vider le cache ",-1))],8,WM),e("button",{onClick:ce,disabled:u.value,class:"admin-btn-secondary justify-center disabled:opacity-50"},[p(l(Ze),{class:"w-4 h-4 mr-2"}),S[88]||(S[88]=U(" Optimiser la BDD ",-1))],8,ZM),e("button",{onClick:ge,disabled:u.value,class:"admin-btn-secondary justify-center disabled:opacity-50"},[p(l(Os),{class:"w-4 h-4 mr-2"}),S[89]||(S[89]=U(" Générer sitemap ",-1))],8,XM),e("button",{onClick:ve,disabled:u.value,class:"admin-btn-secondary justify-center disabled:opacity-50"},[p(l(st),{class:"w-4 h-4 mr-2"}),S[90]||(S[90]=U(" Tester les emails ",-1))],8,JM)])]),e("div",YM,[e("button",{onClick:X,disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},o(u.value?"Sauvegarde...":"Sauvegarder"),9,QM)])])])):R("",!0)])])]),C.value||x.value?(t(),s("div",eE,[e("div",tE,[e("div",sE,[e("h3",oE,o(C.value?"Ajouter un pays":"Modifier le pays"),1)]),e("form",{onSubmit:S[28]||(S[28]=xe(B=>C.value?Qe():et(),["prevent"]))},[e("div",rE,[e("div",null,[S[93]||(S[93]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),G(e("input",{"onUpdate:modelValue":S[23]||(S[23]=B=>Y.name=B),type:"text",required:"",class:"admin-input"},null,512),[[ee,Y.name]])]),e("div",null,[S[94]||(S[94]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code *",-1)),G(e("input",{"onUpdate:modelValue":S[24]||(S[24]=B=>Y.code=B),type:"text",required:"",maxlength:"2",class:"admin-input"},null,512),[[ee,Y.code]])]),e("div",null,[S[95]||(S[95]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),G(e("input",{"onUpdate:modelValue":S[25]||(S[25]=B=>Y.currency=B),type:"text",class:"admin-input"},null,512),[[ee,Y.currency]])]),e("div",null,[S[96]||(S[96]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du drapeau",-1)),G(e("input",{"onUpdate:modelValue":S[26]||(S[26]=B=>Y.flag=B),type:"url",class:"admin-input"},null,512),[[ee,Y.flag]])]),e("div",aE,[G(e("input",{"onUpdate:modelValue":S[27]||(S[27]=B=>Y.is_active=B),type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[_e,Y.is_active]]),S[97]||(S[97]=e("label",{class:"ml-2 text-sm text-gray-700"},"Actif",-1))])]),e("div",nE,[e("button",{type:"button",onClick:ft,class:"admin-btn-secondary"}," Annuler "),e("button",{type:"submit",disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},[u.value?(t(),s("span",lE,"Enregistrement...")):(t(),s("span",dE,o(C.value?"Créer":"Modifier"),1))],8,iE)])],32)])])):R("",!0),c.value||a.value?(t(),s("div",uE,[e("div",cE,[e("div",mE,[e("h3",pE,o(c.value?"Ajouter une langue":"Modifier la langue"),1)]),e("form",{onSubmit:S[35]||(S[35]=xe(B=>c.value?ys():_s(),["prevent"]))},[e("div",gE,[e("div",null,[S[98]||(S[98]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),G(e("input",{"onUpdate:modelValue":S[29]||(S[29]=B=>J.name=B),type:"text",required:"",class:"admin-input"},null,512),[[ee,J.name]])]),e("div",null,[S[99]||(S[99]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom natif",-1)),G(e("input",{"onUpdate:modelValue":S[30]||(S[30]=B=>J.native_name=B),type:"text",class:"admin-input"},null,512),[[ee,J.native_name]])]),e("div",null,[S[100]||(S[100]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code *",-1)),G(e("input",{"onUpdate:modelValue":S[31]||(S[31]=B=>J.code=B),type:"text",required:"",maxlength:"2",class:"admin-input"},null,512),[[ee,J.code]])]),e("div",null,[S[101]||(S[101]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Drapeau (emoji)",-1)),G(e("input",{"onUpdate:modelValue":S[32]||(S[32]=B=>J.flag=B),type:"text",maxlength:"2",class:"admin-input"},null,512),[[ee,J.flag]])]),e("div",null,[S[103]||(S[103]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Direction",-1)),G(e("select",{"onUpdate:modelValue":S[33]||(S[33]=B=>J.direction=B),class:"admin-input"},S[102]||(S[102]=[e("option",{value:"ltr"},"Gauche à droite",-1),e("option",{value:"rtl"},"Droite à gauche",-1)]),512),[[ne,J.direction]])]),e("div",vE,[G(e("input",{"onUpdate:modelValue":S[34]||(S[34]=B=>J.is_active=B),type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[_e,J.is_active]]),S[104]||(S[104]=e("label",{class:"ml-2 text-sm text-gray-700"},"Actif",-1))])]),e("div",fE,[e("button",{type:"button",onClick:Et,class:"admin-btn-secondary"}," Annuler "),e("button",{type:"submit",disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},[u.value?(t(),s("span",bE,"Enregistrement...")):(t(),s("span",hE,o(c.value?"Créer":"Modifier"),1))],8,xE)])],32)])])):R("",!0),v.value?(t(),s("div",yE,[e("div",_E,[e("div",wE,[e("h3",$E," Configuration "+o(L.value?.name),1)]),e("form",{onSubmit:xe(ks,["prevent"])},[e("div",kE,[L.value?.id==="ebilling"?(t(),s("div",CE,[S[110]||(S[110]=ie('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"><div class="flex items-start"><div class="flex-shrink-0"><svg class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Configuration eBilling</h3><div class="mt-2 text-sm text-blue-700"><p>eBilling prend en charge Airtel Money et Moov Money au Gabon. Configurez vos identifiants API ci-dessous.</p></div></div></div></div>',1)),e("div",jE,[e("div",null,[S[105]||(S[105]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Merchant ID *",-1)),G(e("input",{"onUpdate:modelValue":S[36]||(S[36]=B=>L.value.config.merchant_id=B),type:"text",required:"",class:"admin-input",placeholder:"Votre Merchant ID eBilling"},null,512),[[ee,L.value.config.merchant_id]])]),e("div",null,[S[107]||(S[107]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Environnement",-1)),G(e("select",{"onUpdate:modelValue":S[37]||(S[37]=B=>L.value.config.environment=B),class:"admin-input"},S[106]||(S[106]=[e("option",{value:"sandbox"},"Test (Sandbox)",-1),e("option",{value:"production"},"Production",-1)]),512),[[ne,L.value.config.environment]])])]),e("div",null,[S[108]||(S[108]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Clé API *",-1)),G(e("input",{"onUpdate:modelValue":S[38]||(S[38]=B=>L.value.config.api_key=B),type:"text",required:"",class:"admin-input",placeholder:"Votre clé API eBilling"},null,512),[[ee,L.value.config.api_key]])]),e("div",null,[S[109]||(S[109]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Clé secrète *",-1)),G(e("input",{"onUpdate:modelValue":S[39]||(S[39]=B=>L.value.config.secret_key=B),type:"password",required:"",class:"admin-input",placeholder:"Votre clé secrète eBilling"},null,512),[[ee,L.value.config.secret_key]])]),S[111]||(S[111]=ie('<div class="bg-gray-50 rounded-lg p-4"><h4 class="text-sm font-medium text-gray-900 mb-2">Méthodes supportées via eBilling</h4><div class="flex flex-wrap gap-2"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Airtel Money </span><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Moov Money </span></div></div>',1))])):R("",!0),L.value?.id==="flutterwave"?(t(),s("div",AE,[S[116]||(S[116]=ie('<div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6"><div class="flex items-start"><div class="flex-shrink-0"><svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-purple-800">Configuration Flutterwave</h3><div class="mt-2 text-sm text-purple-700"><p>Flutterwave prend en charge les cartes, mobile money, et virements bancaires à travers l&#39;Afrique.</p></div></div></div></div>',1)),e("div",PE,[e("div",null,[S[112]||(S[112]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Clé publique *",-1)),G(e("input",{"onUpdate:modelValue":S[40]||(S[40]=B=>L.value.config.public_key=B),type:"text",required:"",class:"admin-input",placeholder:"FLWPUBK_TEST-..."},null,512),[[ee,L.value.config.public_key]])]),e("div",null,[S[114]||(S[114]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Environnement",-1)),G(e("select",{"onUpdate:modelValue":S[41]||(S[41]=B=>L.value.config.environment=B),class:"admin-input"},S[113]||(S[113]=[e("option",{value:"sandbox"},"Test (Sandbox)",-1),e("option",{value:"live"},"Production (Live)",-1)]),512),[[ne,L.value.config.environment]])])]),e("div",null,[S[115]||(S[115]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Clé secrète *",-1)),G(e("input",{"onUpdate:modelValue":S[42]||(S[42]=B=>L.value.config.secret_key=B),type:"password",required:"",class:"admin-input",placeholder:"FLWSECK_TEST-..."},null,512),[[ee,L.value.config.secret_key]])])])):R("",!0),L.value?.id==="paystack"?(t(),s("div",ME,[S[121]||(S[121]=ie('<div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6"><div class="flex items-start"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-green-800">Configuration Paystack</h3><div class="mt-2 text-sm text-green-700"><p>Paystack prend en charge les cartes, USSD, et virements bancaires principalement au Nigeria et Ghana.</p></div></div></div></div>',1)),e("div",EE,[e("div",null,[S[117]||(S[117]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Clé publique *",-1)),G(e("input",{"onUpdate:modelValue":S[43]||(S[43]=B=>L.value.config.public_key=B),type:"text",required:"",class:"admin-input",placeholder:"pk_test_..."},null,512),[[ee,L.value.config.public_key]])]),e("div",null,[S[119]||(S[119]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Environnement",-1)),G(e("select",{"onUpdate:modelValue":S[44]||(S[44]=B=>L.value.config.environment=B),class:"admin-input"},S[118]||(S[118]=[e("option",{value:"sandbox"},"Test (Sandbox)",-1),e("option",{value:"live"},"Production (Live)",-1)]),512),[[ne,L.value.config.environment]])])]),e("div",null,[S[120]||(S[120]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Clé secrète *",-1)),G(e("input",{"onUpdate:modelValue":S[45]||(S[45]=B=>L.value.config.secret_key=B),type:"password",required:"",class:"admin-input",placeholder:"sk_test_..."},null,512),[[ee,L.value.config.secret_key]])])])):R("",!0)]),e("div",SE,[e("button",{type:"button",onClick:Zt,class:"admin-btn-secondary"}," Annuler "),e("button",{type:"submit",disabled:u.value,class:"admin-btn-primary disabled:opacity-50"},[u.value?(t(),s("span",TE,"Sauvegarde...")):(t(),s("span",IE,"Sauvegarder la configuration"))],8,DE)])],32)])])):R("",!0)]))}},VE={class:"space-y-6"},FE={class:"flex justify-between items-center"},RE={class:"flex space-x-3"},qE={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},zE={class:"lg:col-span-1"},NE={class:"admin-card text-center"},UE={class:"p-6"},BE={class:"text-xl font-bold text-gray-900 mb-1"},OE={class:"text-gray-600 mb-2"},HE={class:"border-t border-gray-200 px-6 py-4"},GE={class:"grid grid-cols-2 gap-4 text-center"},KE={class:"text-2xl font-bold text-gray-900"},WE={class:"text-2xl font-bold text-gray-900"},ZE={class:"admin-card mt-6"},XE={class:"p-6 space-y-4"},JE={class:"flex items-center justify-between"},YE={class:"flex items-center"},QE={class:"text-sm font-medium text-gray-900"},eS={class:"flex items-center justify-between"},tS={class:"flex items-center"},sS={class:"flex items-center justify-between"},oS={class:"flex items-center"},rS={class:"text-sm font-medium text-gray-900"},aS={class:"lg:col-span-2 space-y-6"},nS={class:"admin-card"},iS={class:"p-6"},lS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},uS={class:"flex justify-end"},cS=["disabled"],mS={class:"admin-card"},pS={class:"p-6 space-y-6"},gS={class:"border border-gray-200 rounded-lg p-4"},vS={class:"font-medium text-gray-900 mb-3 flex items-center"},fS={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xS={class:"flex justify-end"},bS=["disabled"],hS={class:"border border-gray-200 rounded-lg p-4"},yS={class:"flex items-center justify-between mb-3"},_S={class:"font-medium text-gray-900 flex items-center"},wS={class:"relative inline-flex items-center cursor-pointer"},$S={class:"text-sm text-gray-600"},kS={class:"border border-gray-200 rounded-lg p-4"},CS={class:"font-medium text-gray-900 mb-3 flex items-center"},jS={class:"space-y-3"},AS={class:"flex items-center"},PS={class:"text-sm font-medium text-gray-900"},MS={class:"text-xs text-gray-600"},ES=["onClick"],SS={key:1,class:"text-xs text-blue-600 font-medium"},DS={class:"admin-card"},TS={class:"p-6 space-y-6"},IS={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},LS={class:"space-y-4"},VS={class:"space-y-3"},FS={class:"font-medium text-gray-900"},RS={class:"text-sm text-gray-600"},qS={class:"relative inline-flex items-center cursor-pointer"},zS=["onUpdate:modelValue"],NS={class:"flex justify-end"},US=["disabled"],BS={__name:"Profile",setup(d){const m=we(),{get:T,post:M,put:u}=le(),r=V(!1);V(!1),V(!1),V(null);const h=me({first_name:m.user?.first_name||"",last_name:m.user?.last_name||"",email:m.user?.email||"",phone:"",position:"",bio:"",timezone:"Africa/Libreville",language:"fr",two_factor_enabled:!1,avatar_url:m.user?.avatar_url||null}),A=me({current_password:"",new_password:"",confirm_password:""}),n=V({actions_count:0,login_streak:0,last_login:null,created_at:null}),y=V([]),j=V([]),E=(z,b,q)=>{z.response?.status===404?(console.info(`API ${b} pas encore implémentée, simulation du succès`),window.$toast&&window.$toast.info(`${q} (API en développement)`,"ℹ️ Développement")):window.$toast&&window.$toast.error(`Erreur lors de ${b.toLowerCase()}`,"✗ Erreur")},f=async()=>{r.value=!0;try{const z=await T("/admin/profile");z&&z.success&&z.data&&(Object.assign(h,z.data.profile),n.value=z.data.stats||{},z.data.sessions&&(y.value=z.data.sessions))}catch(z){console.error("Error loading profile:",z),z.response?.status!==404?window.$toast&&window.$toast.error("Erreur lors du chargement du profil","✗ Erreur"):(console.info("API /admin/profile pas encore implémentée, utilisation des données par défaut"),m.user&&Object.assign(h,{first_name:m.user.first_name||"",last_name:m.user.last_name||"",email:m.user.email||"",phone:h.phone,position:h.position,bio:h.bio,timezone:h.timezone,language:h.language,two_factor_enabled:h.two_factor_enabled,avatar_url:m.user.avatar_url||null}),n.value={actions_count:127,login_streak:12,last_login:new Date(Date.now()-1e3*60*30).toISOString(),created_at:new Date(Date.now()-1e3*60*60*24*90).toISOString()},y.value=[{id:1,device:"Chrome sur Mac",location:"Libreville, Gabon",last_activity:new Date,current:!0}],j.value=[{id:"new_user_registration",name:"Nouveaux utilisateurs",description:"Notification lors de l'inscription d'un nouvel utilisateur",enabled:!0},{id:"suspicious_activity",name:"Activité suspecte",description:"Alertes de sécurité et activités inhabituelles",enabled:!0}])}finally{r.value=!1}},_=async()=>{r.value=!0;try{const z=await u("/admin/profile",h);z&&z.success&&(await m.refreshUser(),window.$toast&&window.$toast.success("Informations mises à jour avec succès","✅ Profil"))}catch(z){console.error("Error updating profile:",z),E(z,"/admin/profile","Informations mises à jour avec succès")}finally{r.value=!1}},I=async()=>{if(A.new_password!==A.confirm_password){window.$toast&&window.$toast.error("Les mots de passe ne correspondent pas","✗ Validation");return}if(A.new_password.length<8){window.$toast&&window.$toast.error("Le mot de passe doit contenir au moins 8 caractères","✗ Validation");return}r.value=!0;try{const z=await u("/admin/profile/password",{current_password:A.current_password,new_password:A.new_password});z&&z.success&&(A.current_password="",A.new_password="",A.confirm_password="",window.$toast&&window.$toast.success("Mot de passe mis à jour avec succès","✅ Sécurité"))}catch(z){if(console.error("Error updating password:",z),window.$toast){const b=z.response?.data?.message||"Erreur lors du changement de mot de passe";window.$toast.error(b,"✗ Erreur")}}finally{r.value=!1}},F=async()=>{r.value=!0;try{const z=await u("/admin/profile/preferences",{timezone:h.timezone,language:h.language,notifications:j.value});z&&z.success&&window.$toast&&window.$toast.success("Préférences sauvegardées avec succès","✅ Préférences")}catch(z){console.error("Error updating preferences:",z),window.$toast&&window.$toast.error("Erreur lors de la sauvegarde des préférences","✗ Erreur")}finally{r.value=!1}},C=async()=>{r.value=!0;try{const z=await M("/admin/profile/2fa/toggle",{enabled:h.two_factor_enabled});if(z&&z.success){const b=h.two_factor_enabled?"Authentification 2FA activée":"Authentification 2FA désactivée";window.$toast&&window.$toast.success(b,"✅ Sécurité")}}catch(z){console.error("Error toggling 2FA:",z),h.two_factor_enabled=!h.two_factor_enabled,window.$toast&&window.$toast.error("Erreur lors de la modification 2FA","✗ Erreur")}finally{r.value=!1}},x=async z=>{if(confirm("Voulez-vous vraiment déconnecter cette session ?"))try{const b=await M("/admin/profile/sessions/terminate",{session_id:z});b&&b.success&&(y.value=y.value.filter(q=>q.id!==z),window.$toast&&window.$toast.success("Session déconnectée","✅ Sécurité"))}catch(b){console.error("Error terminating session:",b),window.$toast&&window.$toast.error("Erreur lors de la déconnexion","✗ Erreur")}},c=async()=>{if(confirm("Voulez-vous vraiment déconnecter toutes les autres sessions ?"))try{const z=await M("/admin/profile/sessions/terminate-all");z&&z.success&&(y.value=y.value.filter(b=>b.current),window.$toast&&window.$toast.success("Toutes les sessions ont été déconnectées","✅ Sécurité"))}catch(z){console.error("Error terminating sessions:",z),window.$toast&&window.$toast.error("Erreur lors de la déconnexion","✗ Erreur")}},a=z=>{h.avatar_url=z.avatar_url,m.updateUser({avatar_url:z.avatar_url}),window.$toast&&window.$toast.success("Photo de profil mise à jour avec succès","✅ Profil")},v=z=>{console.error("Avatar upload error:",z),window.$toast&&window.$toast.error("Erreur lors de l'upload de l'avatar","✗ Erreur")},i=async()=>{await f(),window.$toast&&window.$toast.info("Profil rechargé","ℹ️ Information")},$=async()=>{try{const z=await T("/admin/profile/activity-log/export");if(z&&z.success){const b=new Blob([JSON.stringify(z.data,null,2)],{type:"application/json"}),q=URL.createObjectURL(b),Z=document.createElement("a");Z.href=q,Z.download=`admin-activity-log-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(q),window.$toast&&window.$toast.success("Journal d'activité téléchargé","✅ Export")}}catch(z){console.error("Error downloading activity log:",z),E(z,"/admin/profile/activity-log/export","Journal d'activité téléchargé")}},L=()=>n.value.last_login?new Date(n.value.last_login).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais",Y=()=>n.value.created_at?new Date(n.value.created_at).toLocaleDateString("fr-FR",{month:"long",year:"numeric"}):"N/A",J=z=>{const q=Math.floor((new Date-z)/1e3);return q<60?"À l'instant":q<3600?`il y a ${Math.floor(q/60)} min`:q<86400?`il y a ${Math.floor(q/3600)} h`:`il y a ${Math.floor(q/86400)} j`};return ue(()=>{f()}),(z,b)=>(t(),s("div",VE,[e("div",FE,[b[14]||(b[14]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Profil Administrateur"),e("p",{class:"mt-2 text-gray-600"},"Gérez vos informations personnelles et paramètres de compte")],-1)),e("div",RE,[e("button",{onClick:i,class:"admin-btn-secondary"},[p(l(Ne),{class:"w-4 h-4 mr-2"}),b[12]||(b[12]=U(" Actualiser ",-1))]),e("button",{onClick:$,class:"admin-btn-accent"},[p(l(mt),{class:"w-4 h-4 mr-2"}),b[13]||(b[13]=U(" Journal d'activité ",-1))])])]),e("div",qE,[e("div",zE,[e("div",NE,[e("div",UE,[p(xs,{"current-avatar-url":h.avatar_url,"upload-endpoint":"/admin/profile/image","field-name":"avatar","alt-text":"Photo de profil administrateur","help-text":"Cliquez pour modifier votre photo de profil",onSuccess:a,onError:v},null,8,["current-avatar-url"]),e("h2",BE,o(h.first_name)+" "+o(h.last_name),1),e("p",OE,o(h.email),1),b[15]||(b[15]=e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("div",{class:"w-2 h-2 bg-green-500 rounded-full mr-2"}),U(" Administrateur actif ")],-1))]),e("div",HE,[e("div",GE,[e("div",null,[e("p",KE,o(n.value.actions_count||0),1),b[16]||(b[16]=e("p",{class:"text-sm text-gray-600"},"Actions ce mois",-1))]),e("div",null,[e("p",WE,o(n.value.login_streak||0),1),b[17]||(b[17]=e("p",{class:"text-sm text-gray-600"},"Jours consécutifs",-1))])])])]),e("div",ZE,[b[22]||(b[22]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Statistiques rapides")],-1)),e("div",XE,[e("div",JE,[e("div",YE,[p(l(Pe),{class:"w-5 h-5 text-blue-500 mr-3"}),b[18]||(b[18]=e("span",{class:"text-sm text-gray-700"},"Dernière connexion",-1))]),e("span",QE,o(L()),1)]),e("div",eS,[e("div",tS,[p(l(at),{class:"w-5 h-5 text-green-500 mr-3"}),b[19]||(b[19]=e("span",{class:"text-sm text-gray-700"},"Privilèges",-1))]),b[20]||(b[20]=e("span",{class:"text-sm font-medium text-gray-900"},"Super Admin",-1))]),e("div",sS,[e("div",oS,[p(l(Ut),{class:"w-5 h-5 text-purple-500 mr-3"}),b[21]||(b[21]=e("span",{class:"text-sm text-gray-700"},"Membre depuis",-1))]),e("span",rS,o(Y()),1)])])])]),e("div",aS,[e("div",nS,[b[29]||(b[29]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Informations personnelles")],-1)),e("div",iS,[e("form",{onSubmit:xe(_,["prevent"]),class:"space-y-6"},[e("div",lS,[e("div",null,[b[23]||(b[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prénom",-1)),G(e("input",{"onUpdate:modelValue":b[0]||(b[0]=q=>h.first_name=q),type:"text",class:"admin-input",required:""},null,512),[[ee,h.first_name]])]),e("div",null,[b[24]||(b[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom",-1)),G(e("input",{"onUpdate:modelValue":b[1]||(b[1]=q=>h.last_name=q),type:"text",class:"admin-input",required:""},null,512),[[ee,h.last_name]])])]),e("div",null,[b[25]||(b[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),G(e("input",{"onUpdate:modelValue":b[2]||(b[2]=q=>h.email=q),type:"email",class:"admin-input",required:""},null,512),[[ee,h.email]])]),e("div",dS,[e("div",null,[b[26]||(b[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),p(bs,{modelValue:h.phone,"onUpdate:modelValue":b[3]||(b[3]=q=>h.phone=q),placeholder:"Numéro de téléphone","initial-country":"ga"},null,8,["modelValue"])]),e("div",null,[b[27]||(b[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Poste/Fonction",-1)),G(e("input",{"onUpdate:modelValue":b[4]||(b[4]=q=>h.position=q),type:"text",class:"admin-input",placeholder:"Administrateur système"},null,512),[[ee,h.position]])])]),e("div",null,[b[28]||(b[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bio",-1)),G(e("textarea",{"onUpdate:modelValue":b[5]||(b[5]=q=>h.bio=q),rows:"3",class:"admin-input",placeholder:"Présentez-vous en quelques mots..."},null,512),[[ee,h.bio]])]),e("div",uS,[e("button",{type:"submit",disabled:r.value,class:"admin-btn-primary disabled:opacity-50"},o(r.value?"Sauvegarde...":"Sauvegarder les modifications"),9,cS)])],32)])]),e("div",mS,[b[38]||(b[38]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Sécurité et confidentialité")],-1)),e("div",pS,[e("div",gS,[e("h4",vS,[p(l(Bt),{class:"w-5 h-5 mr-2 text-red-500"}),b[30]||(b[30]=U(" Changer le mot de passe ",-1))]),e("form",{onSubmit:xe(I,["prevent"]),class:"space-y-4"},[e("div",null,[b[31]||(b[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel",-1)),G(e("input",{"onUpdate:modelValue":b[6]||(b[6]=q=>A.current_password=q),type:"password",class:"admin-input",required:""},null,512),[[ee,A.current_password]])]),e("div",fS,[e("div",null,[b[32]||(b[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),G(e("input",{"onUpdate:modelValue":b[7]||(b[7]=q=>A.new_password=q),type:"password",class:"admin-input",minlength:"8",required:""},null,512),[[ee,A.new_password]])]),e("div",null,[b[33]||(b[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le mot de passe",-1)),G(e("input",{"onUpdate:modelValue":b[8]||(b[8]=q=>A.confirm_password=q),type:"password",class:"admin-input",required:""},null,512),[[ee,A.confirm_password]])])]),e("div",xS,[e("button",{type:"submit",disabled:r.value,class:"admin-btn-danger disabled:opacity-50"},o(r.value?"Mise à jour...":"Mettre à jour le mot de passe"),9,bS)])],32)]),e("div",hS,[e("div",yS,[e("h4",_S,[p(l(it),{class:"w-5 h-5 mr-2 text-blue-500"}),b[34]||(b[34]=U(" Authentification à deux facteurs (2FA) ",-1))]),e("label",wS,[G(e("input",{"onUpdate:modelValue":b[9]||(b[9]=q=>h.two_factor_enabled=q),type:"checkbox",class:"sr-only peer",onChange:C},null,544),[[_e,h.two_factor_enabled]]),b[35]||(b[35]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#0099cc]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0099cc]"},null,-1))])]),e("p",$S,o(h.two_factor_enabled?"L'authentification à deux facteurs est activée pour votre compte.":"Activez l'authentification à deux facteurs pour renforcer la sécurité de votre compte."),1)]),e("div",kS,[e("h4",CS,[p(l(ls),{class:"w-5 h-5 mr-2 text-yellow-500"}),b[36]||(b[36]=U(" Sessions actives ",-1))]),e("div",jS,[(t(!0),s(te,null,se(y.value,q=>(t(),s("div",{key:q.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",AS,[b[37]||(b[37]=e("div",{class:"w-2 h-2 bg-green-500 rounded-full mr-3"},null,-1)),e("div",null,[e("p",PS,o(q.device),1),e("p",MS,o(q.location)+" • "+o(J(q.last_activity)),1)])]),q.current?(t(),s("span",SS,"Session actuelle")):(t(),s("button",{key:0,onClick:Z=>x(q.id),class:"text-red-600 hover:text-red-900 text-sm"}," Déconnecter ",8,ES))]))),128))]),e("div",{class:"mt-4 flex justify-end"},[e("button",{onClick:c,class:"admin-btn-danger text-sm"}," Déconnecter toutes les autres sessions ")])])])]),e("div",DS,[b[45]||(b[45]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Préférences d'administration")],-1)),e("div",TS,[e("div",IS,[e("div",null,[b[40]||(b[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),G(e("select",{"onUpdate:modelValue":b[10]||(b[10]=q=>h.timezone=q),class:"admin-input"},b[39]||(b[39]=[ie('<option value="Africa/Libreville">Afrique/Libreville (WAT)</option><option value="UTC">UTC (Temps universel)</option><option value="Africa/Abidjan">Afrique/Abidjan (GMT)</option><option value="Europe/Paris">Europe/Paris (CET)</option><option value="America/New_York">Amérique/New York (EST)</option>',5)]),512),[[ne,h.timezone]])]),e("div",null,[b[42]||(b[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue",-1)),G(e("select",{"onUpdate:modelValue":b[11]||(b[11]=q=>h.language=q),class:"admin-input"},b[41]||(b[41]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)]),512),[[ne,h.language]])])]),e("div",LS,[b[44]||(b[44]=e("h4",{class:"font-medium text-gray-900"},"Notifications d'administration",-1)),e("div",VS,[(t(!0),s(te,null,se(j.value,q=>(t(),s("div",{key:q.id,class:"flex items-center justify-between"},[e("div",null,[e("p",FS,o(q.name),1),e("p",RS,o(q.description),1)]),e("label",qS,[G(e("input",{"onUpdate:modelValue":Z=>q.enabled=Z,type:"checkbox",class:"sr-only peer"},null,8,zS),[[_e,q.enabled]]),b[43]||(b[43]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#0099cc]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#0099cc]"},null,-1))])]))),128))])]),e("div",NS,[e("button",{onClick:F,disabled:r.value,class:"admin-btn-primary disabled:opacity-50"},o(r.value?"Sauvegarde...":"Sauvegarder les préférences"),9,US)])])])])])]))}},OS={class:"space-y-6"},HS={class:"flex justify-between items-center"},GS={class:"flex space-x-3"},KS={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},WS={class:"admin-card hover:shadow-md transition-shadow duration-200"},ZS={class:"flex items-center"},XS={class:"p-3 rounded-lg bg-green-100"},JS={class:"ml-4"},YS={class:"text-2xl font-bold text-gray-900"},QS={class:"admin-card hover:shadow-md transition-shadow duration-200"},eD={class:"flex items-center"},tD={class:"p-3 rounded-lg bg-blue-100"},sD={class:"ml-4"},oD={class:"text-2xl font-bold text-gray-900"},rD={class:"admin-card hover:shadow-md transition-shadow duration-200"},aD={class:"flex items-center"},nD={class:"p-3 rounded-lg bg-yellow-100"},iD={class:"ml-4"},lD={class:"text-2xl font-bold text-gray-900"},dD={class:"admin-card hover:shadow-md transition-shadow duration-200"},uD={class:"flex items-center"},cD={class:"p-3 rounded-lg bg-purple-100"},mD={class:"ml-4"},pD={class:"text-2xl font-bold text-gray-900"},gD={key:0,class:"admin-card"},vD={class:"p-6"},fD={key:0,class:"mb-6"},xD={class:"text-md font-medium text-orange-700 mb-3 flex items-center"},bD={class:"space-y-3"},hD={class:"font-medium"},yD={class:"text-sm text-gray-600"},_D={class:"text-sm"},wD={class:"text-right"},$D={class:"font-semibold text-orange-700"},kD=["onClick"],CD={key:1},jD={class:"text-md font-medium text-red-700 mb-3 flex items-center"},AD={class:"space-y-3"},PD={class:"font-medium"},MD={class:"text-sm text-gray-600"},ED={class:"text-sm"},SD={class:"text-right"},DD={class:"font-semibold text-red-700"},TD=["onClick"],ID={class:"admin-card"},LD={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},VD={class:"flex flex-wrap items-center space-x-4"},FD={class:"text-sm text-gray-500"},RD={key:1,class:"text-center py-12"},qD={key:2,class:"text-center py-12"},zD={key:3,class:"admin-card"},ND={class:"overflow-x-auto"},UD={class:"min-w-full divide-y divide-gray-200"},BD={class:"bg-white divide-y divide-gray-200"},OD={class:"px-6 py-4 whitespace-nowrap"},HD={class:"font-mono text-sm font-medium text-gray-900"},GD={class:"text-sm text-gray-500"},KD={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mt-1"},WD={class:"px-6 py-4 whitespace-nowrap"},ZD={class:"text-sm font-medium text-gray-900"},XD={class:"text-sm text-gray-500"},JD={class:"px-6 py-4 whitespace-nowrap"},YD={class:"text-sm font-semibold text-gray-900"},QD={class:"text-xs text-gray-500"},eT={class:"px-6 py-4 whitespace-nowrap"},tT={class:"text-sm text-gray-900"},sT={key:0,class:"text-xs text-gray-500"},oT={key:1,class:"text-xs text-gray-500"},rT={class:"px-6 py-4 whitespace-nowrap"},aT={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nT={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},iT={class:"flex space-x-2"},lT=["onClick"],dT=["onClick"],uT=["onClick"],cT={key:4,class:"fixed inset-0 z-50 overflow-y-auto"},mT={class:"flex items-center justify-center min-h-screen px-4"},pT={class:"relative bg-white rounded-lg max-w-md w-full"},gT={class:"p-6"},vT={class:"flex items-center justify-between mb-4"},fT={class:"text-lg font-semibold flex items-center"},xT={class:"space-y-4"},bT={class:"flex items-center"},hT={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},yT={class:"text-sm text-yellow-800"},_T={class:"font-medium mb-1 flex items-center"},wT={class:"flex justify-end space-x-3 mt-6"},$T=["disabled"],kT={key:5,class:"fixed inset-0 z-50 overflow-y-auto"},CT={class:"flex items-center justify-center min-h-screen px-4"},jT={class:"relative bg-white rounded-lg max-w-md w-full"},AT={class:"p-6"},PT={class:"flex items-center justify-between mb-4"},MT={class:"space-y-4"},ET={class:"flex justify-end space-x-3 mt-6"},ST=["disabled"],DT={__name:"RefundManagement",setup(d){const{get:m,post:T}=le(),M=V([]),u=V({}),r=V(!1),h=V(!1),A=V({}),n=V(!1),y=V(null),j=V(""),E=V({status:"",type:"",reason:""}),f=V({dryRun:!1}),_=async()=>{r.value=!0;try{const Z=new URLSearchParams({limit:100});Object.keys(E.value).forEach(D=>{E.value[D]&&Z.append(D,E.value[D])});const k=await m(`/admin/refunds?${Z}`);k&&k.success&&k.data&&(M.value=k.data.refunds||[])}catch(Z){console.error("Error loading refunds:",Z),window.$toast&&window.$toast.error("Erreur lors du chargement des remboursements","✗ Erreur"),M.value=[]}finally{r.value=!1}},I=async()=>{try{const Z=await m("/admin/refunds/stats");Z&&Z.success&&Z.data&&(u.value=Z.data)}catch(Z){console.error("Error loading stats:",Z),window.$toast&&window.$toast.error("Erreur lors du chargement des statistiques","✗ Erreur"),u.value={total_refunds:0,total_amount_refunded:0,pending_refunds:0,auto_processed:0}}},F=async()=>{try{const Z=await m("/admin/refunds/eligible-lotteries");Z&&Z.success&&Z.data&&(A.value=Z.data)}catch(Z){console.error("Error loading eligible lotteries:",Z),window.$toast&&window.$toast.error("Erreur lors du chargement des tombolas éligibles","✗ Erreur"),A.value={expired_insufficient:[],cancelled:[],summary:{expired_count:0,expired_estimated_refund:0,cancelled_count:0,cancelled_estimated_refund:0}}}},C=async()=>{h.value=!0;try{const Z=await T("/admin/refunds/process-automatic",{dry_run:f.value.dryRun});if(Z&&Z.success&&window.$toast){const k=Z.data.message||"Traitement automatique terminé";window.$toast.success(k,"✅ Traitement")}await Promise.all([_(),I(),F()]),n.value=!1}catch(Z){if(console.error("Error processing automatic refunds:",Z),window.$toast){const k=Z.response?.data?.message||"Erreur lors du traitement automatique";window.$toast.error(k,"✗ Erreur")}}finally{h.value=!1}},x=async(Z,k=!1)=>{if(confirm("Traiter les remboursements pour cette tombola ?")){h.value=!0;try{const D=await T("/admin/refunds/process-automatic",{lottery_id:Z,dry_run:k});if(D&&D.success&&window.$toast){const g=D.data.message||"Traitement terminé";window.$toast.success(g,"✅ Traitement")}await Promise.all([_(),I(),F()])}catch(D){if(console.error("Error processing lottery refunds:",D),window.$toast){const g=D.response?.data?.message||"Erreur lors du traitement";window.$toast.error(g,"✗ Erreur")}}finally{h.value=!1}}},c=async Z=>{if(confirm("Approuver ce remboursement ?")){h.value=!0;try{const k=await T(`/admin/refunds/${Z.id}/approve`);if(k&&k.success){if(window.$toast){const g=k.data.message||"Remboursement approuvé et traité";window.$toast.success(g,"✅ Approbation")}const D=M.value.findIndex(g=>g.id===Z.id);D!==-1&&k.data.refund&&(M.value[D]=k.data.refund),await I()}}catch(k){if(console.error("Error approving refund:",k),window.$toast){const D=k.response?.data?.message||"Erreur lors de l'approbation";window.$toast.error(D,"✗ Erreur")}}finally{h.value=!1}}},a=Z=>{y.value=Z,j.value=""},v=async()=>{if(j.value.trim()){h.value=!0;try{const Z=await T(`/admin/refunds/${y.value.id}/reject`,{reason:j.value});if(Z&&Z.success){if(window.$toast){const D=Z.data.message||"Remboursement rejeté";window.$toast.warning(D,"⚠️ Rejet")}const k=M.value.findIndex(D=>D.id===y.value.id);k!==-1&&Z.data.refund&&(M.value[k]=Z.data.refund),await I()}y.value=null,j.value=""}catch(Z){if(console.error("Error rejecting refund:",Z),window.$toast){const k=Z.response?.data?.message||"Erreur lors du rejet";window.$toast.error(k,"✗ Erreur")}y.value=null,j.value=""}finally{h.value=!1}}},i=Z=>{window.$toast&&window.$toast.info("Détails du remboursement : "+Z.refund_number,"📝 Détails")},$=()=>{E.value={status:"",type:"",reason:""},_()},L=Z=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Z||0)+" FCFA",Y=Z=>Z?Z>=1e6?(Z/1e6).toFixed(1)+"M":Z>=1e3?(Z/1e3).toFixed(0)+"K":Z.toString():"0",J=Z=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(Z)),z=Z=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",processed:"bg-purple-100 text-purple-800",completed:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800"})[Z]||"bg-gray-100 text-gray-800",b=Z=>({pending:"En attente",approved:"Approuvé",processed:"Traité",completed:"Terminé",rejected:"Rejeté",failed:"Échec"})[Z]||Z,q=Z=>({insufficient_participants:"Participants insuffisants",lottery_cancelled:"Tombola annulée",accidental_purchase:"Achat accidentel",changed_mind:"Changement d'avis",duplicate_purchase:"Achat en double",technical_issue:"Problème technique",system_error:"Erreur système",other:"Autre"})[Z]||Z;return ue(async()=>{await Promise.all([_(),I(),F()])}),(Z,k)=>(t(),s("div",OS,[e("div",HS,[k[14]||(k[14]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des Remboursements"),e("p",{class:"mt-2 text-gray-600"},"Administration des remboursements automatiques et manuels")],-1)),e("div",GS,[e("button",{onClick:F,class:"admin-btn-secondary"},[p(l(ot),{class:"w-4 h-4 mr-2"}),k[12]||(k[12]=U(" Vérifier les tombolas ",-1))]),e("button",{onClick:k[0]||(k[0]=D=>n.value=!0),class:"admin-btn-primary"},[p(l(Ze),{class:"w-4 h-4 mr-2"}),k[13]||(k[13]=U(" Traiter automatique ",-1))])])]),e("div",KS,[e("div",WS,[e("div",ZS,[e("div",XS,[p(l(dt),{class:"w-6 h-6 text-green-600"})]),e("div",JS,[k[15]||(k[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Total remboursements",-1)),e("p",YS,o(u.value.total_refunds||0),1)])])]),e("div",QS,[e("div",eD,[e("div",tD,[p(l(Te),{class:"w-6 h-6 text-[#0099cc]"})]),e("div",sD,[k[16]||(k[16]=e("p",{class:"text-sm font-medium text-gray-600"},"Montant remboursé",-1)),e("p",oD,o(Y(u.value.total_amount_refunded)),1)])])]),e("div",rD,[e("div",aD,[e("div",nD,[p(l(Pe),{class:"w-6 h-6 text-yellow-600"})]),e("div",iD,[k[17]||(k[17]=e("p",{class:"text-sm font-medium text-gray-600"},"En attente",-1)),e("p",lD,o(u.value.pending_refunds||0),1)])])]),e("div",dD,[e("div",uD,[e("div",cD,[p(l(Ze),{class:"w-6 h-6 text-purple-600"})]),e("div",mD,[k[18]||(k[18]=e("p",{class:"text-sm font-medium text-gray-600"},"Auto-traités",-1)),e("p",pD,o(u.value.auto_processed||0),1)])])])]),A.value.expired_insufficient?.length||A.value.cancelled?.length?(t(),s("div",gD,[k[21]||(k[21]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tombolas éligibles aux remboursements")],-1)),e("div",vD,[A.value.expired_insufficient?.length?(t(),s("div",fD,[e("h4",xD,[p(l(Pe),{class:"w-4 h-4 mr-1"}),k[19]||(k[19]=U(" Expirées - Participants insuffisants ",-1))]),e("div",bD,[(t(!0),s(te,null,se(A.value.expired_insufficient,D=>(t(),s("div",{key:D.id,class:"flex items-center justify-between bg-orange-50 border border-orange-200 rounded-lg p-4"},[e("div",null,[e("div",hD,o(D.lottery_number),1),e("div",yD,o(D.product_title),1),e("div",_D,o(D.participants)+"/"+o(D.min_participants)+" participants",1)]),e("div",wD,[e("div",$D,o(L(D.estimated_refund)),1),e("button",{onClick:g=>x(D.id,!1),class:"admin-btn-accent text-sm"}," Rembourser ",8,kD)])]))),128))])])):R("",!0),A.value.cancelled?.length?(t(),s("div",CD,[e("h4",jD,[p(l(At),{class:"w-4 h-4 mr-1"}),k[20]||(k[20]=U(" Tombolas annulées ",-1))]),e("div",AD,[(t(!0),s(te,null,se(A.value.cancelled,D=>(t(),s("div",{key:D.id,class:"flex items-center justify-between bg-red-50 border border-red-200 rounded-lg p-4"},[e("div",null,[e("div",PD,o(D.lottery_number),1),e("div",MD,o(D.product_title),1),e("div",ED,o(D.participants)+" participants",1)]),e("div",SD,[e("div",DD,o(L(D.estimated_refund)),1),e("button",{onClick:g=>x(D.id,!1),class:"admin-btn-danger text-sm"}," Rembourser ",8,TD)])]))),128))])])):R("",!0)])])):R("",!0),e("div",ID,[e("div",LD,[e("div",VD,[G(e("select",{"onUpdate:modelValue":k[1]||(k[1]=D=>E.value.status=D),onChange:_,class:"admin-input"},k[22]||(k[22]=[ie('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="approved">Approuvé</option><option value="processed">Traité</option><option value="completed">Terminé</option><option value="rejected">Rejeté</option>',6)]),544),[[ne,E.value.status]]),G(e("select",{"onUpdate:modelValue":k[2]||(k[2]=D=>E.value.type=D),onChange:_,class:"admin-input"},k[23]||(k[23]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"automatic"},"Automatique",-1),e("option",{value:"manual"},"Manuel",-1),e("option",{value:"admin"},"Admin",-1)]),544),[[ne,E.value.type]]),G(e("select",{"onUpdate:modelValue":k[3]||(k[3]=D=>E.value.reason=D),onChange:_,class:"admin-input"},k[24]||(k[24]=[ie('<option value="">Toutes les raisons</option><option value="insufficient_participants">Participants insuffisants</option><option value="lottery_cancelled">Tombola annulée</option><option value="accidental_purchase">Achat accidentel</option><option value="technical_issue">Problème technique</option>',5)]),544),[[ne,E.value.reason]]),e("button",{onClick:$,class:"admin-btn-secondary text-sm"}," Réinitialiser ")]),e("div",FD,o(M.value.length)+" remboursement(s) ",1)])]),r.value?(t(),s("div",RD,k[25]||(k[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des remboursements...",-1)]))):M.value.length===0?(t(),s("div",qD,[p(l(dt),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),k[26]||(k[26]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Aucun remboursement",-1)),k[27]||(k[27]=e("p",{class:"text-gray-600"},"Aucun remboursement ne correspond aux filtres sélectionnés.",-1))])):(t(),s("div",zD,[e("div",ND,[e("table",UD,[k[29]||(k[29]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Remboursement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Raison"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",BD,[(t(!0),s(te,null,se(M.value,D=>(t(),s("tr",{key:D.id,class:"hover:bg-gray-50"},[e("td",OD,[e("div",null,[e("div",HD,o(D.refund_number),1),e("div",GD,o(D.type),1),D.auto_processed?(t(),s("div",KD,[p(l(Ze),{class:"w-3 h-3 mr-1"}),k[28]||(k[28]=U(" Auto ",-1))])):R("",!0)])]),e("td",WD,[e("div",null,[e("div",ZD,o(D.user?.full_name||`${D.user?.first_name||""} ${D.user?.last_name||""}`.trim()||"N/A"),1),e("div",XD,o(D.user?.email||"N/A"),1)])]),e("td",JD,[e("div",YD,o(L(D.amount)),1),e("div",QD,o(D.currency),1)]),e("td",eT,[e("div",tT,o(q(D.reason)),1),D.lottery?(t(),s("div",sT,o(D.lottery.lottery_number),1)):D.ticket?(t(),s("div",oT," Ticket #"+o(D.ticket.ticket_number),1)):R("",!0)]),e("td",rT,[e("span",{class:Q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",z(D.status)])},o(b(D.status)),3)]),e("td",aT,o(J(D.created_at)),1),e("td",nT,[e("div",iT,[D.status==="pending"?(t(),s("button",{key:0,onClick:g=>c(D),class:"text-blue-600 hover:text-blue-900"}," Approuver ",8,lT)):R("",!0),D.status==="pending"?(t(),s("button",{key:1,onClick:g=>a(D),class:"text-red-600 hover:text-red-900"}," Rejeter ",8,dT)):R("",!0),e("button",{onClick:g=>i(D),class:"text-[#0099cc] hover:text-[#0088bb] flex items-center",title:"Voir détails"},[p(l(Fe),{class:"w-4 h-4"})],8,uT)])])]))),128))])])])])),n.value?(t(),s("div",cT,[e("div",mT,[e("div",{class:"fixed inset-0 bg-black/20",onClick:k[4]||(k[4]=D=>n.value=!1)}),e("div",pT,[e("div",gT,[e("div",vT,[e("h3",fT,[p(l(Ze),{class:"w-5 h-5 mr-2"}),k[30]||(k[30]=U(" Traitement Automatique ",-1))]),e("button",{onClick:k[5]||(k[5]=D=>n.value=!1),class:"text-gray-400 hover:text-gray-600"},[p(l(Re),{class:"w-6 h-6"})])]),e("div",xT,[e("div",null,[e("label",bT,[G(e("input",{type:"checkbox","onUpdate:modelValue":k[6]||(k[6]=D=>f.value.dryRun=D),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[_e,f.value.dryRun]]),k[31]||(k[31]=e("span",{class:"ml-2 text-sm text-gray-700"},"Mode test (pas de changements)",-1))])]),e("div",hT,[e("div",yT,[e("p",_T,[p(l(He),{class:"w-4 h-4 mr-1"}),k[32]||(k[32]=U(" Attention ",-1))]),k[33]||(k[33]=e("p",null,"Cette action va traiter automatiquement tous les remboursements éligibles.",-1))])])]),e("div",wT,[e("button",{onClick:k[7]||(k[7]=D=>n.value=!1),class:"admin-btn-secondary"}," Annuler "),e("button",{onClick:C,disabled:h.value,class:"admin-btn-primary disabled:opacity-50"},o(h.value?"Traitement...":"Traiter"),9,$T)])])])])])):R("",!0),y.value?(t(),s("div",kT,[e("div",CT,[e("div",{class:"fixed inset-0 bg-black/20",onClick:k[8]||(k[8]=D=>y.value=null)}),e("div",jT,[e("div",AT,[e("div",PT,[k[34]||(k[34]=e("h3",{class:"text-lg font-semibold"},"Rejeter le remboursement",-1)),e("button",{onClick:k[9]||(k[9]=D=>y.value=null),class:"text-gray-400 hover:text-gray-600"},[p(l(Re),{class:"w-6 h-6"})])]),e("div",MT,[e("div",null,[k[35]||(k[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Raison du rejet *",-1)),G(e("textarea",{"onUpdate:modelValue":k[10]||(k[10]=D=>j.value=D),rows:"3",required:"",class:"admin-input focus:border-red-500 focus:ring-red-500",placeholder:"Expliquez pourquoi ce remboursement est rejeté..."},null,512),[[ee,j.value]])])]),e("div",ET,[e("button",{onClick:k[11]||(k[11]=D=>{y.value=null,j.value=""}),class:"admin-btn-secondary"}," Annuler "),e("button",{onClick:v,disabled:h.value||!j.value.trim(),class:"admin-btn-danger disabled:opacity-50"},o(h.value?"Rejet...":"Rejeter"),9,ST)])])])])])):R("",!0)]))}},TT={class:"space-y-6"},IT={class:"flex justify-between items-center"},LT={class:"flex space-x-3"},VT={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},FT={class:"flex items-center"},RT={class:"ml-4"},qT={class:"text-sm font-medium text-gray-600"},zT={class:"text-2xl font-bold text-gray-900"},NT={class:"mt-4 pt-4 border-t border-gray-100"},UT={class:"flex items-center text-sm"},BT={class:"admin-card"},OT={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},HT={class:"flex flex-col"},GT={class:"relative"},KT={class:"flex flex-col"},WT={class:"flex flex-col"},ZT={class:"flex flex-col"},XT={class:"admin-card"},JT={key:0,class:"flex justify-center py-12"},YT={key:1,class:"overflow-x-auto"},QT={class:"min-w-full"},eI={class:"bg-white divide-y divide-gray-200"},tI={class:"px-6 py-4 whitespace-nowrap"},sI={class:"text-sm font-medium text-gray-900"},oI={class:"text-sm text-gray-500"},rI={class:"px-6 py-4 whitespace-nowrap"},aI={class:"flex items-center"},nI={class:"flex-shrink-0 h-8 w-8"},iI={class:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center"},lI={class:"ml-3"},dI={class:"text-sm font-medium text-gray-900"},uI={class:"text-sm text-gray-500"},cI={class:"px-6 py-4 whitespace-nowrap"},mI={class:"text-sm text-gray-900"},pI={class:"text-sm text-gray-500"},gI={class:"px-6 py-4 whitespace-nowrap"},vI={class:"text-sm font-medium text-gray-900"},fI={class:"text-sm text-gray-500"},xI={class:"px-6 py-4 whitespace-nowrap"},bI={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},hI={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},yI={class:"flex items-center space-x-2"},_I=["onClick"],wI=["onClick"],$I={class:"bg-white px-6 py-3 border-t border-gray-200 flex items-center justify-between"},kI={class:"text-sm text-gray-700"},CI={class:"font-medium"},jI={class:"font-medium"},AI={class:"font-medium"},PI={class:"flex space-x-2"},MI=["disabled"],EI=["disabled"],SI={key:0,class:"fixed inset-0 bg-black/20 overflow-y-auto h-full w-full z-50"},DI={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white"},TI={class:"mt-3"},II={class:"flex justify-between items-center mb-4"},LI={key:0,class:"space-y-4"},VI={class:"grid grid-cols-2 gap-4"},FI={class:"text-sm text-gray-900"},RI={class:"text-sm text-gray-900"},qI={class:"text-sm text-gray-900"},zI={class:"text-sm text-gray-900"},NI={class:"text-sm text-gray-900"},UI={class:"mt-6 flex justify-end space-x-3"},BI={__name:"PaymentManagement",setup(d){const{get:m,post:T}=le(),M=V(!1),u=V([]),r=re(()=>[{label:"Total des revenus",value:a(f.value.total_revenue)+" FCFA",change:f.value.revenue_change,icon:Ue,bgColor:"bg-green-100",iconColor:"text-green-600"},{label:"Transactions réussies",value:f.value.successful_transactions.toString(),change:f.value.transactions_change,icon:Ke,bgColor:"bg-blue-100",iconColor:"text-[#0099cc]"},{label:"Taux de réussite",value:f.value.success_rate+"%",change:f.value.success_rate_change,icon:Ct,bgColor:"bg-purple-100",iconColor:"text-purple-600"},{label:"Transactions échouées",value:f.value.failed_transactions.toString(),change:-Math.abs(f.value.failed_transactions/Math.max(f.value.successful_transactions,1)*100),icon:He,bgColor:"bg-red-100",iconColor:"text-red-600"}]),h=me({search:"",status:"",startDate:"",endDate:""}),A=V(1),n=V(20),y=V(0),j=V(!1),E=V(null),f=V({total_revenue:0,current_month_revenue:0,revenue_change:0,successful_transactions:0,current_month_transactions:0,transactions_change:0,success_rate:0,success_rate_change:0,failed_transactions:0,pending_transactions:0}),_=re(()=>Math.ceil(y.value/n.value)),I=re(()=>(A.value-1)*n.value+1),F=re(()=>Math.min(A.value*n.value,y.value)),C=async()=>{M.value=!0;try{const k=new URLSearchParams;k.append("page",A.value),k.append("per_page",n.value),h.search&&k.append("search",h.search),h.status&&k.append("status",h.status),h.startDate&&k.append("start_date",h.startDate),h.endDate&&k.append("end_date",h.endDate);const D=await m(`/admin/payments?${k.toString()}`);D&&D.success&&D.data&&(u.value=D.data.payments||[],y.value=D.data.pagination?.total||0,D.data.stats&&(f.value=D.data.stats))}catch(k){console.error("Error loading payments:",k),window.$toast&&window.$toast.error("Erreur lors du chargement des paiements","✗ Erreur"),u.value=[],y.value=0}finally{M.value=!1}},x=()=>{A.value=1,C()},c=async()=>{try{const k=await m("/admin/payments/stats");k&&k.success&&k.data&&(f.value=k.data)}catch(k){console.error("Error loading payment stats:",k)}},a=k=>new Intl.NumberFormat("fr-FR").format(k),v=k=>new Date(k).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),i=k=>({pending:"admin-badge-warning",completed:"admin-badge-success",failed:"admin-badge-danger",refunded:"bg-gray-100 text-gray-800 px-2 py-1 text-xs font-medium rounded-full"})[k]||"bg-gray-100 text-gray-800 px-2 py-1 text-xs font-medium rounded-full",$=k=>({pending:"En attente",completed:"Complété",failed:"Échoué",refunded:"Remboursé"})[k]||k,L=k=>{E.value=k,j.value=!0},Y=()=>{j.value=!1,E.value=null},J=async k=>{if(confirm("Êtes-vous sûr de vouloir initier un remboursement pour cette transaction ?"))try{const D=await T(`/admin/payments/${k.id}/refund`,{reason:"admin_initiated"});D&&D.success&&(window.$toast&&window.$toast.success("Remboursement initié avec succès","✅ Remboursement"),C(),Y())}catch(D){if(console.error("Error initiating refund:",D),window.$toast){const g=D.response?.data?.message||"Erreur lors de l'initiation du remboursement";window.$toast.error(g,"✗ Erreur")}}},z=async()=>{try{const k=new URLSearchParams;h.search&&k.append("search",h.search),h.status&&k.append("status",h.status),h.startDate&&k.append("start_date",h.startDate),h.endDate&&k.append("end_date",h.endDate);const D=await m(`/admin/payments/export?${k.toString()}`);if(D&&D.success&&D.data){const g=new Blob([JSON.stringify(D.data,null,2)],{type:"application/json"}),w=URL.createObjectURL(g),P=document.createElement("a");P.href=w,P.download=`payments-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(w),window.$toast&&window.$toast.success("Export téléchargé avec succès","✅ Export")}}catch(k){console.error("Error exporting payments:",k),window.$toast&&window.$toast.error("Erreur lors de l'export","✗ Erreur")}},b=async()=>{await Promise.all([C(),c()])},q=()=>{A.value>1&&(A.value--,C())},Z=()=>{A.value<_.value&&(A.value++,C())};return ue(()=>{C(),c()}),(k,D)=>(t(),s("div",TT,[e("div",IT,[D[7]||(D[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des Paiements"),e("p",{class:"mt-2 text-gray-600"},"Suivez et gérez toutes les transactions financières")],-1)),e("div",LT,[e("button",{onClick:z,class:"admin-btn-secondary"},[p(l(mt),{class:"w-4 h-4 mr-2"}),D[5]||(D[5]=U(" Exporter ",-1))]),e("button",{onClick:b,class:"admin-btn-primary"},[p(l(Ne),{class:"w-4 h-4 mr-2"}),D[6]||(D[6]=U(" Actualiser ",-1))])])]),e("div",VT,[(t(!0),s(te,null,se(r.value,g=>(t(),s("div",{key:g.label,class:"admin-card hover:shadow-md transition-shadow duration-200"},[e("div",FT,[e("div",{class:Q(["p-3 rounded-lg",g.bgColor])},[(t(),de(Ce(g.icon),{class:Q(["w-6 h-6",g.iconColor])},null,8,["class"]))],2),e("div",RT,[e("p",qT,o(g.label),1),e("p",zT,o(g.value),1)])]),e("div",NT,[e("div",UT,[e("span",{class:Q(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",g.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(t(),de(Ce(g.change>=0?l(ns):l(zt)),{class:"w-3 h-3 mr-1"})),U(" "+o(Math.abs(g.change))+"% ",1)],2),D[8]||(D[8]=e("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),e("div",BT,[e("div",OT,[e("div",HT,[D[9]||(D[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),e("div",GT,[p(l(ot),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),G(e("input",{"onUpdate:modelValue":D[0]||(D[0]=g=>h.search=g),type:"text",placeholder:"Transaction ID, utilisateur...",class:"admin-input pl-10 w-full",onInput:x},null,544),[[ee,h.search]])])]),e("div",KT,[D[11]||(D[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":D[1]||(D[1]=g=>h.status=g),onChange:x,class:"admin-input w-full"},D[10]||(D[10]=[ie('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="completed">Complété</option><option value="failed">Échoué</option><option value="refunded">Remboursé</option>',5)]),544),[[ne,h.status]])]),e("div",WT,[D[12]||(D[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date début",-1)),G(e("input",{"onUpdate:modelValue":D[2]||(D[2]=g=>h.startDate=g),type:"date",class:"admin-input w-full",onChange:x},null,544),[[ee,h.startDate]])]),e("div",ZT,[D[13]||(D[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date fin",-1)),G(e("input",{"onUpdate:modelValue":D[3]||(D[3]=g=>h.endDate=g),type:"date",class:"admin-input w-full",onChange:x},null,544),[[ee,h.endDate]])])])]),e("div",XT,[D[20]||(D[20]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Transactions récentes")],-1)),M.value?(t(),s("div",JT,D[14]||(D[14]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):(t(),s("div",YT,[e("table",QT,[D[15]||(D[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Transaction "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit/Tombola "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Montant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",eI,[(t(!0),s(te,null,se(u.value,g=>(t(),s("tr",{key:g.id,class:"hover:bg-gray-50"},[e("td",tI,[e("div",sI,"#"+o(g.transaction_id),1),e("div",oI,o(g.payment_method),1)]),e("td",rI,[e("div",aI,[e("div",nI,[e("div",iI,[p(l(Ve),{class:"h-4 w-4 text-gray-600"})])]),e("div",lI,[e("div",dI,o(g.user_name),1),e("div",uI,o(g.user_email),1)])])]),e("td",cI,[e("div",mI,o(g.product_name),1),e("div",pI,o(g.tickets_count)+" tickets",1)]),e("td",gI,[e("div",vI,o(a(g.amount)),1),e("div",fI,o(g.currency),1)]),e("td",xI,[e("span",{class:Q(i(g.status))},o($(g.status)),3)]),e("td",bI,o(v(g.created_at)),1),e("td",hI,[e("div",yI,[e("button",{onClick:w=>L(g),class:"text-[#0099cc] hover:text-[#0088bb]",title:"Voir détails"},[p(l(Fe),{class:"w-4 h-4"})],8,_I),g.status==="completed"?(t(),s("button",{key:0,onClick:w=>J(g),class:"text-orange-600 hover:text-orange-900",title:"Initier remboursement"},[p(l(Fs),{class:"w-4 h-4"})],8,wI)):R("",!0)])])]))),128))])])])),e("div",$I,[e("div",kI,[D[16]||(D[16]=U(" Affichage de ",-1)),e("span",CI,o(I.value),1),D[17]||(D[17]=U(" à ",-1)),e("span",jI,o(F.value),1),D[18]||(D[18]=U(" sur ",-1)),e("span",AI,o(y.value),1),D[19]||(D[19]=U(" résultats ",-1))]),e("div",PI,[e("button",{onClick:q,disabled:A.value===1,class:"admin-btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,MI),e("button",{onClick:Z,disabled:A.value===_.value,class:"admin-btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,EI)])])]),j.value?(t(),s("div",SI,[e("div",DI,[e("div",TI,[e("div",II,[D[21]||(D[21]=e("h3",{class:"text-lg font-medium text-gray-900"},"Détails du paiement",-1)),e("button",{onClick:Y,class:"text-gray-400 hover:text-gray-600"},[p(l(Re),{class:"w-6 h-6"})])]),E.value?(t(),s("div",LI,[e("div",VI,[e("div",null,[D[22]||(D[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction",-1)),e("p",FI,o(E.value.transaction_id),1)]),e("div",null,[D[23]||(D[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",RI,o(a(E.value.amount))+" "+o(E.value.currency),1)]),e("div",null,[D[24]||(D[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:Q(i(E.value.status))},o($(E.value.status)),3)]),e("div",null,[D[25]||(D[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Méthode",-1)),e("p",qI,o(E.value.payment_method),1)]),e("div",null,[D[26]||(D[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("p",zI,o(v(E.value.created_at)),1)]),e("div",null,[D[27]||(D[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateur",-1)),e("p",NI,o(E.value.user_name),1)])])])):R("",!0),e("div",UI,[e("button",{onClick:Y,class:"admin-btn-secondary"}," Fermer "),E.value?.status==="completed"?(t(),s("button",{key:0,onClick:D[4]||(D[4]=g=>J(E.value)),class:"admin-btn-accent"}," Initier remboursement ")):R("",!0)])])])])):R("",!0)]))}},OI=[{path:"/register",name:"register",component:qn,meta:{requiresGuest:!0}},{path:"/verify-email",name:"verify-email",component:Yn},{path:"/forgot-password",name:"forgot-password",component:Pi,meta:{requiresGuest:!0}},{path:"/reset-password-verify",name:"reset-password-verify",component:ll,meta:{requiresGuest:!0}},{path:"/",component:Po,children:[{path:"",name:"home",component:Nd},{path:"results",name:"public.results",component:tc},{path:"verify",name:"public.verify",component:Zc},{path:"history",name:"public.history",component:$m},{path:"login",name:"login",component:Oa,meta:{requiresGuest:!0}},{path:"products",name:"public.products",component:Xp},{path:"products/:id",name:"public.product.detail",component:Lg,props:!0},{path:"how-it-works",name:"public.how-it-works",component:rf},{path:"contact",name:"public.contact",component:Xf}]},{path:"/customer",component:ar,meta:{requiresAuth:!0},children:[{path:"",name:"customer.dashboard",component:Ix},{path:"products",name:"customer.products",component:Kx},{path:"products/:id",name:"customer.product.detail",component:rb,props:!0},{path:"profile",name:"customer.profile",component:wh},{path:"tickets",name:"customer.tickets",component:$y},{path:"refunds",name:"customer.refunds",component:H_},{path:"orders",name:"customer.orders",component:x5},{path:"payments",name:"customer.payments",component:R4},{path:"orders/:id",name:"customer.order.detail",component:m6,props:!0},{path:"payments/:id",name:"customer.payment.detail",component:Z$,props:!0}]},{path:"/payment/method",name:"payment.method",component:N9,meta:{requiresAuth:!0}},{path:"/payment/phone",name:"payment.phone",component:l8,meta:{requiresAuth:!0}},{path:"/payment/confirmation",name:"payment.confirmation",component:K8,meta:{requiresAuth:!0}},{path:"/admin",component:Ur,meta:{requiresAuth:!0},children:[{path:"",name:"admin.dashboard",component:H7},{path:"users",name:"admin.users",component:Sk},{path:"products",name:"admin.products",component:BC},{path:"lotteries",name:"admin.lotteries",component:WA},{path:"settings",name:"admin.settings",component:LE},{path:"profile",name:"admin.profile",component:BS},{path:"refunds",name:"admin.refunds",component:DT},{path:"payments",name:"admin.payments",component:BI}]},{path:"/merchant",component:()=>Le(()=>import("./MerchantLayout-_68WApCP.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0,role:"MERCHANT"},children:[{path:"",redirect:"dashboard"},{path:"dashboard",name:"merchant.dashboard",component:()=>Le(()=>import("./Dashboard-Bw3dCbIm.js"),__vite__mapDeps([2,1]))},{path:"products",name:"merchant.products",component:()=>Le(()=>import("./Products-CdKorkCU.js"),__vite__mapDeps([3,1,4]))},{path:"products/create",name:"merchant.products.create",component:()=>Le(()=>import("./CreateProduct-iOjsvOlH.js"),__vite__mapDeps([5,1,4]))},{path:"products/:id/edit",name:"merchant.products.edit",component:()=>Le(()=>import("./EditProduct-D59ntKI6.js"),__vite__mapDeps([6,1])),props:!0},{path:"orders",name:"merchant.orders",component:()=>Le(()=>import("./Orders-BmnfdGfy.js"),__vite__mapDeps([7,1]))},{path:"lotteries",name:"merchant.lotteries",component:()=>Le(()=>import("./LotteriesSimple-Dfj9NeDt.js"),__vite__mapDeps([8,1]))},{path:"lotteries/:id",name:"merchant.lottery.view",component:()=>Le(()=>import("./LotteryView-rMwI2wQV.js"),__vite__mapDeps([9,1])),props:!0},{path:"analytics",name:"merchant.analytics",component:()=>Le(()=>import("./Analytics-CrhLok2U.js"),__vite__mapDeps([10,1]))},{path:"settings",name:"merchant.settings",component:()=>Le(()=>import("./Settings-BqcxiZKz.js"),__vite__mapDeps([11,1]))},{path:"profile",name:"merchant.profile",component:()=>Le(()=>import("./Profile-BoczXX68.js"),__vite__mapDeps([12,1]))}]}],Kt=Ps({history:Ms(),routes:OI});Kt.beforeEach((d,m,T)=>{const M=we();if(d.meta.requiresAuth&&!M.isAuthenticated){T({name:"login"});return}if(d.meta.requiresGuest&&M.isAuthenticated){const u=M.getDefaultRedirect();T({name:u});return}if(d.meta.role&&M.isAuthenticated&&!HI(d.meta.role,M)){const r=M.getDefaultRedirect();T({name:r});return}T()});function HI(d,m){switch(d){case"ADMIN":return m.isAdmin;case"MERCHANT":return m.isMerchant;case"CUSTOMER":return m.isCustomer;default:return!1}}const GI={class:"fixed top-4 right-4 z-50 space-y-2"},KI={class:"flex-shrink-0"},WI={class:"ml-3 flex-1"},ZI={key:0,class:"text-sm font-semibold mb-1"},XI={class:"text-sm"},JI=["onClick"],YI={__name:"Toast",setup(d,{expose:m}){const T=V([]);let M=0;const u={success:Te,error:At,warning:He,info:Oe},r=C=>u[C]||Oe,h=C=>{const x="bg-white/90 border-l-4",c={success:"border-blue-500 text-blue-900",error:"border-red-500 text-red-900",warning:"border-orange-500 text-orange-900",info:"border-blue-500 text-blue-900"};return`${x} ${c[C]||c.info}`},A=C=>{const x={success:"text-blue-600",error:"text-red-600",warning:"text-orange-600",info:"text-blue-600"};return x[C]||x.info},n=C=>{const x={success:"bg-blue-500",error:"bg-red-500",warning:"bg-orange-500",info:"bg-blue-500"};return x[C]||x.info},y=({title:C,message:x,type:c="info",duration:a=5e3})=>{const v=++M,i={id:v,title:C,message:x,type:c,duration:a};return T.value.push(i),a>0&&setTimeout(()=>{j(v)},a),v},j=C=>{const x=T.value.findIndex(c=>c.id===C);x>-1&&T.value.splice(x,1)},E=()=>{T.value=[]},f=(C,x="Succès")=>y({title:x,message:C,type:"success"}),_=(C,x="Erreur")=>y({title:x,message:C,type:"error"}),I=(C,x="Attention")=>y({title:x,message:C,type:"warning"}),F=(C,x="Information")=>y({title:x,message:C,type:"info"});return m({addToast:y,removeToast:j,clearAll:E,showSuccess:f,showError:_,showWarning:I,showInfo:F}),ue(()=>{window.$toast={success:f,error:_,warning:I,info:F,add:y,remove:j,clear:E}}),rt(()=>{delete window.$toast}),(C,x)=>(t(),de(Ss,{to:"body"},[e("div",GI,[p(Es,{name:"toast",tag:"div",class:"space-y-2"},{default:oe(()=>[(t(!0),s(te,null,se(T.value,c=>(t(),s("div",{key:c.id,class:Q([h(c.type),"flex items-start p-4 rounded-xl shadow-lg border backdrop-blur-sm max-w-sm transition-all duration-300"])},[e("div",KI,[(t(),de(Ce(r(c.type)),{class:Q([A(c.type),"w-5 h-5"])},null,8,["class"]))]),e("div",WI,[c.title?(t(),s("h4",ZI,o(c.title),1)):R("",!0),e("p",XI,o(c.message),1)]),e("button",{onClick:a=>j(c.id),class:"flex-shrink-0 ml-2 p-1 rounded-lg hover:bg-black/5 transition-colors"},[p(l(Re),{class:"w-4 h-4 text-gray-400 hover:text-gray-600"})],8,JI),c.duration?(t(),s("div",{key:0,class:Q([n(c.type),"absolute bottom-0 left-0 h-1 rounded-b-xl transition-all duration-linear"]),style:Me({width:"100%",animationDuration:c.duration+"ms",animationName:"toast-progress"})},null,6)):R("",!0)],2))),128))]),_:1})])]))}},QI=$e(YI,[["__scopeId","data-v-583315c0"]]),eL={id:"app"},tL={__name:"App",setup(d){const m=we();return ue(()=>{m.checkAuth()}),(T,M)=>{const u=fe("router-view");return t(),s("div",eL,[p(u),p(QI,{ref:"toastRef"},null,512)])}}},Wt=Ds(tL),sL=Ts();window.router=Kt;Wt.use(sL);Wt.use(Kt);Wt.mount("#app");export{pe as A,Xe as B,Pt as C,Ne as D,mt as E,At as F,Pe as G,De as H,Ut as I,Ge as J,cs as K,Xs as L,Zs as M,at as N,gt as P,as as _,le as a,jt as b,Qt as c,Be as d,Ye as e,Ct as f,Ze as g,Ve as h,tt as i,Ue as j,pt as k,Rt as l,ns as m,zt as n,ze as o,ot as p,Re as q,ct as r,Te as s,Fe as t,we as u,yt as v,bt as w,qs as x,Oe as y,kt as z};
