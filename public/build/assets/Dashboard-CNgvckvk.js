import{a as B,c as I}from"./app-BpExDA3R.js";import{r as f,c as A,j as N,b as u,e,g as r,w as _,h as $,F as C,y as F,u as d,aH as R,t as a,o as c,av as z,E as V,v as p,z as E,N as O,i as P,aJ as L,aK as M}from"./vendor-jx2CZFIM.js";function T(){const{get:v,loading:k,error:D}=B(),l=f({products:{total:0,active:0,total_views:0},orders:{total:0,total_revenue:0},lotteries:{total:0,active:0,completed:0,total_tickets_sold:0},revenue:{monthly:0,weekly:0,total:0}}),m=f([]),y=f([]),g=f([]),b=A(()=>[{label:"Revenus du mois",value:s(l.value.revenue?.monthly||0),change:0,icon:"CurrencyDollarIcon",color:"bg-[#0099cc]"},{label:"Commandes",value:l.value.orders?.total||0,change:0,icon:"ShoppingBagIcon",color:"bg-blue-500"},{label:"Produits actifs",value:l.value.products?.active||0,change:0,icon:"GiftIcon",color:"bg-yellow-500"},{label:"Clients",value:l.value.customers?.total||0,change:0,icon:"UsersIcon",color:"bg-purple-500"}]),h=A(()=>({total_revenue:l.value.revenue?.total||0,total_orders:l.value.orders?.total||0,avg_order_value:l.value.orders?.total>0?(l.value.revenue?.total||0)/l.value.orders.total:0})),w=async()=>{try{const o=await v("/stats/merchant/dashboard");o&&o.success&&(l.value=o.data)}catch(o){console.error("Erreur lors du chargement des statistiques:",o)}},i=async()=>{try{const o=await v("/stats/merchant/orders");o&&o.success&&(m.value=o.data.recent_orders||[]);const n=await v("/stats/merchant/lotteries");n&&n.success&&(y.value=n.data.recent_lotteries||[]);const S=await v("/stats/merchant/analytics?period=30d");S&&S.success&&(g.value=S.data.top_products||[])}catch(o){console.error("Erreur lors du chargement des données récentes:",o)}},s=o=>{const n=parseFloat(o)||0;return n>=1e6?(n/1e6).toFixed(1)+"M FCFA":n>=1e3?(n/1e3).toFixed(0)+"k FCFA":n.toLocaleString("fr-FR")+" FCFA"};return{stats:b,summary:h,dashboardStats:l,recentOrders:m,recentLotteries:y,topProducts:g,loading:k,error:D,loadDashboardData:async()=>{await Promise.all([w(),i()])},loadDashboardStats:w,loadRecentData:i,formatCurrency:s,formatDate:o=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(o)),getStatusColor:o=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800",active:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"})[o]||"bg-gray-100 text-gray-800"}}const q={class:"space-y-6"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},H={class:"flex items-center"},J={class:"flex items-center"},K={class:"flex items-center"},U={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Q={class:"flex items-center justify-between"},W={class:"text-sm font-medium text-gray-600"},X={class:"text-3xl font-bold text-gray-900 mt-2"},Y={class:"mt-4 pt-4 border-t border-gray-100"},Z={class:"flex items-center text-sm"},ee={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},te={class:"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-gray-100"},se={class:"flex items-center justify-between mb-6"},oe={class:"flex space-x-2"},ae=["onClick"],le={class:"h-64 bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-lg flex items-center justify-center"},re={class:"text-center"},ne={class:"text-gray-400 text-sm"},de={class:"mt-6 grid grid-cols-3 gap-4"},ce={class:"text-center"},ie={class:"text-2xl font-bold text-[#0099cc]"},ue={class:"text-center"},me={class:"text-2xl font-bold text-blue-600"},ge={class:"text-center"},xe={class:"text-2xl font-bold text-purple-600"},ve={class:"space-y-6"},be={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},he={class:"flex items-center justify-between mb-4"},_e={class:"space-y-3"},pe={class:"flex items-center space-x-3"},fe={class:"w-10 h-10 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},ye={class:"font-medium text-gray-900"},we={class:"text-sm text-gray-500"},Ce={class:"text-right"},Fe={class:"font-semibold text-gray-900"},ke={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},De={class:"flex items-center justify-between mb-4"},je={class:"space-y-3"},Se={class:"flex-shrink-0 w-6 h-6 bg-[#0099cc] text-white text-xs font-bold rounded-full flex items-center justify-center"},Pe={class:"flex-1 min-w-0"},Ae={class:"font-medium text-gray-900 truncate"},Re={class:"flex items-center space-x-2 text-sm text-gray-500"},Oe={__name:"Dashboard",setup(v){const{stats:k,recentOrders:D,topProducts:l,summary:m,loadDashboardData:y}=T(),g=f("30j"),b=A(()=>({totalSales:m.value.total_revenue||0,totalOrders:m.value.total_orders||0,avgOrder:m.value.avg_order_value||0})),h=i=>new Intl.NumberFormat("fr-FR").format(i),w=i=>({completed:"Terminé",pending:"En attente",processing:"En cours",cancelled:"Annulé",paid:"Payé",awaiting_payment:"En attente de paiement"})[i]||i;return N(async()=>{await y()}),(i,s)=>{const x=$("router-link");return c(),u("div",q,[s[13]||(s[13]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de Bord Vendeur"),e("p",{class:"mt-2 text-gray-600"},"Suivez vos ventes, gérez vos produits et analysez vos performances")],-1)),e("div",G,[r(x,{to:"/merchant/products/create",class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:_(()=>[e("div",H,[r(d(z),{class:"w-8 h-8 mr-4"}),s[0]||(s[0]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Nouveau Produit"),e("p",{class:"text-blue-100 text-sm"},"Publier un produit")],-1))])]),_:1}),r(x,{to:"/merchant/orders",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:_(()=>[e("div",J,[r(d(V),{class:"w-8 h-8 mr-4"}),s[1]||(s[1]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Commandes"),e("p",{class:"text-blue-100 text-sm"},"Suivre les ventes")],-1))])]),_:1}),r(x,{to:"/merchant/analytics",class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:_(()=>[e("div",K,[r(d(R),{class:"w-8 h-8 mr-4"}),s[2]||(s[2]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Analytiques"),e("p",{class:"text-purple-100 text-sm"},"Voir les stats")],-1))])]),_:1})]),e("div",U,[(c(!0),u(C,null,F(d(k),t=>(c(),u("div",{key:t.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200"},[e("div",Q,[e("div",null,[e("p",W,a(t.label),1),e("p",X,a(t.value),1)]),e("div",{class:p(["p-4 rounded-xl",t.color])},[(c(),E(O(t.icon),{class:"w-8 h-8 text-white"}))],2)]),e("div",Y,[e("div",Z,[e("span",{class:p(["font-medium flex items-center px-2 py-1 rounded-full text-xs",t.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(c(),E(O(t.change>=0?d(L):d(M)),{class:"w-3 h-3 mr-1"})),P(" "+a(Math.abs(t.change))+"% ",1)],2),s[3]||(s[3]=e("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),e("div",ee,[e("div",te,[e("div",se,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Évolution des Ventes",-1)),e("div",oe,[(c(),u(C,null,F(["7j","30j","90j"],t=>e("button",{key:t,onClick:j=>g.value=t,class:p(["px-3 py-1 rounded-lg text-sm font-medium transition-all",g.value===t?"bg-[#0099cc] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},a(t),11,ae)),64))])]),e("div",le,[e("div",re,[r(d(R),{class:"w-16 h-16 text-[#0099cc] mx-auto mb-4"}),s[5]||(s[5]=e("p",{class:"text-gray-600 font-medium"},"Graphique des ventes",-1)),e("p",ne,"Données des derniers "+a(g.value),1)])]),e("div",de,[e("div",ce,[e("p",ie,a(h(b.value.totalSales||0)),1),s[6]||(s[6]=e("p",{class:"text-sm text-gray-600"},"Ventes totales (FCFA)",-1))]),e("div",ue,[e("p",me,a(b.value.totalOrders||0),1),s[7]||(s[7]=e("p",{class:"text-sm text-gray-600"},"Commandes",-1))]),e("div",ge,[e("p",xe,a(h(b.value.avgOrder||0)),1),s[8]||(s[8]=e("p",{class:"text-sm text-gray-600"},"Panier moyen (FCFA)",-1))])])]),e("div",ve,[e("div",be,[e("div",he,[s[10]||(s[10]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes",-1)),r(x,{to:"/merchant/orders",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:_(()=>s[9]||(s[9]=[P(" Voir tout → ",-1)])),_:1,__:[9]})]),e("div",_e,[(c(!0),u(C,null,F(d(D),t=>(c(),u("div",{key:t.id,class:"flex items-center justify-between p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"},[e("div",pe,[e("div",fe,[r(d(V),{class:"w-5 h-5 text-[#0099cc]"})]),e("div",null,[e("p",ye,a(t.product_name),1),e("p",we,a(t.customer_name),1)])]),e("div",Ce,[e("p",Fe,a(h(t.amount||0))+" FCFA",1),e("span",{class:p(["inline-block px-2 py-1 text-xs font-medium rounded-full",t.status==="completed"?"bg-blue-100 text-blue-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},a(w(t.status)),3)])]))),128))])]),e("div",ke,[e("div",De,[s[12]||(s[12]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Produits populaires",-1)),r(x,{to:"/merchant/products",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:_(()=>s[11]||(s[11]=[P(" Gérer → ",-1)])),_:1,__:[11]})]),e("div",je,[(c(!0),u(C,null,F(d(l),(t,j)=>(c(),u("div",{key:t.id,class:"flex items-center space-x-3"},[e("div",Se,a(j+1),1),r(I,{src:t.image_url||t.main_image||t.image,alt:t.name,"container-class":"w-12 h-12 rounded-lg","image-class":"w-12 h-12 rounded-lg object-cover","fallback-class":"w-12 h-12 rounded-lg","fallback-text":"Photo"},null,8,["src","alt"]),e("div",Pe,[e("p",Ae,a(t.name),1),e("div",Re,[e("span",null,a(t.sales)+" ventes",1),e("span",{class:p(["font-medium",t.growth>=0?"text-blue-600":"text-red-600"])},a(t.growth>=0?"+":"")+a(t.growth)+"% ",3)])])]))),128))])])])])])}}};export{Oe as default};
