import{r as a,c as A,j as C,b as n,e as t,t as i,V as W,a7 as B,F as f,z as h,o,x as b,l as S}from"./vendor-HurWl8Tx.js";import{c as v}from"./app-Bc6yMBle.js";const P={class:"p-6"},M={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},R={class:"bg-white rounded-lg shadow p-4"},T={class:"text-2xl font-bold text-gray-900"},E={class:"bg-white rounded-lg shadow p-4"},F={class:"text-2xl font-bold text-blue-600"},j={class:"bg-white rounded-lg shadow p-4"},z={class:"text-2xl font-bold text-green-600"},D={class:"bg-white rounded-lg shadow p-4 mb-6"},I={class:"bg-white rounded-lg shadow overflow-hidden"},U={key:0,class:"text-center py-12"},V={key:1,class:"text-center py-12"},q={class:"text-red-600"},G={key:2,class:"text-center py-12"},L={key:3,class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-200"},J={class:"bg-white divide-y divide-gray-200"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"flex items-center"},Q={class:"ml-4"},X={class:"text-sm font-medium text-gray-900"},Y={class:"text-xs text-gray-500"},Z={class:"px-6 py-4"},$={class:"text-sm text-gray-900"},N={class:"px-6 py-4 whitespace-nowrap"},tt={class:"px-6 py-4"},et={class:"flex flex-wrap gap-1"},st={key:0,class:"text-xs text-gray-400"},rt={class:"px-6 py-4 whitespace-nowrap"},at={__name:"PrivilegeManagement",setup(nt){const l=a([]),d=a({}),x=a(!1),u=a(""),c=a(""),p=A(()=>c.value?l.value.filter(e=>e.user_type?.code===c.value):l.value),g=async()=>{x.value=!0,u.value="";try{const e=await v.get("/admin/privileges");e.data.success?l.value=e.data.data?.privileges||[]:l.value=[]}catch(e){u.value=e.response?.data?.message||"Erreur lors du chargement des privilèges",console.error("Error fetching privileges:",e)}finally{x.value=!1}},_=async()=>{try{const e=await v.get("/admin/privileges/statistics");d.value=e.data.stats||{}}catch(e){console.error("Error fetching statistics:",e)}},w=e=>({superadmin:"Super Admin",admin:"Admin",agent:"Agent",business_enterprise:"Business Ent.",business_individual:"Business Ind.",particulier:"Client","Super Admin":"Super Admin",Admin:"Admin",Agent:"Agent","Business Enterprise":"Business Ent.","Business Individual":"Business Ind.",Particulier:"Client"})[e]||e,m=e=>e.startsWith("users.")?"Utilisateurs":e.startsWith("products.")?"Articles":e.startsWith("lotteries.")?"Tirages":e.startsWith("orders.")?"Commandes":e.startsWith("payments.")?"Paiements":e.startsWith("refunds.")?"Remboursements":e.startsWith("analytics.")?"Statistiques":e.startsWith("reports.")?"Rapports":e.startsWith("system.")?"Système":e.startsWith("roles.")?"Rôles":e.startsWith("privileges.")?"Privilèges":e.startsWith("notifications.")?"Notifications":e.startsWith("support.")?"Support":e.startsWith("moderation.")?"Modération":e.startsWith("profile.")?"Profil":e.startsWith("finances.")?"Finances":"Autre",k=e=>{const s=m(e);return{Utilisateurs:"bg-purple-100 text-purple-800",Articles:"bg-blue-100 text-blue-800",Tirages:"bg-yellow-100 text-yellow-800",Commandes:"bg-green-100 text-green-800",Paiements:"bg-emerald-100 text-emerald-800",Remboursements:"bg-red-100 text-red-800",Statistiques:"bg-indigo-100 text-indigo-800",Rapports:"bg-pink-100 text-pink-800",Système:"bg-orange-100 text-orange-800",Rôles:"bg-cyan-100 text-cyan-800",Privilèges:"bg-teal-100 text-teal-800",Notifications:"bg-lime-100 text-lime-800",Support:"bg-amber-100 text-amber-800",Modération:"bg-rose-100 text-rose-800",Profil:"bg-violet-100 text-violet-800",Finances:"bg-fuchsia-100 text-fuchsia-800",Autre:"bg-gray-100 text-gray-800"}[s]||"bg-gray-100 text-gray-800"};return C(()=>{g(),_()}),(e,s)=>(o(),n("div",P,[s[10]||(s[10]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Gestion des privilèges"),t("p",{class:"text-gray-600 mt-1"},"Gérer les privilèges du système")],-1)),t("div",M,[t("div",R,[s[1]||(s[1]=t("div",{class:"text-sm text-gray-500"},"Total",-1)),t("div",T,i(d.value.total||0),1)]),t("div",E,[s[2]||(s[2]=t("div",{class:"text-sm text-gray-500"},"Type Admin",-1)),t("div",F,i(d.value.admin_type||0),1)]),t("div",j,[s[3]||(s[3]=t("div",{class:"text-sm text-gray-500"},"Type Customer",-1)),t("div",z,i(d.value.customer_type||0),1)])]),t("div",D,[s[5]||(s[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filtrer par type d'utilisateur",-1)),W(t("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>c.value=r),class:"w-full md:w-64 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},s[4]||(s[4]=[t("option",{value:""},"Tous les types",-1),t("option",{value:"admin"},"Admin",-1),t("option",{value:"customer"},"Customer",-1)]),512),[[B,c.value]])]),t("div",I,[x.value?(o(),n("div",U,s[6]||(s[6]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)]))):u.value?(o(),n("div",V,[t("p",q,i(u.value),1),t("button",{onClick:g,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Réessayer ")])):p.value.length===0?(o(),n("div",G,s[7]||(s[7]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun privilège trouvé",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"Aucun privilège ne correspond aux filtres sélectionnés.",-1)]))):(o(),n("div",L,[t("table",H,[s[9]||(s[9]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type utilisateur"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rôles"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Catégorie")])],-1)),t("tbody",J,[(o(!0),n(f,null,h(p.value,r=>(o(),n("tr",{key:r.id,class:"hover:bg-gray-50"},[t("td",K,[t("div",O,[s[8]||(s[8]=t("div",{class:"flex-shrink-0 h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center"},[t("svg",{class:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])],-1)),t("div",Q,[t("div",X,i(r.name),1),t("div",Y,"ID: "+i(r.id),1)])])]),t("td",Z,[t("div",$,i(r.description||"-"),1)]),t("td",N,[t("span",{class:b([r.user_type?.code==="admin"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i(r.user_type?.name||"N/A"),3)]),t("td",tt,[t("div",et,[(o(!0),n(f,null,h(r.roles,y=>(o(),n("span",{key:y.id,class:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800"},i(w(y.name)),1))),128)),!r.roles||r.roles.length===0?(o(),n("span",st," Aucun rôle ")):S("",!0)])]),t("td",rt,[t("span",{class:b([k(r.name),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i(m(r.name)),3)])]))),128))])])]))])]))}};export{at as default};
