import{r as x,c as S,P as Se,j as De,Q as Fe,b as c,e,l as b,g as v,i as _,x as C,u as m,aD as Ee,t as o,aF as Ae,F as G,z as Y,V as M,N as Oe,W as K,a0 as oe,f as $e,G as Q,aj as re,A as W,O as Z,a2 as H,ag as ne,a6 as Ie,o as l,aJ as Te,aK as Le,v as Me,Z as Pe,al as Ve,a7 as Ne,J as je}from"./vendor-BHuvdw6T.js";import{u as Be,a as Re,f as ze}from"./app-CTLbugiQ.js";function Je(){const{get:$,put:P,loading:V,error:B}=Be(),I=x([]),D=x([]),f=x([{label:"Total commandes",value:"0",change:0,color:"bg-blue-500",icon:"ShoppingBagIcon"},{label:"Revenus total",value:"0 FCFA",change:0,color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"En attente",value:"0",change:0,color:"bg-yellow-500",icon:"ClockIcon"},{label:"Terminées",value:"0",change:0,color:"bg-green-500",icon:"CheckIcon"}]),T=x([]),N=x([]),j=async()=>{try{const n=await $("/stats/merchant/orders");if(n&&n.success){const r=n.data.stats;f.value=[{label:"Total commandes",value:r.total_orders.toString(),change:r.total_orders_change||0,color:"bg-blue-500",icon:"ShoppingBagIcon"},{label:"Revenus total",value:y(r.total_revenue),change:r.revenue_change||0,color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"En attente",value:r.pending_orders.toString(),change:r.pending_change||0,color:"bg-yellow-500",icon:"ClockIcon"},{label:"Terminées",value:r.paid_orders.toString(),change:r.paid_change||0,color:"bg-green-500",icon:"CheckIcon"}],T.value=n.data.recent_orders||[],N.value=n.data.monthly_revenue||[]}}catch(n){console.error("Erreur lors du chargement des statistiques de commandes:",n)}},R=async(n={})=>{try{const r={page:1,per_page:50,...n},A=await $("/merchant/orders",{params:r});A&&A.success&&(I.value=A.data||[])}catch(r){console.error("Erreur lors du chargement des commandes:",r),I.value=[]}},g=async()=>{try{const n=await $("/merchant/products",{params:{per_page:100}});n&&n.success&&(D.value=n.data.data||n.data||[])}catch(n){console.error("Erreur lors du chargement des produits:",n),D.value=[]}},L=async n=>{try{return await P(`/orders/${n.order_number}/confirm`)}catch(r){throw console.error("Erreur lors de la confirmation:",r),r}},w=async n=>{try{return await P(`/orders/${n.order_number}/cancel`)}catch(r){throw console.error("Erreur lors de l'annulation:",r),r}},d=async(n="csv")=>{try{return await $(`/merchant/orders/export?format=${n}`)}catch(r){throw console.error("Erreur lors de l'export:",r),r}},u=S(()=>[{label:"Total commandes",value:f.value[0]?.value||"0",color:"bg-blue-500",icon:"ShoppingBagIcon"},{label:"Revenus total",value:f.value[1]?.value||"0 FCFA",color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"En attente",value:f.value[2]?.value||"0",color:"bg-yellow-500",icon:"ClockIcon"},{label:"Terminées",value:f.value[3]?.value||"0",color:"bg-green-500",icon:"CheckIcon"}]),k=S(()=>[{name:"Payées",value:parseInt(f.value[3]?.value||"0"),color:"#10B981"},{name:"En attente",value:parseInt(f.value[2]?.value||"0"),color:"#F59E0B"},{name:"Annulées",value:0,color:"#EF4444"}]),p=j,y=n=>{const r=parseFloat(n)||0;return r>=1e6?(r/1e6).toFixed(1)+"M FCFA":r>=1e3?(r/1e3).toFixed(0)+"k FCFA":r.toLocaleString("fr-FR")+" FCFA"};return{orders:I,products:D,orderStats:f,stats:u,recentOrders:T,monthlyRevenue:N,statusDistribution:k,loading:V,error:B,loadStats:j,loadOrders:R,loadProducts:g,loadOrderStats:p,confirmOrder:L,cancelOrder:w,exportOrders:d,formatCurrency:y,formatDate:n=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(n)),getStatusLabel:n=>({paid:"Payée",pending:"En attente",cancelled:"Annulée",failed:"Échouée",refunded:"Remboursée"})[n]||n,getStatusColor:n=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[n]||"bg-gray-100 text-gray-800",formatMonthYear:(n,r)=>`${["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"][n-1]} ${r}`}}const Ue={class:"space-y-6"},qe={class:"flex items-center justify-between"},Ge={class:"flex space-x-3"},Ye=["disabled"],Ke={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Qe={class:"flex items-center justify-between"},We={class:"text-sm font-medium text-gray-600"},Ze={class:"text-2xl font-bold text-gray-900 mt-1"},He={class:"mt-4 pt-4 border-t border-gray-100"},Xe={class:"flex items-center text-xs"},et={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},tt={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},st={class:"relative"},at=["value"],ot={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},rt={key:0,class:"flex justify-center py-12"},nt={key:1,class:"text-center py-12"},lt={key:2,class:"overflow-x-auto"},it={class:"min-w-full"},ct={class:"bg-white divide-y divide-gray-200"},dt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"text-sm font-medium text-gray-900"},mt={class:"text-sm text-gray-500"},gt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"flex items-center"},pt={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},ft={class:"ml-3"},vt={class:"text-sm font-medium text-gray-900"},bt={class:"text-sm text-gray-500"},yt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"flex items-center"},_t=["src","alt"],wt={class:"ml-3"},kt={class:"text-sm font-medium text-gray-900"},Ct={class:"text-sm text-gray-500"},St={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"flex items-center space-x-2"},Ft={class:"text-sm text-gray-900"},Et={class:"text-sm text-gray-500"},At={key:0,class:"ml-2"},Ot={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},$t={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"},It={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm font-semibold text-gray-900"},Lt={class:"text-sm text-gray-500"},Mt={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"text-sm text-gray-900"},Nt={class:"text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Bt={class:"flex items-center space-x-2"},Rt=["onClick"],zt={key:0,class:"relative"},Jt=["onChange","value"],Ut=["onClick"],qt=["onClick"],Gt={class:"bg-white px-6 py-3 border-t border-gray-200 flex items-center justify-between"},Yt={class:"text-sm text-gray-700"},Kt={class:"font-medium"},Qt={class:"font-medium"},Wt={class:"font-medium"},Zt={class:"flex space-x-2"},Ht=["disabled"],Xt=["disabled"],es={key:0,class:"fixed inset-0 bg-black/40 overflow-y-auto h-full w-full z-50"},ts={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-xl bg-white"},ss={class:"flex items-center justify-between mb-6"},as={key:0,class:"space-y-4"},os={class:"text-center"},rs={class:"mt-3 text-center"},ns={class:"text-lg font-medium text-gray-900"},ls={class:"mt-2 text-sm text-gray-500"},is={class:"flex space-x-3 justify-end"},cs=["disabled"],ds={key:0},us={key:1},ms={key:1,class:"fixed inset-0 bg-black/40 overflow-y-auto h-full w-full z-50"},gs={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-xl bg-white"},xs={class:"flex items-center justify-between mb-6"},ps={key:0,class:"space-y-6"},fs={class:"grid grid-cols-2 gap-4"},vs={class:"text-sm text-gray-900"},bs={class:"text-sm text-gray-900"},ys={class:"text-sm text-gray-900 font-semibold"},hs={class:"bg-gray-50 p-4 rounded-lg"},_s={class:"grid grid-cols-2 gap-4"},ws={class:"text-sm text-gray-900"},ks={class:"text-sm text-gray-900"},Cs={class:"bg-gray-50 p-4 rounded-lg"},Ss={class:"text-sm text-gray-700"},Ds={class:"text-xs text-gray-500 mt-1"},Fs={class:"mt-6 flex justify-end space-x-3"},Os={__name:"Orders",setup($){const{orders:P,products:V,orderStats:B,loading:I,loadStats:D,loadOrders:f,loadProducts:T,confirmOrder:N,cancelOrder:j,exportOrders:R}=Je(),g=Re(),L=x(!1),w=x(!1),d=x(null),u=x(null),k=x(!1),p=x(1),y=x(10),F=x(!1),i=Se({search:"",status:"",product:"",startDate:"",endDate:""}),E=S(()=>{let s=P.value;if(i.search){const t=i.search.toLowerCase();s=s.filter(a=>a.order_number.toLowerCase().includes(t)||a.customer_name.toLowerCase().includes(t)||a.product_name.toLowerCase().includes(t))}return i.status&&(s=s.filter(t=>t.status===i.status)),i.product&&(s=s.filter(t=>t.product_name.includes(V.value.find(a=>a.id==i.product)?.name||""))),i.startDate&&(s=s.filter(t=>new Date(t.created_at)>=new Date(i.startDate))),i.endDate&&(s=s.filter(t=>new Date(t.created_at)<=new Date(i.endDate))),s}),z=S(()=>Math.ceil(E.value.length/y.value)),n=S(()=>{const s=(p.value-1)*y.value,t=s+y.value;return E.value.slice(s,t)}),r=S(()=>(p.value-1)*y.value+1),A=S(()=>{const s=p.value*y.value;return Math.min(s,E.value.length)}),O=async()=>{p.value=1,await J()},J=async()=>{try{await f(i)}catch{g.error("Erreur lors du chargement des commandes")}},le=()=>{p.value>1&&p.value--},ie=()=>{p.value<z.value&&p.value++},X=s=>({pending:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",awaiting_payment:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",paid:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",shipping:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",fulfilled:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",cancelled:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",confirmed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",completed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"})[s]||"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",ee=s=>({pending:"En attente",awaiting_payment:"En attente de paiement",paid:"Payé",shipping:"En cours de livraison",fulfilled:"Livré",cancelled:"Annulé",confirmed:"Confirmé",completed:"Terminé"})[s]||s,te=s=>new Date(s).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),ce=s=>new Date(s).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),de=s=>{d.value=s,L.value=!0},U=()=>{L.value=!1,d.value=null},se=s=>{u.value={order:s,action:"confirm",title:"Confirmer la commande",message:`Voulez-vous confirmer la commande ${s.order_number} ?`,confirmText:"Confirmer",confirmClass:"bg-green-600 hover:bg-green-700"},w.value=!0},ue=s=>{u.value={order:s,action:"cancel",title:"Annuler la commande",message:`Voulez-vous annuler la commande ${s.order_number} ? Cette action est irréversible.`,confirmText:"Annuler la commande",confirmClass:"bg-red-600 hover:bg-red-700"},w.value=!0},me=(s,t)=>{t!==s.status&&(u.value={order:s,newStatus:t},w.value=!0)},ge=async()=>{if(!u.value)return;k.value=!0;const{order:s,action:t,newStatus:a}=u.value;try{if(t==="confirm")await N(s),g.success("Commande confirmée avec succès !");else if(t==="cancel")await j(s),g.success("Commande annulée");else{const h={paid:"payé",fulfilled:"en cours de livraison"};await ze(s.order_number,a,`Statut changé vers ${h[a]} par le marchand`),g.success(`Commande marquée comme ${h[a]}`)}q(),U(),await J()}catch{t==="confirm"?g.error("Erreur lors de la confirmation"):t==="cancel"?g.error("Erreur lors de l'annulation"):g.error("Erreur lors du changement de statut")}finally{k.value=!1}},q=()=>{w.value=!1,u.value=null,k.value=!1},xe=s=>({paid:"Payé",fulfilled:"En cours de livraison"})[s]||s,pe=s=>s.action==="confirm"?"Confirmer la commande":s.action==="cancel"?"Annuler la commande":"Changer le statut",fe=s=>s.title?s.message:`Commande ${s.order.order_number} - Nouveau statut : ${xe(s.newStatus)}`,ve=s=>s.action==="confirm"?H:s.action==="cancel"?ne:s.newStatus==="fulfilled"?Ie:H,be=s=>s.action==="confirm"?"bg-green-100 text-green-600":s.action==="cancel"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600",ye=s=>s.confirmClass?s.confirmClass:s.action==="confirm"?"bg-green-600 hover:bg-green-700":s.action==="cancel"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700",he=s=>s.confirmText?s.confirmText:"Confirmer",_e=s=>s.action==="confirm"?"Confirmation...":s.action==="cancel"?"Annulation...":"Changement...",we=async()=>{F.value=!0;try{await Promise.all([D(),J(),T()]),g.success("Commandes actualisées")}catch{g.error("Erreur lors de l'actualisation")}finally{F.value=!1}},ke=async()=>{try{await R("csv"),g.success("Export des commandes démarré")}catch{g.error("Erreur lors de l'export des commandes")}};De(async()=>{try{await Promise.all([D(),f(),T()])}catch(s){console.error("Erreur lors du chargement initial:",s),g.error("Erreur lors du chargement des données")}});let ae=null;Fe(()=>i.search,s=>{clearTimeout(ae),ae=setTimeout(()=>{O()},500)});const Ce=s=>({ShoppingBagIcon:Q,CurrencyDollarIcon:je,ClockIcon:Ne,CheckIcon:Ve})[s]||Q;return(s,t)=>(l(),c("div",Ue,[e("div",qe,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mes Commandes"),e("p",{class:"mt-2 text-gray-600"},"Suivez et gérez toutes vos ventes de tickets de tombola")],-1)),e("div",Ge,[e("button",{onClick:we,disabled:F.value,class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50"},[v(m(Ee),{class:C(["w-4 h-4 mr-2",{"animate-spin":F.value}])},null,8,["class"]),_(" "+o(F.value?"Actualisation...":"Actualiser"),1)],8,Ye),e("button",{onClick:ke,class:"inline-flex items-center px-4 py-2 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors"},[v(m(Ae),{class:"w-4 h-4 mr-2"}),t[6]||(t[6]=_(" Exporter ",-1))])])]),e("div",Ke,[(l(!0),c(G,null,Y(m(B),a=>(l(),c("div",{key:a.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},[e("div",Qe,[e("div",null,[e("p",We,o(a.label),1),e("p",Ze,o(a.value),1)]),e("div",{class:C(["p-3 rounded-xl",a.color])},[(l(),W(Z(Ce(a.icon)),{class:"w-6 h-6 text-white"}))],2)]),e("div",He,[e("div",Xe,[e("span",{class:C(["inline-flex items-center px-2 py-1 rounded-full font-medium",a.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(l(),W(Z(a.change>=0?m(Te):m(Le)),{class:"w-3 h-3 mr-1"})),_(" "+o(Math.abs(a.change))+"% ",1)],2),t[8]||(t[8]=e("span",{class:"ml-2 text-gray-500"},"vs semaine dernière",-1))])])]))),128))]),e("div",et,[e("div",tt,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),e("div",st,[v(m(Oe),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>i.search=a),type:"text",placeholder:"ID, client, produit...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black",onInput:O},null,544),[[K,i.search]])])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),M(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>i.status=a),onChange:O,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},t[10]||(t[10]=[$e('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="awaiting_payment">En attente de paiement</option><option value="paid">Payé</option><option value="shipping">En cours de livraison</option><option value="fulfilled">Livré</option><option value="cancelled">Annulé</option>',7)]),544),[[oe,i.status]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Produit",-1)),M(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>i.product=a),onChange:O,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},[t[12]||(t[12]=e("option",{value:""},"Tous les produits",-1)),(l(!0),c(G,null,Y(m(V),a=>(l(),c("option",{key:a.id,value:a.id},o(a.name),9,at))),128))],544),[[oe,i.product]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date début",-1)),M(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>i.startDate=a),type:"date",onChange:O,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[K,i.startDate]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date fin",-1)),M(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>i.endDate=a),type:"date",onChange:O,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[K,i.endDate]])])])]),e("div",ot,[t[25]||(t[25]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes")],-1)),m(I)?(l(),c("div",rt,t[16]||(t[16]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):E.value.length===0?(l(),c("div",nt,[v(m(Q),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucune commande",-1)),t[18]||(t[18]=e("p",{class:"text-gray-600"},"Aucune commande ne correspond à vos critères.",-1))])):(l(),c("div",lt,[e("table",it,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Commande "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Client "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tickets "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Montant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ct,[(l(!0),c(G,null,Y(n.value,a=>(l(),c("tr",{key:a.id,class:"hover:bg-gray-50 transition-colors"},[e("td",dt,[e("div",null,[e("div",ut,"#"+o(a.order_number),1),e("div",mt,o(a.payment_method),1)])]),e("td",gt,[e("div",xt,[e("div",pt,[v(m(Me),{class:"w-5 h-5 text-gray-600"})]),e("div",ft,[e("div",vt,o(a.customer_name),1),e("div",bt,o(a.customer_email),1)])])]),e("td",yt,[e("div",ht,[e("img",{class:"h-12 w-12 rounded-lg object-cover",src:a.product_image,alt:a.product_name},null,8,_t),e("div",wt,[e("div",kt,o(a.product_name),1),e("div",Ct,o((a.ticket_price||0).toLocaleString())+" FCFA/ticket",1)])])]),e("td",St,[e("div",Dt,[e("div",null,[e("div",Ft,o(a.tickets_count||0)+" tickets",1),e("div",Et,o(a.tickets_count||0)+" ticket"+o((a.tickets_count||0)>1?"s":"")+" acheté"+o((a.tickets_count||0)>1?"s":""),1)]),a.type==="lottery"?(l(),c("div",At,[a.has_winning_ticket?(l(),c("span",Ot," 🏆 Gagnant ")):(l(),c("span",$t," Non gagnant "))])):b("",!0)])]),e("td",It,[e("div",Tt,o((a.total_amount||0).toLocaleString())+" FCFA",1),e("div",Lt,o(a.currency),1)]),e("td",Mt,[e("span",{class:C(X(a.status))},o(ee(a.status)),3)]),e("td",Pt,[e("div",Vt,o(te(a.created_at)),1),e("div",Nt,o(ce(a.created_at)),1)]),e("td",jt,[e("div",Bt,[e("button",{onClick:h=>de(a),class:"text-[#0099cc] hover:text-[#0088bb] transition-colors",title:"Voir détails"},[v(m(Pe),{class:"w-4 h-4"})],8,Rt),a.status==="paid"||a.status==="fulfilled"?(l(),c("div",zt,[e("select",{onChange:h=>me(a,h.target.value),class:"text-sm border border-gray-300 rounded px-2 py-1 bg-white",value:a.status},t[19]||(t[19]=[e("option",{value:"paid"},"Payé",-1),e("option",{value:"fulfilled"},"En cours de livraison",-1)]),40,Jt)])):b("",!0),a.status==="pending"?(l(),c("button",{key:1,onClick:h=>se(a),class:"text-blue-600 hover:text-blue-800 transition-colors",title:"Confirmer"},[v(m(H),{class:"w-4 h-4"})],8,Ut)):b("",!0),["pending","confirmed"].includes(a.status)?(l(),c("button",{key:2,onClick:h=>ue(a),class:"text-red-600 hover:text-red-800 transition-colors",title:"Annuler"},[v(m(ne),{class:"w-4 h-4"})],8,qt)):b("",!0)])])]))),128))])])])),e("div",Gt,[e("div",Yt,[t[21]||(t[21]=_(" Affichage de ",-1)),e("span",Kt,o(r.value),1),t[22]||(t[22]=_(" à ",-1)),e("span",Qt,o(A.value),1),t[23]||(t[23]=_(" sur ",-1)),e("span",Wt,o(E.value.length),1),t[24]||(t[24]=_(" résultats ",-1))]),e("div",Zt,[e("button",{onClick:le,disabled:p.value===1,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,Ht),e("button",{onClick:ie,disabled:p.value===z.value,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,Xt)])])]),w.value?(l(),c("div",es,[e("div",ts,[e("div",ss,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Confirmer le changement",-1)),e("button",{onClick:q,class:"text-gray-400 hover:text-gray-600"},[v(m(re),{class:"w-6 h-6"})])]),u.value?(l(),c("div",as,[e("div",os,[e("div",{class:C(["mx-auto flex items-center justify-center h-12 w-12 rounded-full",be(u.value)])},[(l(),W(Z(ve(u.value)),{class:"h-6 w-6"}))],2),e("div",rs,[e("p",ns,o(pe(u.value)),1),e("p",ls,o(fe(u.value)),1)])]),e("div",is,[e("button",{onClick:q,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors"}," Annuler "),e("button",{onClick:ge,disabled:k.value,class:C([ye(u.value),"px-4 py-2 text-white rounded-lg transition-colors disabled:opacity-50"])},[k.value?(l(),c("span",ds,o(_e(u.value)),1)):(l(),c("span",us,o(he(u.value)),1))],10,cs)])])):b("",!0)])])):b("",!0),L.value?(l(),c("div",ms,[e("div",gs,[e("div",xs,[t[27]||(t[27]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Détails de la commande",-1)),e("button",{onClick:U,class:"text-gray-400 hover:text-gray-600"},[v(m(re),{class:"w-6 h-6"})])]),d.value?(l(),c("div",ps,[e("div",fs,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"N° de commande",-1)),e("p",vs,o(d.value.order_number),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("p",bs,o(te(d.value.created_at)),1)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:C(X(d.value.status))},o(ee(d.value.status)),3)]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",ys,o((d.value.total_amount||0).toLocaleString())+" FCFA",1)])]),e("div",null,[t[34]||(t[34]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Informations client",-1)),e("div",hs,[e("div",_s,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",ws,o(d.value.customer_name),1)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",ks,o(d.value.customer_email),1)])])])]),e("div",null,[t[35]||(t[35]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Tickets achetés",-1)),e("div",Cs,[e("p",Ss,[e("strong",null,o(d.value.tickets_count||0)+" ticket"+o((d.value.tickets_count||0)>1?"s":""),1),_(" acheté"+o((d.value.tickets_count||0)>1?"s":"")+" pour "+o(d.value.product_name||"Produit inconnu"),1)]),e("p",Ds," Prix unitaire : "+o((d.value.ticket_price||0).toLocaleString())+" FCFA/ticket ",1)])])])):b("",!0),e("div",Fs,[e("button",{onClick:U,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300"}," Fermer "),d.value?.status==="pending"?(l(),c("button",{key:0,onClick:t[5]||(t[5]=a=>se(d.value)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Confirmer la commande ")):b("",!0)])])])):b("",!0)]))}};export{Os as default};
