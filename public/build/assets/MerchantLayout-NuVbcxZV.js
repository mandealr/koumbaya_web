import{r as m,c as p,g as q,h as R,b as l,e,V as N,i as n,j,w as f,k as D,F as g,y as b,u as y,z as U,t as o,l as Q,aV as H,ao as A,q as J,o as r,A as _,m as x,O as w,B as V,E as G,H as X,aW as Y,I as Z,aE as ee,aJ as B,s as te,n as se}from"./vendor-CddPuzi6.js";import{u as ae,a as re,K as ne,_ as oe}from"./app-pnD0TxT3.js";const le={class:"min-h-screen bg-gray-50"},ie={class:"bg-white shadow-sm border-b border-gray-200"},ce={class:"mx-auto px-4 sm:px-6 lg:px-8"},de={class:"flex justify-between h-16"},ue={class:"flex"},me={class:"flex-shrink-0 flex items-center min-w-0"},fe={key:1,class:"flex items-center space-x-1"},he={class:"hidden sm:ml-6 sm:flex sm:space-x-8"},xe={class:"flex items-center space-x-2 sm:space-x-4"},ve={class:"relative p-1 sm:p-2 text-gray-400 hover:text-gray-500"},pe={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full min-w-[1rem] h-4"},ge={class:"relative ml-1 sm:ml-3"},be={class:"h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},ye={class:"text-xs sm:text-sm font-medium text-blue-600"},_e={class:"ml-2 sm:ml-3 text-gray-700 text-xs sm:text-sm font-medium hidden lg:block min-w-0 truncate"},we={class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},ke={class:"py-1"},Ce={class:"sm:hidden"},$e={class:"pt-2 pb-3 space-y-1"},Fe={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Ee={key:0,class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 lg:hidden z-40"},Ie={class:"flex justify-around text-center"},Se={class:"text-lg font-semibold text-gray-900"},Ne={class:"text-lg font-semibold text-blue-600"},je={class:"text-lg font-semibold text-purple-600"},Be={__name:"MerchantLayout",setup(De){const K=J(),k=ae(),{get:C}=re(),c=m(!1),$=m(!1),F=m(!1),h=m(0),d=m({products:"0",lotteries:"0",revenue:"0 FCFA"}),E=[{name:"Dashboard",href:"/merchant/dashboard",icon:G},{name:"Produits",href:"/merchant/products",icon:X},{name:"Commandes",href:"/merchant/orders",icon:Y},{name:"Tombolas",href:"/merchant/lotteries",icon:Z},{name:"Statistiques",href:"/merchant/analytics",icon:ee},{name:"Paramètres",href:"/merchant/settings",icon:B}],M=[{name:"Profil",href:"/merchant/profile",icon:te},{name:"Paramètres",href:"/merchant/settings",icon:B}],u=p(()=>k.user),O=p(()=>{if(!u.value)return"U";const s=u.value.first_name?.[0]||"",t=u.value.last_name?.[0]||"";return(s+t).toUpperCase()}),P=p(()=>window.innerWidth<1024),z=async()=>{await k.logout(),K.push({name:"login"})},L=()=>{F.value=!0},I=async()=>{try{const t=(await C("/merchant/dashboard/stats")).data;d.value={products:t.total_products?.toString()||"0",lotteries:t.active_lotteries?.toString()||"0",revenue:T(t.revenue_this_month||0)}}catch(s){console.error("Erreur lors du chargement des stats rapides:",s),d.value={products:"0",lotteries:"0",revenue:"0 FCFA"}}},S=async()=>{try{const s=await C("/notifications/unread-count");s&&s.data&&s.data.unread_count!==void 0&&(h.value=s.data.unread_count)}catch(s){console.error("Erreur lors du chargement des notifications:",s),h.value=0}},T=s=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0)+" FCFA";return q(()=>{I(),S();const s=setInterval(S,120*1e3),t=setInterval(I,300*1e3),i=v=>{v.target.closest(".relative")||(c.value=!1)};document.addEventListener("click",i),R(()=>{document.removeEventListener("click",i),clearInterval(s),clearInterval(t)})}),(s,t)=>{const i=D("router-link"),v=D("router-view");return r(),l("div",le,[e("nav",ie,[e("div",ce,[e("div",de,[e("div",ue,[e("div",me,[n(i,{to:"/merchant/dashboard",class:"flex items-center"},{default:f(()=>[F.value?(r(),l("div",fe,t[3]||(t[3]=[e("div",{class:"w-5 h-5 sm:w-6 sm:h-6 bg-[#0099cc] rounded flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white font-bold text-xs sm:text-sm"},"K")],-1),e("span",{class:"text-sm sm:text-lg font-bold text-[#0099cc] whitespace-nowrap"},"Koumbaya",-1)]))):(r(),l("img",{key:0,class:"h-6 sm:h-8 w-auto object-contain max-w-none",src:oe,alt:"Koumbaya",onError:L},null,32)),t[4]||(t[4]=e("span",{class:"ml-1 sm:ml-2 text-xs sm:text-sm text-[#0099cc] font-medium whitespace-nowrap"},"Marchand",-1))]),_:1,__:[4]})]),e("div",he,[(r(),l(g,null,b(E,a=>n(i,{key:a.name,to:a.href,class:V(["inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",s.$route.path.startsWith(a.href)?"border-[#0099cc] text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},{default:f(()=>[(r(),_(w(a.icon),{class:"w-4 h-4 mr-2"})),x(" "+o(a.name),1)]),_:2},1032,["to","class"])),64))])]),e("div",xe,[e("button",ve,[n(y(U),{class:"h-5 w-5 sm:h-6 sm:w-6"}),h.value>0?(r(),l("span",pe,o(h.value),1)):j("",!0)]),e("div",ge,[e("div",null,[e("button",{onClick:t[0]||(t[0]=a=>c.value=!c.value),class:"flex items-center max-w-xs bg-white rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0099cc]"},[t[5]||(t[5]=e("span",{class:"sr-only"},"Open user menu",-1)),e("div",be,[e("span",ye,o(O.value),1)]),e("span",_e,o(u.value?.first_name)+" "+o(u.value?.last_name),1),n(y(Q),{class:"ml-1 sm:ml-2 h-3 w-3 sm:h-4 sm:w-4 text-gray-500 flex-shrink-0"})])]),n(H,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:f(()=>[N(e("div",we,[e("div",ke,[(r(),l(g,null,b(M,a=>n(i,{key:a.name,to:a.href,onClick:t[1]||(t[1]=W=>c.value=!1),class:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:f(()=>[(r(),_(w(a.icon),{class:"w-4 h-4 mr-3"})),x(" "+o(a.name),1)]),_:2},1032,["to"])),64)),e("button",{onClick:z,class:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[n(y(se),{class:"w-4 h-4 mr-3"}),t[6]||(t[6]=x(" Déconnexion ",-1))])])],512),[[A,c.value]])]),_:1})])])])])]),N(e("div",Ce,[e("div",$e,[(r(),l(g,null,b(E,a=>n(i,{key:a.name,to:a.href,onClick:t[2]||(t[2]=W=>$.value=!1),class:V(["block pl-3 pr-4 py-2 border-l-4 text-base font-medium",s.$route.path.startsWith(a.href)?"bg-blue-50 border-blue-500 text-blue-700":"border-transparent text-gray-500 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700"])},{default:f(()=>[(r(),_(w(a.icon),{class:"w-5 h-5 mr-3 inline"})),x(" "+o(a.name),1)]),_:2},1032,["to","class"])),64))])],512),[[A,$.value]]),e("main",Fe,[n(v)]),n(ne),P.value?(r(),l("div",Ee,[e("div",Ie,[e("div",null,[e("div",Se,o(d.value.products),1),t[7]||(t[7]=e("div",{class:"text-xs text-gray-600"},"Produits",-1))]),e("div",null,[e("div",Ne,o(d.value.lotteries),1),t[8]||(t[8]=e("div",{class:"text-xs text-gray-600"},"Tombolas",-1))]),e("div",null,[e("div",je,o(d.value.revenue),1),t[9]||(t[9]=e("div",{class:"text-xs text-gray-600"},"Revenus",-1))])])])):j("",!0)])}}};export{Be as default};
