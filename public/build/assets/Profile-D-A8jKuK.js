import{b as u,o as d,e,g as v,u as i,v as K,l as x,t as l,i as w,ab as X,M as Z,bj as ee,b0 as te,aW as se,r as P,c as j,V as h,a7 as re,f as C,F as z,z as B,bk as ae,A as oe,Y as U,j as le,x as ie,y as F,a1 as _,n as S}from"./vendor-HurWl8Tx.js";import{f as N,u as ne,a as de,e as ue,A as ce,P as me,g as ge}from"./app-Bc6yMBle.js";const fe={class:"bg-white rounded-lg border border-gray-200 p-4"},pe={class:"flex items-start gap-4"},ve={class:"flex-shrink-0"},be={key:0,class:"w-10 h-10 rounded-full overflow-hidden"},ye=["src","alt"],we={key:1,class:"w-10 h-10 rounded-full bg-[#0099cc]/10 flex items-center justify-center"},xe={class:"flex-1 min-w-0"},he={class:"flex items-start justify-between gap-2"},_e={class:"font-medium text-gray-900"},$e={class:"flex items-center gap-2 mt-1"},ke={key:0,class:"inline-flex items-center gap-1 text-xs text-green-600"},Ae={class:"text-sm text-gray-500 whitespace-nowrap"},Me={key:0,class:"mt-3 text-gray-700 text-sm leading-relaxed"},Ve={key:1,class:"mt-3 flex items-center gap-2 text-sm text-gray-500"},Ue={key:2,class:"mt-3 flex items-center gap-4"},je={__name:"ReviewCard",props:{review:{type:Object,required:!0},showActions:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1}},emits:["helpful","edit","delete"],setup(s){const p=b=>{if(!b)return"";const m=new Date(b),o=new Date,n=Math.floor((o-m)/(1e3*60*60*24));return n===0?"Aujourd'hui":n===1?"Hier":n<7?`Il y a ${n} jours`:m.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:m.getFullYear()!==o.getFullYear()?"numeric":void 0})};return(b,m)=>(d(),u("div",fe,[e("div",pe,[e("div",ve,[s.review.reviewer?.avatar?(d(),u("div",be,[e("img",{src:s.review.reviewer.avatar,alt:s.review.reviewer.name,class:"w-full h-full object-cover"},null,8,ye)])):(d(),u("div",we,[v(i(K),{class:"w-5 h-5 text-[#0099cc]"})]))]),e("div",xe,[e("div",he,[e("div",null,[e("h4",_e,l(s.review.reviewer?.name||"Utilisateur anonyme"),1),e("div",$e,[v(N,{rating:s.review.rating,size:"sm"},null,8,["rating"]),s.review.is_verified?(d(),u("span",ke,[v(i(X),{class:"w-4 h-4"}),m[3]||(m[3]=w(" Achat vérifié ",-1))])):x("",!0)])]),e("time",Ae,l(p(s.review.created_at)),1)]),s.review.comment?(d(),u("p",Me,l(s.review.comment),1)):x("",!0),s.review.product?(d(),u("div",Ve,[v(i(Z),{class:"w-4 h-4"}),e("span",null,l(s.review.product.name),1)])):x("",!0),s.showActions?(d(),u("div",Ue,[e("button",{onClick:m[0]||(m[0]=o=>b.$emit("helpful",s.review.id)),class:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1"},[v(i(ee),{class:"w-4 h-4"}),w(" Utile ("+l(s.review.helpful_count||0)+") ",1)]),s.canEdit?(d(),u("button",{key:0,onClick:m[1]||(m[1]=o=>b.$emit("edit",s.review)),class:"text-sm text-[#0099cc] hover:text-[#0088bb] flex items-center gap-1"},[v(i(te),{class:"w-4 h-4"}),m[4]||(m[4]=w(" Modifier ",-1))])):x("",!0),s.canDelete?(d(),u("button",{key:1,onClick:m[2]||(m[2]=o=>b.$emit("delete",s.review.id)),class:"text-sm text-red-500 hover:text-red-700 flex items-center gap-1"},[v(i(se),{class:"w-4 h-4"}),m[5]||(m[5]=w(" Supprimer ",-1))])):x("",!0)])):x("",!0)])])]))}},Ce={class:"flex items-center justify-between mb-4"},Se={class:"text-lg font-semibold text-gray-900"},Pe={key:0,class:"flex items-center gap-2"},Ee={key:0,class:"space-y-4"},De={key:1,class:"text-center py-12 bg-gray-50 rounded-xl"},ze={class:"text-gray-500"},Be={key:2,class:"space-y-4"},Fe={key:3,class:"mt-6 flex items-center justify-center gap-2"},Ne=["disabled"],Re={class:"text-sm text-gray-600"},qe=["disabled"],Ie={__name:"ReviewsList",props:{reviews:{type:Array,default:()=>[]},pagination:{type:Object,default:null},title:{type:String,default:"Avis clients"},emptyMessage:{type:String,default:"Soyez le premier à laisser un avis !"},loading:{type:Boolean,default:!1},showFilter:{type:Boolean,default:!1},showActions:{type:Boolean,default:!1},currentUserId:{type:[Number,String],default:null}},emits:["helpful","edit","delete","page-change"],setup(s){const p=s,b=P("all"),m=j(()=>{if(!p.reviews)return[];switch(b.value){case"positive":return p.reviews.filter(o=>o.rating>=4);case"neutral":return p.reviews.filter(o=>o.rating===3);case"negative":return p.reviews.filter(o=>o.rating<=2);case"verified":return p.reviews.filter(o=>o.is_verified);default:return p.reviews}});return(o,n)=>(d(),u("div",null,[e("div",Ce,[e("h3",Se,l(s.title),1),s.showFilter?(d(),u("div",Pe,[h(e("select",{"onUpdate:modelValue":n[0]||(n[0]=y=>b.value=y),class:"text-sm border border-gray-300 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-[#0099cc] focus:border-transparent"},n[6]||(n[6]=[C('<option value="all">Tous les avis</option><option value="positive">Positifs (4-5★)</option><option value="neutral">Neutres (3★)</option><option value="negative">Négatifs (1-2★)</option><option value="verified">Vérifiés uniquement</option>',5)]),512),[[re,b.value]])])):x("",!0)]),s.loading?(d(),u("div",Ee,[(d(),u(z,null,B(3,y=>e("div",{key:y,class:"animate-pulse bg-white rounded-lg border border-gray-200 p-4"},n[7]||(n[7]=[C('<div class="flex items-start gap-4"><div class="w-10 h-10 bg-gray-200 rounded-full"></div><div class="flex-1 space-y-2"><div class="h-4 bg-gray-200 rounded w-1/4"></div><div class="h-3 bg-gray-200 rounded w-1/2"></div><div class="h-12 bg-gray-200 rounded w-full"></div></div></div>',1)]))),64))])):!s.reviews||s.reviews.length===0?(d(),u("div",De,[v(i(ae),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n[8]||(n[8]=e("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun avis",-1)),e("p",ze,l(s.emptyMessage),1)])):(d(),u("div",Be,[(d(!0),u(z,null,B(m.value,y=>(d(),oe(je,{key:y.id,review:y,"show-actions":s.showActions,"can-edit":s.currentUserId===y.reviewer?.id,"can-delete":s.currentUserId===y.reviewer?.id,onHelpful:n[1]||(n[1]=$=>o.$emit("helpful",$)),onEdit:n[2]||(n[2]=$=>o.$emit("edit",$)),onDelete:n[3]||(n[3]=$=>o.$emit("delete",$))},null,8,["review","show-actions","can-edit","can-delete"]))),128))])),s.pagination&&s.pagination.last_page>1?(d(),u("div",Fe,[e("button",{disabled:s.pagination.current_page===1,onClick:n[4]||(n[4]=y=>o.$emit("page-change",s.pagination.current_page-1)),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,Ne),e("span",Re," Page "+l(s.pagination.current_page)+" sur "+l(s.pagination.last_page),1),e("button",{disabled:s.pagination.current_page===s.pagination.last_page,onClick:n[5]||(n[5]=y=>o.$emit("page-change",s.pagination.current_page+1)),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,qe)])):x("",!0)]))}},Le={class:"max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Te={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},He={class:"lg:col-span-1"},Ye={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Ge={class:"text-center"},Oe={class:"text-lg font-semibold text-gray-900"},Qe={class:"text-sm text-gray-600"},We={class:"mt-4 flex items-center justify-center space-x-2"},Je={class:"flex items-center text-sm text-gray-600"},Ke={class:"mt-4 text-xs text-gray-500"},Xe={class:"mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Ze={class:"space-y-4"},et={class:"flex justify-between items-center"},tt={class:"font-semibold text-gray-900"},st={class:"flex justify-between items-center"},rt={class:"font-semibold text-purple-600"},at={class:"flex justify-between items-center"},ot={class:"font-semibold text-blue-600"},lt={class:"flex justify-between items-center"},it={class:"font-semibold text-blue-600"},nt={class:"lg:col-span-2"},dt={class:"bg-white rounded-xl shadow-sm border border-gray-200"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"},mt={class:"mt-6"},gt={class:"mt-6"},ft={class:"border-t border-gray-200 pt-6"},pt={class:"space-y-4"},vt={class:"text-sm text-gray-600 bg-gray-100 rounded-lg p-3"},bt={class:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},yt=["disabled"],wt={class:"mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-6"},xt={key:0,class:"animate-pulse space-y-4"},ht={key:1},_t={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},$t={class:"bg-gradient-to-br from-[#0099cc]/5 to-[#0099cc]/10 rounded-xl p-6"},kt={class:"flex items-center gap-4"},At={class:"text-5xl font-bold text-gray-900"},Mt={class:"text-sm text-gray-600 mt-1"},Vt={class:"space-y-3"},Ut={class:"space-y-2"},jt={class:"flex items-center gap-3"},Ct={class:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden"},St={class:"text-sm font-medium w-10 text-right"},Pt={class:"flex items-center gap-3"},Et={class:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden"},Dt={class:"text-sm font-medium w-10 text-right"},zt={class:"flex items-center gap-3"},Bt={class:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden"},Ft={class:"text-sm font-medium w-10 text-right"},Nt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 pt-6 border-t border-gray-200"},Rt={class:"text-center p-3 bg-gray-50 rounded-lg"},qt={class:"text-2xl font-bold text-gray-900"},It={class:"text-center p-3 bg-gray-50 rounded-lg"},Lt={class:"text-2xl font-bold text-green-600"},Tt={class:"text-center p-3 bg-gray-50 rounded-lg"},Ht={class:"text-2xl font-bold text-blue-600"},Yt={class:"text-center p-3 bg-gray-50 rounded-lg"},Gt={class:"text-2xl font-bold text-purple-600"},Ot={class:"pt-6 border-t border-gray-200"},Qt={key:2,class:"text-center py-12"},Wt={class:"mt-6 bg-white rounded-xl shadow-sm border border-gray-200"},Jt={key:0,class:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Kt={class:"space-y-4"},Xt={key:0},Zt=["required"],es={key:0,class:"mt-1 text-sm text-red-600"},ts={class:"block text-sm font-medium text-gray-700 mb-2"},ss={key:0,class:"mt-1 text-sm text-red-600"},rs={class:"flex justify-end pt-6 border-t border-gray-200"},as=["disabled"],is={__name:"Profile",setup(s){const p=ne(),{get:b,put:m}=de(),{rating:o,reviews:n,pagination:y,loading:$,fetchMyRating:R,fetchMerchantReviews:q}=ue(),M=P(!1),V=P(!1),k=U({products:0,lotteries:0,orders:0,revenue:0}),A=U({current_password:"",new_password:""}),r=j(()=>p.user),I=j(()=>{if(!r.value)return"U";const a=r.value.first_name?.[0]||"",t=r.value.last_name?.[0]||"";return(a+t).toUpperCase()}),L=j(()=>r.value&&r.value.roles&&Array.isArray(r.value.roles)&&r.value.roles.length>0?r.value.roles.map(t=>{switch(t.name){case"Business Individual":return"Vendeur Individuel (simple-dashboard)";case"Business Enterprise":return"Vendeur Entreprise (dashboard complet)";case"Business":return"Vendeur (legacy)";case"Particulier":return"Client";case"Admin":return"Administrateur";case"Super Admin":return"Super Administrateur";case"Agent":return"Agent";default:return t.name}}).join(", "):"Non défini"),c=U({first_name:"",last_name:"",email:"",phone:"",city:"",address:"",bio:""}),f=U({current_password:"",new_password:"",new_password_confirmation:"",showCurrentPassword:!1}),E=()=>{r.value&&(c.first_name=r.value.first_name||"",c.last_name=r.value.last_name||"",c.email=r.value.email||"",c.phone=r.value.phone||"",c.city=r.value.city||"",c.address=r.value.address||"",c.bio=r.value.bio||"")},T=async()=>{try{const a=await b("/merchant/dashboard/stats");a.data&&(k.products=a.data.total_products||0,k.lotteries=a.data.active_lotteries||0,k.orders=a.data.total_orders||0,k.revenue=a.data.revenue_this_month||0)}catch(a){console.error("Erreur lors du chargement des statistiques:",a)}},H=async()=>{M.value=!0;try{await m("/user/profile",c),await p.refreshUser(),window.$toast&&window.$toast.success("Profil mis à jour avec succès","✅ Profil")}catch(a){console.error("Erreur lors de la mise à jour du profil:",a),window.$toast&&window.$toast.error("Erreur lors de la mise à jour du profil","❌ Erreur")}finally{M.value=!1}},Y=()=>{E()},G=async()=>{V.value=!0,A.current_password="",A.new_password="";try{const a={new_password:f.new_password,new_password_confirmation:f.new_password_confirmation};(r.value?.has_password||f.current_password)&&(a.current_password=f.current_password);const t=await m("/user/password",a);if(f.current_password="",f.new_password="",f.new_password_confirmation="",window.$toast){const g=t.data?.is_first_password?"Mot de passe défini avec succès":"Mot de passe modifié avec succès";window.$toast.success(g,"✅ Sécurité")}await p.refreshUser()}catch(a){if(console.error("Erreur lors du changement de mot de passe:",a),a.response?.data?.errors){const t=a.response.data.errors;t.current_password&&(A.current_password=Array.isArray(t.current_password)?t.current_password[0]:t.current_password),t.new_password&&(A.new_password=Array.isArray(t.new_password)?t.new_password[0]:t.new_password)}if(window.$toast){const t=a.response?.data?.message||"Erreur lors du changement de mot de passe";window.$toast.error(t,"❌ Erreur")}}finally{V.value=!1}},O=()=>r.value?`https://ui-avatars.com/api/?name=${I.value}&background=3b82f6&color=fff&size=128`:"/default-avatar.png",Q=a=>{console.log("Avatar upload success:",a);const t=a?.avatar_url||a?.data?.avatar_url||a?.response?.avatar_url;t?(r.value&&(r.value.avatar_url=t),p.refreshUser(),window.$toast&&window.$toast.success("Photo de profil mise à jour avec succès","✅ Photo")):console.warn("No avatar URL in response:",a)},W=a=>{console.error("Erreur upload avatar:",a);let t="Erreur lors de la mise à jour de la photo";a?.message?t=a.message:typeof a=="string"&&(t=a),window.$toast&&window.$toast.error(t,"❌ Erreur")},D=async(a=1)=>{r.value?.id&&await q(r.value.id,a)},J=a=>{D(a)};return le(async()=>{E(),T(),await R(),r.value?.id&&await D()}),(a,t)=>(d(),u("div",Le,[t[43]||(t[43]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mon Profil"),e("p",{class:"mt-2 text-gray-600"},"Gérez vos informations personnelles et professionnelles")],-1)),e("div",Te,[e("div",He,[e("div",Ye,[e("div",Ge,[v(ce,{currentAvatarUrl:r.value?.avatar_url||O(),uploadEndpoint:"/merchant/profile/avatar",fieldName:"avatar",altText:`Photo de profil de ${r.value?.first_name} ${r.value?.last_name}`,helpText:"Cliquez pour modifier votre photo de profil",maxSizeMB:5,onSuccess:Q,onError:W},null,8,["currentAvatarUrl","altText"]),e("h3",Oe,l(r.value?.first_name)+" "+l(r.value?.last_name),1),e("p",Qe,l(r.value?.email),1),e("div",We,[e("div",Je,[e("div",{class:ie(["w-2 h-2 rounded-full mr-2",r.value?.is_active?"bg-blue-400":"bg-red-400"])},null,2),w(" "+l(r.value?.is_active?"Compte actif":"Compte inactif"),1)])]),e("div",Ke,[t[10]||(t[10]=e("p",null,"Membre depuis",-1)),e("p",null,l(r.value?.created_at?new Date(r.value.created_at).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"Non disponible"),1)])])]),e("div",Xe,[t[15]||(t[15]=e("h4",{class:"font-semibold text-gray-900 mb-4"},"Mes statistiques",-1)),e("div",Ze,[e("div",et,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-600"},"Produits",-1)),e("span",tt,l(k.products||0),1)]),e("div",st,[t[12]||(t[12]=e("span",{class:"text-sm text-gray-600"},"Tombolas actives",-1)),e("span",rt,l(k.lotteries||0),1)]),e("div",at,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-600"},"Commandes",-1)),e("span",ot,l(k.orders||0),1)]),e("div",lt,[t[14]||(t[14]=e("span",{class:"text-sm text-gray-600"},"Revenus ce mois",-1)),e("span",it,l((k.revenue||0).toLocaleString("fr-FR"))+" FCFA",1)])])])]),e("div",nt,[e("div",dt,[e("form",{onSubmit:F(H,["prevent"]),class:"space-y-6 p-6"},[e("div",null,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informations personnelles",-1)),e("div",ut,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Prénom "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>c.first_name=g),type:"text",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"}},null,512),[[_,c.first_name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Nom "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":t[1]||(t[1]=g=>c.last_name=g),type:"text",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"}},null,512),[[_,c.last_name]])])]),e("div",ct,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Email "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":t[2]||(t[2]=g=>c.email=g),type:"email",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"}},null,512),[[_,c.email]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Téléphone "),e("span",{class:"text-red-500"},"*")],-1)),v(me,{modelValue:c.phone,"onUpdate:modelValue":t[3]||(t[3]=g=>c.phone=g),placeholder:"Numéro de téléphone","initial-country":"ga"},null,8,["modelValue"])])]),e("div",mt,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=g=>c.city=g),type:"text",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"}},null,512),[[_,c.city]])]),e("div",gt,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse",-1)),h(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=g=>c.address=g),rows:"3",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"},placeholder:"Votre adresse complète..."},null,512),[[_,c.address]])])]),e("div",ft,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informations business",-1)),e("div",pt,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),e("div",vt,l(L.value),1)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bio professionnelle",-1)),h(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=g=>c.bio=g),rows:"4",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"},placeholder:"Décrivez votre activité, vos produits, votre expertise..."},null,512),[[_,c.bio]])])])]),e("div",bt,[e("button",{type:"button",onClick:Y,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors"}," Annuler "),e("button",{type:"submit",disabled:M.value,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50"},l(M.value?"Sauvegarde...":"Sauvegarder"),9,yt)])],32)]),e("div",wt,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Ma notation et mes avis",-1)),i($)?(d(),u("div",xt,t[26]||(t[26]=[e("div",{class:"h-20 bg-gray-200 rounded"},null,-1),e("div",{class:"h-32 bg-gray-200 rounded"},null,-1)]))):i(o)?(d(),u("div",ht,[e("div",_t,[e("div",$t,[e("div",kt,[e("div",At,l((i(o).avg_rating||0).toFixed(1)),1),e("div",null,[v(N,{rating:i(o).avg_rating||0,size:"lg"},null,8,["rating"]),e("p",Mt,l(i(o).total_reviews||0)+" avis clients",1),v(ge,{badge:i(o).badge||"average",class:"mt-2"},null,8,["badge"])])])]),e("div",Vt,[t[30]||(t[30]=e("h4",{class:"font-medium text-gray-900"},"Détail des scores",-1)),e("div",Ut,[e("div",jt,[t[27]||(t[27]=e("span",{class:"text-sm text-gray-600 w-20"},"Activité",-1)),e("div",Ct,[e("div",{class:"h-full bg-[#0099cc] rounded-full",style:S({width:(i(o).activity_score||50)+"%"})},null,4)]),e("span",St,l(Math.round(i(o).activity_score||50)),1)]),e("div",Pt,[t[28]||(t[28]=e("span",{class:"text-sm text-gray-600 w-20"},"Qualité",-1)),e("div",Et,[e("div",{class:"h-full bg-green-500 rounded-full",style:S({width:(i(o).quality_score||50)+"%"})},null,4)]),e("span",Dt,l(Math.round(i(o).quality_score||50)),1)]),e("div",zt,[t[29]||(t[29]=e("span",{class:"text-sm text-gray-600 w-20"},"Fiabilité",-1)),e("div",Bt,[e("div",{class:"h-full bg-purple-500 rounded-full",style:S({width:(i(o).reliability_score||50)+"%"})},null,4)]),e("span",Ft,l(Math.round(i(o).reliability_score||50)),1)])])])]),e("div",Nt,[e("div",Rt,[e("div",qt,l(i(o).completed_sales||0),1),t[31]||(t[31]=e("div",{class:"text-sm text-gray-600"},"Ventes",-1))]),e("div",It,[e("div",Lt,l(i(o).positive_reviews||0),1),t[32]||(t[32]=e("div",{class:"text-sm text-gray-600"},"Avis positifs",-1))]),e("div",Tt,[e("div",Ht,l(i(o).verified_reviews||0),1),t[33]||(t[33]=e("div",{class:"text-sm text-gray-600"},"Avis vérifiés",-1))]),e("div",Yt,[e("div",Gt,l(i(o).fulfilled_orders||0),1),t[34]||(t[34]=e("div",{class:"text-sm text-gray-600"},"Livraisons",-1))])]),e("div",Ot,[v(Ie,{reviews:i(n),pagination:i(y),loading:i($),title:"Derniers avis reçus","empty-message":"Vous n'avez pas encore reçu d'avis.","show-filter":i(n).length>3,onPageChange:J},null,8,["reviews","pagination","loading","show-filter"])])])):(d(),u("div",Qt,t[35]||(t[35]=[C('<div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">Notation non disponible</h4><p class="text-gray-600">Votre notation sera calculée automatiquement après vos premières ventes.</p>',3)])))]),e("div",Wt,[e("form",{onSubmit:F(G,["prevent"]),class:"space-y-6 p-6"},[e("div",null,[t[42]||(t[42]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Changer le mot de passe",-1)),r.value?.has_password?x("",!0):(d(),u("div",Jt,t[37]||(t[37]=[C('<div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><div class="flex-1"><p class="text-sm font-medium text-blue-800">Compte connecté via réseau social</p><p class="text-sm text-blue-700 mt-1"> Vous vous êtes connecté via Google ou Facebook. Définissez un mot de passe pour pouvoir vous connecter directement avec votre email. </p></div></div>',1)]))),e("div",Kt,[r.value?.has_password||f.showCurrentPassword?(d(),u("div",Xt,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Mot de passe actuel "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":t[7]||(t[7]=g=>f.current_password=g),type:"password",required:r.value?.has_password,class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"},placeholder:"Entrez votre mot de passe actuel"},null,8,Zt),[[_,f.current_password]]),A.current_password?(d(),u("p",es,l(A.current_password),1)):x("",!0)])):x("",!0),e("div",null,[e("label",ts,[w(l(r.value?.has_password?"Nouveau mot de passe":"Mot de passe")+" ",1),t[39]||(t[39]=e("span",{class:"text-red-500"},"*",-1))]),h(e("input",{"onUpdate:modelValue":t[8]||(t[8]=g=>f.new_password=g),type:"password",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"},placeholder:"Minimum 8 caractères"},null,512),[[_,f.new_password]]),t[40]||(t[40]=e("p",{class:"mt-1 text-xs text-gray-500"}," Minimum 8 caractères, avec au moins une majuscule, une minuscule et un chiffre ",-1)),A.new_password?(d(),u("p",ss,l(A.new_password),1)):x("",!0)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[w(" Confirmer le mot de passe "),e("span",{class:"text-red-500"},"*")],-1)),h(e("input",{"onUpdate:modelValue":t[9]||(t[9]=g=>f.new_password_confirmation=g),type:"password",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#5f5f5f"},placeholder:"Confirmez votre mot de passe"},null,512),[[_,f.new_password_confirmation]])])])]),e("div",rs,[e("button",{type:"submit",disabled:V.value,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50"},l(V.value?"Sauvegarde...":r.value?.has_password?"Changer le mot de passe":"Définir le mot de passe"),9,as)])],32)])])])]))}};export{is as default};
