import{a as z,c as G}from"./app-CEzqAYNN.js";import{r as f,c as $,j as L,b as u,e,g as l,w as _,h as M,F,y as D,u as d,aH as I,t as a,o as i,av as T,E as P,v as p,z as B,N as R,i as A,aJ as q,aK as U,D as H,G as V,I as J}from"./vendor-jx2CZFIM.js";function K(){const{get:v,loading:k,error:S}=z(),r=f({products:{total:0,active:0,total_views:0},orders:{total:0,total_revenue:0},lotteries:{total:0,active:0,completed:0,total_tickets_sold:0},revenue:{monthly:0,weekly:0,total:0}}),m=f([]),y=f([]),g=f([]),h=$(()=>[{label:"Revenus du mois",value:n(r.value.revenue?.monthly||0),change:0,icon:"CurrencyDollarIcon",color:"bg-[#0099cc]"},{label:"Commandes",value:r.value.orders?.total||0,change:0,icon:"ShoppingBagIcon",color:"bg-blue-500"},{label:"Produits actifs",value:r.value.products?.active||0,change:0,icon:"GiftIcon",color:"bg-yellow-500"},{label:"Clients",value:r.value.customers?.total||0,change:0,icon:"UsersIcon",color:"bg-purple-500"}]),b=$(()=>({total_revenue:r.value.revenue?.total||0,total_orders:r.value.orders?.total||0,avg_order_value:r.value.orders?.total>0?(r.value.revenue?.total||0)/r.value.orders.total:0})),w=async()=>{try{const o=await v("/stats/merchant/dashboard");o&&o.success&&(r.value=o.data)}catch(o){console.error("Erreur lors du chargement des statistiques:",o)}},C=async()=>{try{const o=await v("/stats/merchant/orders");o&&o.success&&(m.value=o.data.recent_orders||[]);const c=await v("/stats/merchant/lotteries");c&&c.success&&(y.value=c.data.recent_lotteries||[]);const j=await v("/stats/merchant/analytics?period=30d");if(j&&j.success){const E=j.data.top_products||[];g.value=E.sort((O,N)=>(N.order_count||0)-(O.order_count||0))}}catch(o){console.error("Erreur lors du chargement des données récentes:",o)}},n=o=>{const c=parseFloat(o)||0;return c>=1e6?(c/1e6).toFixed(1)+"M FCFA":c>=1e3?(c/1e3).toFixed(0)+"k FCFA":c.toLocaleString("fr-FR")+" FCFA"};return{stats:h,summary:b,dashboardStats:r,recentOrders:m,recentLotteries:y,topProducts:g,loading:k,error:S,loadDashboardData:async()=>{await Promise.all([w(),C()])},loadDashboardStats:w,loadRecentData:C,formatCurrency:n,formatDate:o=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(o)),getStatusColor:o=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800",active:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"})[o]||"bg-gray-100 text-gray-800"}}const Q={class:"space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},X={class:"flex items-center"},Y={class:"flex items-center"},Z={class:"flex items-center"},ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},te={class:"flex items-center justify-between"},se={class:"text-sm font-medium text-gray-600"},oe={class:"text-3xl font-bold text-gray-900 mt-2"},ae={class:"mt-4 pt-4 border-t border-gray-100"},re={class:"flex items-center text-sm"},le={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ne={class:"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-gray-100"},ce={class:"flex items-center justify-between mb-6"},de={class:"flex space-x-2"},ie=["onClick"],ue={class:"h-64 bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-lg flex items-center justify-center"},me={class:"text-center"},ge={class:"text-gray-400 text-sm"},xe={class:"mt-6 grid grid-cols-3 gap-4"},ve={class:"text-center"},he={class:"text-2xl font-bold text-[#0099cc]"},be={class:"text-center"},_e={class:"text-2xl font-bold text-blue-600"},pe={class:"text-center"},fe={class:"text-2xl font-bold text-purple-600"},ye={class:"space-y-6"},we={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},Ce={class:"flex items-center justify-between mb-4"},Fe={class:"space-y-3"},De={class:"flex items-center space-x-3"},ke={class:"w-10 h-10 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},Se={class:"font-medium text-gray-900"},je={class:"text-sm text-gray-500"},Ie={class:"text-right"},Pe={class:"font-semibold text-gray-900"},Ae={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},$e={class:"flex items-center justify-between mb-4"},Be={class:"space-y-3"},Re={class:"flex-shrink-0 w-6 h-6 bg-[#0099cc] text-white text-xs font-bold rounded-full flex items-center justify-center"},Ve={class:"flex-1 min-w-0"},Ee={class:"font-medium text-gray-900 truncate"},Oe={class:"flex items-center space-x-2 text-sm text-gray-500"},Ge={__name:"Dashboard",setup(v){const{stats:k,recentOrders:S,topProducts:r,summary:m,loadDashboardData:y}=K(),g=f("30j"),h=$(()=>({totalSales:m.value.total_revenue||0,totalOrders:m.value.total_orders||0,avgOrder:m.value.avg_order_value||0})),b=n=>new Intl.NumberFormat("fr-FR").format(n),w=n=>({completed:"Terminé",pending:"En attente",processing:"En cours",cancelled:"Annulé",paid:"Payé",awaiting_payment:"En attente de paiement"})[n]||n,C=n=>({CurrencyDollarIcon:J,ShoppingBagIcon:P,GiftIcon:V,UsersIcon:H,ChartBarIcon:I})[n]||V;return L(async()=>{await y()}),(n,s)=>{const x=M("router-link");return i(),u("div",Q,[s[13]||(s[13]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de Bord Vendeur"),e("p",{class:"mt-2 text-gray-600"},"Suivez vos ventes, gérez vos produits et analysez vos performances")],-1)),e("div",W,[l(x,{to:"/merchant/products/create",class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:_(()=>[e("div",X,[l(d(T),{class:"w-8 h-8 mr-4"}),s[0]||(s[0]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Nouveau Produit"),e("p",{class:"text-blue-100 text-sm"},"Publier un produit")],-1))])]),_:1}),l(x,{to:"/merchant/orders",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:_(()=>[e("div",Y,[l(d(P),{class:"w-8 h-8 mr-4"}),s[1]||(s[1]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Commandes"),e("p",{class:"text-blue-100 text-sm"},"Suivre les ventes")],-1))])]),_:1}),l(x,{to:"/merchant/analytics",class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:_(()=>[e("div",Z,[l(d(I),{class:"w-8 h-8 mr-4"}),s[2]||(s[2]=e("div",null,[e("h3",{class:"text-lg font-semibold"},"Analytiques"),e("p",{class:"text-purple-100 text-sm"},"Voir les stats")],-1))])]),_:1})]),e("div",ee,[(i(!0),u(F,null,D(d(k),t=>(i(),u("div",{key:t.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200"},[e("div",te,[e("div",null,[e("p",se,a(t.label),1),e("p",oe,a(t.value),1)]),e("div",{class:p(["p-4 rounded-xl",t.color])},[(i(),B(R(C(t.icon)),{class:"w-8 h-8 text-white"}))],2)]),e("div",ae,[e("div",re,[e("span",{class:p(["font-medium flex items-center px-2 py-1 rounded-full text-xs",t.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(i(),B(R(t.change>=0?d(q):d(U)),{class:"w-3 h-3 mr-1"})),A(" "+a(Math.abs(t.change))+"% ",1)],2),s[3]||(s[3]=e("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),e("div",le,[e("div",ne,[e("div",ce,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Évolution des Ventes",-1)),e("div",de,[(i(),u(F,null,D(["7j","30j","90j"],t=>e("button",{key:t,onClick:o=>g.value=t,class:p(["px-3 py-1 rounded-lg text-sm font-medium transition-all",g.value===t?"bg-[#0099cc] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},a(t),11,ie)),64))])]),e("div",ue,[e("div",me,[l(d(I),{class:"w-16 h-16 text-[#0099cc] mx-auto mb-4"}),s[5]||(s[5]=e("p",{class:"text-gray-600 font-medium"},"Graphique des ventes",-1)),e("p",ge,"Données des derniers "+a(g.value),1)])]),e("div",xe,[e("div",ve,[e("p",he,a(b(h.value.totalSales||0)),1),s[6]||(s[6]=e("p",{class:"text-sm text-gray-600"},"Ventes totales (FCFA)",-1))]),e("div",be,[e("p",_e,a(h.value.totalOrders||0),1),s[7]||(s[7]=e("p",{class:"text-sm text-gray-600"},"Commandes",-1))]),e("div",pe,[e("p",fe,a(b(h.value.avgOrder||0)),1),s[8]||(s[8]=e("p",{class:"text-sm text-gray-600"},"Panier moyen (FCFA)",-1))])])]),e("div",ye,[e("div",we,[e("div",Ce,[s[10]||(s[10]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes",-1)),l(x,{to:"/merchant/orders",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:_(()=>s[9]||(s[9]=[A(" Voir tout → ",-1)])),_:1,__:[9]})]),e("div",Fe,[(i(!0),u(F,null,D(d(S),t=>(i(),u("div",{key:t.id,class:"flex items-center justify-between p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"},[e("div",De,[e("div",ke,[l(d(P),{class:"w-5 h-5 text-[#0099cc]"})]),e("div",null,[e("p",Se,a(t.product_name),1),e("p",je,a(t.customer_name),1)])]),e("div",Ie,[e("p",Pe,a(b(t.amount||0))+" FCFA",1),e("span",{class:p(["inline-block px-2 py-1 text-xs font-medium rounded-full",t.status==="completed"?"bg-blue-100 text-blue-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},a(w(t.status)),3)])]))),128))])]),e("div",Ae,[e("div",$e,[s[12]||(s[12]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Produits populaires",-1)),l(x,{to:"/merchant/products",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:_(()=>s[11]||(s[11]=[A(" Gérer → ",-1)])),_:1,__:[11]})]),e("div",Be,[(i(!0),u(F,null,D(d(r),(t,o)=>(i(),u("div",{key:t.id,class:"flex items-center space-x-3"},[e("div",Re,a(o+1),1),l(G,{src:t.image_url||t.main_image||t.image,alt:t.name,"container-class":"w-12 h-12 rounded-lg","image-class":"w-12 h-12 rounded-lg object-cover","fallback-class":"w-12 h-12 rounded-lg","fallback-text":"Photo"},null,8,["src","alt"]),e("div",Ve,[e("p",Ee,a(t.name),1),e("div",Oe,[e("span",null,a(t.sales)+" ventes",1),e("span",{class:p(["font-medium",t.growth>=0?"text-blue-600":"text-red-600"])},a(t.growth>=0?"+":"")+a(t.growth)+"% ",3)])])]))),128))])])])])])}}};export{Ge as default};
