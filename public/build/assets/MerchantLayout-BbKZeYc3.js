import{b as l,o as r,e,r as d,c as f,g as L,A as S,i as n,j as V,w as u,k as M,F as v,n as p,u as g,t as o,P as O,J as j,m as R,p as b,l as x,v as _,q as A}from"./vendor-CTxEzfV9.js";import{u as W,a as Q,r as U,b as J,K as G,_ as X,c as Y,d as ee,e as te,f as se,g as D,h as re,i as ae}from"./app-ByiKF6m8.js";function ne(H,y){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}const oe={class:"min-h-screen bg-gray-50"},le={class:"bg-white shadow-sm border-b border-gray-200"},ie={class:"mx-auto px-4 sm:px-6 lg:px-8"},ce={class:"flex justify-between h-16"},me={class:"flex"},de={class:"flex-shrink-0 flex items-center min-w-0"},ue={key:1,class:"flex items-center space-x-1"},he={class:"hidden sm:ml-6 sm:flex sm:space-x-8"},xe={class:"flex items-center space-x-2 sm:space-x-4"},fe={class:"relative p-1 sm:p-2 text-gray-400 hover:text-gray-500"},ve={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full min-w-[1rem] h-4"},pe={class:"relative ml-1 sm:ml-3"},ge={class:"h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0"},be={class:"text-xs sm:text-sm font-medium text-blue-600"},_e={class:"ml-2 sm:ml-3 text-gray-700 text-xs sm:text-sm font-medium hidden lg:block min-w-0 truncate"},ye={class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},we={class:"py-1"},ke={class:"sm:hidden"},Ce={class:"pt-2 pb-3 space-y-1"},$e={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Fe={key:0,class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 lg:hidden z-40"},Se={class:"flex justify-around text-center"},Ve={class:"text-lg font-semibold text-gray-900"},Me={class:"text-lg font-semibold text-blue-600"},je={class:"text-lg font-semibold text-purple-600"},He={__name:"MerchantLayout",setup(H){const y=R(),w=W(),{get:N}=Q(),i=d(!1),k=d(!1),C=d(!1),$=d(0),c=d({products:"0",lotteries:"0",revenue:"0 FCFA"}),F=[{name:"Dashboard",href:"/merchant/dashboard",icon:Y},{name:"Produits",href:"/merchant/products",icon:ee},{name:"Commandes",href:"/merchant/orders",icon:ne},{name:"Tombolas",href:"/merchant/lotteries",icon:te},{name:"Statistiques",href:"/merchant/analytics",icon:se},{name:"Paramètres",href:"/merchant/settings",icon:D}],E=[{name:"Profil",href:"/merchant/profile",icon:re},{name:"Paramètres",href:"/merchant/settings",icon:D}],m=f(()=>w.user),P=f(()=>{if(!m.value)return"U";const a=m.value.first_name?.[0]||"",t=m.value.last_name?.[0]||"";return(a+t).toUpperCase()}),B=f(()=>window.innerWidth<1024),K=async()=>{await w.logout(),y.push({name:"login"})},T=()=>{C.value=!0},Z=async()=>{try{const t=(await N("/merchant/dashboard/stats")).data;c.value={products:t.total_products?.toString()||"0",lotteries:t.active_lotteries?.toString()||"0",revenue:q(t.revenue_this_month||0)}}catch(a){console.error("Erreur lors du chargement des stats rapides:",a),c.value={products:"0",lotteries:"0",revenue:"0 FCFA"}}},q=a=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0)+" FCFA";return L(()=>{Z(),document.addEventListener("click",a=>{a.target.closest(".relative")||(i.value=!1)})}),(a,t)=>{const h=M("router-link"),z=M("router-view");return r(),l("div",oe,[e("nav",le,[e("div",ie,[e("div",ce,[e("div",me,[e("div",de,[n(h,{to:"/merchant/dashboard",class:"flex items-center"},{default:u(()=>[C.value?(r(),l("div",ue,t[3]||(t[3]=[e("div",{class:"w-5 h-5 sm:w-6 sm:h-6 bg-[#0099cc] rounded flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white font-bold text-xs sm:text-sm"},"K")],-1),e("span",{class:"text-sm sm:text-lg font-bold text-[#0099cc] whitespace-nowrap"},"Koumbaya",-1)]))):(r(),l("img",{key:0,class:"h-6 sm:h-8 w-auto object-contain max-w-none",src:X,alt:"Koumbaya",onError:T},null,32)),t[4]||(t[4]=e("span",{class:"ml-1 sm:ml-2 text-xs sm:text-sm text-[#0099cc] font-medium whitespace-nowrap"},"Marchand",-1))]),_:1,__:[4]})]),e("div",he,[(r(),l(v,null,p(F,s=>n(h,{key:s.name,to:s.href,class:A(["inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",a.$route.path.startsWith(s.href)?"border-[#0099cc] text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},{default:u(()=>[(r(),b(_(s.icon),{class:"w-4 h-4 mr-2"})),x(" "+o(s.name),1)]),_:2},1032,["to","class"])),64))])]),e("div",xe,[e("button",fe,[n(g(U),{class:"h-5 w-5 sm:h-6 sm:w-6"}),$.value>0?(r(),l("span",ve,o($.value),1)):V("",!0)]),e("div",pe,[e("div",null,[e("button",{onClick:t[0]||(t[0]=s=>i.value=!i.value),class:"flex items-center max-w-xs bg-white rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0099cc]"},[t[5]||(t[5]=e("span",{class:"sr-only"},"Open user menu",-1)),e("div",ge,[e("span",be,o(P.value),1)]),e("span",_e,o(m.value?.first_name)+" "+o(m.value?.last_name),1),n(g(J),{class:"ml-1 sm:ml-2 h-3 w-3 sm:h-4 sm:w-4 text-gray-500 flex-shrink-0"})])]),n(O,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:u(()=>[S(e("div",ye,[e("div",we,[(r(),l(v,null,p(E,s=>n(h,{key:s.name,to:s.href,onClick:t[1]||(t[1]=I=>i.value=!1),class:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:u(()=>[(r(),b(_(s.icon),{class:"w-4 h-4 mr-3"})),x(" "+o(s.name),1)]),_:2},1032,["to"])),64)),e("button",{onClick:K,class:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[n(g(ae),{class:"w-4 h-4 mr-3"}),t[6]||(t[6]=x(" Déconnexion ",-1))])])],512),[[j,i.value]])]),_:1})])])])])]),S(e("div",ke,[e("div",Ce,[(r(),l(v,null,p(F,s=>n(h,{key:s.name,to:s.href,onClick:t[2]||(t[2]=I=>k.value=!1),class:A(["block pl-3 pr-4 py-2 border-l-4 text-base font-medium",a.$route.path.startsWith(s.href)?"bg-blue-50 border-blue-500 text-blue-700":"border-transparent text-gray-500 hover:bg-gray-100 hover:border-gray-300 hover:text-gray-700"])},{default:u(()=>[(r(),b(_(s.icon),{class:"w-5 h-5 mr-3 inline"})),x(" "+o(s.name),1)]),_:2},1032,["to","class"])),64))])],512),[[j,k.value]]),e("main",$e,[n(z)]),n(G),B.value?(r(),l("div",Fe,[e("div",Se,[e("div",null,[e("div",Ve,o(c.value.products),1),t[7]||(t[7]=e("div",{class:"text-xs text-gray-600"},"Produits",-1))]),e("div",null,[e("div",Me,o(c.value.lotteries),1),t[8]||(t[8]=e("div",{class:"text-xs text-gray-600"},"Tombolas",-1))]),e("div",null,[e("div",je,o(c.value.revenue),1),t[9]||(t[9]=e("div",{class:"text-xs text-gray-600"},"Revenus",-1))])])])):V("",!0)])}}};export{He as default};
