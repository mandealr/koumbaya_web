const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/common-components-C44zC4g7.js","assets/vue-core-BXnTE0w7.js","assets/admin-pages-C_NGfial.js","assets/utils-CcZu3SrZ.js","assets/http-NIGUFBhG.js","assets/vendor-Cg4W4xsk.js","assets/vendor-B07defP1.css","assets/admin-pages-Bh76-6by.css","assets/common-components-bDwELV48.css","assets/merchant-pages-3ekRYSg6.js","assets/customer-pages-BE3vdabU.js","assets/customer-pages-Bxw9K1iB.css"])))=>i.map(i=>d[i]);
import{a as Ze}from"./http-NIGUFBhG.js";import{D as Q,r as C,E as ue,o as H,al as le,i,j as e,u as c,q as V,n as u,ad as F,ae as ee,k as A,m as D,t as d,L as ce,y as E,_ as pe,aN as oe,az as K,H as T,I as G,a5 as De,aO as xe,z as W,P as re,aP as ge,M as Ve,ag as et,w as J,x as a,J as Y,F as I,l as N,a9 as _e,T as ae,ac as Ne,aQ as fe,a3 as we,aR as Ue,aS as Ae,N as de,ai as be,R as me,aT as tt,h as st,f as ze,e as ot,aw as je,g as Be,aU as Ge,aG as se,aV as rt,V as Se,s as at,aA as Oe,a8 as We,a as Me,a7 as qe,c as Z,aW as lt,S as it,aB as R,aX as nt,aH as dt,a1 as ct,aY as ut,af as mt,at as pt,aZ as Le,ay as Re,a_ as xt,ax as gt,A as vt,aa as ft,G as Fe,a$ as bt,b0 as yt,b1 as ht,b2 as _t}from"./vue-core-BXnTE0w7.js";import{_ as ve,u as te,a as wt,b as $t,P as kt,c as Ct,d as Pt,e as jt,f as qt,g as Vt}from"./admin-pages-C_NGfial.js";import{l as ie,_ as ye,P as At,b as zt,c as St,d as Mt,T as Et}from"./common-components-C44zC4g7.js";import{P as $e,a as He,m as Ke,_ as Tt,b as Lt,c as Rt,d as Ft,e as It,f as Dt,O as Nt,g as Ut,h as Bt,i as Gt}from"./customer-pages-BE3vdabU.js";import{u as U}from"./utils-CcZu3SrZ.js";import{d as Ot}from"./vendor-Cg4W4xsk.js";window.axios=Ze;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Wt="modulepreload",Ht=function(z){return"/build/"+z},Ie={},X=function(P,h,b){let m=Promise.resolve();if(h&&h.length>0){let o=function(g){return Promise.all(g.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),_=v?.nonce||v?.getAttribute("nonce");m=o(h.map(g=>{if(g=Ht(g),g in Ie)return;Ie[g]=!0;const p=g.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${f}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Wt,p||(x.as="script"),x.crossOrigin="",x.href=g,_&&x.setAttribute("nonce",_),document.head.appendChild(x),p)return new Promise((n,j)=>{x.addEventListener("load",n),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${g}`)))})}))}function r(v){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=v,window.dispatchEvent(_),!_.defaultPrevented)throw v}return m.then(v=>{for(const _ of v||[])_.status==="rejected"&&r(_.reason);return P().catch(r)})},Kt={class:"min-h-screen bg-gradient-to-br from-koumbaya-primary/5 via-white to-koumbaya-primary/10 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Xt={class:"sm:mx-auto sm:w-full sm:max-w-md"},Jt={class:"flex justify-center mb-8"},Qt=["src"],Yt={class:"text-center text-sm text-gray-500"},Zt={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},es={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},ts={class:"koumbaya-card-body p-8"},ss={key:0,class:"mb-6 rounded-xl bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-200 p-4 shadow-lg"},os={class:"flex items-start"},rs={class:"ml-3 flex-1"},as={class:"text-sm font-semibold text-green-800 mb-2"},ls={class:"text-sm text-green-700 leading-relaxed"},is={key:0,class:"mt-2 text-xs text-green-600 bg-green-100 rounded-lg p-2"},ns={class:"space-y-1 list-disc list-inside ml-2"},ds={class:"flex justify-center space-x-2 p-1 bg-gray-100 rounded-lg mb-6"},cs={key:0,class:"rounded-xl bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 p-4 shadow-lg"},us={class:"flex items-start"},ms={class:"flex-shrink-0"},ps={class:"ml-3 flex-1"},xs={class:"text-sm text-red-800 font-semibold leading-relaxed"},gs={key:0,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},vs={key:1,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},fs={key:2,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},bs={key:1,class:"koumbaya-form-group"},ys={for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},hs={class:"flex items-center"},_s={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},ws={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},$s={key:2,class:"koumbaya-form-group"},ks={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},Cs={class:"flex items-center"},Ps={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},js={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},qs={class:"koumbaya-form-group"},Vs={for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},As={class:"flex items-center"},zs={class:"relative"},Ss=["type"],Ms={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Es={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},Ts={class:"flex items-center justify-between"},Ls={class:"flex items-center cursor-pointer group"},Rs={class:"pt-2"},Fs=["disabled"],Is={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-4"},Ds={class:"flex items-center justify-center"},Ns={__name:"Login",setup(z){const P=J(),h=le(),b=te(),m=Q({email:"",phone:"",password:"",rememberMe:!1}),r=C("email"),v=C(null),_=C(!1),o=Q({email:"",phone:"",password:"",general:""}),g=$=>{console.log("Login phone change:",$),_.value=$.isValid,m.phone=$.fullNumber,$.isValid&&$.fullNumber&&(o.phone="")},p=C(!1),f=C(!1),x=C(null),n=()=>{let $=!0;return Object.keys(o).forEach(y=>{o[y]=""}),r.value==="email"?m.email?m.email.includes("@")?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)?m.email.length>100&&(o.email="L'adresse email est trop longue (max 100 caractères)",$=!1):(o.email="Format d'email invalide (exemple: nom@domaine.com)",$=!1):(o.email="L'adresse email doit contenir le symbole @",$=!1):(o.email="L'adresse email est obligatoire",$=!1):!m.phone||m.phone.trim()===""?(o.phone="📱 Le numéro de téléphone est obligatoire",$=!1):!_.value&&m.phone.length>3&&(o.phone="Format de téléphone invalide",$=!1),m.password?m.password.length<6?(o.password="Le mot de passe doit contenir au moins 6 caractères",$=!1):m.password.length>50?(o.password="Le mot de passe est trop long (max 50 caractères)",$=!1):m.password.includes(" ")&&(o.password="Le mot de passe ne doit pas contenir d'espaces",$=!1):(o.password="Le mot de passe est obligatoire",$=!1),$},j=async $=>{if($&&($.preventDefault(),$.stopPropagation()),!!n()){p.value=!0,o.general="";try{const y={password:m.password};r.value==="email"?y.email=m.email:y.phone=m.phone;const k=await b.login(y);if(k.success){if(window.$toast){const t=b.user?.name||b.user?.first_name||"utilisateur";window.$toast.success(`🎉 Bienvenue ${t} ! Redirection en cours...`,"✅ Connexion réussie")}console.log("User data après connexion:",b.user);const s=h.query.redirect,l=h.query.action;setTimeout(()=>{if(s&&(l==="participate"||l==="wishlist")){const w=s.match(/\/products\/(\d+)/)?.[1];if(w){P.push({name:"customer.product.detail",params:{id:w}});return}}if(s){P.push(s);return}const t=b.getDefaultRedirect();console.log("Redirection logic:",{user:b.user,redirectTo:t,isAdmin:b.isAdmin,isMerchant:b.isMerchant,isCustomer:b.isCustomer}),P.push({name:t}).catch(w=>{console.error("Erreur de redirection vers",t,":",w),P.push({name:"customer.dashboard"}).catch(()=>{P.push("/")})})},100)}else{const s=k.error||"Erreur de connexion inconnue";s.toLowerCase().includes("identifiants incorrects")||s.toLowerCase().includes("invalid credentials")||s.includes("401")?(o.general="Identifiants incorrects. Vérifiez votre adresse email et votre mot de passe.",o.email="Adresse email ou mot de passe incorrect",o.password="Adresse email ou mot de passe incorrect"):s.toLowerCase().includes("trop de tentatives")||s.toLowerCase().includes("too many")||s.includes("429")?o.general="Trop de tentatives de connexion. Veuillez patienter 15 minutes avant de réessayer.":s.toLowerCase().includes("network")||s.toLowerCase().includes("réseau")||s.toLowerCase().includes("connexion")?o.general="Problème de connexion internet. Vérifiez votre connexion et réessayez.":s.toLowerCase().includes("email")&&s.toLowerCase().includes("verify")?o.general="Votre compte n'est pas encore vérifié. Vérifiez votre boîte email et cliquez sur le lien de vérification.":s.toLowerCase().includes("blocked")||s.toLowerCase().includes("suspendu")?o.general="Votre compte est temporairement suspendu. Contactez le support client.":o.general=`${s}`,window.$toast&&window.$toast.error(o.general,"🚫 Erreur de connexion"),setTimeout(()=>{o.email,document.getElementById("email")?.focus()},100)}}catch(y){console.error("Erreur lors de la connexion:",y);let k="Une erreur technique est survenue. Veuillez réessayer.";if(y.response?.status===401)k="🚫 Identifiants incorrects. Vérifiez votre adresse email et votre mot de passe.",o.email="Adresse email ou mot de passe incorrect",o.password="Adresse email ou mot de passe incorrect";else if(y.response?.status===422)if(y.response.data?.errors){const s=y.response.data.errors;s.email&&(o.email=s.email[0]),s.password&&(o.password=s.password[0]),k="⚠️ Veuillez corriger les erreurs ci-dessous."}else k="⚠️ Données invalides. Vérifiez vos informations.";else y.response?.status===429?k="⏳ Trop de tentatives de connexion. Veuillez patienter 15 minutes avant de réessayer.":y.response?.status===500?k="🔧 Erreur du serveur. Nos équipes sont notifiées. Veuillez réessayer dans quelques minutes.":y.response?.status===503?k="⚙️ Service temporairement indisponible. Maintenance en cours.":y.code==="NETWORK_ERROR"||!y.response?k="🌐 Impossible de joindre le serveur. Vérifiez votre connexion internet.":y.response?.data?.message?k=`${y.response.data.message}`:y.message&&(k=`${y.message}`);if(o.general=k,window.$toast){let s="🚫 Erreur de connexion";y.response?.status===500?s="🔧 Erreur serveur":y.code==="NETWORK_ERROR"&&(s="🌐 Problème réseau"),window.$toast.error(k,s)}setTimeout(()=>{o.email?document.getElementById("email")?.focus():o.password?document.getElementById("password")?.focus():document.getElementById("email")?.focus()},100)}finally{p.value=!1}}};ue(()=>m.email,$=>{o.email&&$&&$.includes("@")&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($)&&(o.email="")},{debounce:300}),ue(()=>m.password,$=>{o.password&&$&&$.length>=6&&$.length<=50&&!$.includes(" ")&&(o.password="")},{debounce:300}),ue([()=>m.email,()=>m.password],()=>{o.general&&(o.general="")});const q=()=>{x.value=null,sessionStorage.removeItem("registration_success")};return H(()=>{if(h.query.registered==="true"){const $=sessionStorage.getItem("registration_success");if($)try{x.value=JSON.parse($),x.value.email&&(m.email=x.value.email)}catch(y){console.error("Erreur lors du parsing des données d'inscription:",y)}else h.query.email&&(m.email=h.query.email,x.value={email:h.query.email,first_name:"utilisateur",verification_message:"Un email de vérification a été envoyé à votre adresse. Veuillez consulter votre boîte email pour vérifier votre compte.",requires_verification:!0})}}),($,y)=>{const k=ee("router-link");return a(),i("div",Kt,[e("div",Xt,[e("div",Jt,[e("img",{class:"h-20 w-auto",src:c(ie),alt:"Koumbaya"},null,8,Qt)]),y[10]||(y[10]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Content de vous revoir ! ",-1)),y[11]||(y[11]=e("p",{class:"text-center text-lg text-gray-600 mb-8"}," Connectez-vous pour accéder à vos tombolas ",-1)),e("p",Yt,[y[9]||(y[9]=V(" Pas encore de compte ? ",-1)),u(k,{to:"/register",class:"font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors ml-1"},{default:F(()=>y[8]||(y[8]=[V(" Inscrivez-vous gratuitement → ",-1)])),_:1,__:[8]})])]),e("div",Zt,[e("div",es,[e("div",ts,[x.value?(a(),i("div",ss,[e("div",os,[y[17]||(y[17]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",rs,[e("div",as," Inscription réussie ! Bienvenue "+d(x.value.first_name),1),e("div",ls,d(x.value.verification_message),1),x.value.email?(a(),i("div",is,[y[15]||(y[15]=e("div",{class:"font-medium mb-1"},"Que faire maintenant :",-1)),e("ul",ns,[e("li",null,[y[12]||(y[12]=V("Consultez votre boîte email : ",-1)),e("strong",null,d(x.value.email),1)]),y[13]||(y[13]=e("li",null,"Cliquez sur le lien de vérification dans l'email",-1)),y[14]||(y[14]=e("li",null,"Revenez ici pour vous connecter avec vos identifiants",-1))])])):A("",!0)]),e("button",{onClick:q,class:"flex-shrink-0 ml-2 text-green-400 hover:text-green-600 transition-colors",title:"Fermer ce message"},y[16]||(y[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])):A("",!0),e("form",{onSubmit:ce(j,["prevent"]),class:"space-y-6"},[e("div",ds,[e("button",{type:"button",onClick:y[0]||(y[0]=s=>r.value="email"),class:E(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",r.value==="email"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[u(c(pe),{class:"w-4 h-4 inline-block mr-2"}),y[18]||(y[18]=V(" Email ",-1))],2),e("button",{type:"button",onClick:y[1]||(y[1]=s=>r.value="phone"),class:E(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",r.value==="phone"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[u(c(oe),{class:"w-4 h-4 inline-block mr-2"}),y[19]||(y[19]=V(" Téléphone ",-1))],2)]),o.general?(a(),i("div",cs,[e("div",us,[e("div",ms,[u(c(K),{class:"w-6 h-6 text-red-500 animate-pulse"})]),e("div",ps,[e("div",xs,d(o.general),1),o.general.includes("Identifiants incorrects")?(a(),i("div",gs,y[20]||(y[20]=[e("div",{class:"font-medium mb-1"},"💡 Conseils :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Vérifiez que votre adresse email est correcte"),e("li",null,"Assurez-vous que les majuscules/minuscules sont respectées"),e("li",null,"Essayez de réinitialiser votre mot de passe si nécessaire")],-1)]))):o.general.includes("connexion internet")?(a(),i("div",vs,y[21]||(y[21]=[e("div",{class:"font-medium mb-1"},"💡 Conseils :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Vérifiez votre connexion WiFi ou données mobiles"),e("li",null,"Essayez de rafraîchir la page"),e("li",null,"Contactez votre fournisseur internet si le problème persiste")],-1)]))):o.general.includes("Trop de tentatives")?(a(),i("div",fs,y[22]||(y[22]=[e("div",{class:"font-medium mb-1"},"💡 Que faire :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Attendez 15 minutes avant de réessayer"),e("li",null,"Utilisez ce temps pour vérifier vos identifiants"),e("li",null,"Réinitialisez votre mot de passe si nécessaire")],-1)]))):A("",!0)]),e("button",{onClick:y[2]||(y[2]=s=>o.general=""),class:"flex-shrink-0 ml-2 text-red-400 hover:text-red-600 transition-colors",title:"Fermer ce message"},y[23]||(y[23]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])):A("",!0),r.value==="email"?(a(),i("div",bs,[e("label",ys,[e("div",hs,[u(c(pe),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),y[24]||(y[24]=e("span",null,"Adresse e-mail",-1))])]),T(e("input",{id:"email",name:"email",type:"email","onUpdate:modelValue":y[3]||(y[3]=s=>m.email=s),required:"",class:E(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":o.email,"border-blue-300 focus:border-blue-500":!o.email&&m.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)}]),style:{color:"#5f5f5f"},placeholder:"exemple@koumbaya.com"},null,2),[[G,m.email]]),o.email?(a(),i("p",_s,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(o.email),1)])):!o.email&&m.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)?(a(),i("p",ws,y[25]||(y[25]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),V(" ✓ Adresse email valide ",-1)]))):A("",!0)])):A("",!0),r.value==="phone"?(a(),i("div",$s,[e("label",ks,[e("div",Cs,[u(c(oe),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),y[26]||(y[26]=e("span",null,"Numéro de téléphone",-1))])]),u($e,{ref_key:"phoneInputRef",ref:v,modelValue:m.phone,"onUpdate:modelValue":y[4]||(y[4]=s=>m.phone=s),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:g},null,8,["modelValue"]),o.phone?(a(),i("p",Ps,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(o.phone),1)])):_.value?(a(),i("p",js,y[27]||(y[27]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),V(" ✓ Numéro de téléphone valide ",-1)]))):A("",!0)])):A("",!0),e("div",qs,[e("label",Vs,[e("div",As,[u(c(De),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),y[28]||(y[28]=e("span",null,"Mot de passe",-1))])]),e("div",zs,[T(e("input",{id:"password",name:"password",type:f.value?"text":"password","onUpdate:modelValue":y[5]||(y[5]=s=>m.password=s),required:"",class:E(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":o.password,"border-blue-300 focus:border-blue-500":!o.password&&m.password&&m.password.length>=6}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Ss),[[xe,m.password]]),e("button",{type:"button",onClick:y[6]||(y[6]=s=>f.value=!f.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[f.value?(a(),W(c(ge),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(a(),W(c(re),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),o.password?(a(),i("p",Ms,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(o.password),1)])):!o.password&&m.password&&m.password.length>=6?(a(),i("p",Es,y[29]||(y[29]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),V(" ✓ Mot de passe valide ",-1)]))):A("",!0)]),e("div",Ts,[e("label",Ls,[T(e("input",{id:"remember-me",name:"remember-me",type:"checkbox","onUpdate:modelValue":y[7]||(y[7]=s=>m.rememberMe=s),class:"w-4 h-4 text-koumbaya-primary bg-white border-2 border-gray-300 rounded focus:ring-koumbaya-primary focus:ring-2 transition-colors"},null,512),[[Ve,m.rememberMe]]),y[30]||(y[30]=e("span",{class:"ml-3 text-sm text-gray-700 group-hover:text-gray-900 transition-colors"}," Se souvenir de moi ",-1))]),u(k,{to:"/forgot-password",class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors"},{default:F(()=>y[31]||(y[31]=[V(" Mot de passe oublié ? ",-1)])),_:1,__:[31]})]),e("div",Rs,[e("button",{type:"submit",disabled:p.value,class:"koumbaya-btn koumbaya-btn-primary koumbaya-btn-full koumbaya-btn-lg relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all duration-300"},[p.value?(a(),i("span",Is,y[32]||(y[32]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1)]))):A("",!0),e("span",Ds,[p.value?A("",!0):(a(),W(c(et),{key:0,class:"w-5 h-5 mr-2 group-hover:translate-x-1 transition-transform"})),V(" "+d(p.value?"Connexion en cours...":"Se connecter"),1)])],8,Fs)])],32),y[33]||(y[33]=D('<div class="my-8" data-v-b168a1c4><div class="relative" data-v-b168a1c4><div class="absolute inset-0 flex items-center" data-v-b168a1c4><div class="w-full border-t border-gray-200" data-v-b168a1c4></div></div><div class="relative flex justify-center text-sm" data-v-b168a1c4><span class="px-4 bg-white text-gray-500 font-medium" data-v-b168a1c4>Ou continuez avec</span></div></div></div><div class="grid grid-cols-2 gap-4" data-v-b168a1c4><button class="flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl shadow-sm bg-white hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group" data-v-b168a1c4><svg class="w-5 h-5 text-gray-600 group-hover:text-gray-700" viewBox="0 0 24 24" data-v-b168a1c4><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-b168a1c4></path><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-b168a1c4></path><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-b168a1c4></path><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-b168a1c4></path></svg><span class="ml-2 text-sm font-medium text-gray-700" data-v-b168a1c4>Google</span></button><button class="flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl shadow-sm bg-white hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group" data-v-b168a1c4><svg class="w-5 h-5 text-gray-600 group-hover:text-gray-700" fill="currentColor" viewBox="0 0 24 24" data-v-b168a1c4><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" data-v-b168a1c4></path></svg><span class="ml-2 text-sm font-medium text-gray-700" data-v-b168a1c4>Twitter</span></button></div>',2))])])])])}}},Us=ve(Ns,[["__scopeId","data-v-b168a1c4"]]),he={async loginWithFacebook(){try{const P=await U().get("/auth/facebook");P.redirect_url&&(window.location.href=P.redirect_url)}catch(z){throw console.error("Facebook login error:",z),new Error("Erreur lors de la connexion avec Facebook")}},async loginWithGoogle(){try{const P=await U().get("/auth/google");P.redirect_url&&(window.location.href=P.redirect_url)}catch(z){throw console.error("Google login error:",z),new Error("Erreur lors de la connexion avec Google")}},async loginWithApple(){try{const P=await U().get("/auth/apple");P.redirect_url&&(window.location.href=P.redirect_url)}catch(z){throw console.error("Apple login error:",z),new Error("Erreur lors de la connexion avec Apple")}},async handleSocialCallback(z,P){try{const b=await U().get(`/auth/${z}/callback`,{params:P});if(b.access_token){const m=te();return m.setUser(b.user),m.setToken(b.access_token),{success:!0,user:b.user,message:b.message}}else throw new Error("Réponse invalide du serveur")}catch(h){return console.error("Social callback error:",h),{success:!1,message:h.response?.data?.message||"Erreur lors de l'authentification"}}},async openSocialLoginPopup(z){return new Promise((P,h)=>{try{const b=window.open(`/api/auth/${z}`,"socialLogin","width=600,height=700,scrollbars=yes,resizable=yes"),m=setInterval(()=>{b.closed&&(clearInterval(m),he.checkAuthenticationStatus().then(P).catch(h))},1e3);setTimeout(()=>{clearInterval(m),b.closed||b.close(),h(new Error("Timeout lors de l'authentification"))},3e5)}catch(b){h(b)}})},async checkAuthenticationStatus(){try{const P=await U().get("/auth/me");return P.user?(te().setUser(P.user),{success:!0,user:P.user}):{success:!1}}catch{return{success:!1}}}},Bs={class:"min-h-screen bg-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},Gs={class:"max-w-4xl w-full"},Os={class:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden"},Ws={class:"grid grid-cols-1 lg:grid-cols-2"},Hs={class:"p-8 lg:p-12"},Ks={class:"max-w-md mx-auto"},Xs={class:"text-gray-600 mb-8"},Js={class:"mb-6"},Qs={class:"grid grid-cols-2 gap-3"},Ys={class:"flex items-center"},Zs={key:0,class:"w-full h-full rounded-full bg-white scale-50"},eo={class:"flex items-center"},to={key:0,class:"w-full h-full rounded-full bg-white scale-50"},so={key:0,class:"transition-all duration-300"},oo={key:0,class:"mt-2 text-sm text-red-600"},ro={class:"grid grid-cols-2 gap-4"},ao={key:0,class:"mt-1 text-sm text-red-600"},lo={key:0,class:"mt-1 text-sm text-red-600"},io={key:0,class:"mt-1 text-sm text-red-600"},no={key:0,class:"mt-1 text-sm text-red-600"},co={class:"relative"},uo=["disabled"],mo=["value"],po={key:0,class:"mt-1 text-sm text-red-600"},xo={key:1,class:"mt-1 text-sm text-gray-500"},go={key:1,class:"grid grid-cols-2 gap-4 transition-all duration-300"},vo=["required"],fo={key:0,class:"mt-1 text-sm text-red-600"},bo={key:0,class:"mt-1 text-sm text-red-600"},yo={class:"grid grid-cols-2 gap-4"},ho={class:"relative"},_o=["type"],wo={key:0,class:"mt-1 text-sm text-red-600"},$o={class:"relative"},ko=["type"],Co={key:0,class:"mt-1 text-sm text-red-600"},Po={class:"flex items-start space-x-3"},jo={class:"flex items-center h-6"},qo={key:2,class:"text-sm text-red-600"},Vo={key:3,class:"rounded-xl bg-red-50 p-4 border border-red-200"},Ao={class:"flex"},zo={class:"ml-3"},So={class:"mt-1 text-sm text-red-700"},Mo=["disabled"],Eo={key:0,class:"flex items-center space-x-2"},To={key:1},Lo="/logo_white.png",Ro={__name:"Register",setup(z){const P=J(),h=te(),{get:b}=U(),m=C(!1),r=C(!1),v=C([]),_=C(!1),o=C(!1);C("GA");const g=Q({account_type:"personal",business_name:"",first_name:"",last_name:"",email:"",phone:"",city:"",address:"",country_id:"",password:"",password_confirmation:"",terms:!1}),p=Q({account_type:"",business_name:"",first_name:"",last_name:"",email:"",phone:"",city:"",address:"",country_id:"",password:"",password_confirmation:"",terms:""}),f=()=>{Object.keys(p).forEach(s=>{p[s]=""});let k=!0;return g.account_type==="business"&&!g.business_name.trim()&&(p.business_name="Le nom de l'entreprise est requis pour un compte business",k=!1),g.first_name.trim()||(p.first_name="Le prénom est requis",k=!1),g.last_name.trim()||(p.last_name="Le nom est requis",k=!1),g.email?/\S+@\S+\.\S+/.test(g.email)||(p.email="Format d'email invalide",k=!1):(p.email="L'email est requis",k=!1),!g.phone||g.phone.trim()===""?(p.phone="Le numéro de téléphone est requis",k=!1):!o.value&&g.phone.length>3&&(p.phone="Format de téléphone invalide",k=!1),g.account_type==="business"&&!g.city.trim()&&(p.city="La ville est requise pour un compte business",k=!1),g.country_id||(p.country_id="Le pays est requis",k=!1),g.password?g.password.length<8&&(p.password="Le mot de passe doit contenir au moins 8 caractères",k=!1):(p.password="Le mot de passe est requis",k=!1),g.password!==g.password_confirmation&&(p.password_confirmation="Les mots de passe ne correspondent pas",k=!1),g.terms||(p.terms="Vous devez accepter les conditions d'utilisation",k=!1),k},x=k=>{console.log("Phone change:",k),o.value=k.isValid,g.phone=k.fullNumber,k.isValid&&k.fullNumber&&(p.phone="")},n=async()=>{if(!f())return;h.clearError();const k={account_type:g.account_type,first_name:g.first_name.trim(),last_name:g.last_name.trim(),email:g.email.trim(),phone:g.phone.trim(),country_id:parseInt(g.country_id),password:g.password,password_confirmation:g.password_confirmation,can_sell:g.account_type==="business",can_buy:!0};g.account_type==="business"&&(k.city=g.city.trim(),k.address=g.address.trim()||null),g.account_type==="business"&&g.business_name.trim()&&(k.business_name=g.business_name.trim());const s=await h.register(k);if(s.success){console.log("Inscription réussie, données utilisateur:",h.user),h.logout();const l=g.account_type==="business"?"marchand":"client",t=s.verification_type==="email_link"?`Un email de vérification a été envoyé à ${s.verification_sent_to}. Veuillez cliquer sur le lien dans votre email, puis vous connecter ci-dessous.`:`Un code de vérification a été envoyé à ${s.verification_sent_to}. Veuillez vérifier votre compte, puis vous connecter ci-dessous.`;sessionStorage.setItem("registration_success",JSON.stringify({email:g.email.trim(),first_name:s.user?.first_name||g.first_name,account_type:l,verification_message:t,requires_verification:s.requires_verification||!1})),console.log("Redirection vers la page de connexion après inscription"),P.push({name:"login",query:{registered:"true",email:g.email.trim()}})}else if(console.error("Erreur lors de l'inscription:",s),window.$toast){const l=s.message||"Une erreur est survenue lors de l'inscription";window.$toast.error(l,"Erreur d'inscription")}},j=async()=>{try{h.clearError(),await he.loginWithFacebook()}catch(k){h.setError(k.message||"Erreur lors de la connexion avec Facebook")}},q=async()=>{try{h.clearError(),await he.loginWithGoogle()}catch(k){h.setError(k.message||"Erreur lors de la connexion avec Google")}},$=async()=>{try{h.clearError(),await he.loginWithApple()}catch(k){h.setError(k.message||"Erreur lors de la connexion avec Apple")}},y=async()=>{try{_.value=!0;const k=await b("/countries");v.value=k.countries||[];const s=v.value.find(l=>l.name==="Gabon");s&&!g.country_id&&(g.country_id=s.id)}catch(k){console.error("Erreur lors du chargement des pays:",k)}finally{_.value=!1}};return H(()=>{y()}),(k,s)=>{const l=ee("router-link");return a(),i("div",Bs,[e("div",Gs,[e("div",Os,[e("div",Ws,[e("div",{class:"bg-gradient-to-br from-[#0099cc] to-[#0088bb] p-8 lg:p-12 flex flex-col justify-center relative overflow-hidden"},[s[16]||(s[16]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute -top-10 -right-10 w-40 h-40 bg-white rounded-full"}),e("div",{class:"absolute -bottom-16 -left-16 w-60 h-60 bg-white rounded-full"})],-1)),e("div",{class:"relative z-10"},[e("div",{class:"flex items-center mb-8"},[e("img",{src:Lo,alt:"Logo Koumbaya",class:"h-16 w-auto mr-4"})]),s[15]||(s[15]=D('<h2 class="text-4xl lg:text-5xl font-bold text-white mb-6"> Rejoignez notre marketplace ! </h2><p class="text-blue-100 text-lg leading-relaxed mb-8"> Créez votre compte hybride et profitez d&#39;une expérience unique : <strong class="text-white">achetez malin</strong> et <strong class="text-white">vendez facilement</strong> sur la même plateforme. </p><div class="space-y-4"><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Compte hybride acheteur-vendeur</span></div><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Produits authentiques à prix réduits</span></div><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Système de notation communautaire</span></div></div>',3))])]),e("div",Hs,[e("div",Ks,[s[40]||(s[40]=e("h3",{class:"text-3xl font-bold text-gray-900 mb-2"},"Créer un compte",-1)),e("p",Xs,[s[18]||(s[18]=V(" Déjà membre ? ",-1)),u(l,{to:"/login",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},{default:F(()=>s[17]||(s[17]=[V(" Se connecter ",-1)])),_:1,__:[17]})]),e("div",{class:"space-y-3 mb-8"},[e("button",{onClick:j,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},s[19]||(s[19]=[e("svg",{class:"w-5 h-5 mr-3",viewBox:"0 0 24 24",fill:"#1877F2"},[e("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})],-1),V(" Continuer avec Facebook ",-1)])),e("button",{onClick:q,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},s[20]||(s[20]=[D('<svg class="w-5 h-5 mr-3" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Continuer avec Google ',2)])),e("button",{onClick:$,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},s[21]||(s[21]=[e("svg",{class:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12.017 0C8.396 0 8.025.044 8.025 2.551c0 1.983 1.396 3.329 3.396 3.329 3.329 0 3.329-2.551 3.329-2.551S14.75.044 12.017 0zm2.076 24c-1.825 0-2.631-1.078-4.076-1.078-1.513 0-2.513 1.078-4.025 1.078C3.759 24 0 18.444 0 12.861c0-5.516 3.759-9.861 8.944-9.861 1.825 0 2.631 1.078 4.076 1.078 1.513 0 2.513-1.078 4.025-1.078C19.278 3 24 7.861 24 12.861 24 18.444 19.278 24 14.093 24z"})],-1),V(" Continuer avec Apple ",-1)]))]),s[41]||(s[41]=D('<div class="relative my-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white text-gray-500">ou créer avec email</span></div></div>',1)),e("div",Js,[s[24]||(s[24]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-3"},"Type de compte",-1)),e("div",Qs,[e("div",{onClick:s[0]||(s[0]=t=>g.account_type="personal"),class:E(["relative cursor-pointer p-4 border-2 rounded-xl transition-all duration-200 hover:border-[#0099cc]/50",g.account_type==="personal"?"border-[#0099cc] bg-[#0099cc]/5":"border-gray-200"])},[e("div",Ys,[e("div",{class:E(["w-4 h-4 rounded-full border-2 mr-3 transition-colors",g.account_type==="personal"?"border-[#0099cc] bg-[#0099cc]":"border-gray-300"])},[g.account_type==="personal"?(a(),i("div",Zs)):A("",!0)],2),s[22]||(s[22]=e("div",null,[e("h4",{class:"font-semibold text-gray-900"},"Personnel"),e("p",{class:"text-xs text-gray-600"},"Acheteur particulier")],-1))])],2),e("div",{onClick:s[1]||(s[1]=t=>g.account_type="business"),class:E(["relative cursor-pointer p-4 border-2 rounded-xl transition-all duration-200 hover:border-[#0099cc]/50",g.account_type==="business"?"border-[#0099cc] bg-[#0099cc]/5":"border-gray-200"])},[e("div",eo,[e("div",{class:E(["w-4 h-4 rounded-full border-2 mr-3 transition-colors",g.account_type==="business"?"border-[#0099cc] bg-[#0099cc]":"border-gray-300"])},[g.account_type==="business"?(a(),i("div",to)):A("",!0)],2),s[23]||(s[23]=e("div",null,[e("h4",{class:"font-semibold text-gray-900"},"Business"),e("p",{class:"text-xs text-gray-600"},"Vendeur professionnel")],-1))])],2)])]),e("form",{onSubmit:ce(n,["prevent"]),class:"space-y-5"},[g.account_type==="business"?(a(),i("div",so,[s[25]||(s[25]=e("label",{for:"business_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Nom de l'entreprise * ",-1)),T(e("input",{id:"business_name","onUpdate:modelValue":s[2]||(s[2]=t=>g.business_name=t),type:"text",required:"",class:E(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.business_name}]),style:{color:"#5f5f5f"},placeholder:"Ma Super Entreprise"},null,2),[[G,g.business_name]]),p.business_name?(a(),i("p",oo,d(p.business_name),1)):A("",!0)])):A("",!0),e("div",ro,[e("div",null,[s[26]||(s[26]=e("label",{for:"first_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Prénom * ",-1)),T(e("input",{id:"first_name","onUpdate:modelValue":s[3]||(s[3]=t=>g.first_name=t),type:"text",required:"",class:E(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.first_name}]),style:{color:"#5f5f5f"},placeholder:"Jean"},null,2),[[G,g.first_name]]),p.first_name?(a(),i("p",ao,d(p.first_name),1)):A("",!0)]),e("div",null,[s[27]||(s[27]=e("label",{for:"last_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Nom * ",-1)),T(e("input",{id:"last_name","onUpdate:modelValue":s[4]||(s[4]=t=>g.last_name=t),type:"text",required:"",class:E(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.last_name}]),style:{color:"#5f5f5f"},placeholder:"Dupont"},null,2),[[G,g.last_name]]),p.last_name?(a(),i("p",lo,d(p.last_name),1)):A("",!0)])]),e("div",null,[s[28]||(s[28]=e("label",{for:"email",class:"block text-sm font-semibold text-gray-900 mb-2"}," Adresse email * ",-1)),T(e("input",{id:"email","onUpdate:modelValue":s[5]||(s[5]=t=>g.email=t),type:"email",required:"",class:E(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.email}]),style:{color:"#5f5f5f"},placeholder:"jean@exemple.com"},null,2),[[G,g.email]]),p.email?(a(),i("p",io,d(p.email),1)):A("",!0)]),e("div",null,[s[29]||(s[29]=e("label",{for:"phone",class:"block text-sm font-semibold text-gray-900 mb-2"}," Numéro de téléphone * ",-1)),u($e,{ref:"phoneInputRef",modelValue:g.phone,"onUpdate:modelValue":s[6]||(s[6]=t=>g.phone=t),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:x},null,8,["modelValue"]),p.phone?(a(),i("p",no,d(p.phone),1)):A("",!0)]),e("div",null,[s[32]||(s[32]=e("label",{for:"country",class:"block text-sm font-semibold text-gray-900 mb-2"}," Pays * ",-1)),e("div",co,[T(e("select",{id:"country","onUpdate:modelValue":s[7]||(s[7]=t=>g.country_id=t),required:"",class:E(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all appearance-none bg-white",{"border-red-300 bg-red-50":p.country_id}]),style:{color:"#5f5f5f"},disabled:_.value},[s[30]||(s[30]=e("option",{value:"",disabled:""},"Sélectionnez votre pays",-1)),(a(!0),i(I,null,N(v.value,t=>(a(),i("option",{key:t.id,value:t.id},d(t.name),9,mo))),128))],10,uo),[[Y,g.country_id]]),s[31]||(s[31]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),p.country_id?(a(),i("p",po,d(p.country_id),1)):A("",!0),_.value?(a(),i("p",xo,"Chargement des pays...")):A("",!0)]),g.account_type=="business"?(a(),i("div",go,[e("div",null,[s[33]||(s[33]=e("label",{for:"city",class:"block text-sm font-semibold text-gray-900 mb-2"}," Ville * ",-1)),T(e("input",{id:"city","onUpdate:modelValue":s[8]||(s[8]=t=>g.city=t),type:"text",required:g.account_type==="business",class:E(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.city}]),style:{color:"#5f5f5f"},placeholder:"Libreville"},null,10,vo),[[G,g.city]]),p.city?(a(),i("p",fo,d(p.city),1)):A("",!0)]),e("div",null,[s[34]||(s[34]=e("label",{for:"address",class:"block text-sm font-semibold text-gray-900 mb-2"}," Adresse ",-1)),T(e("input",{id:"address","onUpdate:modelValue":s[9]||(s[9]=t=>g.address=t),type:"text",class:E(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.address}]),style:{color:"#5f5f5f"},placeholder:"123 Rue Example"},null,2),[[G,g.address]]),p.address?(a(),i("p",bo,d(p.address),1)):A("",!0)])])):A("",!0),e("div",yo,[e("div",null,[s[35]||(s[35]=e("label",{for:"password",class:"block text-sm font-semibold text-gray-900 mb-2"}," Mot de passe * ",-1)),e("div",ho,[T(e("input",{id:"password","onUpdate:modelValue":s[10]||(s[10]=t=>g.password=t),type:m.value?"text":"password",required:"",class:E(["w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.password}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,_o),[[xe,g.password]]),e("button",{type:"button",onClick:s[11]||(s[11]=t=>m.value=!m.value),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[m.value?(a(),W(c(ge),{key:1,class:"h-5 w-5"})):(a(),W(c(re),{key:0,class:"h-5 w-5"}))])]),p.password?(a(),i("p",wo,d(p.password),1)):A("",!0)]),e("div",null,[s[36]||(s[36]=e("label",{for:"password_confirmation",class:"block text-sm font-semibold text-gray-900 mb-2"}," Confirmer * ",-1)),e("div",$o,[T(e("input",{id:"password_confirmation","onUpdate:modelValue":s[12]||(s[12]=t=>g.password_confirmation=t),type:r.value?"text":"password",required:"",class:E(["w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":p.password_confirmation}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,ko),[[xe,g.password_confirmation]]),e("button",{type:"button",onClick:s[13]||(s[13]=t=>r.value=!r.value),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[r.value?(a(),W(c(ge),{key:1,class:"h-5 w-5"})):(a(),W(c(re),{key:0,class:"h-5 w-5"}))])]),p.password_confirmation?(a(),i("p",Co,d(p.password_confirmation),1)):A("",!0)])]),e("div",Po,[e("div",jo,[T(e("input",{id:"terms","onUpdate:modelValue":s[14]||(s[14]=t=>g.terms=t),type:"checkbox",class:E(["h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded",{"border-red-500":p.terms}])},null,2),[[Ve,g.terms]])]),s[37]||(s[37]=e("label",{for:"terms",class:"text-sm text-gray-600 leading-6"},[V(" J'accepte les "),e("a",{href:"#",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},"conditions d'utilisation"),V(" et la "),e("a",{href:"#",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},"politique de confidentialité")],-1))]),p.terms?(a(),i("p",qo,d(p.terms),1)):A("",!0),c(h).error?(a(),i("div",Vo,[e("div",Ao,[u(c(_e),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",zo,[s[38]||(s[38]=e("h3",{class:"text-sm font-semibold text-red-800"}," Erreur d'inscription ",-1)),e("div",So,d(c(h).error),1)])])])):A("",!0),e("button",{type:"submit",disabled:c(h).loading,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[c(h).loading?(a(),i("span",Eo,s[39]||(s[39]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Création en cours...",-1)]))):(a(),i("span",To,"Créer mon compte Koumbaya"))],8,Mo)],32)])])])])])])}}},Fo={class:"min-h-screen bg-white flex items-center justify-center py-12 px-4"},Io={class:"max-w-md w-full bg-white rounded-3xl shadow-2xl border border-gray-100 p-8"},Do={class:"text-center mb-8"},No=["src"],Uo={key:0,class:"text-center"},Bo={key:1,class:"text-center"},Go={class:"text-2xl font-bold text-[#0099cc] mb-2"},Oo={class:"text-gray-600 mb-6"},Wo={class:"space-y-3"},Ho={key:2,class:"text-center"},Ko={class:"text-gray-600 mb-6"},Xo={class:"space-y-3"},Jo={__name:"VerifyEmail",setup(z){const P=le(),h=J(),b=te(),{get:m}=U(),r=C(!0),v=C(null),_=C(""),o=async()=>{try{const p=P.query.token;if(!p)throw new Error("Token de vérification manquant");const f=await m(`/auth/verify-email/${encodeURIComponent(p)}`);if(f.success)v.value=f,b.isAuthenticated&&await b.refreshUser();else throw new Error(f.message||"Erreur de vérification")}catch(p){console.error("Erreur lors de la vérification:",p),v.value={success:!1},_.value=p.response?.data?.message||p.message||"Une erreur est survenue lors de la vérification"}finally{r.value=!1}},g=()=>{if(b.isAuthenticated){const p=b.getDefaultRedirect();h.push({name:p}).catch(()=>{h.push("/dashboard")})}else h.push("/login")};return H(()=>{o()}),(p,f)=>(a(),i("div",Fo,[e("div",Io,[e("div",Do,[e("img",{src:c(ie),alt:"Logo Koumbaya",class:"h-16 w-auto mx-auto mb-4"},null,8,No)]),r.value?(a(),i("div",Uo,f[3]||(f[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-[#0099cc] border-t-transparent mx-auto mb-4"},null,-1),e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Vérification en cours...",-1),e("p",{class:"text-gray-600"},"Nous vérifions votre lien de vérification.",-1)]))):v.value?.success?(a(),i("div",Bo,[f[4]||(f[4]=e("div",{class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-[#0099cc]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("h2",Go,d(v.value.already_verified?"Déjà vérifié !":"Compte vérifié !"),1),e("p",Oo,d(v.value.message),1),e("div",Wo,[e("button",{onClick:g,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"}," Accéder à mon compte "),e("button",{onClick:f[0]||(f[0]=x=>p.$router.push("/")),class:"w-full border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Retour à l'accueil ")])])):(a(),i("div",Ho,[f[5]||(f[5]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),f[6]||(f[6]=e("h2",{class:"text-2xl font-bold text-red-600 mb-2"},"Vérification échouée",-1)),e("p",Ko,d(_.value),1),e("div",Xo,[e("button",{onClick:f[1]||(f[1]=x=>p.$router.push("/register")),class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Créer un nouveau compte "),e("button",{onClick:f[2]||(f[2]=x=>p.$router.push("/login")),class:"w-full border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Se connecter ")])])),f[7]||(f[7]=D('<div class="mt-8 p-4 bg-blue-50 rounded-xl border border-blue-200"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h4 class="text-sm font-semibold text-blue-900">Pourquoi vérifier mon compte ?</h4><p class="text-sm text-blue-700 mt-1"> La vérification de votre compte est nécessaire pour pouvoir acheter des produits et participer aux tombolas sur Koumbaya. </p></div></div></div>',1))])]))}},Qo={class:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Yo={class:"sm:mx-auto sm:w-full sm:max-w-md"},Zo={class:"flex justify-center mb-8"},er=["src"],tr={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},sr={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},or={class:"koumbaya-card-body p-8"},rr={class:"flex justify-center space-x-2 p-1 bg-gray-100 rounded-lg mb-6"},ar={key:0,class:"koumbaya-form-group"},lr={for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},ir={class:"flex items-center"},nr={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},dr={key:1,class:"koumbaya-form-group"},cr={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},ur={class:"flex items-center"},mr={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},pr={key:2,class:"rounded-xl bg-red-50 p-4 border border-red-200"},xr={class:"flex"},gr={class:"ml-3"},vr={class:"mt-1 text-sm text-red-700"},fr={key:3,class:"rounded-xl bg-green-50 p-4 border border-green-200"},br={class:"flex"},yr={class:"ml-3"},hr={class:"mt-1 text-sm text-green-700"},_r=["disabled"],wr={key:0,class:"flex items-center space-x-2"},$r={key:1},kr={class:"text-center"},Cr={__name:"ForgotPassword",setup(z){const P=J(),{post:h}=U(),b=C("email"),m=C(!1),r=C(!1),v=C(!1),_=Q({email:"",phone:""}),o=Q({email:"",phone:"",general:""}),g=x=>{m.value=x.isValid,_.phone=x.fullNumber,x.isValid&&(o.phone="")},p=()=>{Object.keys(o).forEach(n=>{o[n]=""});let x=!0;return b.value==="email"?_.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)||(o.email="Format d'email invalide",x=!1):(o.email="L'adresse email est obligatoire",x=!1):_.phone?m.value||(o.phone="Format de téléphone invalide",x=!1):(o.phone="Le numéro de téléphone est obligatoire",x=!1),x},f=async()=>{if(p()){r.value=!0,o.general="",v.value=!1;try{const x=b.value==="email"?_.email:_.phone,n=await h("/otp/send",{identifier:x,type:b.value==="email"?"email":"sms",purpose:"password_reset"});n.success?(v.value=!0,setTimeout(()=>{P.push({name:"reset-password-verify",query:{identifier:x,method:b.value}})},2e3)):o.general=n.message||"Une erreur est survenue"}catch(x){console.error("Erreur lors de l'envoi du code:",x),o.general="Une erreur est survenue lors de l'envoi du code"}finally{r.value=!1}}};return(x,n)=>{const j=ee("router-link");return a(),i("div",Qo,[e("div",Yo,[e("div",Zo,[e("img",{class:"h-20 w-auto",src:c(ie),alt:"Koumbaya"},null,8,er)]),n[4]||(n[4]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Mot de passe oublié ? ",-1)),n[5]||(n[5]=e("p",{class:"text-center text-lg text-gray-600 mb-8"}," Entrez votre adresse email ou votre numéro de téléphone ",-1))]),e("div",tr,[e("div",sr,[e("div",or,[e("form",{onSubmit:ce(f,["prevent"]),class:"space-y-6"},[e("div",rr,[e("button",{type:"button",onClick:n[0]||(n[0]=q=>b.value="email"),class:E(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",b.value==="email"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[u(c(pe),{class:"w-4 h-4 inline-block mr-2"}),n[6]||(n[6]=V(" Email ",-1))],2),e("button",{type:"button",onClick:n[1]||(n[1]=q=>b.value="phone"),class:E(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",b.value==="phone"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[u(c(oe),{class:"w-4 h-4 inline-block mr-2"}),n[7]||(n[7]=V(" Téléphone ",-1))],2)]),b.value==="email"?(a(),i("div",ar,[e("label",lr,[e("div",ir,[u(c(pe),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),n[8]||(n[8]=e("span",null,"Adresse e-mail",-1))])]),T(e("input",{id:"email",name:"email",type:"email","onUpdate:modelValue":n[2]||(n[2]=q=>_.email=q),required:"",class:E(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":o.email}]),style:{color:"#5f5f5f"},placeholder:"exemple@koumbaya.com"},null,2),[[G,_.email]]),o.email?(a(),i("p",nr,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(o.email),1)])):A("",!0)])):A("",!0),b.value==="phone"?(a(),i("div",dr,[e("label",cr,[e("div",ur,[u(c(oe),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),n[9]||(n[9]=e("span",null,"Numéro de téléphone",-1))])]),u($e,{ref:"phoneInputRef",modelValue:_.phone,"onUpdate:modelValue":n[3]||(n[3]=q=>_.phone=q),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:g},null,8,["modelValue"]),o.phone?(a(),i("p",mr,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(o.phone),1)])):A("",!0)])):A("",!0),o.general?(a(),i("div",pr,[e("div",xr,[u(c(K),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",gr,[n[10]||(n[10]=e("h3",{class:"text-sm font-semibold text-red-800"},"Erreur",-1)),e("div",vr,d(o.general),1)])])])):A("",!0),v.value?(a(),i("div",fr,[e("div",br,[u(c(ae),{class:"h-5 w-5 text-green-400 mt-0.5"}),e("div",yr,[n[11]||(n[11]=e("h3",{class:"text-sm font-semibold text-green-800"},"Code envoyé !",-1)),e("div",hr," Un code de réinitialisation a été envoyé à "+d(b.value==="email"?_.email:_.phone),1)])])])):A("",!0),e("button",{type:"submit",disabled:r.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[r.value?(a(),i("span",wr,n[12]||(n[12]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Envoi en cours...",-1)]))):(a(),i("span",$r,"Envoyer le code"))],8,_r),e("div",kr,[u(j,{to:"/login",class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors"},{default:F(()=>n[13]||(n[13]=[V(" ← Retour à la connexion ",-1)])),_:1,__:[13]})])],32)])])])])}}},Pr=ve(Cr,[["__scopeId","data-v-51805275"]]),jr={class:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},qr={class:"sm:mx-auto sm:w-full sm:max-w-md"},Vr={class:"flex justify-center mb-8"},Ar=["src"],zr={class:"text-center text-lg text-gray-600 mb-8"},Sr={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},Mr={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},Er={class:"koumbaya-card-body p-8"},Tr={class:"koumbaya-form-group"},Lr={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Rr={class:"koumbaya-form-group"},Fr={class:"relative"},Ir=["type"],Dr={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Nr={class:"koumbaya-form-group"},Ur={class:"relative"},Br=["type"],Gr={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Or={key:0,class:"rounded-xl bg-red-50 p-4 border border-red-200"},Wr={class:"flex"},Hr={class:"ml-3"},Kr={class:"mt-1 text-sm text-red-700"},Xr={key:1,class:"rounded-xl bg-green-50 p-4 border border-green-200"},Jr={class:"flex"},Qr=["disabled"],Yr={key:0,class:"flex items-center space-x-2"},Zr={key:1},ea={class:"text-center"},ta=["disabled"],sa={key:0},oa={key:1},ra={key:2},aa={__name:"ResetPasswordVerify",setup(z){const P=J(),h=le(),{post:b}=U(),m=C(h.query.identifier||""),r=C(h.query.method||"email"),v=C(!1),_=C(!1),o=C(!1),g=C(!1),p=C(!1),f=C(0),x=C(null),n=Q({otp:"",password:"",password_confirmation:""}),j=Q({otp:"",password:"",password_confirmation:"",general:""}),q=()=>{Object.keys(j).forEach(l=>{j[l]=""});let s=!0;return n.otp?n.otp.length!==6&&(j.otp="Le code doit contenir 6 chiffres",s=!1):(j.otp="Le code est obligatoire",s=!1),n.password?n.password.length<8&&(j.password="Le mot de passe doit contenir au moins 8 caractères",s=!1):(j.password="Le mot de passe est obligatoire",s=!1),n.password!==n.password_confirmation&&(j.password_confirmation="Les mots de passe ne correspondent pas",s=!1),s},$=async()=>{if(q()){v.value=!0,j.general="",_.value=!1;try{const s=await b("/auth/reset-password",{identifier:m.value,otp:n.otp,password:n.password,password_confirmation:n.password_confirmation});s.success?(_.value=!0,setTimeout(()=>{P.push({name:"login"})},2e3)):j.general=s.message||"Une erreur est survenue"}catch(s){console.error("Erreur lors de la réinitialisation:",s),s.response?.data?.message?j.general=s.response.data.message:j.general="Une erreur est survenue lors de la réinitialisation"}finally{v.value=!1}}},y=async()=>{p.value=!0;try{const s=await b("/otp/resend",{identifier:m.value,type:r.value==="email"?"email":"sms",purpose:"password_reset"});s.success?k():j.general=s.message||"Erreur lors du renvoi du code"}catch(s){console.error("Erreur lors du renvoi:",s),j.general="Erreur lors du renvoi du code"}finally{p.value=!1}},k=()=>{f.value=60,x.value=setInterval(()=>{f.value--,f.value<=0&&clearInterval(x.value)},1e3)};return H(()=>{m.value||P.push({name:"forgot-password"})}),Ne(()=>{x.value&&clearInterval(x.value)}),(s,l)=>(a(),i("div",jr,[e("div",qr,[e("div",Vr,[e("img",{class:"h-20 w-auto",src:c(ie),alt:"Koumbaya"},null,8,Ar)]),l[5]||(l[5]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Vérification du code ",-1)),e("p",zr," Entrez le code reçu "+d(r.value==="email"?"par email":"par SMS"),1)]),e("div",Sr,[e("div",Mr,[e("div",Er,[e("form",{onSubmit:ce($,["prevent"]),class:"space-y-6"},[e("div",Tr,[l[6]||(l[6]=e("label",{for:"otp",class:"block text-sm font-medium text-gray-700 mb-2"}," Code de vérification ",-1)),T(e("input",{id:"otp",name:"otp",type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>n.otp=t),required:"",maxlength:"6",class:E(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 text-center text-2xl letter-spacing-wide",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":j.otp}]),style:{color:"#5f5f5f"},placeholder:"123456"},null,2),[[G,n.otp]]),j.otp?(a(),i("p",Lr,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(j.otp),1)])):A("",!0)]),e("div",Rr,[l[7]||(l[7]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," Nouveau mot de passe ",-1)),e("div",Fr,[T(e("input",{id:"password",name:"password",type:o.value?"text":"password","onUpdate:modelValue":l[1]||(l[1]=t=>n.password=t),required:"",class:E(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":j.password}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Ir),[[xe,n.password]]),e("button",{type:"button",onClick:l[2]||(l[2]=t=>o.value=!o.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[o.value?(a(),W(c(ge),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(a(),W(c(re),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),j.password?(a(),i("p",Dr,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(j.password),1)])):A("",!0)]),e("div",Nr,[l[8]||(l[8]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirmer le mot de passe ",-1)),e("div",Ur,[T(e("input",{id:"password_confirmation",name:"password_confirmation",type:g.value?"text":"password","onUpdate:modelValue":l[3]||(l[3]=t=>n.password_confirmation=t),required:"",class:E(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":j.password_confirmation}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Br),[[xe,n.password_confirmation]]),e("button",{type:"button",onClick:l[4]||(l[4]=t=>g.value=!g.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[g.value?(a(),W(c(ge),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(a(),W(c(re),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),j.password_confirmation?(a(),i("p",Gr,[u(c(K),{class:"w-4 h-4 mr-1"}),V(" "+d(j.password_confirmation),1)])):A("",!0)]),j.general?(a(),i("div",Or,[e("div",Wr,[u(c(K),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",Hr,[l[9]||(l[9]=e("h3",{class:"text-sm font-semibold text-red-800"},"Erreur",-1)),e("div",Kr,d(j.general),1)])])])):A("",!0),_.value?(a(),i("div",Xr,[e("div",Jr,[u(c(ae),{class:"h-5 w-5 text-green-400 mt-0.5"}),l[10]||(l[10]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-semibold text-green-800"},"Mot de passe réinitialisé !"),e("div",{class:"mt-1 text-sm text-green-700"}," Redirection vers la page de connexion... ")],-1))])])):A("",!0),e("button",{type:"submit",disabled:v.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[v.value?(a(),i("span",Yr,l[11]||(l[11]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Réinitialisation...",-1)]))):(a(),i("span",Zr,"Réinitialiser le mot de passe"))],8,Qr),e("div",ea,[e("button",{type:"button",onClick:y,disabled:p.value||f.value>0,class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors disabled:opacity-50"},[f.value>0?(a(),i("span",sa," Renvoyer le code ("+d(f.value)+"s) ",1)):p.value?(a(),i("span",oa,"Envoi...")):(a(),i("span",ra,"Renvoyer le code"))],8,ta)])],32)])])])]))}},la=ve(aa,[["__scopeId","data-v-667fc4f1"]]),O="/build/assets/placeholder-BS1MYrTN.jpg",ke="/build/assets/placeholder-BS1MYrTN.jpg",ia={class:"bg-white"},na={class:"relative bg-gradient-to-br from-[#0099cc]/5 via-white to-[#0099cc]/10 overflow-hidden"},da={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ca={class:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center min-h-[90vh] py-20"},ua={class:"space-y-8"},ma={class:"space-y-4"},pa={class:"inline-flex items-center gap-2 bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full text-sm font-medium"},xa={class:"flex flex-col sm:flex-row gap-4"},ga={class:"flex items-center gap-8 pt-8"},va={class:"flex items-center gap-2 text-gray-600"},fa={class:"flex items-center gap-2 text-gray-600"},ba={class:"flex items-center gap-2 text-gray-600"},ya={class:"relative lg:h-[600px] flex items-center justify-center"},ha={class:"relative"},_a={class:"bg-white rounded-3xl shadow-2xl p-8 max-w-sm relative z-10 border border-gray-100"},wa={class:"relative mb-6"},$a=["src","alt"],ka={class:"absolute -top-2 -right-2 bg-[#0099cc] text-white px-3 py-1 rounded-full text-sm font-bold"},Ca={class:"space-y-4"},Pa={class:"text-xl font-bold text-black"},ja={class:"text-gray-600"},qa={class:"space-y-2"},Va={class:"flex justify-between text-sm text-gray-600"},Aa={class:"font-semibold"},za={class:"w-full bg-gray-200 rounded-full h-3"},Sa={class:"text-center text-sm text-gray-500"},Ma={class:"w-full bg-purple-600 text-white font-semibold py-3 rounded-xl hover:bg-purple-700 transition-colors flex items-center justify-center gap-2"},Ea={class:"absolute inline-flex items-center -top-8 -left-8 bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full text-sm font-medium z-20 animate-float"},Ta={key:0,class:"absolute -bottom-4 -right-8 bg-red-100 text-red-600 px-4 py-2 rounded-full text-sm font-medium z-20 animate-float-delayed flex items-center gap-1"},La={key:1,class:"absolute -bottom-4 -right-8 bg-yellow-100 text-yellow-600 px-4 py-2 rounded-full text-sm font-medium z-20 animate-float-delayed flex items-center gap-1"},Ra={class:"py-20 bg-gray-50"},Fa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ia={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},Da={class:"text-center"},Na={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Ua={class:"text-center"},Ba={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Ga={class:"text-center"},Oa={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Wa={class:"text-center"},Ha={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Ka={class:"py-20"},Xa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ja={class:"text-center mt-12"},Qa={class:"py-20 bg-gray-50"},Ya={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Za={class:"flex items-center justify-between mb-12"},el={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},tl=["onClick"],sl={class:"absolute top-4 left-4 z-10"},ol={key:0,class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg flex items-center gap-1"},rl={key:1,class:"bg-gradient-to-r from-[#0099cc] to-cyan-500 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg flex items-center gap-1"},al={class:"absolute top-4 right-4 z-10"},ll={key:0,class:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg animate-pulse flex items-center gap-1"},il={key:1,class:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg flex items-center gap-1"},nl={class:"relative mb-6 mt-4"},dl=["src","alt"],cl={class:"absolute -bottom-3 -right-3"},ul={key:0,class:"bg-purple-600 text-white px-4 py-2 rounded-full font-semibold shadow-lg"},ml={key:1,class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold shadow-lg"},pl={class:"space-y-4"},xl={key:0,class:"text-gray-600"},gl={key:1,class:"text-gray-600"},vl={key:0,class:"space-y-2"},fl={class:"flex justify-between text-sm text-gray-600"},bl={class:"font-semibold"},yl={class:"w-full bg-gray-200 rounded-full h-3"},hl={class:"text-center text-sm text-gray-500"},_l={key:1,class:"flex items-center justify-between py-2"},wl={class:"text-center mt-12 md:hidden"},$l={class:"py-20"},kl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Cl={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},Pl={class:"flex items-center mb-6"},jl=["src","alt"],ql={class:"ml-4"},Vl={class:"font-semibold text-gray-900"},Al={class:"text-sm text-gray-600"},zl={class:"flex items-center mb-4"},Sl={class:"flex text-yellow-400"},Ml={class:"text-gray-700 italic leading-relaxed"},El={class:"mt-4 text-sm text-[#0099cc] font-medium"},Tl={class:"py-20 bg-gradient-to-r from-[#0099cc] to-cyan-600"},Ll={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},Rl={class:"flex flex-col sm:flex-row gap-4 justify-center"},Fl={__name:"Home",setup(z){const P=J(),{get:h}=U(),b=C([]),m=C(null);C({participants:"12 000+",productsWon:"250+",amountDistributed:"500M+",rating:"4.9/5"});const r=async()=>{try{console.log("Chargement des derniers produits mixtes...");const[x,n]=await Promise.all([h("/products/latest-lottery-only?limit=3"),h("/products/latest-direct?limit=3")]);console.log("Réponses API:",{lottery:x,direct:n});let j=[];if(x&&x.success&&x.data){const q=(x.data.products||x.data).slice(0,2).map($=>({id:$.id,name:$.name||$.title,value:$.price||0,price:$.price||0,ticketPrice:$.ticket_price||$.active_lottery?.ticket_price||1e3,ticket_price:$.ticket_price||$.active_lottery?.ticket_price||1e3,image_url:$.image_url||$.main_image,image:$.image_url||$.main_image||O,soldTickets:$.active_lottery?.sold_tickets||0,totalTickets:$.active_lottery?.total_tickets||1e3,isNew:o($.created_at),sale_mode:"lottery",has_active_lottery:$.has_active_lottery||!1,lottery_ends_soon:$.lottery_ends_soon||!1,category:$.category}));j.push(...q)}if(n&&n.success&&n.data){const q=(n.data.products||n.data).slice(0,2).map($=>({id:$.id,name:$.name||$.title,value:$.price||0,price:$.price||0,image_url:$.image_url||$.main_image,image:$.image_url||$.main_image||O,isNew:o($.created_at),sale_mode:"direct",category:$.category}));j.push(...q)}b.value=j.sort(()=>Math.random()-.5).slice(0,6),b.value.length===0&&_()}catch(x){console.error("Erreur lors du chargement des produits mixtes:",x),_()}},v=async()=>{try{console.log("Chargement du dernier produit tombola...");const x=await h("/products/latest-lottery");if(console.log("Réponse API dernier produit tombola:",x),x&&x.success&&x.data){const n=x.data.product,j=x.data.lottery;console.log("Données produit:",n),console.log("Données lottery:",j);const q=parseInt(j?.sold_tickets||0),$=parseInt(j?.total_tickets||1e3),y=$>0?Math.round(q/$*100):0;console.log("Tickets vendus (brut):",j?.sold_tickets),console.log("Total tickets (brut):",j?.total_tickets),console.log("Tickets vendus (parseInt):",q),console.log("Total tickets (parseInt):",$),console.log("Progression calculée:",y),$<100&&console.warn("⚠️ Total tickets semble faible:",$,"- vérifier les données API"),m.value={id:n.id,name:n.name||n.title,value:n.price||0,ticketPrice:j?.ticket_price||n.ticket_price||1500,image:n.image_url||n.main_image||O,soldTickets:q,totalTickets:$,progress:y,timeRemaining:j?.time_remaining,isEndingSoon:j?.is_ending_soon||!1},console.log("Produit tombola final:",m.value)}else m.value={id:"fallback",name:"iPhone 15 Pro Max",value:1299e3,ticketPrice:1500,image:O,soldTickets:750,totalTickets:1e3,progress:75}}catch(x){console.error("Erreur lors du chargement du dernier produit tombola:",x),m.value={id:"fallback",name:"iPhone 15 Pro Max",value:1299e3,ticketPrice:1500,image:O,soldTickets:750,totalTickets:1e3,progress:75}}},_=()=>{b.value=[{id:"fallback-1",name:"iPhone 15 Pro Max",value:1299e3,price:1299e3,ticketPrice:1500,ticket_price:1500,image:O,soldTickets:750,totalTickets:1e3,isNew:!0,sale_mode:"lottery",lottery_ends_soon:!1,category:{name:"Smartphones"}},{id:"fallback-2",name:"MacBook Pro M3",value:25e5,price:25e5,image:O,isNew:!0,sale_mode:"direct",category:{name:"Ordinateurs"}},{id:"fallback-3",name:"Samsung Galaxy S24",value:95e4,price:95e4,ticketPrice:1200,ticket_price:1200,image:O,soldTickets:320,totalTickets:800,isNew:!1,sale_mode:"lottery",lottery_ends_soon:!0,category:{name:"Smartphones"}},{id:"fallback-4",name:"AirPods Pro",value:38e4,price:38e4,image:O,isNew:!1,sale_mode:"direct",category:{name:"Audio"}}]},o=x=>{if(!x)return!1;const n=new Date,j=new Date(x);return(n-j)/(1e3*60*60*24)<=7},g=C([{id:1,name:"Marie Dubois",location:"Libreville",avatar:ke,review:"J'ai acheté un iPhone 14 Pro avec seulement 5 tickets ! Le processus était transparent et la livraison rapide.",won:"iPhone 14 Pro"},{id:2,name:"Jean Kamga",location:"Port-Gentil",avatar:ke,review:"Koumbaya a changé ma vie ! J'ai obtenu une moto à prix réduit et maintenant je participe à toutes les tombolas.",won:"Yamaha MT-03"},{id:3,name:"Fatou Ndongo",location:"Franceville",avatar:ke,review:"Platform très sérieuse, paiement sécurisé et service client réactif. Je recommande vivement !",won:"MacBook Air M2"}]),p=x=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(x).replace("XAF","FCFA"),f=x=>{P.push({name:"public.product.detail",params:{id:x.id}})};return ue(m,x=>{x&&console.log("🔄 latestLotteryProduct mis à jour:",x)},{deep:!0}),H(async()=>{console.log("🚀 Montage du composant Home - chargement des données..."),await Promise.all([r(),v()]),console.log("✅ Chargement terminé")}),(x,n)=>{const j=ee("router-link");return a(),i("div",ia,[e("section",na,[e("div",da,[e("div",ca,[e("div",ua,[e("div",ma,[e("div",pa,[u(c(fe),{class:"h-4 w-4"}),n[0]||(n[0]=e("span",null,"Nouveau au Gabon",-1))]),n[1]||(n[1]=D('<h1 class="text-5xl lg:text-6xl xl:text-7xl font-bold text-black leading-none" data-v-9ff62910> Rendre l&#39;impossible <span class="text-[#0099cc]" data-v-9ff62910>accessible</span></h1><p class="text-xl lg:text-2xl text-gray-600 leading-relaxed" data-v-9ff62910> Des smartphones aux voitures, profitez de nos tombolas pour <strong class="text-[#0099cc]" data-v-9ff62910>acheter malin</strong> et obtenir des produits <strong class="text-[#0099cc]" data-v-9ff62910>à prix réduit</strong>. </p>',2))]),e("div",xa,[u(j,{to:"/products",class:"inline-flex items-center justify-center gap-2 bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold px-8 py-4 rounded-2xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl"},{default:F(()=>[u(c(Be),{class:"h-5 w-5"}),n[2]||(n[2]=e("span",null,"Découvrir les produits",-1))]),_:1,__:[2]}),u(j,{to:"/how-it-works",class:"inline-flex items-center justify-center gap-2 border-2 border-[#0099cc] text-[#0099cc] hover:bg-[#0099cc]/5 font-semibold px-8 py-4 rounded-2xl transition-all duration-200"},{default:F(()=>[u(c(Ge),{class:"h-5 w-5"}),n[3]||(n[3]=e("span",null,"Comment ça marche",-1))]),_:1,__:[3]})]),e("div",ga,[e("div",va,[u(c(we),{class:"h-6 w-6 text-[#0099cc]"}),n[4]||(n[4]=e("span",{class:"font-medium"},"100% sécurisé",-1))]),e("div",fa,[u(c(Ue),{class:"h-6 w-6 text-[#0099cc]"}),n[5]||(n[5]=e("span",{class:"font-medium"},"Produits authentiques",-1))]),e("div",ba,[u(c(Ae),{class:"h-6 w-6 text-[#0099cc]"}),n[6]||(n[6]=e("span",{class:"font-medium"},"Livraison gratuite",-1))])])]),e("div",ya,[e("div",ha,[e("div",_a,[e("div",wa,[e("img",{src:m.value?.image||c(O),alt:m.value?.name||"Produit tombola",class:"w-full h-48 object-cover rounded-2xl bg-gray-100"},null,8,$a),e("div",ka,d(p(m.value?.ticketPrice||1500)),1)]),e("div",Ca,[e("div",null,[e("h3",Pa,d(m.value?.name||"iPhone 15 Pro Max"),1),e("p",ja,"Valeur: "+d(p(m.value?.value||1299e3)),1)]),e("div",qa,[e("div",Va,[n[7]||(n[7]=e("span",null,"Progression",-1)),e("span",Aa,d(m.value?.progress||75)+"%",1)]),e("div",za,[e("div",{class:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full animate-pulse transition-all duration-500",style:de({width:(m.value?.progress||75)+"%"})},null,4)]),e("div",Sa,d(m.value?.soldTickets||750)+"/"+d(m.value?.totalTickets||1e3)+" tickets ",1)]),e("button",Ma,[u(c(be),{class:"h-5 w-5"}),n[8]||(n[8]=V(" Participer maintenant ",-1))])])]),e("div",Ea,[u(c(fe),{class:"h-4 w-4"}),n[9]||(n[9]=V(" Nouvelle tombola ",-1))]),m.value?.isEndingSoon?(a(),i("div",Ta,[u(c(me),{class:"h-4 w-4"}),n[10]||(n[10]=V(" Se termine bientôt ! ",-1))])):(a(),i("div",La,[u(c(tt),{class:"h-4 w-4"}),n[11]||(n[11]=V(" Populaire ",-1))]))])])])])]),e("section",Ra,[e("div",Fa,[n[20]||(n[20]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Koumbaya en chiffres "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Rejoignez des milliers de participants qui ont déjà fait confiance à notre plateforme ")],-1)),e("div",Ia,[e("div",Da,[e("div",Na,[u(c(st),{class:"h-10 w-10 text-[#0099cc]"})]),n[12]||(n[12]=e("div",{class:"text-4xl font-bold text-black mb-2"},"12 000+",-1)),n[13]||(n[13]=e("div",{class:"text-gray-600"},"Participants actifs",-1))]),e("div",Ua,[e("div",Ba,[u(c(ze),{class:"h-10 w-10 text-[#0099cc]"})]),n[14]||(n[14]=e("div",{class:"text-4xl font-bold text-black mb-2"},"250+",-1)),n[15]||(n[15]=e("div",{class:"text-gray-600"},"Produits gagnés",-1))]),e("div",Ga,[e("div",Oa,[u(c(ot),{class:"h-10 w-10 text-[#0099cc]"})]),n[16]||(n[16]=e("div",{class:"text-4xl font-bold text-black mb-2"},"500M+",-1)),n[17]||(n[17]=e("div",{class:"text-gray-600"},"FCFA distribués",-1))]),e("div",Wa,[e("div",Ha,[u(c(je),{class:"h-10 w-10 text-[#0099cc]"})]),n[18]||(n[18]=e("div",{class:"text-4xl font-bold text-black mb-2"},"4.9/5",-1)),n[19]||(n[19]=e("div",{class:"text-gray-600"},"Note utilisateurs",-1))])])])]),e("section",Ka,[e("div",Xa,[n[22]||(n[22]=D('<div class="text-center mb-16" data-v-9ff62910><h2 class="text-3xl md:text-4xl font-bold text-black mb-4" data-v-9ff62910> Simple comme bonjour </h2><p class="text-xl text-gray-600 max-w-3xl mx-auto" data-v-9ff62910> 3 étapes suffisent pour obtenir vos produits à prix cassés </p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12" data-v-9ff62910><div class="text-center group" data-v-9ff62910><div class="relative mx-auto w-24 h-24 mb-6" data-v-9ff62910><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-9ff62910></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-9ff62910><span class="text-2xl font-bold text-white" data-v-9ff62910>1</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-9ff62910>Choisissez votre produit</h3><p class="text-gray-600 leading-relaxed" data-v-9ff62910> Parcourez notre catalogue de produits authentiques et sélectionnez celui que vous souhaitez acquérir. </p></div><div class="text-center group" data-v-9ff62910><div class="relative mx-auto w-24 h-24 mb-6" data-v-9ff62910><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-9ff62910></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-9ff62910><span class="text-2xl font-bold text-white" data-v-9ff62910>2</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-9ff62910>Achetez vos tickets</h3><p class="text-gray-600 leading-relaxed" data-v-9ff62910> Participez à la tombola avec un petit budget. Plus vous prenez de tickets, meilleures sont vos chances d&#39;obtenir le produit. </p></div><div class="text-center group" data-v-9ff62910><div class="relative mx-auto w-24 h-24 mb-6" data-v-9ff62910><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-9ff62910></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-9ff62910><span class="text-2xl font-bold text-white" data-v-9ff62910>3</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-9ff62910>Obtenez votre produit</h3><p class="text-gray-600 leading-relaxed" data-v-9ff62910> Le tirage automatique désigne l&#39;acheteur. Nous livrons gratuitement partout au Gabon ! </p></div></div>',2)),e("div",Ja,[u(j,{to:"/how-it-works",class:"inline-flex items-center gap-2 bg-black hover:bg-gray-800 text-white font-semibold px-8 py-4 rounded-2xl transition-all duration-200"},{default:F(()=>[n[21]||(n[21]=e("span",null,"En savoir plus",-1)),u(c(se),{class:"h-5 w-5"})]),_:1,__:[21]})])])]),e("section",Qa,[e("div",Ya,[e("div",Za,[n[24]||(n[24]=e("div",null,[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Produits en vedette "),e("p",{class:"text-xl text-gray-600"}," Découvrez les derniers produits - tombolas et achat direct ")],-1)),u(j,{to:"/products",class:"hidden md:inline-flex items-center gap-2 text-[#0099cc] hover:text-[#0088bb] font-semibold group"},{default:F(()=>[n[23]||(n[23]=e("span",null,"Voir tout",-1)),u(c(se),{class:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]),_:1,__:[23]})]),e("div",el,[(a(!0),i(I,null,N(b.value,q=>(a(),i("div",{key:q.id,onClick:$=>f(q),class:"bg-white rounded-3xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group border border-gray-100 relative overflow-hidden"},[e("div",sl,[q.sale_mode==="lottery"?(a(),i("span",ol,[u(c(be),{class:"h-4 w-4"}),n[25]||(n[25]=V(" Tombola ",-1))])):(a(),i("span",rl,[u(c(rt),{class:"h-4 w-4"}),n[26]||(n[26]=V(" Achat direct ",-1))]))]),e("div",al,[q.lottery_ends_soon&&q.sale_mode==="lottery"?(a(),i("span",ll,[u(c(me),{class:"h-4 w-4"}),n[27]||(n[27]=V(" Fin proche ! ",-1))])):q.isNew?(a(),i("span",il,[u(c(fe),{class:"h-4 w-4"}),n[28]||(n[28]=V(" Nouveau ",-1))])):A("",!0)]),e("div",nl,[e("img",{src:q.image_url||q.main_image||q.image||"/images/products/placeholder.jpg",alt:q.name,class:"w-full h-48 object-cover rounded-2xl bg-gray-100 group-hover:scale-105 transition-transform duration-300"},null,8,dl),e("div",cl,[q.sale_mode==="lottery"?(a(),i("div",ul,d(p(q.ticketPrice||q.ticket_price))+"/ticket ",1)):(a(),i("div",ml,d(p(q.price||q.value)),1))])]),e("div",pl,[e("div",null,[e("h3",{class:E(["text-xl font-bold text-black group-hover:transition-colors",q.sale_mode==="lottery"?"group-hover:text-purple-600":"group-hover:text-[#0099cc]"])},d(q.name),3),q.sale_mode==="lottery"?(a(),i("p",xl," Valeur totale: "+d(p(q.value||q.price)),1)):(a(),i("p",gl,d(q.category?.name||"Catégorie"),1))]),q.sale_mode==="lottery"?(a(),i("div",vl,[e("div",fl,[n[29]||(n[29]=e("span",null,"Progression",-1)),e("span",bl,d(Math.round((q.soldTickets||0)/(q.totalTickets||1e3)*100))+"%",1)]),e("div",yl,[e("div",{class:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500",style:de({width:Math.round((q.soldTickets||0)/(q.totalTickets||1e3)*100)+"%"})},null,4)]),e("div",hl,d(q.soldTickets||0)+"/"+d(q.totalTickets||1e3)+" tickets vendus ",1)])):(a(),i("div",_l,n[30]||(n[30]=[e("span",{class:"text-sm text-gray-500"},"Statut",-1),e("span",{class:"text-sm font-medium text-green-600 flex items-center gap-1"},[e("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),V(" Disponible ")],-1)]))),e("button",{class:E(["w-full font-semibold py-3 rounded-xl transition-all duration-200 group-hover:scale-105 group-hover:shadow-lg flex items-center justify-center gap-2",q.sale_mode==="lottery"?"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white":"bg-gradient-to-r from-[#0099cc] to-cyan-500 hover:from-[#0088bb] hover:to-cyan-600 text-white"])},[q.sale_mode==="lottery"?(a(),W(c(be),{key:0,class:"h-5 w-5"})):(a(),W(c(Se),{key:1,class:"h-5 w-5"})),V(" "+d(q.sale_mode==="lottery"?"Participer maintenant":"Acheter maintenant"),1)],2)])],8,tl))),128))]),e("div",wl,[u(j,{to:"/products",class:"inline-flex items-center gap-2 bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold px-8 py-4 rounded-2xl transition-all"},{default:F(()=>[n[31]||(n[31]=e("span",null,"Voir tous les produits",-1)),u(c(se),{class:"h-5 w-5"})]),_:1,__:[31]})])])]),e("section",$l,[e("div",kl,[n[32]||(n[32]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Ils ont acheté malin avec Koumbaya "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Découvrez les témoignages de nos clients satisfaits ")],-1)),e("div",Cl,[(a(!0),i(I,null,N(g.value,q=>(a(),i("div",{key:q.id,class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},[e("div",Pl,[e("img",{src:q.avatar,alt:q.name,class:"w-12 h-12 rounded-full bg-gray-200"},null,8,jl),e("div",ql,[e("div",Vl,d(q.name),1),e("div",Al,d(q.location),1)])]),e("div",zl,[e("div",Sl,[(a(),i(I,null,N(5,$=>u(c(je),{key:$,class:"h-5 w-5 fill-current"})),64))])]),e("blockquote",Ml,' "'+d(q.review)+'" ',1),e("div",El," A obtenu: "+d(q.won),1)]))),128))])])]),e("section",Tl,[e("div",Ll,[n[35]||(n[35]=e("h2",{class:"text-4xl md:text-5xl font-bold text-white mb-6"}," Votre prochain lot vous attend ",-1)),n[36]||(n[36]=e("p",{class:"text-xl text-blue-100 mb-8 leading-relaxed"}," Rejoignez la communauté Koumbaya et tentez votre chance dès aujourd'hui. L'inscription est gratuite et ne prend que quelques minutes. ",-1)),e("div",Rl,[u(j,{to:"/register",class:"inline-flex items-center justify-center gap-2 bg-white text-[#0099cc] hover:text-[#0088bb] font-bold px-10 py-5 rounded-2xl transition-all duration-200 hover:scale-105 shadow-xl"},{default:F(()=>[u(c(at),{class:"h-6 w-6"}),n[33]||(n[33]=e("span",null,"S'inscrire gratuitement",-1))]),_:1,__:[33]}),u(j,{to:"/products",class:"inline-flex items-center justify-center gap-2 border-2 border-white text-white hover:bg-white hover:text-[#0099cc] font-bold px-10 py-5 rounded-2xl transition-all duration-200"},{default:F(()=>[u(c(re),{class:"h-6 w-6"}),n[34]||(n[34]=e("span",null,"Voir les produits",-1))]),_:1,__:[34]})])])])])}}},Il=ve(Fl,[["__scopeId","data-v-9ff62910"]]),Dl={class:"min-h-screen bg-gray-50"},Nl={class:"bg-gradient-to-r from-blue-600 to-blue-600 text-white"},Ul={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Bl={class:"text-center"},Gl={class:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},Ol={class:"bg-white/20 rounded-lg p-4"},Wl={class:"text-2xl font-bold"},Hl={class:"bg-white/20 rounded-lg p-4"},Kl={class:"text-2xl font-bold"},Xl={class:"bg-white/20 rounded-lg p-4"},Jl={class:"text-2xl font-bold"},Ql={class:"bg-white/20 rounded-lg p-4"},Yl={class:"text-2xl font-bold"},Zl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ei={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},ti={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},si={class:"flex space-x-2"},oi=["onClick"],ri={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},ai={class:"flex gap-4"},li=["disabled"],ii={key:0,class:"flex items-center text-blue-800"},ni={class:"text-sm mt-1"},di={key:1,class:"flex items-center text-red-800"},ci={class:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8"},ui={key:0,class:"p-8 text-center"},mi={key:1,class:"p-6"},pi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},xi={class:"flex items-center space-x-4"},gi=["src","alt"],vi={class:"flex-1"},fi={class:"font-medium text-gray-900"},bi={class:"text-sm text-gray-600 mb-1"},yi={class:"text-sm font-medium text-blue-600"},hi={class:"text-xs text-gray-500"},_i={class:"bg-white rounded-lg shadow-sm border border-gray-200"},wi={key:0,class:"p-8 text-center"},$i={key:1,class:"p-8 text-center text-gray-500"},ki={key:2,class:"overflow-x-auto"},Ci={class:"min-w-full divide-y divide-gray-200"},Pi={class:"bg-white divide-y divide-gray-200"},ji={class:"px-6 py-4 whitespace-nowrap"},qi={class:"flex items-center"},Vi={class:"text-sm font-medium text-gray-900"},Ai={class:"text-sm text-gray-500"},zi={class:"text-xs text-gray-600"},Si={class:"px-6 py-4 whitespace-nowrap"},Mi={class:"flex items-center"},Ei={class:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3"},Ti={class:"text-sm font-medium text-gray-900"},Li={class:"text-sm text-gray-500"},Ri={class:"px-6 py-4 whitespace-nowrap"},Fi={class:"text-sm font-mono font-medium text-gray-900"},Ii={class:"px-6 py-4 whitespace-nowrap"},Di={class:"text-sm text-gray-900"},Ni={class:"w-16 bg-gray-200 rounded-full h-1.5 mt-1"},Ui={class:"text-xs text-gray-500"},Bi={class:"px-6 py-4 whitespace-nowrap"},Gi={class:"text-sm text-gray-900"},Oi={class:"text-xs text-gray-500"},Wi={class:"px-6 py-4 whitespace-nowrap"},Hi={class:"text-xs font-mono text-gray-600 bg-gray-100 rounded px-2 py-1"},Ki=["onClick"],Xi={__name:"Results",setup(z){const{get:P}=U(),h=C([]),b=C([]),m=C({}),r=C(!1),v=C(!1),_=C("month"),o=C(""),g=C(!1),p=C(null),f=[{value:"week",label:"Cette semaine"},{value:"month",label:"Ce mois"},{value:"year",label:"Cette année"}],x=async()=>{r.value=!0;try{const s=await P(`/public/results?period=${_.value}&limit=50`);h.value=s.data.results||[],m.value=s.data.stats||{}}catch(s){console.error("Erreur lors du chargement des résultats:",s)}finally{r.value=!1}},n=async()=>{v.value=!0;try{const s=await P("/public/results/recent-winners?limit=6");b.value=s.data.winners||[]}catch(s){console.error("Erreur lors du chargement des gagnants récents:",s)}finally{v.value=!1}},j=async()=>{if(o.value.trim()){g.value=!0,p.value=null;try{const s=await P(`/public/results/verify/${o.value.trim()}`);p.value=s.data,p.value.valid=!0}catch{p.value={valid:!1}}finally{g.value=!1}}},q=async s=>{try{await navigator.clipboard.writeText(s),window.$toast&&window.$toast.success("Code copié dans le presse-papiers!","✅ Copié")}catch(l){console.error("Erreur lors de la copie:",l)}},$=s=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0)+" FCFA",y=s=>s?s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(0)+"K":s.toString():"0",k=s=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(s));return H(async()=>{await Promise.all([x(),n()])}),(s,l)=>(a(),i("div",Dl,[e("div",Nl,[e("div",Ul,[e("div",Bl,[l[5]||(l[5]=e("h1",{class:"text-4xl font-bold mb-4"},"🏆 Résultats des Tombolas",-1)),l[6]||(l[6]=e("p",{class:"text-xl opacity-90 mb-8"}," Découvrez les gagnants et vérifiez les résultats officiels ",-1)),e("div",Gl,[e("div",Ol,[e("div",Wl,d(m.value.total_lotteries||0),1),l[1]||(l[1]=e("div",{class:"text-sm opacity-90"},"Tombolas terminées",-1))]),e("div",Hl,[e("div",Kl,d(m.value.total_winners||0),1),l[2]||(l[2]=e("div",{class:"text-sm opacity-90"},"Gagnants heureux",-1))]),e("div",Xl,[e("div",Jl,d(y(m.value.total_prizes_value)),1),l[3]||(l[3]=e("div",{class:"text-sm opacity-90"},"Valeur des prix",-1))]),e("div",Ql,[e("div",Yl,d(m.value.total_tickets_sold||0),1),l[4]||(l[4]=e("div",{class:"text-sm opacity-90"},"Tickets vendus",-1))])])])])]),e("div",Zl,[e("div",ei,[e("div",ti,[l[7]||(l[7]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Filtrer par période"),e("p",{class:"text-gray-600"},"Choisissez la période à afficher")],-1)),e("div",si,[(a(),i(I,null,N(f,t=>e("button",{key:t.value,onClick:w=>{_.value=t.value,x()},class:E(["px-4 py-2 rounded-md text-sm font-medium",_.value===t.value?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},d(t.label),11,oi)),64))])])]),e("div",ri,[l[11]||(l[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"🔍 Vérifier un Résultat",-1)),e("div",ai,[T(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t),type:"text",placeholder:"Entrez le code de vérification...",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",onKeyup:Oe(j,["enter"])},null,544),[[G,o.value]]),e("button",{onClick:j,disabled:!o.value||g.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},d(g.value?"Vérification...":"Vérifier"),9,li)]),p.value?(a(),i("div",{key:0,class:E(["mt-4 p-4 rounded-lg",[p.value.valid?"bg-blue-50 border border-blue-200":"bg-red-50 border border-red-200"]])},[p.value.valid?(a(),i("div",ii,[u(c(ae),{class:"w-5 h-5 mr-2"}),e("div",null,[l[9]||(l[9]=e("div",{class:"font-medium"},"✅ Résultat vérifié",-1)),e("div",ni,[V(" Tombola "+d(p.value.lottery_number)+" - "+d(p.value.product_title)+" ",1),l[8]||(l[8]=e("br",null,null,-1)),V("Gagnant: "+d(p.value.winner_initial)+"**** le "+d(k(p.value.draw_date)),1)])])])):(a(),i("div",di,[u(c(We),{class:"w-5 h-5 mr-2"}),l[10]||(l[10]=e("div",{class:"font-medium"},"Code invalide",-1))]))],2)):A("",!0)]),e("div",ci,[l[13]||(l[13]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"🎉 Gagnants Récents")],-1)),v.value?(a(),i("div",ui,l[12]||(l[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1)]))):(a(),i("div",mi,[e("div",pi,[(a(!0),i(I,null,N(b.value,t=>(a(),i("div",{key:t.lottery_number,class:"bg-gradient-to-r from-blue-50 to-blue-50 rounded-lg p-4 border border-blue-100"},[e("div",xi,[e("img",{src:t.product_image||"/images/products/placeholder.jpg",alt:t.product_title,class:"w-16 h-16 rounded-lg object-cover"},null,8,gi),e("div",vi,[e("div",fi,d(t.product_title),1),e("div",bi,d($(t.product_value)),1),e("div",yi," Gagnant: "+d(t.winner_initial)+"**** ("+d(t.winner_city)+") ",1),e("div",hi," Il y a "+d(t.days_ago)+" jour"+d(t.days_ago>1?"s":""),1)])])]))),128))])]))]),e("div",_i,[l[18]||(l[18]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"📋 Historique Complet des Résultats")],-1)),r.value?(a(),i("div",wi,l[14]||(l[14]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des résultats...",-1)]))):h.value.length===0?(a(),i("div",$i,[u(c(ze),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),l[15]||(l[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun résultat",-1)),l[16]||(l[16]=e("p",null,"Aucune tombola terminée pour cette période.",-1))])):(a(),i("div",ki,[e("table",Ci,[l[17]||(l[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Gagnant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ticket Gagnant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participation "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date de Tirage "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Vérification ")])],-1)),e("tbody",Pi,[(a(!0),i(I,null,N(h.value,t=>(a(),i("tr",{key:t.lottery_id,class:"hover:bg-gray-50"},[e("td",ji,[e("div",qi,[u(ye,{src:t.product.image_url||t.product.image,alt:t.product.title,"container-class":"w-12 h-12 rounded-lg mr-4","image-class":"w-12 h-12 rounded-lg object-cover","fallback-class":"w-12 h-12 rounded-lg","fallback-text":"Photo"},null,8,["src","alt"]),e("div",null,[e("div",Vi,d(t.product.title),1),e("div",Ai,d(t.product.category?.name||t.product.category||"Sans catégorie")+" • "+d($(t.product.price)),1),e("div",zi,d(t.lottery_number),1)])])]),e("td",Si,[e("div",Mi,[e("div",Ei,d(t.winner.initial),1),e("div",null,[e("div",Ti,d(t.winner.name),1),e("div",Li,d(t.winner.city),1)])])]),e("td",Ri,[e("div",Fi,d(t.winning_ticket),1)]),e("td",Ii,[e("div",Di,d(t.sold_tickets)+"/"+d(t.total_tickets)+" tickets ",1),e("div",Ni,[e("div",{class:"bg-blue-600 h-1.5 rounded-full",style:de({width:t.participation_rate+"%"})},null,4)]),e("div",Ui,d(t.participation_rate)+"%",1)]),e("td",Bi,[e("div",Gi,d(k(t.draw_date)),1),e("div",Oi,d($(t.total_revenue))+" collectés ",1)]),e("td",Wi,[e("div",Hi,d(t.verification_code),1),e("button",{onClick:w=>q(t.verification_code),class:"text-xs text-blue-600 hover:text-blue-700 mt-1"}," Copier ",8,Ki)])]))),128))])])]))])])]))}},Ji={class:"min-h-screen bg-gray-50"},Qi={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Yi={class:"bg-white rounded-lg shadow-lg border border-gray-200 p-8 mb-8"},Zi={class:"max-w-md mx-auto"},en={class:"mb-6"},tn=["disabled"],sn={key:0,class:"flex items-center justify-center"},on={key:1},rn={key:0,class:"mb-8"},an={key:0,class:"bg-white rounded-lg shadow-lg border-2 border-blue-200 overflow-hidden"},ln={class:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white p-6"},nn={class:"flex items-center justify-center"},dn={class:"p-8"},cn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},un={class:"space-y-4"},mn={class:"space-y-2"},pn={class:"flex justify-between"},xn={class:"font-medium"},gn={class:"flex justify-between"},vn={class:"font-medium"},fn={class:"flex justify-between"},bn={class:"font-medium"},yn={class:"space-y-4"},hn={class:"space-y-2"},_n={class:"flex justify-between"},wn={class:"font-medium"},$n={class:"flex justify-between"},kn={class:"font-mono font-medium text-blue-600"},Cn={class:"flex justify-between"},Pn={class:"font-medium"},jn={class:"mt-8 p-4 bg-blue-50 rounded-lg"},qn={class:"flex items-start"},Vn={class:"text-sm text-blue-800"},An={key:1,class:"bg-white rounded-lg shadow-lg border-2 border-red-200"},zn={class:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6"},Sn={class:"flex items-center justify-center"},Mn={class:"p-8"},En={class:"text-center"},Tn={class:"text-gray-700 mb-4"},Ln={class:"font-mono bg-gray-100 px-2 py-1 rounded"},Rn={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},Fn={class:"flex items-start"},In={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Dn={key:0,class:"text-center text-gray-500 py-8"},Nn={key:1,class:"space-y-3"},Un={class:"font-mono text-sm text-gray-600"},Bn={class:"text-xs text-gray-500"},Gn={__name:"VerifyWinner",setup(z){const{get:P}=U(),h=C(""),b=C(!1),m=C(null),r=C([]),v=async()=>{if(!(!h.value.trim()||h.value.length!==8)){b.value=!0,m.value=null;try{const f=await P(`/public/results/verify/${h.value.trim()}`);m.value=f.data,m.value.valid=!0,_(h.value,!0)}catch{m.value={valid:!1,code:h.value.trim()},_(h.value,!1)}finally{b.value=!1}}},_=(f,x)=>{const n={id:Date.now(),code:f,valid:x,verified_at:new Date};r.value.unshift(n),r.value.length>5&&(r.value=r.value.slice(0,5)),localStorage.setItem("recent_verifications",JSON.stringify(r.value))},o=()=>{try{const f=localStorage.getItem("recent_verifications");f&&(r.value=JSON.parse(f).map(x=>({...x,verified_at:new Date(x.verified_at)})).slice(0,5))}catch(f){console.error("Failed to load recent verifications",f)}},g=f=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(f)),p=f=>{const n=new Date-f,j=Math.floor(n/6e4);if(j<1)return"À l'instant";if(j<60)return`${j}min`;const q=Math.floor(j/60);return q<24?`${q}h`:`${Math.floor(q/24)}j`};return H(()=>{o()}),(f,x)=>(a(),i("div",Ji,[x[24]||(x[24]=D('<div class="bg-gradient-to-r from-blue-600 to-blue-600 text-white"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div class="text-center"><h1 class="text-4xl font-bold mb-4">🔍 Vérification de Gain</h1><p class="text-xl opacity-90 mb-8"> Vérifiez l&#39;authenticité d&#39;un résultat de tombola </p></div></div></div>',1)),e("div",Qi,[e("div",Yi,[x[5]||(x[5]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6 text-center"},[e("span",{class:"text-blue-600"},"🏆"),V(" Outil de Vérification Officiel ")],-1)),e("div",Zi,[e("div",en,[x[2]||(x[2]=e("label",{for:"verification-code",class:"block text-sm font-medium text-gray-700 mb-2"}," Code de Vérification ",-1)),T(e("input",{id:"verification-code","onUpdate:modelValue":x[0]||(x[0]=n=>h.value=n),type:"text",placeholder:"Ex: A1B2C3D4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center text-lg font-mono uppercase",maxlength:"8",onInput:x[1]||(x[1]=n=>h.value=n.target.value.toUpperCase()),onKeyup:Oe(v,["enter"])},null,544),[[G,h.value]]),x[3]||(x[3]=e("p",{class:"mt-2 text-sm text-gray-600"}," Entrez le code de 8 caractères fourni avec votre notification de gain ",-1))]),e("button",{onClick:v,disabled:!h.value||b.value||h.value.length!==8,class:"w-full py-3 px-6 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors duration-200"},[b.value?(a(),i("span",sn,x[4]||(x[4]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),V(" Vérification en cours... ",-1)]))):(a(),i("span",on," 🔍 Vérifier le Gain "))],8,tn)])]),m.value?(a(),i("div",rn,[m.value.valid?(a(),i("div",an,[e("div",ln,[e("div",nn,[u(c(ae),{class:"w-12 h-12 mr-4"}),x[6]||(x[6]=e("div",null,[e("h3",{class:"text-2xl font-bold"},"✅ GAIN VÉRIFIÉ"),e("p",{class:"text-blue-100"},"Ce résultat est authentique et officiel")],-1))])]),e("div",dn,[e("div",cn,[e("div",un,[x[10]||(x[10]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"📋 Informations de la Tombola",-1)),e("div",mn,[e("div",pn,[x[7]||(x[7]=e("span",{class:"text-gray-600"},"Numéro :",-1)),e("span",xn,d(m.value.lottery_number),1)]),e("div",gn,[x[8]||(x[8]=e("span",{class:"text-gray-600"},"Produit :",-1)),e("span",vn,d(m.value.product_title),1)]),e("div",fn,[x[9]||(x[9]=e("span",{class:"text-gray-600"},"Date du tirage :",-1)),e("span",bn,d(g(m.value.draw_date)),1)])])]),e("div",yn,[x[14]||(x[14]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"🏆 Gagnant",-1)),e("div",hn,[e("div",_n,[x[11]||(x[11]=e("span",{class:"text-gray-600"},"Identité :",-1)),e("span",wn,d(m.value.winner_initial)+"****",1)]),e("div",$n,[x[12]||(x[12]=e("span",{class:"text-gray-600"},"Code :",-1)),e("span",kn,d(h.value),1)]),e("div",Cn,[x[13]||(x[13]=e("span",{class:"text-gray-600"},"Vérifié le :",-1)),e("span",Pn,d(g(m.value.verification_date)),1)])])])]),e("div",jn,[e("div",qn,[u(c(Me),{class:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),e("div",Vn,[x[15]||(x[15]=e("p",{class:"font-medium mb-1"},"Certificat de Vérification",-1)),e("p",null,"Ce résultat a été vérifié dans notre système officiel. La tombola "+d(m.value.lottery_number)+" s'est terminée le "+d(g(m.value.draw_date))+" avec un tirage transparent et équitable.",1)])])])])])):(a(),i("div",An,[e("div",zn,[e("div",Sn,[u(c(We),{class:"w-12 h-12 mr-4"}),x[16]||(x[16]=e("div",null,[e("h3",{class:"text-2xl font-bold"},"CODE INVALIDE"),e("p",{class:"text-red-100"},"Ce code de vérification n'existe pas")],-1))])]),e("div",Mn,[e("div",En,[e("p",Tn,[x[17]||(x[17]=V(" Le code ",-1)),e("span",Ln,d(h.value),1),x[18]||(x[18]=V(" ne correspond à aucun résultat officiel dans notre système. ",-1))]),e("div",Rn,[e("div",Fn,[u(c(_e),{class:"w-5 h-5 text-yellow-500 mt-0.5 mr-3"}),x[19]||(x[19]=e("div",{class:"text-sm text-yellow-800"},[e("p",{class:"font-medium mb-1"},"Vérifications possibles :"),e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"Assurez-vous que le code est correct (8 caractères)"),e("li",null,"Vérifiez que le code provient d'une source officielle"),e("li",null,"Contactez notre support si vous pensez qu'il y a une erreur")])],-1))])])])])]))])):A("",!0),x[23]||(x[23]=D('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"><h3 class="text-lg font-semibold text-gray-900 mb-4">ℹ️ Comment ça marche ?</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">1️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Recevez votre code</h4><p class="text-sm text-gray-600"> Après un tirage, le gagnant reçoit un code de vérification unique par email et SMS </p></div><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">2️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Vérifiez en ligne</h4><p class="text-sm text-gray-600"> Entrez le code sur cette page pour vérifier l&#39;authenticité du résultat </p></div><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">3️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Confirmez le gain</h4><p class="text-sm text-gray-600"> Un résultat valide confirme officiellement le gain et ses détails </p></div></div></div>',1)),e("div",In,[x[22]||(x[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"🔍 Vérifications Récentes",-1)),r.value.length===0?(a(),i("div",Dn,[u(c(qe),{class:"w-12 h-12 mx-auto text-gray-300 mb-3"}),x[20]||(x[20]=e("p",null,"Aucune vérification récente",-1))])):(a(),i("div",Nn,[(a(!0),i(I,null,N(r.value,n=>(a(),i("div",{key:n.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("span",Un,d(n.code),1),x[21]||(x[21]=e("span",{class:"mx-2"},"→",-1)),e("span",{class:E(["text-sm",n.valid?"text-blue-600":"text-red-600"])},d(n.valid?"✅ Valide":"Invalide"),3)]),e("span",Bn,d(p(n.verified_at)),1)]))),128))]))])])]))}},On={class:"min-h-screen bg-gray-50"},Wn={class:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white"},Hn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Kn={class:"text-center"},Xn={class:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},Jn={class:"bg-white/20 rounded-lg p-4"},Qn={class:"text-2xl font-bold"},Yn={class:"bg-white/20 rounded-lg p-4"},Zn={class:"text-2xl font-bold"},ed={class:"bg-white/20 rounded-lg p-4"},td={class:"text-2xl font-bold"},sd={class:"bg-white/20 rounded-lg p-4"},od={class:"text-2xl font-bold"},rd={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ad={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},ld={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},id={class:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4"},nd=["value"],dd={class:"flex items-center space-x-4"},cd={class:"text-sm text-gray-500"},ud={key:0,class:"text-center py-12"},md={key:1,class:"text-center py-12"},pd={key:2},xd={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},gd={class:"relative h-48 bg-gray-200"},vd=["src","alt"],fd={class:"absolute bottom-3 left-3"},bd={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white text-gray-900"},yd={class:"p-6"},hd={class:"mb-4"},_d={class:"text-lg font-semibold text-gray-900 mb-1"},wd={class:"text-2xl font-bold text-purple-600"},$d={class:"text-sm text-gray-500"},kd={class:"bg-blue-50 rounded-lg p-4 mb-4"},Cd={class:"flex items-center"},Pd={class:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3"},jd={class:"flex-1"},qd={class:"text-sm text-blue-700"},Vd={class:"grid grid-cols-2 gap-4 mb-4"},Ad={class:"text-center"},zd={class:"text-lg font-bold text-gray-900"},Sd={class:"text-center"},Md={class:"text-lg font-bold text-gray-900"},Ed={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},Td={class:"flex items-center justify-between"},Ld={class:"text-sm text-gray-600"},Rd=["onClick"],Fd={key:0,class:"flex items-center justify-center space-x-2"},Id=["disabled"],Dd=["onClick"],Nd={key:1,class:"px-3 py-2 text-sm text-gray-500"},Ud=["disabled"],Bd={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Gd={class:"flex items-center justify-center min-h-screen px-4"},Od={class:"relative bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto"},Wd={class:"p-6"},Hd={class:"flex items-center justify-between mb-4"},Kd={class:"space-y-6"},Xd={class:"flex items-start space-x-4"},Jd=["src","alt"],Qd={class:"flex-1"},Yd={class:"text-xl font-bold text-gray-900"},Zd={class:"text-lg text-purple-600 font-semibold"},ec={class:"text-sm text-gray-600"},tc={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},sc={class:"flex items-center"},oc={class:"w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-4 text-lg font-bold"},rc={class:"font-medium text-blue-900"},ac={class:"text-sm text-blue-700"},lc={class:"text-sm text-blue-600"},ic={class:"grid grid-cols-2 gap-4"},nc={class:"bg-gray-50 p-4 rounded-lg"},dc={class:"text-2xl font-bold text-gray-900"},cc={class:"text-xs text-gray-500"},uc={class:"bg-gray-50 p-4 rounded-lg"},mc={class:"text-2xl font-bold text-gray-900"},pc={class:"bg-gray-50 p-4 rounded-lg"},xc={class:"text-2xl font-bold text-gray-900"},gc={class:"bg-gray-50 p-4 rounded-lg"},vc={class:"text-2xl font-bold text-gray-900 font-mono"},fc={class:"text-sm text-gray-600 space-y-1"},Ce=12,bc={__name:"History",setup(z){const{get:P}=U(),h=C([]),b=C({}),m=C([]),r=C(!1),v=C(null),_=C({period:"all",category:"",sort:"date_desc"}),o=C(1),g=Z(()=>{let s=[...h.value];switch(_.value.sort){case"date_asc":s.sort((l,t)=>new Date(l.draw_date)-new Date(t.draw_date));break;case"date_desc":s.sort((l,t)=>new Date(t.draw_date)-new Date(l.draw_date));break;case"value_asc":s.sort((l,t)=>l.product.price-t.product.price);break;case"value_desc":s.sort((l,t)=>t.product.price-l.product.price);break;case"participation_desc":s.sort((l,t)=>t.participation_rate-l.participation_rate);break}return s}),p=Z(()=>Math.ceil(g.value.length/Ce)),f=Z(()=>{const s=(o.value-1)*Ce,l=s+Ce;return g.value.slice(s,l)}),x=Z(()=>{const s=[],l=o.value,t=p.value;if(t<=7)for(let w=1;w<=t;w++)s.push(w);else if(l<=4){for(let w=1;w<=5;w++)s.push(w);s.push("..."),s.push(t)}else if(l>=t-3){s.push(1),s.push("...");for(let w=t-4;w<=t;w++)s.push(w)}else{s.push(1),s.push("...");for(let w=l-1;w<=l+1;w++)s.push(w);s.push("..."),s.push(t)}return s}),n=async()=>{r.value=!0;try{const s=new URLSearchParams({period:_.value.period,limit:500});_.value.category&&s.append("category",_.value.category);const[l,t,w]=await Promise.all([P(`/public/results?${s}`),P("/public/results/stats"),P("/categories")]);h.value=l.data.results||[],b.value=l.data.stats||{},m.value=w.data||[]}catch(s){console.error("Erreur lors du chargement de l'historique:",s)}finally{r.value=!1}},j=()=>{_.value={period:"all",category:"",sort:"date_desc"},o.value=1},q=s=>{v.value=s},$=s=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0)+" FCFA",y=s=>s?s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(0)+"K":s.toString():"0",k=s=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(s));return ue(_,()=>{o.value=1},{deep:!0}),H(()=>{n()}),(s,l)=>(a(),i("div",On,[e("div",Wn,[e("div",Hn,[e("div",Kn,[l[11]||(l[11]=e("h1",{class:"text-4xl font-bold mb-4"},"📚 Historique des Tombolas",-1)),l[12]||(l[12]=e("p",{class:"text-xl opacity-90 mb-8"}," Explorez l'historique complet de toutes nos tombolas terminées ",-1)),e("div",Xn,[e("div",Jn,[e("div",Qn,d(b.value.total_lotteries||0),1),l[7]||(l[7]=e("div",{class:"text-sm opacity-90"},"Tombolas terminées",-1))]),e("div",Yn,[e("div",Zn,d(b.value.total_winners||0),1),l[8]||(l[8]=e("div",{class:"text-sm opacity-90"},"Gagnants heureux",-1))]),e("div",ed,[e("div",td,d(y(b.value.total_prizes_value)),1),l[9]||(l[9]=e("div",{class:"text-sm opacity-90"},"Valeur totale",-1))]),e("div",sd,[e("div",od,d(Math.round(b.value.average_participation_rate||0))+"%",1),l[10]||(l[10]=e("div",{class:"text-sm opacity-90"},"Participation moy.",-1))])])])])]),e("div",rd,[e("div",ad,[e("div",ld,[e("div",id,[e("div",null,[l[14]||(l[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période",-1)),T(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>_.value.period=t),onChange:n,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},l[13]||(l[13]=[e("option",{value:"all"},"Toute la période",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1),e("option",{value:"year"},"Cette année",-1)]),544),[[Y,_.value.period]])]),e("div",null,[l[16]||(l[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),T(e("select",{"onUpdate:modelValue":l[1]||(l[1]=t=>_.value.category=t),onChange:n,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},[l[15]||(l[15]=e("option",{value:""},"Toutes les catégories",-1)),(a(!0),i(I,null,N(m.value,t=>(a(),i("option",{key:t.id,value:t.id},d(t.name),9,nd))),128))],544),[[Y,_.value.category]])]),e("div",null,[l[18]||(l[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trier par",-1)),T(e("select",{"onUpdate:modelValue":l[2]||(l[2]=t=>_.value.sort=t),onChange:n,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},l[17]||(l[17]=[D('<option value="date_desc">Plus récent</option><option value="date_asc">Plus ancien</option><option value="value_desc">Valeur croissante</option><option value="value_asc">Valeur décroissante</option><option value="participation_desc">Participation élevée</option>',5)]),544),[[Y,_.value.sort]])])]),e("div",dd,[e("button",{onClick:j,class:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"}," Réinitialiser "),e("div",cd,d(f.value.length)+" résultat(s) ",1)])])]),r.value?(a(),i("div",ud,l[19]||(l[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement de l'historique...",-1)]))):h.value.length===0?(a(),i("div",md,[u(c(lt),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),l[20]||(l[20]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Aucun historique",-1)),l[21]||(l[21]=e("p",{class:"text-gray-600"},"Aucune tombola terminée ne correspond à vos critères.",-1))])):(a(),i("div",pd,[e("div",xd,[(a(!0),i(I,null,N(f.value,t=>(a(),i("div",{key:t.lottery_id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200"},[e("div",gd,[t.product.image_url?(a(),i("img",{key:0,src:t.product.image_url,alt:t.product.title,class:"w-full h-full object-cover"},null,8,vd)):A("",!0),l[22]||(l[22]=e("div",{class:"absolute top-3 right-3"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"}," Terminé ")],-1)),e("div",fd,[e("span",bd,d(t.product.category?.name||t.product.category||"Sans catégorie"),1)])]),e("div",yd,[e("div",hd,[e("h3",_d,d(t.product.title),1),e("p",wd,d($(t.product.price)),1),e("p",$d,"Tombola "+d(t.lottery_number),1)]),e("div",kd,[e("div",Cd,[e("div",Pd,d(t.winner.initial),1),e("div",jd,[l[23]||(l[23]=e("div",{class:"text-sm font-medium text-blue-900"},"🏆 Gagnant",-1)),e("div",qd,d(t.winner.name)+" • "+d(t.winner.city),1)])])]),e("div",Vd,[e("div",Ad,[e("div",zd,d(t.sold_tickets),1),l[24]||(l[24]=e("div",{class:"text-xs text-gray-500"},"Participants",-1))]),e("div",Sd,[e("div",Md,d(t.participation_rate)+"%",1),l[25]||(l[25]=e("div",{class:"text-xs text-gray-500"},"Participation",-1))])]),e("div",Ed,[e("div",{class:"bg-blue-500 h-2 rounded-full",style:de({width:t.participation_rate+"%"})},null,4)]),e("div",Td,[e("div",Ld,d(k(t.draw_date)),1),e("button",{onClick:w=>q(t),class:"text-purple-600 hover:text-purple-700 text-sm font-medium"}," Voir détails → ",8,Rd)])])]))),128))]),p.value>1?(a(),i("div",Fd,[e("button",{onClick:l[3]||(l[3]=t=>o.value=Math.max(1,o.value-1)),disabled:o.value===1,class:"px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,Id),(a(!0),i(I,null,N(x.value,t=>(a(),i(I,{key:t},[t!=="..."?(a(),i("button",{key:0,onClick:w=>o.value=t,class:E(["px-4 py-2 text-sm font-medium border rounded-md",o.value===t?"bg-purple-600 text-white border-purple-600":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50"])},d(t),11,Dd)):(a(),i("span",Nd,"..."))],64))),128)),e("button",{onClick:l[4]||(l[4]=t=>o.value=Math.min(p.value,o.value+1)),disabled:o.value===p.value,class:"px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,Ud)])):A("",!0)]))]),v.value?(a(),i("div",Bd,[e("div",Gd,[e("div",{class:"fixed inset-0 bg-black/20",onClick:l[5]||(l[5]=t=>v.value=null)}),e("div",Od,[e("div",Wd,[e("div",Hd,[l[26]||(l[26]=e("h3",{class:"text-lg font-semibold"},"Détails de la tombola",-1)),e("button",{onClick:l[6]||(l[6]=t=>v.value=null),class:"text-gray-400 hover:text-gray-600"},[u(c(it),{class:"w-6 h-6"})])]),e("div",Kd,[e("div",Xd,[v.value.product.image_url?(a(),i("img",{key:0,src:v.value.product.image_url,alt:v.value.product.title,class:"w-24 h-24 rounded-lg object-cover"},null,8,Jd)):A("",!0),e("div",Qd,[e("h4",Yd,d(v.value.product.title),1),e("p",Zd,d($(v.value.product.price)),1),e("p",ec,d(v.value.product.category?.name||v.value.product.category||"Sans catégorie"),1)])]),e("div",tc,[l[27]||(l[27]=e("h5",{class:"font-medium text-blue-900 mb-2"},"🏆 Gagnant officiel",-1)),e("div",sc,[e("div",oc,d(v.value.winner.initial),1),e("div",null,[e("p",rc,d(v.value.winner.name),1),e("p",ac,d(v.value.winner.city),1),e("p",lc,"Ticket: "+d(v.value.winning_ticket),1)])])]),e("div",ic,[e("div",nc,[e("div",dc,d(v.value.sold_tickets),1),l[28]||(l[28]=e("div",{class:"text-sm text-gray-600"},"Tickets vendus",-1)),e("div",cc,"sur "+d(v.value.total_tickets),1)]),e("div",uc,[e("div",mc,d(v.value.participation_rate)+"%",1),l[29]||(l[29]=e("div",{class:"text-sm text-gray-600"},"Participation",-1))]),e("div",pc,[e("div",xc,d(y(v.value.total_revenue)),1),l[30]||(l[30]=e("div",{class:"text-sm text-gray-600"},"Revenus",-1))]),e("div",gc,[e("div",vc,d(v.value.verification_code),1),l[31]||(l[31]=e("div",{class:"text-sm text-gray-600"},"Code vérif.",-1))])]),e("div",null,[l[34]||(l[34]=e("h5",{class:"font-medium text-gray-900 mb-3"},"📅 Chronologie",-1)),e("div",fc,[e("p",null,[l[32]||(l[32]=e("strong",null,"Tirage :",-1)),V(" "+d(k(v.value.draw_date)),1)]),e("p",null,[l[33]||(l[33]=e("strong",null,"Revenus :",-1)),V(" "+d($(v.value.total_revenue)),1)])])])])])])])])):A("",!0)]))}},yc={class:"min-h-screen bg-gray-50"},hc={class:"bg-white shadow-sm border-b"},_c={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 product-filter"},wc={class:"flex flex-col lg:flex-row gap-6"},$c={class:"flex-1"},kc={class:"relative"},Cc={class:"lg:w-48"},Pc={class:"lg:w-64"},jc={key:0,disabled:""},qc=["value"],Vc={key:0,class:"mt-2 text-sm text-red-600"},Ac={class:"lg:w-48"},zc={class:"lg:w-48"},Sc={class:"py-12"},Mc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ec={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Tc={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Lc={key:2,class:"mt-8 flex justify-center"},Rc={class:"flex space-x-2"},Fc=["disabled"],Ic={class:"px-4 py-2 text-gray-700"},Dc=["disabled"],Nc={key:3,class:"text-center py-16"},Uc={class:"w-32 h-32 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},Bc={class:"bg-gradient-to-r from-[#0099cc] to-cyan-600 py-16"},Gc={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},Oc={class:"flex flex-col sm:flex-row gap-4 justify-center"},Pe=12,Wc={__name:"Products",setup(z){const P=J(),{get:h,loading:b}=U(),m=C(""),r=C(""),v=C(""),_=C(""),o=C("newest"),g=C([]),p=C([]),f=C(1),x=async()=>{try{const t=new URLSearchParams;if(m.value&&t.append("search",m.value),r.value&&t.append("category_id",r.value),v.value&&t.append("sale_mode",v.value),_.value){const[L,ne]=_.value.split("-");L&&t.append("min_price",L),ne&&ne!=="+"&&t.append("max_price",ne)}const w=t.toString()?`/products?${t.toString()}`:"/products",M=await h(w);M&&M.success&&M.data&&(g.value=M.data.products||M.data||[],f.value=1)}catch(t){console.error("Erreur lors du chargement des produits:",t),g.value=[]}},n=async()=>{try{console.log("Chargement des catégories...");const t=await h("/categories");console.log("Réponse API categories:",t),t&&t.success?(p.value=t.data||[],console.log("Catégories chargées:",p.value.length)):(console.log("Structure de réponse inattendue:",t),p.value=t?.data||t||[])}catch(t){console.error("Erreur lors du chargement des catégories:",t),p.value=[]}},j=Z(()=>{let t=[...g.value];return o.value==="price-asc"?t.sort((w,M)=>w.price-M.price):o.value==="price-desc"?t.sort((w,M)=>M.price-w.price):o.value==="popular"?t.sort((w,M)=>{const L=w.sale_mode==="lottery"?w.active_lottery?.sold_tickets||0:w.views_count||0;return(M.sale_mode==="lottery"?M.active_lottery?.sold_tickets||0:M.views_count||0)-L}):o.value==="newest"&&t.sort((w,M)=>new Date(M.created_at)-new Date(w.created_at)),t}),q=Z(()=>{const t=(f.value-1)*Pe,w=t+Pe;return j.value.slice(t,w)}),$=Z(()=>Math.ceil(j.value.length/Pe)),y=t=>{P.push({name:"public.product.detail",params:{id:t.id}})},k=()=>{m.value="",r.value="",v.value="",_.value="",o.value="newest",x()},s=Ot(()=>{x()},300),l=()=>{x()};return H(async()=>{await Promise.all([x(),n()])}),(t,w)=>{const M=ee("router-link");return a(),i("div",yc,[w[19]||(w[19]=D('<section class="bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0077aa] text-white py-16" data-v-c6640e87><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" data-v-c6640e87><div class="text-center" data-v-c6640e87><h1 class="text-4xl md:text-5xl font-bold mb-4" data-v-c6640e87> Découvrez nos <span class="text-white/80" data-v-c6640e87>produits incroyables</span></h1><p class="text-xl text-white/80 max-w-3xl mx-auto mb-8" data-v-c6640e87> Des smartphones dernière génération aux gadgets high-tech, tous nos produits sont garantis et à gagner facilement </p><div class="flex flex-wrap justify-center gap-4" data-v-c6640e87><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-c6640e87><span class="text-sm font-medium" data-v-c6640e87>✓ Produits authentiques</span></div><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-c6640e87><span class="text-sm font-medium" data-v-c6640e87>✓ Livraison gratuite</span></div><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-c6640e87><span class="text-sm font-medium" data-v-c6640e87>✓ Garantie constructeur</span></div></div></div></div></section>',1)),e("section",hc,[e("div",_c,[e("div",wc,[e("div",$c,[e("div",kc,[u(c(qe),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),T(e("input",{"onUpdate:modelValue":w[0]||(w[0]=L=>m.value=L),onInput:w[1]||(w[1]=(...L)=>c(s)&&c(s)(...L)),type:"text",placeholder:"Rechercher un produit...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 placeholder-gray-500 bg-white"},null,544),[[G,m.value]])])]),e("div",Cc,[T(e("select",{"onUpdate:modelValue":w[2]||(w[2]=L=>v.value=L),onChange:l,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},w[8]||(w[8]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"direct"},"Achat direct",-1),e("option",{value:"lottery"},"Tombola",-1)]),544),[[Y,v.value]])]),e("div",Pc,[T(e("select",{"onUpdate:modelValue":w[3]||(w[3]=L=>r.value=L),onChange:l,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},[w[9]||(w[9]=e("option",{value:""},"Toutes catégories",-1)),p.value.length===0?(a(),i("option",jc,"Aucune catégorie disponible")):A("",!0),(a(!0),i(I,null,N(p.value,L=>(a(),i("option",{key:L.id,value:L.id},d(L.name),9,qc))),128))],544),[[Y,r.value]]),p.value.length===0?(a(),i("div",Vc," Aucune catégorie trouvée ("+d(p.value.length)+") ",1)):A("",!0)]),e("div",Ac,[T(e("select",{"onUpdate:modelValue":w[4]||(w[4]=L=>_.value=L),onChange:l,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},w[10]||(w[10]=[D('<option value="" data-v-c6640e87>Tous les prix</option><option value="0-50000" data-v-c6640e87>0 - 50,000 FCFA</option><option value="50000-100000" data-v-c6640e87>50,000 - 100,000 FCFA</option><option value="100000-500000" data-v-c6640e87>100,000 - 500,000 FCFA</option><option value="500000+" data-v-c6640e87>Plus de 500,000 FCFA</option>',5)]),544),[[Y,_.value]])]),e("div",zc,[T(e("select",{"onUpdate:modelValue":w[5]||(w[5]=L=>o.value=L),onChange:l,class:"w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all text-gray-900 bg-white"},w[11]||(w[11]=[e("option",{value:"newest"},"Plus récents",-1),e("option",{value:"price-asc"},"Prix croissant",-1),e("option",{value:"price-desc"},"Prix décroissant",-1),e("option",{value:"popular"},"Plus populaires",-1)]),544),[[Y,o.value]])])])])]),e("section",Sc,[e("div",Mc,[c(b)?(a(),i("div",Ec,[(a(),i(I,null,N(12,L=>e("div",{key:L,class:"animate-pulse"},w[12]||(w[12]=[D('<div class="bg-white rounded-2xl p-6 shadow-sm" data-v-c6640e87><div class="w-full h-48 bg-gray-200 rounded-xl mb-4" data-v-c6640e87></div><div class="h-4 bg-gray-200 rounded mb-2" data-v-c6640e87></div><div class="h-4 bg-gray-200 rounded w-2/3 mb-4" data-v-c6640e87></div><div class="h-6 bg-gray-200 rounded w-1/3" data-v-c6640e87></div></div>',1)]))),64))])):(a(),i("div",Tc,[(a(!0),i(I,null,N(q.value,L=>(a(),W(At,{key:L.id,product:L,onViewProduct:y},null,8,["product"]))),128))])),$.value>1?(a(),i("div",Lc,[e("nav",Rc,[e("button",{onClick:w[6]||(w[6]=L=>f.value=Math.max(1,f.value-1)),disabled:f.value===1,class:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Fc),e("span",Ic," Page "+d(f.value)+" sur "+d($.value),1),e("button",{onClick:w[7]||(w[7]=L=>f.value=Math.min($.value,f.value+1)),disabled:f.value===$.value,class:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Dc)])])):A("",!0),!c(b)&&j.value.length===0?(a(),i("div",Nc,[e("div",Uc,[u(c(qe),{class:"w-16 h-16 text-gray-400"})]),w[13]||(w[13]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Aucun produit trouvé",-1)),w[14]||(w[14]=e("p",{class:"text-gray-600 mb-6"},"Essayez de modifier vos critères de recherche",-1)),e("button",{onClick:k,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors"}," Réinitialiser les filtres ")])):A("",!0)])]),e("section",Bc,[e("div",Gc,[w[17]||(w[17]=e("h2",{class:"text-3xl md:text-4xl font-bold text-white mb-4"}," Prêt à tenter votre chance ? ",-1)),w[18]||(w[18]=e("p",{class:"text-xl text-blue-100 mb-8"}," Inscrivez-vous gratuitement et participez à vos premiers tirages ",-1)),e("div",Oc,[u(M,{to:"/register",class:"bg-white text-[#0099cc] px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-colors"},{default:F(()=>w[15]||(w[15]=[V(" S'inscrire gratuitement ",-1)])),_:1,__:[15]}),u(M,{to:"/login",class:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-[#0099cc] transition-all"},{default:F(()=>w[16]||(w[16]=[V(" Se connecter ",-1)])),_:1,__:[16]})])])])])}}},Hc=ve(Wc,[["__scopeId","data-v-c6640e87"]]),Kc={class:"min-h-screen bg-gray-50"},Xc={key:0,class:"animate-pulse"},Jc={key:1,class:"bg-white"},Qc={class:"bg-gray-50 border-b"},Yc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Zc={class:"flex items-center space-x-2 text-sm"},eu={class:"text-gray-900 font-medium"},tu={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"},su={class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},ou={class:"space-y-4"},ru={class:"relative overflow-hidden rounded-2xl bg-gray-100"},au={key:0,class:"absolute top-4 right-4"},lu={class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold"},iu={key:1,class:"absolute top-4 right-4"},nu={key:2,class:"absolute top-4 left-4"},du={class:"grid grid-cols-4 gap-4"},cu={class:"space-y-8"},uu={class:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4"},mu={class:"flex items-center gap-4 mb-6"},pu={class:"bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full font-semibold"},xu={class:"flex items-center text-yellow-500"},gu={class:"bg-gradient-to-r from-[#0099cc]/5 to-[#0099cc]/10 rounded-2xl p-6"},vu={class:"text-center"},fu={class:"text-sm text-gray-600 mb-2"},bu={class:"text-4xl font-bold text-[#0099cc] mb-2"},yu={key:0,class:"text-sm text-gray-600"},hu={class:"font-semibold text-[#0099cc]"},_u={key:1,class:"text-sm text-gray-600"},wu={key:0,class:"space-y-4"},$u={class:"space-y-3"},ku={class:"flex justify-between text-sm"},Cu={class:"font-semibold"},Pu={class:"w-full bg-gray-200 rounded-full h-4"},ju={class:"flex justify-between text-sm"},qu={class:"text-[#0099cc] font-medium"},Vu={class:"text-gray-600"},Au={key:1,class:"bg-gray-50 rounded-2xl p-6 space-y-4"},zu={class:"grid grid-cols-2 gap-4 text-sm"},Su={class:"font-semibold"},Mu={class:"font-semibold"},Eu={key:2,class:"bg-green-50 rounded-2xl p-6 space-y-4"},Tu={class:"space-y-3"},Lu={class:"flex items-center gap-3"},Ru={class:"flex items-center gap-3"},Fu={class:"flex items-center gap-3"},Iu={class:"flex items-center gap-3"},Du={class:"space-y-4"},Nu={class:"grid grid-cols-2 gap-4"},Uu=["title"],Bu={class:"flex items-center gap-6 pt-6 border-t"},Gu={class:"flex items-center gap-2 text-sm text-gray-600"},Ou={class:"flex items-center gap-2 text-sm text-gray-600"},Wu={class:"flex items-center gap-2 text-sm text-gray-600"},Hu={class:"mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8"},Ku={class:"lg:col-span-2"},Xu={class:"prose max-w-none text-gray-700"},Ju={class:"text-lg leading-relaxed mb-6"},Qu={class:"space-y-2 mb-6"},Yu={class:"flex items-start gap-3"},Zu={class:"flex items-start gap-3"},e0={class:"flex items-start gap-3"},t0={class:"flex items-start gap-3"},s0={class:"space-y-6"},o0={class:"bg-gray-50 rounded-2xl p-6"},r0={class:"space-y-3 text-sm"},a0={class:"flex justify-between"},l0={class:"font-medium"},i0={class:"flex justify-between"},n0={class:"font-medium"},d0={class:"flex justify-between"},c0={class:"font-medium text-[#0099cc]"},u0={class:"bg-[#0099cc]/5 rounded-2xl p-6"},m0={class:"space-y-3 text-sm"},p0={class:"flex items-start gap-3"},x0={class:"flex items-start gap-3"},g0={class:"flex items-start gap-3"},v0={class:"flex items-start gap-3"},f0={class:"bg-gray-50 py-16"},b0={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},y0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},h0=["onClick"],_0={class:"relative overflow-hidden rounded-xl mb-4"},w0={class:"absolute top-2 right-2"},$0={class:"bg-[#0099cc] text-white px-2 py-1 rounded-full text-xs"},k0={class:"font-semibold text-gray-900 mb-2"},C0={class:"text-lg font-bold text-[#0099cc]"},P0={key:2,class:"min-h-screen flex items-center justify-center"},j0={class:"text-center"},q0={class:"w-32 h-32 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},V0={class:"text-xl font-semibold text-gray-900 mb-2"},A0={class:"text-gray-600 mb-6"},z0={class:"space-y-3"},S0={__name:"ProductDetail",setup(z){const P=le(),h=J(),{get:b}=U(),m=te(),r=C(!0),v=C(null),_=C(null),o=Z(()=>v.value&&v.value.activeLottery&&v.value.activeLottery.id),g=C([{id:2,name:"MacBook Pro M3",value:25e5,ticketPrice:2500,image:O},{id:3,name:"PlayStation 5",value:65e4,ticketPrice:1e3,image:O},{id:4,name:"AirPods Pro 2",value:35e4,ticketPrice:500,image:O},{id:5,name:"Tesla Model Y",value:45e6,ticketPrice:5e4,image:O}]),p=l=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(l).replace("XAF","FCFA"),f=l=>l?new Date(l).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Non définie",x=l=>({electronics:"Électronique",fashion:"Mode",automotive:"Automobile",home:"Maison"})[l]||"Autre",n=()=>"5j 12h",j=()=>{m.isAuthenticated?m.isCustomer?h.push({name:"customer.product.detail",params:{id:P.params.id}}):m.isMerchant?h.push({name:"merchant.dashboard"}):h.push({name:"customer.product.detail",params:{id:P.params.id}}):h.push({name:"login",query:{redirect:`/products/${P.params.id}`,action:"participate"}})},q=()=>{m.isAuthenticated?m.isCustomer?h.push({name:"customer.product.detail",params:{id:P.params.id}}):m.isMerchant?h.push({name:"merchant.dashboard"}):h.push({name:"customer.product.detail",params:{id:P.params.id}}):h.push({name:"login",query:{redirect:`/products/${P.params.id}`,action:"buy"}})},$=()=>{if(!m.isAuthenticated){h.push({name:"login",query:{redirect:`/products/${P.params.id}`,action:"wishlist"}});return}window.$toast&&window.$toast.success("Produit ajouté aux favoris !","Favoris")},y=()=>{navigator.share?navigator.share({title:v.value.name,text:v.value.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),window.$toast&&window.$toast.success("Lien copié dans le presse-papier !","Partage"))},k=l=>{h.push({name:"public.product.detail",params:{id:l.id}})},s=async()=>{try{r.value=!0,_.value=null;const l=P.params.id,t=await b(`/products/${l}`);console.log("🔍 API Response structure:",t);let w=t.data?.product||t.product;if(console.log("📦 Product data:",w),!w)throw console.error("Product data is null/undefined"),console.error("Full response:",JSON.stringify(t,null,2)),new Error("Produit non trouvé dans la réponse API");const M=w.id%2===1;v.value={id:w.id,name:w.name||(M?"iPhone 15 Pro":"MacBook Pro M3"),description:w.description||(M?"Le dernier flagship d'Apple avec une caméra révolutionnaire et la puce A17 Pro":"Le MacBook Pro le plus puissant avec la puce M3 et un écran Liquid Retina XDR"),value:w.price||(M?75e4:12e5),ticketPrice:w.ticket_price||(M?1e3:0),image:w.image_url||w.main_image||O,category:w.category?.name||"electronics",soldTickets:M?w.active_lottery?.sold_tickets||637:0,participants:M?w.active_lottery?.sold_tickets||637:0,drawDate:M?w.active_lottery?.end_date||new Date(Date.now()+10080*60*1e3):null,isNew:w.created_at?new Date(w.created_at)>new Date(Date.now()-720*60*60*1e3):!1,activeLottery:M?w.active_lottery||{id:1,sold_tickets:637,end_date:new Date(Date.now()+10080*60*1e3)}:null,lotteries:w.lotteries||[]},console.log("✅ Product loaded successfully:",v.value.name)}catch(l){console.error("Erreur lors du chargement du produit:",l),_.value=l.response?.data?.message||"Erreur lors du chargement du produit",v.value=null}finally{r.value=!1}};return H(()=>{s()}),(l,t)=>{const w=ee("router-link");return a(),i("div",Kc,[r.value?(a(),i("div",Xc,t[0]||(t[0]=[D('<div class="bg-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"><div class="grid grid-cols-1 lg:grid-cols-2 gap-12"><div class="h-96 bg-gray-200 rounded-2xl"></div><div class="space-y-4"><div class="h-8 bg-gray-200 rounded"></div><div class="h-4 bg-gray-200 rounded w-3/4"></div><div class="h-20 bg-gray-200 rounded"></div></div></div></div></div>',1)]))):v.value?(a(),i("div",Jc,[e("div",Qc,[e("div",Yc,[e("nav",Zc,[u(w,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:F(()=>t[1]||(t[1]=[V("Accueil",-1)])),_:1,__:[1]}),t[3]||(t[3]=e("span",{class:"text-gray-400"},"/",-1)),u(w,{to:"/products",class:"text-gray-500 hover:text-gray-700"},{default:F(()=>t[2]||(t[2]=[V("Produits",-1)])),_:1,__:[2]}),t[4]||(t[4]=e("span",{class:"text-gray-400"},"/",-1)),e("span",eu,d(v.value.name),1)])])]),e("div",tu,[e("div",su,[e("div",ou,[e("div",ru,[u(ye,{src:v.value.image_url||v.value.main_image||v.value.image,alt:v.value.name,"container-class":"w-full h-96 lg:h-[500px]","image-class":"w-full h-full object-cover"},null,8,["src","alt"]),o.value?(a(),i("div",au,[e("span",lu,d(p(v.value.ticketPrice))+" / ticket ",1)])):(a(),i("div",iu,t[5]||(t[5]=[e("span",{class:"bg-green-600 text-white px-4 py-2 rounded-full font-semibold"}," Achat direct ",-1)]))),v.value.isNew?(a(),i("div",nu,t[6]||(t[6]=[e("span",{class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold"}," Nouveau ",-1)]))):A("",!0)]),e("div",du,[(a(),i(I,null,N(4,M=>e("div",{key:M,class:"relative overflow-hidden rounded-xl bg-gray-100 cursor-pointer hover:ring-2 hover:ring-[#0099cc] transition-all"},[u(ye,{src:v.value.image_url||v.value.main_image||v.value.image,alt:`${v.value.name} - Vue ${M}`,"container-class":"w-full h-20","image-class":"w-full h-full object-cover"},null,8,["src","alt"])])),64))])]),e("div",cu,[e("div",null,[e("h1",uu,d(v.value.name),1),e("div",mu,[e("span",pu,d(x(v.value.category)),1),e("div",xu,[(a(),i(I,null,N(5,M=>u(c(je),{key:M,class:"h-5 w-5 fill-current"})),64)),t[7]||(t[7]=e("span",{class:"ml-2 text-gray-600"},"(4.8)",-1))])])]),e("div",gu,[e("div",vu,[e("div",fu,d(o.value?"Valeur du produit":"Prix"),1),e("div",bu,d(p(v.value.value)),1),o.value?(a(),i("div",yu,[t[8]||(t[8]=V(" Prix d'un ticket : ",-1)),e("span",hu,d(p(v.value.ticketPrice)),1)])):(a(),i("div",_u,t[9]||(t[9]=[e("span",{class:"font-semibold text-green-600"},"Disponible à l'achat direct",-1)])))])]),o.value?(a(),i("div",wu,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Progression du tirage",-1)),e("div",$u,[e("div",ku,[t[10]||(t[10]=e("span",{class:"text-gray-600"},"Tickets vendus",-1)),e("span",Cu,d(v.value.soldTickets)+" / 1000",1)]),e("div",Pu,[e("div",{class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] h-4 rounded-full transition-all duration-500",style:de({width:Math.round(v.value.soldTickets/1e3*100)+"%"})},null,4)]),e("div",ju,[e("span",qu,d(Math.round(v.value.soldTickets/1e3*100))+"% vendu",1),e("span",Vu,d(1e3-v.value.soldTickets)+" tickets restants",1)])])])):A("",!0),o.value?(a(),i("div",Au,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Informations du tirage",-1)),e("div",zu,[e("div",null,[t[12]||(t[12]=e("span",{class:"text-gray-600"},"Date limite :",-1)),e("p",Su,d(f(v.value.drawDate)),1)]),e("div",null,[t[13]||(t[13]=e("span",{class:"text-gray-600"},"Participants :",-1)),e("p",Mu,d(v.value.participants||0),1)]),t[14]||(t[14]=e("div",null,[e("span",{class:"text-gray-600"},"Chances de gagner :"),e("p",{class:"font-semibold text-[#0099cc]"},"1 sur 1000")],-1)),t[15]||(t[15]=e("div",null,[e("span",{class:"text-gray-600"},"Statut :"),e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-[#0099cc]/10 text-[#0099cc]"}," En cours ")],-1))])])):(a(),i("div",Eu,[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Achat direct",-1)),e("div",Tu,[e("div",Lu,[u(c(R),{class:"h-5 w-5 text-green-600"}),t[17]||(t[17]=e("span",{class:"text-sm text-gray-700"},"Disponible immédiatement",-1))]),e("div",Ru,[u(c(R),{class:"h-5 w-5 text-green-600"}),t[18]||(t[18]=e("span",{class:"text-sm text-gray-700"},"Pas de tirage au sort",-1))]),e("div",Fu,[u(c(R),{class:"h-5 w-5 text-green-600"}),t[19]||(t[19]=e("span",{class:"text-sm text-gray-700"},"Livraison garantie",-1))]),e("div",Iu,[u(c(R),{class:"h-5 w-5 text-green-600"}),t[20]||(t[20]=e("span",{class:"text-sm text-gray-700"},"Paiement sécurisé",-1))])])])),e("div",Du,[o.value?(a(),i("button",{key:0,onClick:j,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},d(c(m).isAuthenticated?`🍀 Participer maintenant - ${p(v.value.ticketPrice)}`:`Se connecter pour participer - ${p(v.value.ticketPrice)}`),1)):(a(),i("button",{key:1,onClick:q,class:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},d(c(m).isAuthenticated?`🛒 Acheter maintenant - ${p(v.value.value)}`:`Se connecter pour acheter - ${p(v.value.value)}`),1)),e("div",Nu,[e("button",{onClick:$,class:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-[#0099cc] text-gray-700 hover:text-[#0099cc] py-3 rounded-xl transition-all",title:c(m).isAuthenticated?"Ajouter aux favoris":"Se connecter pour ajouter aux favoris"},[u(c(nt),{class:"h-5 w-5"}),V(" "+d((c(m).isAuthenticated,"Favoris")),1)],8,Uu),e("button",{onClick:y,class:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-[#0099cc] text-gray-700 hover:text-[#0099cc] py-3 rounded-xl transition-all"},[u(c(dt),{class:"h-5 w-5"}),t[22]||(t[22]=V(" Partager ",-1))])])]),e("div",Bu,[e("div",Gu,[u(c(we),{class:"h-5 w-5 text-[#0099cc]"}),t[23]||(t[23]=e("span",null,"Produit garanti",-1))]),e("div",Ou,[u(c(Ae),{class:"h-5 w-5 text-[#0099cc]"}),t[24]||(t[24]=e("span",null,"Livraison gratuite",-1))]),e("div",Wu,[u(c(Ue),{class:"h-5 w-5 text-[#0099cc]"}),t[25]||(t[25]=e("span",null,"Authentique",-1))])])])]),e("div",Hu,[e("div",Ku,[t[32]||(t[32]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Description",-1)),e("div",Xu,[e("p",Ju,d(v.value.description),1),t[30]||(t[30]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Caractéristiques principales",-1)),e("ul",Qu,[e("li",Yu,[u(c(R),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),t[26]||(t[26]=e("span",null,"Produit neuf avec garantie constructeur",-1))]),e("li",Zu,[u(c(R),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),t[27]||(t[27]=e("span",null,"Livraison express partout au Cameroun",-1))]),e("li",e0,[u(c(R),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),t[28]||(t[28]=e("span",null,"Service client disponible 24h/7j",-1))]),e("li",t0,[u(c(R),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),t[29]||(t[29]=e("span",null,"Certification d'authenticité incluse",-1))])]),t[31]||(t[31]=D('<h3 class="text-xl font-semibold text-gray-900 mb-4">Comment participer ?</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">1</div><h4 class="font-semibold mb-2">Achetez vos tickets</h4><p class="text-sm text-gray-600">Choisissez le nombre de tickets que vous souhaitez</p></div><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">2</div><h4 class="font-semibold mb-2">Attendez le tirage</h4><p class="text-sm text-gray-600">Le tirage se fait automatiquement à la date prévue</p></div><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">3</div><h4 class="font-semibold mb-2">Récupérez votre lot</h4><p class="text-sm text-gray-600">Si vous gagnez, nous vous livrons gratuitement</p></div></div>',2))])]),e("div",s0,[e("div",o0,[t[36]||(t[36]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Statistiques",-1)),e("div",r0,[e("div",a0,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Participants uniques",-1)),e("span",l0,d(v.value.participants||0),1)]),e("div",i0,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Tickets moyens/personne",-1)),e("span",n0,d(Math.round(v.value.soldTickets/Math.max(v.value.participants||1,1))),1)]),e("div",d0,[t[35]||(t[35]=e("span",{class:"text-gray-600"},"Temps restant",-1)),e("span",c0,d(n()),1)])])]),e("div",u0,[t[41]||(t[41]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Pourquoi Koumbaya ?",-1)),e("div",m0,[e("div",p0,[u(c(R),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),t[37]||(t[37]=e("span",null,"Tirages transparents et vérifiables",-1))]),e("div",x0,[u(c(R),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),t[38]||(t[38]=e("span",null,"Paiement 100% sécurisé",-1))]),e("div",g0,[u(c(R),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),t[39]||(t[39]=e("span",null,"Support client réactif",-1))]),e("div",v0,[u(c(R),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),t[40]||(t[40]=e("span",null,"Plus de 10 000+ gagnants",-1))])])])])])]),e("section",f0,[e("div",b0,[t[42]||(t[42]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-8"},"Produits similaires",-1)),e("div",y0,[(a(!0),i(I,null,N(g.value,M=>(a(),i("div",{key:M.id,onClick:L=>k(M),class:"bg-white rounded-2xl p-6 shadow-sm hover:shadow-lg transition-all cursor-pointer"},[e("div",_0,[u(ye,{src:M.image,alt:M.name,"container-class":"w-full h-40","image-class":"w-full h-full object-cover"},null,8,["src","alt"]),e("div",w0,[e("span",$0,d(p(M.ticketPrice)),1)])]),e("h3",k0,d(M.name),1),e("div",C0,d(p(M.value)),1)],8,h0))),128))])])])])):(a(),i("div",P0,[e("div",j0,[e("div",q0,[u(c(K),{class:"w-16 h-16 text-gray-400"})]),e("h3",V0,d(_.value?"Erreur de chargement":"Produit introuvable"),1),e("p",A0,d(_.value||"Ce produit n'existe pas ou a été supprimé"),1),e("div",z0,[_.value?(a(),i("button",{key:0,onClick:s,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors mr-4"}," Réessayer ")):A("",!0),u(w,{to:"/products",class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors"},{default:F(()=>t[43]||(t[43]=[V(" Retour aux produits ",-1)])),_:1,__:[43]})])])]))])}}},M0={class:"min-h-screen bg-white"},E0={class:"py-20"},T0={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},L0={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12"},R0={class:"relative text-center group"},F0={class:"relative mx-auto w-32 h-32 mb-8"},I0={class:"hidden lg:block absolute -right-16 top-1/2 transform -translate-y-1/2"},D0={class:"mt-6 bg-[#0099cc]/5 rounded-xl p-4"},N0={class:"flex items-center justify-center gap-2 text-[#0099cc] font-medium"},U0={class:"relative text-center group"},B0={class:"relative mx-auto w-32 h-32 mb-8"},G0={class:"hidden lg:block absolute -right-16 top-1/2 transform -translate-y-1/2"},O0={class:"mt-6 bg-[#0099cc]/5 rounded-xl p-4"},W0={class:"flex items-center justify-center gap-2 text-[#0099cc] font-medium"},H0={class:"relative text-center group"},K0={class:"mt-6 bg-yellow-50 rounded-xl p-4"},X0={class:"flex items-center justify-center gap-2 text-yellow-700 font-medium"},J0={class:"py-20 bg-gray-50"},Q0={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},Y0={class:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center"},Z0={class:"space-y-6"},em={class:"flex gap-4"},tm={class:"flex-shrink-0"},sm={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},om={class:"flex gap-4"},rm={class:"flex-shrink-0"},am={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},lm={class:"flex gap-4"},im={class:"flex-shrink-0"},nm={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},dm={class:"flex gap-4"},cm={class:"flex-shrink-0"},um={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},mm={class:"relative"},pm={class:"bg-white rounded-2xl p-8 shadow-xl border border-gray-100"},xm={class:"text-center mb-6"},gm={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},vm={class:"space-y-4"},fm={class:"bg-gray-50 rounded-lg p-4"},bm={class:"flex items-center justify-between mb-2"},ym={class:"bg-gray-50 rounded-lg p-4"},hm={class:"flex items-center justify-between mb-2"},_m={class:"bg-[#0099cc]/5 rounded-lg p-4 border border-[#0099cc]/20"},wm={class:"flex items-center justify-between mb-2"},$m={class:"py-20"},km={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},Cm={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Pm={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},jm={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6"},qm={class:"space-y-3 text-gray-600"},Vm={class:"flex items-center gap-3"},Am={class:"flex items-center gap-3"},zm={class:"flex items-center gap-3"},Sm={class:"flex items-center gap-3"},Mm={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},Em={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6"},Tm={class:"space-y-3 text-gray-600"},Lm={class:"flex items-center gap-3"},Rm={class:"flex items-center gap-3"},Fm={class:"flex items-center gap-3"},Im={class:"flex items-center gap-3"},Dm={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},Nm={class:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6"},Um={class:"space-y-3 text-gray-600"},Bm={class:"flex items-center gap-3"},Gm={class:"flex items-center gap-3"},Om={class:"flex items-center gap-3"},Wm={class:"flex items-center gap-3"},Hm={class:"py-20 bg-gray-50"},Km={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},Xm={class:"space-y-6"},Jm=["onClick"],Qm={class:"text-lg font-semibold text-gray-900"},Ym={class:"py-20 bg-gradient-to-r from-[#0099cc] to-[#0088bb]"},Zm={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},ep={class:"flex flex-col sm:flex-row gap-4 justify-center"},tp={__name:"HowItWorks",setup(z){const P=C(null),h=C([{question:"Comment puis-je être sûr que le tirage est équitable ?",answer:"Notre système utilise un générateur de nombres aléatoires (RNG) certifié et audité régulièrement par des organismes indépendants. Tous les tirages sont enregistrés et vérifiables publiquement."},{question:"Que se passe-t-il si je gagne ?",answer:"Vous êtes immédiatement notifié par email et SMS. Notre équipe vous contacte dans les 24h pour organiser la livraison gratuite de votre lot. Vous recevez aussi un certificat d'authenticité."},{question:"Puis-je acheter plusieurs tickets pour le même produit ?",answer:"Oui, absolument ! Plus vous achetez de tickets, plus vous augmentez vos chances de gagner. Il n'y a pas de limite au nombre de tickets que vous pouvez acheter."},{question:"Les produits sont-ils vraiment authentiques ?",answer:"Tous nos produits sont 100% authentiques et neufs. Nous travaillons directement avec les distributeurs officiels et fournissons un certificat d'authenticité avec chaque lot."},{question:"Combien de temps ai-je pour réclamer mon lot ?",answer:"Vous avez 30 jours pour réclamer votre lot après le tirage. Passé ce délai, un nouveau tirage est organisé avec les tickets non gagnants."},{question:"Y a-t-il des frais cachés ?",answer:"Aucun frais caché ! Le prix affiché est le prix final. La livraison est gratuite partout au Gabon, et il n'y a aucun frais supplémentaire."}]),b=m=>{P.value=P.value===m?null:m};return(m,r)=>{const v=ee("router-link");return a(),i("div",M0,[r[47]||(r[47]=e("section",{class:"bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0099cc] text-white py-20"},[e("div",{class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},[e("h1",{class:"text-4xl md:text-6xl font-bold mb-6"}," Comment ça marche ? "),e("p",{class:"text-xl md:text-2xl text-blue-100 leading-relaxed max-w-3xl mx-auto"}," Découvrez comment obtenir des produits incroyables à prix réduit en quelques clics seulement. C'est simple, transparent et malin ! ")])],-1)),e("section",E0,[e("div",T0,[r[12]||(r[12]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," 3 étapes pour acheter malin "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Notre système de tombola est conçu pour être simple et équitable pour tous les participants ")],-1)),e("div",L0,[e("div",R0,[e("div",F0,[r[0]||(r[0]=e("div",{class:"absolute inset-0 bg-[#0099cc]/10 rounded-full"},null,-1)),r[1]||(r[1]=e("div",{class:"absolute inset-2 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[e("span",{class:"text-4xl font-bold text-white"},"1")],-1)),e("div",I0,[u(c(se),{class:"h-8 w-8 text-[#0099cc]/30"})])]),r[3]||(r[3]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"Choisissez votre produit",-1)),r[4]||(r[4]=e("p",{class:"text-gray-600 leading-relaxed"}," Parcourez notre catalogue de produits authentiques : smartphones, ordinateurs, voitures, montres de luxe et bien plus encore. ",-1)),e("div",D0,[e("div",N0,[u(c(Be),{class:"h-5 w-5"}),r[2]||(r[2]=e("span",null,"Plus de 100 produits disponibles",-1))])])]),e("div",U0,[e("div",B0,[r[5]||(r[5]=e("div",{class:"absolute inset-0 bg-[#0099cc]/10 rounded-full"},null,-1)),r[6]||(r[6]=e("div",{class:"absolute inset-2 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[e("span",{class:"text-4xl font-bold text-white"},"2")],-1)),e("div",G0,[u(c(se),{class:"h-8 w-8 text-[#0099cc]/30"})])]),r[8]||(r[8]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"Achetez vos tickets",-1)),r[9]||(r[9]=e("p",{class:"text-gray-600 leading-relaxed"}," Chaque produit a un prix de ticket unique. Plus vous achetez de tickets, plus vous augmentez vos chances d'obtenir le produit à prix réduit. ",-1)),e("div",O0,[e("div",W0,[u(c(be),{class:"h-5 w-5"}),r[7]||(r[7]=e("span",null,"Tickets à partir de 500 FCFA",-1))])])]),e("div",H0,[r[11]||(r[11]=D('<div class="relative mx-auto w-32 h-32 mb-8"><div class="absolute inset-0 bg-yellow-100 rounded-full"></div><div class="absolute inset-2 bg-yellow-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"><span class="text-4xl font-bold text-white">3</span></div></div><h3 class="text-2xl font-bold text-gray-900 mb-4">Obtenez votre produit</h3><p class="text-gray-600 leading-relaxed"> Le tirage se fait automatiquement quand tous les tickets sont vendus. Si vous obtenez le produit, nous vous livrons gratuitement ! </p>',3)),e("div",K0,[e("div",X0,[u(c(ze),{class:"h-5 w-5"}),r[10]||(r[10]=e("span",null,"Livraison gratuite partout",-1))])])])])])]),e("section",J0,[e("div",Q0,[r[25]||(r[25]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Comment fonctionne notre tombola ? "),e("p",{class:"text-xl text-gray-600"}," Notre système de tombola est 100% équitable et transparent ")],-1)),e("div",Y0,[e("div",Z0,[e("div",em,[e("div",tm,[e("div",sm,[u(c(R),{class:"h-6 w-6 text-white"})])]),r[13]||(r[13]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Tirage automatique"),e("p",{class:"text-gray-600"}," Dès que tous les tickets sont vendus, le tirage se lance automatiquement. Aucune intervention humaine possible. ")],-1))]),e("div",om,[e("div",rm,[e("div",am,[u(c(re),{class:"h-6 w-6 text-white"})])]),r[14]||(r[14]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Transparence totale"),e("p",{class:"text-gray-600"}," Tous les tirages sont enregistrés et vérifiables. Vous pouvez consulter l'historique à tout moment. ")],-1))]),e("div",lm,[e("div",im,[e("div",nm,[u(c(we),{class:"h-6 w-6 text-white"})])]),r[15]||(r[15]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Sécurité garantie"),e("p",{class:"text-gray-600"}," Notre algorithme de tirage est certifié et audité régulièrement pour assurer une équité parfaite. ")],-1))]),e("div",dm,[e("div",cm,[e("div",um,[u(c(ct),{class:"h-6 w-6 text-white"})])]),r[16]||(r[16]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Notification immédiate"),e("p",{class:"text-gray-600"}," Les participants sélectionnés sont notifiés instantanément par email et SMS. Plus besoin d'attendre ! ")],-1))])]),e("div",mm,[e("div",pm,[e("div",xm,[e("div",gm,[u(c(ut),{class:"h-10 w-10 text-[#0099cc]"})]),r[17]||(r[17]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Algorithme RNG",-1)),r[18]||(r[18]=e("p",{class:"text-gray-600 text-sm mt-2"},"Générateur de nombres aléatoires certifié",-1))]),e("div",vm,[e("div",fm,[e("div",bm,[r[19]||(r[19]=e("span",{class:"text-sm text-gray-600"},"Étape 1",-1)),u(c(R),{class:"h-4 w-4 text-[#0099cc]"})]),r[20]||(r[20]=e("div",{class:"text-sm font-medium text-gray-900"},"Collecte des tickets vendus",-1))]),e("div",ym,[e("div",hm,[r[21]||(r[21]=e("span",{class:"text-sm text-gray-600"},"Étape 2",-1)),u(c(R),{class:"h-4 w-4 text-[#0099cc]"})]),r[22]||(r[22]=e("div",{class:"text-sm font-medium text-gray-900"},"Génération nombre aléatoire",-1))]),e("div",_m,[e("div",wm,[r[23]||(r[23]=e("span",{class:"text-sm text-[#0099cc]"},"Étape 3",-1)),u(c(fe),{class:"h-4 w-4 text-[#0099cc]"})]),r[24]||(r[24]=e("div",{class:"text-sm font-medium text-gray-900"},"Désignation du participant sélectionné",-1))])])])])])])]),e("section",$m,[e("div",km,[r[41]||(r[41]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Paiement sécurisé et livraison "),e("p",{class:"text-xl text-gray-600"}," Vos transactions sont protégées par les meilleurs systèmes de sécurité ")],-1)),e("div",Cm,[e("div",Pm,[e("div",jm,[u(c(Se),{class:"h-8 w-8 text-[#0099cc]"})]),r[30]||(r[30]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Moyens de paiement",-1)),e("ul",qm,[e("li",Vm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[26]||(r[26]=e("span",null,"Mobile Money (MTN, Orange)",-1))]),e("li",Am,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[27]||(r[27]=e("span",null,"Carte bancaire Visa/Mastercard",-1))]),e("li",zm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[28]||(r[28]=e("span",null,"Virement bancaire",-1))]),e("li",Sm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[29]||(r[29]=e("span",null,"Portefeuille électronique",-1))])])]),e("div",Mm,[e("div",Em,[u(c(De),{class:"h-8 w-8 text-[#0099cc]"})]),r[35]||(r[35]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Sécurité des données",-1)),e("ul",Tm,[e("li",Lm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[31]||(r[31]=e("span",null,"Chiffrement SSL 256 bits",-1))]),e("li",Rm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[32]||(r[32]=e("span",null,"Conformité PCI DSS",-1))]),e("li",Fm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[33]||(r[33]=e("span",null,"Authentification 2 facteurs",-1))]),e("li",Im,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[34]||(r[34]=e("span",null,"Protection anti-fraude",-1))])])]),e("div",Dm,[e("div",Nm,[u(c(Ae),{class:"h-8 w-8 text-yellow-500"})]),r[40]||(r[40]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Livraison gratuite",-1)),e("ul",Um,[e("li",Bm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[36]||(r[36]=e("span",null,"Livraison partout au Gabon",-1))]),e("li",Gm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[37]||(r[37]=e("span",null,"Suivi en temps réel",-1))]),e("li",Om,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[38]||(r[38]=e("span",null,"Délai 24-48h en ville",-1))]),e("li",Wm,[u(c(R),{class:"h-4 w-4 text-[#0099cc]"}),r[39]||(r[39]=e("span",null,"Assurance colis incluse",-1))])])])])])]),e("section",Hm,[e("div",Km,[r[42]||(r[42]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Questions fréquentes "),e("p",{class:"text-xl text-gray-600"}," Trouvez rapidement les réponses à vos questions ")],-1)),e("div",Xm,[(a(!0),i(I,null,N(h.value,(_,o)=>(a(),i("div",{key:o,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},[e("button",{onClick:g=>b(o),class:"w-full px-8 py-6 text-left flex items-center justify-between hover:bg-gray-50 transition-colors"},[e("span",Qm,d(_.question),1),u(c(mt),{class:E(["h-6 w-6 text-gray-400 transition-transform",P.value===o?"rotate-180":""])},null,8,["class"])],8,Jm),T(e("div",{class:"px-8 pb-6 text-gray-600 leading-relaxed"},d(_.answer),513),[[pt,P.value===o]])]))),128))])])]),e("section",Ym,[e("div",Zm,[r[45]||(r[45]=e("h2",{class:"text-3xl md:text-4xl font-bold text-white mb-6"}," Prêt à acheter malin ? ",-1)),r[46]||(r[46]=e("p",{class:"text-xl text-blue-100 mb-8"}," Rejoignez les milliers de participants qui ont déjà acheté malin ",-1)),e("div",ep,[u(v,{to:"/products",class:"bg-white text-[#0099cc] px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-colors shadow-lg"},{default:F(()=>r[43]||(r[43]=[V(" Voir les produits ",-1)])),_:1,__:[43]}),u(v,{to:"/register",class:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-[#0099cc] transition-all"},{default:F(()=>r[44]||(r[44]=[V(" S'inscrire gratuitement ",-1)])),_:1,__:[44]})])])])])}}},sp={class:"min-h-screen bg-white"},op={class:"py-20"},rp={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ap={class:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16"},lp={class:"text-center group"},ip={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-[#0099cc] transition-colors"},np={class:"text-center group"},dp={class:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-blue-500 transition-colors"},cp={class:"text-center group"},up={class:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-yellow-500 transition-colors"},mp={class:"py-20 bg-gray-50"},pp={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xp={class:"grid grid-cols-1 lg:grid-cols-2 gap-16"},gp={class:"bg-white rounded-2xl p-8 shadow-lg"},vp={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fp={key:0,class:"text-red-500 text-sm mt-1"},bp={key:0,class:"text-red-500 text-sm mt-1"},yp={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},hp={key:0,class:"text-red-500 text-sm mt-1"},_p={key:0,class:"text-red-500 text-sm mt-1"},wp={class:"flex items-start gap-3"},$p={for:"agree",class:"text-sm text-gray-600"},kp=["disabled"],Cp={key:0,class:"flex items-center justify-center gap-2"},Pp={key:1},jp={class:"space-y-8"},qp={class:"bg-white rounded-2xl p-8 shadow-lg"},Vp={class:"space-y-6"},Ap={class:"flex gap-4"},zp={class:"flex-shrink-0"},Sp={class:"w-12 h-12 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},Mp={class:"flex gap-4"},Ep={class:"flex-shrink-0"},Tp={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},Lp={class:"bg-gradient-to-br from-[#0099cc] to-cyan-600 rounded-2xl p-8 text-white"},Rp={class:"grid grid-cols-2 gap-4"},Fp={href:"tel:+24107123456",class:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-4 hover:bg-white/20 transition-colors"},Ip={href:"https://wa.me/24107123456",target:"_blank",class:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-4 hover:bg-white/20 transition-colors"},Dp={class:"bg-gray-100 rounded-2xl p-8"},Np={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Up={class:"flex items-center justify-center min-h-screen px-4 text-center"},Bp={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle bg-white shadow-xl rounded-2xl transform transition-all"},Gp={class:"text-center"},Op={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Wp={__name:"Contact",setup(z){const P=C(!1),h=C(!1),b=Q({name:"",email:"",phone:"",subject:"",message:"",agree:!1}),m=Q({name:"",email:"",subject:"",message:""}),r=()=>{let _=!0;return Object.keys(m).forEach(o=>{m[o]=""}),b.name.trim()?b.name.trim().length<2&&(m.name="Le nom doit contenir au moins 2 caractères",_=!1):(m.name="Le nom est requis",_=!1),b.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)||(m.email="Format d'email invalide",_=!1):(m.email="L'email est requis",_=!1),b.subject||(m.subject="Veuillez sélectionner un sujet",_=!1),b.message.trim()?b.message.trim().length<10&&(m.message="Le message doit contenir au moins 10 caractères",_=!1):(m.message="Le message est requis",_=!1),_},v=async()=>{if(r()){P.value=!0;try{await new Promise(_=>setTimeout(_,1500)),Object.keys(b).forEach(_=>{_==="agree"?b[_]=!1:b[_]=""}),h.value=!0,window.$toast&&window.$toast.success("Message envoyé avec succès !","Contact")}catch{window.$toast&&window.$toast.error("Erreur lors de l'envoi du message","Erreur")}finally{P.value=!1}}};return(_,o)=>{const g=ee("router-link");return a(),i("div",sp,[o[37]||(o[37]=e("section",{class:"bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0077aa] text-white py-20"},[e("div",{class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},[e("h1",{class:"text-4xl md:text-6xl font-bold mb-6"}," Contactez-nous "),e("p",{class:"text-xl md:text-2xl text-blue-100 leading-relaxed"}," Notre équipe est là pour répondre à toutes vos questions. N'hésitez pas à nous contacter ! ")])],-1)),e("section",op,[e("div",rp,[e("div",ap,[e("div",lp,[e("div",ip,[u(c(oe),{class:"h-10 w-10 text-[#0099cc] group-hover:text-white transition-colors"})]),o[8]||(o[8]=D('<h3 class="text-xl font-semibold text-gray-900 mb-2">Téléphone</h3><p class="text-gray-600 mb-4">Appelez-nous directement</p><div class="space-y-2"><a href="tel:+24107123456" class="block text-[#0099cc] hover:text-[#0088bb] font-medium"> +241 07 12 34 56 </a><a href="tel:+24106987654" class="block text-[#0099cc] hover:text-[#0088bb] font-medium"> +241 06 98 76 54 </a></div><p class="text-sm text-gray-500 mt-2">Lun - Ven : 8h - 20h</p>',4))]),e("div",np,[e("div",dp,[u(c(pe),{class:"h-10 w-10 text-blue-500 group-hover:text-white transition-colors"})]),o[9]||(o[9]=D('<h3 class="text-xl font-semibold text-gray-900 mb-2">Email</h3><p class="text-gray-600 mb-4">Écrivez-nous un message</p><div class="space-y-2"><a href="mailto:contact@koumbaya.ga" class="block text-blue-600 hover:text-blue-700 font-medium"> contact@koumbaya.ga </a><a href="mailto:support@koumbaya.ga" class="block text-blue-600 hover:text-blue-700 font-medium"> support@koumbaya.ga </a></div><p class="text-sm text-gray-500 mt-2">Réponse sous 24h</p>',4))]),e("div",cp,[e("div",up,[u(c(Le),{class:"h-10 w-10 text-yellow-500 group-hover:text-white transition-colors"})]),o[10]||(o[10]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"WhatsApp",-1)),o[11]||(o[11]=e("p",{class:"text-gray-600 mb-4"},"Chat en temps réel",-1)),o[12]||(o[12]=e("a",{href:"https://wa.me/24107123456",target:"_blank",class:"inline-block bg-[#0099cc] text-white px-6 py-3 rounded-xl font-medium hover:bg-[#0088bb] transition-colors"}," Chatter maintenant ",-1)),o[13]||(o[13]=e("p",{class:"text-sm text-gray-500 mt-2"},"Disponible 24h/7j",-1))])])])]),e("section",mp,[e("div",pp,[e("div",xp,[e("div",gp,[o[24]||(o[24]=e("div",{class:"mb-8"},[e("h2",{class:"text-2xl md:text-3xl font-bold text-gray-900 mb-4"}," Envoyez-nous un message "),e("p",{class:"text-gray-600"}," Remplissez le formulaire ci-dessous et nous vous répondrons dans les plus brefs délais. ")],-1)),e("form",{onSubmit:ce(v,["prevent"]),class:"space-y-6"},[e("div",vp,[e("div",null,[o[14]||(o[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom complet * ",-1)),T(e("input",{"onUpdate:modelValue":o[0]||(o[0]=p=>b.name=p),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",placeholder:"Votre nom"},null,512),[[G,b.name]]),m.name?(a(),i("div",fp,d(m.name),1)):A("",!0)]),e("div",null,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Adresse email * ",-1)),T(e("input",{"onUpdate:modelValue":o[1]||(o[1]=p=>b.email=p),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",placeholder:"votre@email.com"},null,512),[[G,b.email]]),m.email?(a(),i("div",bp,d(m.email),1)):A("",!0)])]),e("div",yp,[e("div",null,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Numéro de téléphone ",-1)),u($e,{modelValue:b.phone,"onUpdate:modelValue":o[2]||(o[2]=p=>b.phone=p),placeholder:"Numéro de téléphone","initial-country":"ga"},null,8,["modelValue"])]),e("div",null,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sujet * ",-1)),T(e("select",{"onUpdate:modelValue":o[3]||(o[3]=p=>b.subject=p),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all"},o[17]||(o[17]=[D('<option value="">Choisir un sujet</option><option value="support">Support technique</option><option value="billing">Facturation</option><option value="product">Question sur un produit</option><option value="tombola">Question sur une tombola</option><option value="delivery">Livraison</option><option value="partnership">Partenariat</option><option value="other">Autre</option>',8)]),512),[[Y,b.subject]]),m.subject?(a(),i("div",hp,d(m.subject),1)):A("",!0)])]),e("div",null,[o[19]||(o[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Message * ",-1)),T(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=p=>b.message=p),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all resize-none",placeholder:"Décrivez votre demande en détail..."},null,512),[[G,b.message]]),m.message?(a(),i("div",_p,d(m.message),1)):A("",!0)]),e("div",wp,[T(e("input",{"onUpdate:modelValue":o[5]||(o[5]=p=>b.agree=p),type:"checkbox",id:"agree",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] border-gray-200 rounded focus:ring-[#0099cc]"},null,512),[[Ve,b.agree]]),e("label",$p,[o[21]||(o[21]=V(" J'accepte que mes données soient utilisées pour traiter ma demande selon notre ",-1)),u(g,{to:"/privacy",class:"text-[#0099cc] hover:text-[#0088bb]"},{default:F(()=>o[20]||(o[20]=[V("politique de confidentialité",-1)])),_:1,__:[20]}),o[22]||(o[22]=V(". ",-1))])]),e("button",{type:"submit",disabled:P.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 text-white font-semibold py-4 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},[P.value?(a(),i("span",Cp,o[23]||(o[23]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),V(" Envoi en cours... ",-1)]))):(a(),i("span",Pp,"Envoyer le message"))],8,kp)],32)]),e("div",jp,[e("div",qp,[o[27]||(o[27]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-6"},"Nos bureaux",-1)),e("div",Vp,[e("div",Ap,[e("div",zp,[e("div",Sp,[u(c(Re),{class:"h-6 w-6 text-[#0099cc]"})])]),o[25]||(o[25]=e("div",null,[e("h4",{class:"font-semibold text-gray-900 mb-2"},"Libreville (Siège social)"),e("p",{class:"text-gray-600 mb-2"},[V(" Boulevard Triomphal, Centre-ville"),e("br"),V(" Face à l'Hôtel Intercontinental"),e("br"),V(" BP 1234 Libreville, Gabon ")]),e("div",{class:"text-sm text-gray-500"},[e("p",null,"Lun - Ven : 8h00 - 18h00"),e("p",null,"Sam : 9h00 - 15h00")])],-1))]),e("div",Mp,[e("div",Ep,[e("div",Tp,[u(c(Re),{class:"h-6 w-6 text-blue-500"})])]),o[26]||(o[26]=e("div",null,[e("h4",{class:"font-semibold text-gray-900 mb-2"},"Port-Gentil"),e("p",{class:"text-gray-600 mb-2"},[V(" Avenue Savorgnan de Brazza"),e("br"),V(" Centre Commercial Delta"),e("br"),V(" BP 5678 Port-Gentil, Gabon ")]),e("div",{class:"text-sm text-gray-500"},[e("p",null,"Lun - Ven : 8h30 - 17h30"),e("p",null,"Sam : 9h00 - 14h00")])],-1))])])]),e("div",Lp,[o[30]||(o[30]=e("h3",{class:"text-2xl font-bold mb-4"},"Besoin d'une réponse rapide ?",-1)),o[31]||(o[31]=e("p",{class:"text-blue-100 mb-6"}," Notre équipe de support est disponible pour vous aider immédiatement. ",-1)),e("div",Rp,[e("a",Fp,[u(c(oe),{class:"h-6 w-6"}),o[28]||(o[28]=e("div",{class:"text-left"},[e("div",{class:"font-medium"},"Appelez-nous"),e("div",{class:"text-sm text-blue-100"},"24h/7j")],-1))]),e("a",Ip,[u(c(Le),{class:"h-6 w-6"}),o[29]||(o[29]=e("div",{class:"text-left"},[e("div",{class:"font-medium"},"WhatsApp"),e("div",{class:"text-sm text-blue-100"},"Chat live")],-1))])])]),e("div",Dp,[o[33]||(o[33]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Consultez d'abord notre FAQ",-1)),o[34]||(o[34]=e("p",{class:"text-gray-600 mb-6"}," La plupart des questions trouvent leur réponse dans notre section FAQ. ",-1)),u(g,{to:"/how-it-works",class:"inline-flex items-center gap-2 bg-white text-gray-900 px-6 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm"},{default:F(()=>[u(c(Ge),{class:"h-5 w-5"}),o[32]||(o[32]=V(" Voir les questions fréquentes ",-1))]),_:1,__:[32]})])])])])]),h.value?(a(),i("div",Np,[e("div",Up,[e("div",{class:"fixed inset-0 bg-black/20 transition-opacity",onClick:o[6]||(o[6]=p=>h.value=!1)}),e("div",Bp,[e("div",Gp,[e("div",Op,[u(c(ae),{class:"h-8 w-8 text-[#0099cc]"})]),o[35]||(o[35]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Message envoyé !",-1)),o[36]||(o[36]=e("p",{class:"text-gray-600 mb-6"}," Merci pour votre message. Nous vous répondrons dans les plus brefs délais. ",-1)),e("button",{onClick:o[7]||(o[7]=p=>h.value=!1),class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl font-medium transition-colors"}," Parfait ")])])])])):A("",!0)])}}},Hp={class:"min-h-screen bg-gray-50 py-8"},Kp={class:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8"},Xp={class:"text-center mb-8"},Jp={class:"mb-6"},Qp=["src"],Yp={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},Zp={class:"flex items-center space-x-4 mb-4"},ex=["src","alt"],tx={class:"flex-1"},sx={class:"font-medium text-gray-900"},ox={class:"text-sm text-gray-600"},rx={key:0},ax={key:1},lx={class:"text-right"},ix={class:"text-lg font-bold text-gray-900"},nx={key:0,class:"text-sm text-gray-500"},dx={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},cx={class:"space-y-4"},ux={class:"space-y-3"},mx={class:"text-sm font-medium text-gray-700 flex items-center"},px={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},xx={class:"flex items-center space-x-3"},gx={class:"w-12 h-12 rounded-lg overflow-hidden flex items-center justify-center bg-white border border-gray-200"},vx=["src"],fx={class:"ml-auto"},bx={key:0,class:"w-full h-full rounded-full bg-white transform scale-50"},yx={class:"flex items-center space-x-3"},hx={class:"w-12 h-12 rounded-lg overflow-hidden flex items-center justify-center bg-white border border-gray-200"},_x=["src"],wx={class:"ml-auto"},$x={key:0,class:"w-full h-full rounded-full bg-white transform scale-50"},kx={class:"pt-4 border-t border-gray-200"},Cx={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 opacity-50"},Px={class:"p-4 border-2 border-gray-100 rounded-lg bg-gray-50"},jx={class:"flex items-center space-x-3"},qx={class:"w-10 h-10 bg-gray-300 rounded-lg flex items-center justify-center"},Vx={class:"p-4 border-2 border-gray-100 rounded-lg bg-gray-50"},Ax={class:"flex items-center space-x-3"},zx={class:"w-10 h-10 bg-gray-300 rounded-lg flex items-center justify-center"},Sx={class:"mt-8 flex items-center justify-between"},Mx=["disabled"],Ex={key:0},Tx={key:1},Lx={class:"mt-6 text-center"},Rx={class:"flex items-center justify-center text-sm text-gray-500"},Fx={__name:"PaymentMethod",setup(z){const P=le(),h=J(),b=C(""),m=C(!1),r=C({type:"ticket",productName:"",quantity:1,unitPrice:0,totalAmount:0,image:"",transactionId:null}),v=p=>{b.value=p},_=()=>{h.back()},o=()=>{b.value&&(m.value=!0,h.push({name:"payment.phone",query:{method:b.value,transaction_id:r.value.transactionId,amount:r.value.totalAmount}}))},g=p=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(p).replace("XAF","FCFA");return H(()=>{const{type:p,product:f,quantity:x,amount:n,transaction_id:j}=P.query;if(!j){h.push("/");return}r.value={type:p||"ticket",productName:f||"Produit",quantity:parseInt(x)||1,unitPrice:parseFloat(n)/(parseInt(x)||1),totalAmount:parseFloat(n)||0,image:"",transactionId:j}}),(p,f)=>(a(),i("div",Hp,[e("div",Kp,[e("div",Xp,[e("div",Jp,[e("img",{src:c(ie),alt:"Koumbaya",class:"h-12 mx-auto"},null,8,Qp)]),f[2]||(f[2]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Méthode de paiement",-1)),f[3]||(f[3]=e("p",{class:"mt-2 text-gray-600"},"Choisissez votre mode de paiement préféré",-1))]),e("div",Yp,[f[4]||(f[4]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Résumé de votre commande",-1)),e("div",Zp,[e("img",{src:r.value.image||"/images/products/placeholder.jpg",alt:r.value.productName,class:"w-16 h-16 object-cover rounded-lg"},null,8,ex),e("div",tx,[e("h3",sx,d(r.value.productName),1),e("p",ox,[r.value.type==="ticket"?(a(),i("span",rx,d(r.value.quantity)+" ticket(s) • "+d(g(r.value.unitPrice))+"/ticket ",1)):(a(),i("span",ax," Achat direct • "+d(g(r.value.unitPrice)),1))])]),e("div",lx,[e("div",ix,d(g(r.value.totalAmount)),1),r.value.type==="ticket"?(a(),i("div",nx,d(r.value.quantity)+" x "+d(g(r.value.unitPrice)),1)):A("",!0)])])]),e("div",dx,[f[13]||(f[13]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-6"},"Sélectionnez votre méthode de paiement",-1)),e("div",cx,[e("div",ux,[e("h3",mx,[u(c(oe),{class:"h-5 w-5 mr-2 text-blue-500"}),f[5]||(f[5]=V(" Mobile Money ",-1))]),e("div",px,[e("div",{onClick:f[0]||(f[0]=x=>v("airtel_money")),class:E(["p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",b.value==="airtel_money"?"border-red-500 bg-red-50 ring-2 ring-red-200":"border-gray-200 hover:border-red-300 hover:bg-red-50"])},[e("div",xx,[e("div",gx,[e("img",{src:c(He),alt:"Airtel Money",class:"w-10 h-10 object-contain"},null,8,vx)]),f[6]||(f[6]=e("div",{class:"flex-1"},[e("div",{class:"font-medium text-gray-900"},"Airtel Money"),e("div",{class:"text-sm text-gray-500"},"Paiement mobile")],-1)),e("div",fx,[e("div",{class:E(["w-4 h-4 rounded-full border-2",b.value==="airtel_money"?"border-red-500 bg-red-500":"border-gray-300"])},[b.value==="airtel_money"?(a(),i("div",bx)):A("",!0)],2)])])],2),e("div",{onClick:f[1]||(f[1]=x=>v("moov_money")),class:E(["p-4 border-2 rounded-lg cursor-pointer transition-all duration-200",b.value==="moov_money"?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"])},[e("div",yx,[e("div",hx,[e("img",{src:c(Ke),alt:"Moov Money",class:"w-10 h-10 object-contain"},null,8,_x)]),f[7]||(f[7]=e("div",{class:"flex-1"},[e("div",{class:"font-medium text-gray-900"},"Moov Money"),e("div",{class:"text-sm text-gray-500"},"Paiement mobile")],-1)),e("div",wx,[e("div",{class:E(["w-4 h-4 rounded-full border-2",b.value==="moov_money"?"border-blue-500 bg-blue-500":"border-gray-300"])},[b.value==="moov_money"?(a(),i("div",$x)):A("",!0)],2)])])],2)])]),e("div",kx,[f[10]||(f[10]=e("h3",{class:"text-sm font-medium text-gray-400 mb-3"},"Bientôt disponible",-1)),e("div",Cx,[e("div",Px,[e("div",jx,[e("div",qx,[u(c(Se),{class:"h-6 w-6 text-gray-500"})]),f[8]||(f[8]=e("div",null,[e("div",{class:"font-medium text-gray-500"},"Carte bancaire"),e("div",{class:"text-sm text-gray-400"},"Visa, Mastercard")],-1))])]),e("div",Vx,[e("div",Ax,[e("div",zx,[u(c(xt),{class:"h-6 w-6 text-gray-500"})]),f[9]||(f[9]=e("div",null,[e("div",{class:"font-medium text-gray-500"},"Virement bancaire"),e("div",{class:"text-sm text-gray-400"},"IBAN, SWIFT")],-1))])])])])]),e("div",Sx,[e("button",{onClick:_,class:"flex items-center text-gray-600 hover:text-gray-900 transition-colors"},[u(c(gt),{class:"h-5 w-5 mr-2"}),f[11]||(f[11]=V(" Retour ",-1))]),e("button",{onClick:o,disabled:!b.value||m.value,class:"bg-[#0099cc] hover:bg-[#0088bb] disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-8 py-3 rounded-xl transition-all duration-200 flex items-center"},[m.value?(a(),i("span",Ex,"Traitement...")):(a(),i("span",Tx,[f[12]||(f[12]=V(" Continuer ",-1)),u(c(se),{class:"h-5 w-5 ml-2"})]))],8,Mx)])]),e("div",Lx,[e("div",Rx,[u(c(we),{class:"h-5 w-5 mr-2 text-green-500"}),f[14]||(f[14]=V(" Paiement 100% sécurisé et chiffré ",-1))])])])]))}},Ix={class:"min-h-screen bg-gray-50 py-8"},Dx={class:"max-w-md mx-auto px-4 sm:px-6 lg:px-8"},Nx={class:"text-center mb-8"},Ux={class:"mb-6"},Bx=["src"],Gx={class:"w-20 h-20 mx-auto mb-4 rounded-lg overflow-hidden flex items-center justify-center bg-white border border-gray-200 shadow-sm"},Ox=["src","alt"],Wx={class:"text-2xl font-bold text-gray-900"},Hx={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 text-center"},Kx={class:"text-3xl font-bold text-gray-900"},Xx={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},Jx=["placeholder"],Qx={key:0,class:"mt-1 text-sm text-red-600"},Yx={class:"mt-2 text-xs text-gray-500"},Zx={class:"space-y-3"},eg=["disabled"],tg={key:0},sg={key:1},og={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},rg={class:"flex items-start"},ag={__name:"PhoneInput",setup(z){const P=le(),h=J(),{post:b}=U(),m=C("airtel_money"),r=C("airtel"),v=C(""),_=C(!1),o=C({}),g=C(0),p=C(null),f=Z(()=>r.value&&v.value.length===9&&n()),x=k=>{let s=k.target.value.replace(/\D/g,"");s.length<=9&&(v.value=s),j()},n=()=>{const k=v.value;return r.value==="airtel"?k.startsWith("074")||k.startsWith("077")||k.startsWith("076"):r.value==="moov"?k.startsWith("065")||k.startsWith("062")||k.startsWith("066")||k.startsWith("060"):!1},j=()=>{o.value={};const k=v.value;if(!k)return o.value.phone="Le numéro de téléphone est requis",!1;if(k.length!==9)return o.value.phone="Le numéro doit contenir 9 chiffres",!1;if(!n()){const s=r.value==="airtel"?"074, 077 ou 076":"065, 062, 066 ou 060";return o.value.phone=`Le numéro doit commencer par ${s} pour ${r.value==="airtel"?"Airtel":"Moov"}`,!1}return!0},q=async()=>{if(!(!j()||!f.value)){_.value=!0;try{const k=await b("/payments/initiate-from-transaction",{transaction_id:P.query.transaction_id,phone:v.value,operator:r.value});k.success?h.push({name:"payment.confirmation",query:{bill_id:k.data.bill_id,reference:k.data.reference,amount:k.data.amount,phone:v.value,operator:r.value,transaction_id:k.data.transaction_id}}):window.$toast&&window.$toast.error(k.message||"Erreur lors de l'initiation du paiement","❌ Erreur")}catch(k){console.error("Payment initiation error:",k),window.$toast&&window.$toast.error("Erreur lors de l'initiation du paiement","❌ Erreur")}finally{_.value=!1}}},$=()=>{h.back()},y=k=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(k).replace("XAF","FCFA");return H(()=>{m.value=P.query.method||"airtel_money",g.value=parseFloat(P.query.amount)||0,p.value=P.query.transaction_id,m.value==="airtel_money"?r.value="airtel":m.value==="moov_money"&&(r.value="moov"),P.query.transaction_id||h.push("/")}),(k,s)=>(a(),i("div",Ix,[e("div",Dx,[e("div",Nx,[e("div",Ux,[e("img",{src:c(ie),alt:"Koumbaya",class:"h-12 mx-auto"},null,8,Bx)]),e("div",Gx,[e("img",{src:m.value==="airtel_money"?c(He):c(Ke),alt:m.value==="airtel_money"?"Airtel Money":"Moov Money",class:"w-16 h-16 object-contain"},null,8,Ox)]),e("h1",Wx,d(m.value==="airtel_money"?"Airtel Money":"Moov Money"),1),s[1]||(s[1]=e("p",{class:"mt-2 text-gray-600"},"Saisissez votre numéro de téléphone",-1))]),e("div",Hx,[s[2]||(s[2]=e("div",{class:"text-sm text-gray-500 mb-1"},"Montant à payer",-1)),e("div",Kx,d(y(g.value)),1)]),e("div",Xx,[e("form",{onSubmit:ce(q,["prevent"]),class:"space-y-6"},[e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Numéro de téléphone ",-1)),T(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>v.value=l),type:"tel",placeholder:r.value==="airtel"?"074010203":"065010203",maxlength:"9",class:E(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",r.value==="airtel"?"focus:ring-red-500":"focus:ring-blue-500",o.value.phone?"border-red-300":""]),onInput:x},null,42,Jx),[[G,v.value]]),o.value.phone?(a(),i("div",Qx,d(o.value.phone),1)):A("",!0),e("div",Yx," Format: "+d(r.value==="airtel"?"074010203 (074, 077, 076 pour Airtel)":"065010203 (065, 062, 066, 060 pour Moov)"),1)]),e("div",Zx,[e("button",{type:"submit",disabled:!f.value||_.value,class:E(["w-full py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center",r.value==="airtel"?"bg-red-600 hover:bg-red-700 disabled:bg-red-300":"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300","text-white disabled:cursor-not-allowed"])},[_.value?(a(),i("span",tg,s[4]||(s[4]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"},null,-1),V(" Traitement... ",-1)]))):(a(),i("span",sg,[V(" Payer "+d(y(g.value))+" ",1),u(c(se),{class:"h-5 w-5 ml-2"})]))],10,eg),e("button",{type:"button",onClick:$,class:"w-full py-3 px-4 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors"}," Retour ")])],32)]),e("div",og,[e("div",rg,[u(c(Me),{class:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),s[5]||(s[5]=e("div",{class:"text-sm text-blue-700"},[e("p",{class:"font-medium mb-1"},"Instructions de paiement :"),e("ul",{class:"space-y-1 text-xs"},[e("li",null,"• Assurez-vous d'avoir suffisamment de crédit"),e("li",null,"• Gardez votre téléphone près de vous"),e("li",null,"• Vous recevrez un code de confirmation USSD")])],-1))])])])]))}},lg={class:"min-h-screen bg-gray-50 py-8"},ig={class:"max-w-md mx-auto px-4 sm:px-6 lg:px-8"},ng={class:"text-center mb-8"},dg={class:"mb-6"},cg=["src"],ug={class:"text-2xl font-bold text-gray-900 mb-2"},mg={class:"text-gray-600"},pg={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},xg={class:"text-center"},gg={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},vg={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6"},fg={class:"space-y-3"},bg={class:"flex justify-between"},yg={class:"font-semibold text-gray-900"},hg={class:"flex justify-between"},_g={class:"font-semibold text-gray-900"},wg={class:"flex justify-between"},$g={class:"font-semibold text-gray-900"},kg={class:"flex justify-between"},Cg={class:"font-semibold text-gray-900 font-mono text-sm"},Pg={class:"flex justify-between text-lg"},jg={class:"font-bold text-gray-900"},qg={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Vg={class:"flex items-start"},Ag={class:"text-sm text-blue-700"},zg={class:"space-y-1 text-xs"},Sg={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Mg={class:"flex items-start"},Eg={class:"text-sm text-red-700"},Tg={class:"text-xs"},Lg={key:3,class:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6"},Rg={class:"flex items-start"},Fg={key:4,class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6"},Ig={class:"flex items-start"},Dg={class:"space-y-3"},Ng=["disabled"],Ug={key:0},Bg={key:1},Gg={__name:"PaymentConfirmation",setup(z){const P=le(),h=J(),{get:b,post:m}=U(),r=C("pending"),v=C(90),_=C(!1),o=C(""),g=C(null),p=C(null),f=C(""),x=C(""),n=C(0),j=C(""),q=C(""),$=()=>{switch(r.value){case"pending":return{bg:"bg-blue-100",icon:"text-blue-600"};case"success":return{bg:"bg-green-100",icon:"text-green-600"};case"failed":return{bg:"bg-red-100",icon:"text-red-600"};case"expired":return{bg:"bg-orange-100",icon:"text-orange-600"};default:return{bg:"bg-gray-100",icon:"text-gray-600"}}},y=()=>{switch(r.value){case"pending":return me;case"success":return ae;case"failed":case"expired":return _e;default:return me}},k=()=>{switch(r.value){case"pending":return"Paiement en cours...";case"success":return"Paiement réussi !";case"failed":return"Paiement échoué";case"expired":return"Paiement expiré";default:return"Traitement..."}},s=()=>{switch(r.value){case"pending":return"Confirmez le paiement sur votre téléphone";case"success":return"Votre paiement a été traité avec succès";case"failed":return"Une erreur est survenue lors du paiement";case"expired":return"Le délai de paiement a expiré";default:return"Veuillez patienter..."}},l=B=>{const S=Math.floor(B/60),Ye=B%60;return`${S}:${Ye.toString().padStart(2,"0")}`},t=B=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(B).replace("XAF","FCFA"),w=()=>{g.value=setInterval(()=>{v.value>0?v.value--:(r.value="expired",clearInterval(g.value),clearInterval(p.value))},1e3)},M=async()=>{if(f.value){_.value=!0;try{const B=await b(`/payments/status/${f.value}`);if(B.success){const S=B.data.status;S==="paid"?(r.value="success",clearInterval(g.value),clearInterval(p.value),window.$toast&&window.$toast.success("Paiement confirmé avec succès !","✅ Succès")):S==="failed"&&(r.value="failed",o.value=B.data.error_message||"",clearInterval(g.value),clearInterval(p.value))}}catch(B){console.error("Error checking payment status:",B)}finally{_.value=!1}}},L=()=>{p.value=setInterval(()=>{r.value==="pending"&&M()},5e3)},ne=async()=>{if(!(!f.value||!q.value)){_.value=!0;try{const B=await m("/payments/retry-ussd",{bill_id:f.value,operator:q.value});B.success?(r.value="pending",v.value=90,w(),L(),window.$toast&&window.$toast.success("Push USSD relancé avec succès !","✅ Succès")):window.$toast&&window.$toast.error(B.message||"Erreur lors du relancement du push USSD","❌ Erreur")}catch(B){console.error("Error retrying USSD push:",B),window.$toast&&window.$toast.error("Erreur lors du relancement du push USSD","❌ Erreur")}finally{_.value=!1}}},Xe=()=>{h.push({name:"payment.phone",query:P.query})},Je=()=>{h.push("/profile")},Qe=()=>{h.push("/")};return H(()=>{if(f.value=P.query.bill_id||"",x.value=P.query.reference||"",n.value=parseFloat(P.query.amount)||0,j.value=P.query.phone||"",q.value=P.query.operator||"",!f.value||!n.value){h.push("/");return}w(),L(),M()}),Ne(()=>{g.value&&clearInterval(g.value),p.value&&clearInterval(p.value)}),(B,S)=>(a(),i("div",lg,[e("div",ig,[e("div",ng,[e("div",dg,[e("img",{src:c(ie),alt:"Koumbaya",class:"h-12 mx-auto"},null,8,cg)]),e("div",{class:E(["w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center",$().bg])},[(a(),W(vt(y()),{class:E(["h-10 w-10",$().icon])},null,8,["class"]))],2),e("h1",ug,d(k()),1),e("p",mg,d(s()),1)]),r.value==="pending"?(a(),i("div",pg,[e("div",xg,[e("div",{class:E(["text-4xl font-bold mb-2",v.value<=30?"text-red-600":"text-blue-600"])},d(l(v.value)),3),S[0]||(S[0]=e("div",{class:"text-sm text-gray-500 mb-4"}," Temps restant pour confirmer le paiement ",-1)),e("div",gg,[e("div",{class:E(["h-2 rounded-full transition-all duration-1000",v.value<=30?"bg-red-500":"bg-blue-500"]),style:de({width:v.value/90*100+"%"})},null,6)]),S[1]||(S[1]=e("div",{class:"text-xs text-gray-400"}," Le paiement expirera automatiquement à la fin du timer ",-1))])])):A("",!0),e("div",vg,[S[8]||(S[8]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Détails du paiement",-1)),e("div",fg,[e("div",bg,[S[2]||(S[2]=e("span",{class:"text-gray-600"},"Montant",-1)),e("span",yg,d(t(n.value)),1)]),e("div",hg,[S[3]||(S[3]=e("span",{class:"text-gray-600"},"Opérateur",-1)),e("span",_g,d(q.value==="airtel"?"Airtel Money":"Moov Money"),1)]),e("div",wg,[S[4]||(S[4]=e("span",{class:"text-gray-600"},"Téléphone",-1)),e("span",$g,"+241 "+d(j.value),1)]),e("div",kg,[S[5]||(S[5]=e("span",{class:"text-gray-600"},"Référence",-1)),e("span",Cg,d(x.value),1)]),S[7]||(S[7]=e("hr",{class:"my-3"},null,-1)),e("div",Pg,[S[6]||(S[6]=e("span",{class:"font-semibold text-gray-900"},"Total",-1)),e("span",jg,d(t(n.value)),1)])])]),r.value==="pending"?(a(),i("div",qg,[e("div",Vg,[u(c(Me),{class:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),e("div",Ag,[S[13]||(S[13]=e("p",{class:"font-medium mb-2"},"Instructions importantes :",-1)),S[14]||(S[14]=e("div",{class:"bg-white rounded-lg p-3 mb-3 border border-blue-200"},[e("p",{class:"font-semibold text-blue-800 text-sm"},"📱 Gardez votre téléphone à portée de main"),e("p",{class:"text-xs text-blue-600 mt-1"},"Vous devez valider la transaction avec votre code PIN secret")],-1)),e("ol",zg,[S[9]||(S[9]=e("li",null,"1. Vous allez recevoir un code USSD sur votre téléphone",-1)),S[10]||(S[10]=e("li",null,"2. Composez le code reçu sur votre clavier",-1)),e("li",null,"3. Suivez les instructions de "+d(q.value==="airtel"?"Airtel Money":"Moov Money"),1),S[11]||(S[11]=e("li",null,"4. Confirmez le paiement avec votre code PIN secret",-1)),S[12]||(S[12]=e("li",null,"5. Le paiement sera confirmé automatiquement",-1))])])])])):r.value==="failed"?(a(),i("div",Sg,[e("div",Mg,[u(c(_e),{class:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),e("div",Eg,[S[15]||(S[15]=e("p",{class:"font-medium mb-2"},"Le paiement a échoué",-1)),e("p",Tg,d(o.value||"Veuillez réessayer ou vérifier votre solde."),1)])])])):r.value==="expired"?(a(),i("div",Lg,[e("div",Rg,[u(c(me),{class:"h-5 w-5 text-orange-500 mt-0.5 mr-3 flex-shrink-0"}),S[16]||(S[16]=e("div",{class:"text-sm text-orange-700"},[e("p",{class:"font-medium mb-2"},"Paiement expiré"),e("p",{class:"text-xs"},"Le délai de 90 secondes est écoulé. Veuillez recommencer le processus.")],-1))])])):r.value==="success"?(a(),i("div",Fg,[e("div",Ig,[u(c(ae),{class:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),S[17]||(S[17]=e("div",{class:"text-sm text-green-700"},[e("p",{class:"font-medium mb-2"},"Paiement confirmé !"),e("p",{class:"text-xs"},"Votre commande a été traitée avec succès. Vous allez recevoir une confirmation par email.")],-1))])])):A("",!0),e("div",Dg,[r.value==="success"?(a(),i("button",{key:0,onClick:Je,class:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all duration-200 flex items-center justify-center"},[u(c(ft),{class:"h-5 w-5 mr-2"}),S[18]||(S[18]=V(" Voir mes achats ",-1))])):A("",!0),r.value==="expired"?(a(),i("button",{key:1,onClick:ne,disabled:_.value,class:"w-full py-3 px-4 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-300 text-white font-semibold rounded-lg transition-all duration-200 flex items-center justify-center"},[_.value?(a(),i("span",Ug,S[19]||(S[19]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"},null,-1),V(" Relance... ",-1)]))):(a(),i("span",Bg,[u(c(Fe),{class:"h-5 w-5 mr-2"}),S[20]||(S[20]=V(" Relancer le push USSD ",-1))]))],8,Ng)):A("",!0),r.value==="failed"?(a(),i("button",{key:2,onClick:Xe,class:"w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-all duration-200 flex items-center justify-center"},[u(c(Fe),{class:"h-5 w-5 mr-2"}),S[21]||(S[21]=V(" Réessayer le paiement ",-1))])):A("",!0),e("button",{onClick:Qe,class:"w-full py-3 px-4 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors"}," Retour à l'accueil ")])])]))}},Og=[{path:"/register",name:"register",component:Ro,meta:{requiresGuest:!0}},{path:"/verify-email",name:"verify-email",component:Jo},{path:"/forgot-password",name:"forgot-password",component:Pr,meta:{requiresGuest:!0}},{path:"/reset-password-verify",name:"reset-password-verify",component:la,meta:{requiresGuest:!0}},{path:"/",component:zt,children:[{path:"",name:"home",component:Il},{path:"results",name:"public.results",component:Xi},{path:"verify",name:"public.verify",component:Gn},{path:"history",name:"public.history",component:bc},{path:"login",name:"login",component:Us,meta:{requiresGuest:!0}},{path:"products",name:"public.products",component:Hc},{path:"products/:id",name:"public.product.detail",component:S0,props:!0},{path:"how-it-works",name:"public.how-it-works",component:tp},{path:"contact",name:"public.contact",component:Wp}]},{path:"/customer",component:St,meta:{requiresAuth:!0},children:[{path:"",name:"customer.dashboard",component:Tt},{path:"products",name:"customer.products",component:Lt},{path:"products/:id",name:"customer.product.detail",component:Rt,props:!0},{path:"profile",name:"customer.profile",component:Ft},{path:"tickets",name:"customer.tickets",component:It},{path:"refunds",name:"customer.refunds",component:Dt},{path:"orders",name:"customer.orders",component:Nt},{path:"payments",name:"customer.payments",component:Ut},{path:"orders/:id",name:"customer.order.detail",component:Bt,props:!0},{path:"payments/:id",name:"customer.payment.detail",component:Gt,props:!0}]},{path:"/payment/method",name:"payment.method",component:Fx,meta:{requiresAuth:!0}},{path:"/payment/phone",name:"payment.phone",component:ag,meta:{requiresAuth:!0}},{path:"/payment/confirmation",name:"payment.confirmation",component:Gg,meta:{requiresAuth:!0}},{path:"/admin",component:Mt,meta:{requiresAuth:!0},children:[{path:"",name:"admin.dashboard",component:wt},{path:"users",name:"admin.users",component:$t},{path:"products",name:"admin.products",component:kt},{path:"lotteries",name:"admin.lotteries",component:Ct},{path:"settings",name:"admin.settings",component:Pt},{path:"profile",name:"admin.profile",component:jt},{path:"refunds",name:"admin.refunds",component:qt},{path:"payments",name:"admin.payments",component:Vt}]},{path:"/merchant",component:()=>X(()=>import("./common-components-C44zC4g7.js").then(z=>z.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),meta:{requiresAuth:!0,role:"MERCHANT"},children:[{path:"",redirect:"dashboard"},{path:"dashboard",name:"merchant.dashboard",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.D),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))},{path:"products",name:"merchant.products",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.P),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))},{path:"products/create",name:"merchant.products.create",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.C),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))},{path:"products/:id/edit",name:"merchant.products.edit",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.E),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11])),props:!0},{path:"orders",name:"merchant.orders",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.O),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))},{path:"lotteries",name:"merchant.lotteries",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.L),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))},{path:"lotteries/:id",name:"merchant.lottery.view",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.a),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11])),props:!0},{path:"analytics",name:"merchant.analytics",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.A),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))},{path:"settings",name:"merchant.settings",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.S),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))},{path:"profile",name:"merchant.profile",component:()=>X(()=>import("./merchant-pages-3ekRYSg6.js").then(z=>z.b),__vite__mapDeps([9,3,1,4,0,2,5,6,7,8,10,11]))}]}],Ee=bt({history:yt(),routes:Og});Ee.beforeEach((z,P,h)=>{const b=te();if(z.meta.requiresAuth&&!b.isAuthenticated){h({name:"login"});return}if(z.meta.requiresGuest&&b.isAuthenticated){const m=b.getDefaultRedirect();h({name:m});return}if(z.meta.role&&b.isAuthenticated&&!Wg(z.meta.role,b)){const r=b.getDefaultRedirect();h({name:r});return}h()});function Wg(z,P){switch(z){case"ADMIN":return P.isAdmin;case"MERCHANT":return P.isMerchant;case"CUSTOMER":return P.isCustomer;default:return!1}}const Hg={id:"app"},Kg={__name:"App",setup(z){const P=te();return H(()=>{P.checkAuth()}),(h,b)=>{const m=ee("router-view");return a(),i("div",Hg,[u(m),u(Et,{ref:"toastRef"},null,512)])}}},Te=ht(Kg),Xg=_t();window.router=Ee;Te.use(Xg);Te.use(Ee);Te.mount("#app");
