import{r as D,Q as E,R as de,c as j,i as ce,b as l,e,g as v,w as ue,h as me,F as A,A as L,k as c,W as m,X as x,t as n,a1 as S,u as p,y as f,a$ as q,m as b,ai as R,f as T,a0 as pe,aw as $,ax as ge,al as xe,aY as N,ac as fe,z as be,q as ye,o as i,B as _e,P as ve}from"./vendor-DYWEiNpj.js";import{a as ke,u as we}from"./app-BjrUq9Ql.js";import{I as he}from"./ImageUpload-tHmcQmmH.js";const Fe={class:"max-w-4xl mx-auto space-y-6"},Ce={class:"flex items-center justify-between"},Ve={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},De={class:"flex items-center justify-between mb-8"},Pe={class:"flex items-center"},Me={key:1},je={class:"ml-3"},Ue={class:"text-xs text-gray-700"},Ie={key:0,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ae={class:"lg:col-span-2"},Le={key:0,class:"mt-1 text-sm text-red-600"},Se={key:1,class:"mt-1 text-sm text-orange-600"},qe={class:"lg:col-span-2"},Re={key:0,class:"mt-1 text-sm text-red-600"},Te={key:1,class:"mt-1 text-sm text-orange-600"},$e=["disabled"],Ne={key:0,disabled:""},ze={key:1,disabled:""},Be=["value"],Ge={class:"text-xs text-gray-500 mt-1"},Oe={key:0,class:"mt-1 text-sm text-red-600"},Je={class:"lg:col-span-2"},We={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},He={class:"flex items-center space-x-3"},Ke={key:0,class:"w-2.5 h-2.5 bg-[#0099cc] rounded-full"},Qe={class:"flex items-center space-x-3"},Xe={key:0,class:"w-2.5 h-2.5 bg-purple-500 rounded-full"},Ye={key:0,class:"mt-1 text-sm text-red-600"},Ze={key:1,class:"mt-1 text-sm text-orange-600"},et={key:2,class:"mt-2 bg-blue-50 border border-blue-200 rounded-lg p-2"},tt={key:1,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},st={class:"space-y-6"},ot={class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},rt={class:"flex items-start space-x-3"},it={key:2,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},lt={key:0},at={class:"bg-blue-50 border border-blue-200 rounded-xl p-6 text-center"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},dt={class:"bg-white rounded-lg p-3"},ct={class:"font-semibold text-[#0099cc]"},ut={class:"bg-white rounded-lg p-3"},mt={class:"font-semibold text-gray-800"},pt={key:1},gt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},xt={key:0,class:"mt-1 text-sm text-red-600"},ft={key:1,class:"mt-1 text-sm text-orange-600"},bt={key:2,class:"text-sm text-gray-700 mt-1"},yt={key:0},_t={key:1},vt={key:0,class:"mt-1 text-sm text-red-600"},kt={key:1,class:"mt-1 text-sm text-orange-600"},wt={key:2,class:"text-sm text-gray-700 mt-1"},ht=["min"],Ft={key:0,class:"mt-1 text-sm text-red-600"},Ct={key:1,class:"mt-1 text-sm text-orange-600"},Vt=["max"],Dt={key:0,class:"mt-1 text-sm text-red-600"},Pt={key:1,class:"mt-1 text-sm text-orange-600"},Mt={key:2,class:"text-sm text-gray-700 mt-1"},jt={class:"lg:col-span-2"},Ut={class:"bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-xl p-6"},It={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Et={class:"text-center"},At={class:"text-2xl font-bold text-[#0099cc]"},Lt={class:"text-center"},St={class:"text-2xl font-bold text-blue-600"},qt={class:"text-center"},Rt={class:"text-2xl font-bold text-purple-600"},Tt={key:3,class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},$t={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Nt={class:"space-y-3"},zt={class:"flex justify-between"},Bt={class:"font-medium"},Gt={class:"flex justify-between"},Ot={class:"font-medium"},Jt={class:"flex justify-between"},Wt={class:"font-medium"},Ht={class:"flex justify-between"},Kt={class:"font-medium"},Qt={class:"flex justify-between"},Xt={class:"font-medium"},Yt={class:"font-semibold text-gray-900 mb-4"},Zt={key:0,class:"space-y-3"},es={class:"flex justify-between"},ts={class:"font-medium"},ss={class:"flex justify-between"},os={class:"font-medium"},rs={class:"flex justify-between border-t pt-3"},is={class:"font-bold text-[#0099cc]"},ls={key:1,class:"space-y-3"},as={class:"flex justify-between"},ns={class:"font-medium"},ds={class:"flex justify-between"},cs={class:"font-medium"},us={class:"flex justify-between"},ms={class:"font-medium"},ps={class:"flex justify-between"},gs={class:"font-medium"},xs={class:"flex justify-between border-t pt-3"},fs={class:"font-bold text-[#0099cc]"},bs={class:"mt-8 p-4 bg-gray-100 rounded-xl"},ys={class:"flex items-start space-x-3"},_s={class:"text-sm text-gray-900"},vs={class:"flex justify-between items-center bg-white rounded-xl shadow-lg border border-gray-100 p-6"},ks={key:1},ws={class:"text-sm text-gray-700"},hs=["disabled"],Fs=["disabled"],Cs={key:0,class:"flex items-center"},Vs={key:1,class:"flex items-center"},Es={__name:"CreateProduct",setup(Ds){const z=ye(),{get:B,post:U,loading:k}=ke(),{user:Ps,isIndividualSeller:w,isBusinessSeller:Ms}=we(),u=D(1),h=D(!1);D(null);const y=[{id:1,title:"Informations",description:"Détails du produit",icon:R},{id:2,title:"Photos",description:"Images du produit",icon:ge},{id:3,title:"Tombola",description:"Configuration",icon:xe},{id:4,title:"Publication",description:"Vérification",icon:N}],_=D([]),s=E({name:"",description:"",category_id:"",condition:"",sale_mode:"direct",price:"",location:"",images:[],imageUrls:[],ticket_price:"",total_tickets:"",min_tickets:"",end_date:"",terms_accepted:!1,duration_days:7});de(()=>s.sale_mode,o=>{o==="lottery"&&w.value&&(s.total_tickets="500")});const a=E({name:"",description:"",category_id:"",condition:"",value:"",location:"",images:"",ticket_price:"",total_tickets:"",min_tickets:"",end_date:""}),G=j(()=>{const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().slice(0,16)}),C=j(()=>{const o=(s.ticket_price||0)*(s.total_tickets||0),t=o*.05,d=o-t,r=s.price?Math.round((d-s.price)/s.price*100):0;return{totalRevenue:o,platformFee:t,netRevenue:d,profitMargin:r}}),P=j(()=>{switch(u.value){case 1:return O();case 2:return!0;case 3:return J();case 4:return s.terms_accepted;default:return!1}}),O=()=>{const o=s.name&&s.description&&s.category_id&&s.condition&&s.sale_mode&&s.price&&s.location&&parseFloat(s.price)>=1e3;return o&&(a.name="",a.description="",a.category_id="",a.condition="",a.price="",a.location=""),o},J=()=>{if(s.sale_mode==="direct")return!0;if(s.sale_mode==="lottery"){const o=s.ticket_price&&s.total_tickets&&s.min_tickets&&s.end_date&&parseFloat(s.ticket_price)>=100&&parseInt(s.total_tickets)>=10&&parseInt(s.min_tickets)>=10&&parseInt(s.min_tickets)<=parseInt(s.total_tickets)&&new Date(s.end_date)>new Date;return o&&(a.ticket_price="",a.total_tickets="",a.min_tickets="",a.end_date=""),o}return!1},W=()=>{P.value&&u.value<y.length&&u.value++},H=()=>{u.value>1&&u.value--},K=({index:o,url:t,response:d})=>{console.log("Image uploadée avec succès:",{index:o,url:t,response:d}),M(`Image ${o+1} uploadée avec succès`)},Q=({index:o,error:t})=>{console.error("Erreur upload image:",{index:o,error:t}),F(`Erreur lors de l'upload de l'image ${o+1}: ${t.message}`)},X=({index:o,progress:t})=>{console.log(`Upload image ${o+1}: ${t}%`)},I=()=>{w.value&&s.sale_mode==="lottery"&&(s.total_tickets="500")},g=o=>new Intl.NumberFormat("fr-FR").format(o||0),Y=o=>o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",Z=o=>({new:"Neuf",used:"Occasion",refurbished:"Reconditionné"})[o]||o,ee=async()=>{h.value=!0,te();try{const o=Math.ceil(s.price/s.ticket_price),t={name:s.name,description:s.description,category_id:parseInt(s.category_id),price:parseFloat(s.price),sale_mode:s.sale_mode,images:s.imageUrls.length>0?s.imageUrls:s.images.map(r=>r.preview)};s.sale_mode==="lottery"&&(t.ticket_price=parseFloat(s.ticket_price),t.min_participants=parseInt(s.min_tickets));const d=await U("/products",t);if(d.product){if(s.sale_mode==="lottery"){const r={duration_days:oe()};try{await U(`/products/${d.product.id}/create-lottery`,r),M("Produit et tombola créés avec succès !")}catch(V){console.error("Error creating lottery:",V),re("Produit créé mais erreur lors de la création de la tombola")}}else M("Produit créé avec succès !");setTimeout(()=>{z.push("/merchant/products")},1500)}}catch(o){console.error("Error creating product:",o),se(o)}finally{h.value=!1}},te=()=>{Object.keys(a).forEach(o=>{a[o]=""})},se=o=>{if(o.response?.data?.errors){const t=o.response.data.errors;Object.keys(t).forEach(d=>{a[d]!==void 0&&(a[d]=t[d][0])}),F("Veuillez corriger les erreurs dans le formulaire")}else o.response?.data?.message?F(o.response.data.message):F("Une erreur est survenue. Veuillez réessayer.")},oe=()=>{if(!s.end_date)return 7;const o=new Date(s.end_date),d=Math.abs(o-new Date),r=Math.ceil(d/(1e3*60*60*24));return Math.min(Math.max(r,1),30)},M=o=>{window.$toast&&window.$toast.success(o,"✅ Succès")},F=o=>{window.$toast&&window.$toast.error(o,"❌ Erreur")},re=o=>{window.$toast&&window.$toast.warning(o,"⚠️ Attention")},ie=()=>{if(s.end_date){const o=new Date(s.end_date),t=new Date,d=new Date;d.setDate(d.getDate()+30),o<=t?a.end_date="La date de fin doit être dans le futur":o>d?a.end_date="La date de fin ne peut pas dépasser 30 jours":a.end_date=""}},le=()=>{s.ticket_price&&(parseFloat(s.ticket_price)<100?a.ticket_price="Le prix minimum est de 100 FCFA":a.ticket_price="")},ae=()=>{if(s.total_tickets){const o=parseInt(s.total_tickets);if(w.value){s.total_tickets="500",a.total_tickets="";return}o<10?a.total_tickets="Minimum 10 tickets requis":o>1e4?a.total_tickets="Maximum 10,000 tickets autorisés":a.total_tickets=""}},ne=async()=>{try{console.log("Loading categories...");const o=await B("/categories");console.log("Categories response:",o),console.log("Response keys:",Object.keys(o)),o&&o.categories?(_.value=o.categories,console.log("Categories loaded:",_.value.length,"items")):o&&o.data?(_.value=o.data,console.log("Categories loaded from data:",_.value.length,"items")):console.log("No categories in response or response is null")}catch(o){console.error("Error loading categories:",o),F("Erreur lors du chargement des catégories")}};return ce(()=>{ne(),console.log("CreateProduct page loaded"),w.value&&(s.total_tickets="500")}),(o,t)=>{const d=me("router-link");return i(),l("div",Fe,[e("div",Ce,[t[16]||(t[16]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Publier un Nouveau Produit"),e("p",{class:"mt-2 text-gray-600"},"Créez votre tombola et mettez votre produit en vente")],-1)),v(d,{to:"/merchant/products",class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},{default:ue(()=>[v(p($),{class:"w-4 h-4 mr-2"}),t[15]||(t[15]=b(" Retour aux produits ",-1))]),_:1,__:[15]})]),e("div",Ve,[e("div",De,[(i(),l(A,null,L(y,(r,V)=>e("div",{key:r.id,class:f(["flex items-center",{"flex-1":V<y.length-1}])},[e("div",Pe,[e("div",{class:f(["flex items-center justify-center w-10 h-10 rounded-full border-2 font-medium text-sm transition-all",u.value>=r.id?"border-[#0099cc] bg-[#0099cc] text-white":"border-gray-300 bg-white text-gray-600"])},[u.value>=r.id?(i(),_e(ve(r.icon),{key:0,class:"w-5 h-5"})):(i(),l("span",Me,n(r.id),1))],2),e("div",je,[e("p",{class:f(["text-sm font-medium",u.value>=r.id?"text-[#0099cc]":"text-gray-600"])},n(r.title),3),e("p",Ue,n(r.description),1)])]),V<y.length-1?(i(),l("div",{key:0,class:f(["flex-1 h-0.5 mx-4 transition-all",u.value>r.id?"bg-[#0099cc]":"bg-gray-200"])},null,2)):c("",!0)],2)),64))])]),e("form",{onSubmit:be(ee,["prevent"]),class:"space-y-6"},[u.value===1?(i(),l("div",Ie,[t[29]||(t[29]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations de base",-1)),e("div",Ee,[e("div",Ae,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom du produit * ",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.name=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: iPhone 15 Pro Max 256GB"},null,512),[[x,s.name]]),a.name?(i(),l("p",Le,n(a.name),1)):s.name&&s.name.length<3?(i(),l("p",Se,"Le nom doit contenir au moins 3 caractères")):c("",!0)]),e("div",qe,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Description * ",-1)),m(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.description=r),rows:"4",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Décrivez votre produit en détail..."},null,512),[[x,s.description]]),a.description?(i(),l("p",Re,n(a.description),1)):s.description&&s.description.length<10?(i(),l("p",Te,"La description doit contenir au moins 10 caractères")):c("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Catégorie * ",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.category_id=r),required:"",disabled:p(k),class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all disabled:opacity-50",style:{color:"#5f5f5f"}},[t[19]||(t[19]=e("option",{value:""},"Sélectionner une catégorie",-1)),p(k)?(i(),l("option",Ne,"Chargement des catégories...")):c("",!0),_.value.length===0&&!p(k)?(i(),l("option",ze,"Aucune catégorie disponible")):c("",!0),(i(!0),l(A,null,L(_.value,r=>(i(),l("option",{key:r.id,value:r.id},n(r.name),9,Be))),128))],8,$e),[[S,s.category_id]]),e("p",Ge," Debug: "+n(_.value.length)+" catégories chargées ",1),a.category_id?(i(),l("p",Oe,n(a.category_id),1)):c("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Condition * ",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.condition=r),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},t[21]||(t[21]=[e("option",{value:""},"État du produit",-1),e("option",{value:"new"},"Neuf",-1),e("option",{value:"used"},"Occasion",-1),e("option",{value:"refurbished"},"Reconditionné",-1)]),512),[[S,s.condition]])]),e("div",Je,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Mode de vente * ",-1)),e("div",We,[e("label",{class:f(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-[#0099cc] bg-blue-50":s.sale_mode==="direct"}])},[m(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=r=>s.sale_mode=r),value:"direct",class:"sr-only"},null,512),[[q,s.sale_mode]]),e("div",He,[e("div",{class:f(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="direct"?"border-[#0099cc]":"border-gray-300"])},[s.sale_mode==="direct"?(i(),l("div",Ke)):c("",!0)],2),t[23]||(t[23]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Vente directe"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent directement")],-1))])],2),e("label",{class:f(["flex items-center p-4 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-colors",{"border-purple-500 bg-purple-50":s.sale_mode==="lottery"}])},[m(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>s.sale_mode=r),value:"lottery",class:"sr-only"},null,512),[[q,s.sale_mode]]),e("div",Qe,[e("div",{class:f(["w-5 h-5 rounded-full border-2 flex items-center justify-center",s.sale_mode==="lottery"?"border-purple-500":"border-gray-300"])},[s.sale_mode==="lottery"?(i(),l("div",Xe)):c("",!0)],2),t[24]||(t[24]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Tombola"),e("p",{class:"text-sm text-gray-700"},"Les clients achètent des tickets")],-1))])],2)])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Valeur du produit (FCFA) * ",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s.price=r),type:"number",required:"",min:"0",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 800000"},null,512),[[x,s.price]]),a.price?(i(),l("p",Ye,n(a.price),1)):s.price&&parseFloat(s.price)<1e3?(i(),l("p",Ze,"La valeur minimum est de 1000 FCFA")):c("",!0),p(w)&&s.sale_mode==="lottery"&&s.price&&parseFloat(s.price)<1e5?(i(),l("div",et,t[26]||(t[26]=[e("p",{class:"text-xs text-blue-800"},[e("strong",null,"Recommandation:"),b(" Pour un vendeur individuel avec 500 tickets fixes, un prix produit minimum de 100,000 FCFA est recommandé pour garantir un prix de ticket d'au moins 200 FCFA. ")],-1)]))):c("",!0)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Localisation * ",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.location=r),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: Libreville, Gabon"},null,512),[[x,s.location]])])])])):c("",!0),u.value===2?(i(),l("div",tt,[t[31]||(t[31]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Photos du produit",-1)),e("div",st,[v(he,{modelValue:s.imageUrls,"onUpdate:modelValue":t[8]||(t[8]=r=>s.imageUrls=r),"upload-endpoint":"/products/images","max-files":10,"max-size-m-b":5,"help-text":"JPG, PNG, WebP - Max 5MB chacune - La première image sera la photo principale",onSuccess:K,onError:Q,onProgress:X},null,8,["modelValue"]),e("div",ot,[e("div",rt,[v(p(R),{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),t[30]||(t[30]=e("div",{class:"text-sm text-blue-700"},[e("p",{class:"font-medium mb-1"},"Conseils pour de bonnes photos :"),e("ul",{class:"space-y-1 text-sm"},[e("li",null,"• Utilisez un bon éclairage naturel"),e("li",null,"• Prenez plusieurs angles du produit"),e("li",null,"• La première image sera la photo principale"),e("li",null,"• Maximum 10 images par produit"),e("li",null,"• Formats acceptés : JPG, PNG, WebP"),e("li",null,"• Taille maximum : 5MB par image")])],-1))])])])])):c("",!0),u.value===3?(i(),l("div",it,[s.sale_mode==="direct"?(i(),l("div",lt,[t[36]||(t[36]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de vente directe",-1)),e("div",at,[t[34]||(t[34]=T('<div class="flex items-center justify-center space-x-3 mb-4"><div class="w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><h3 class="text-lg font-semibold text-gray-900">Vente directe configurée</h3><p class="text-gray-600">Votre produit sera disponible à l&#39;achat immédiat</p></div></div>',1)),e("div",nt,[e("div",dt,[t[32]||(t[32]=e("p",{class:"text-gray-600"},"Prix de vente",-1)),e("p",ct,n(g(s.price))+" FCFA",1)]),e("div",ut,[t[33]||(t[33]=e("p",{class:"text-gray-600"},"Commission plateforme",-1)),e("p",mt,n(g(s.price*.05))+" FCFA (5%)",1)])]),t[35]||(t[35]=e("p",{class:"text-sm text-gray-700 mt-4"}," Les clients pourront acheter votre produit directement au prix affiché. ",-1))])])):s.sale_mode==="lottery"?(i(),l("div",pt,[t[46]||(t[46]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Configuration de la tombola",-1)),e("div",gt,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Prix par ticket (FCFA) * ",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.ticket_price=r),type:"number",required:"",min:"100",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 2500",onInput:I,onBlur:le},null,544),[[x,s.ticket_price]]),a.ticket_price?(i(),l("p",xt,n(a.ticket_price),1)):s.ticket_price&&parseFloat(s.ticket_price)<100?(i(),l("p",ft,"Le prix minimum est de 100 FCFA")):(i(),l("p",bt,"Minimum 100 FCFA"))]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre de tickets * ",-1)),p(w)?(i(),l("div",yt,[m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.total_tickets=r),type:"number",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-100 cursor-not-allowed",style:{color:"#5f5f5f"}},null,512),[[x,s.total_tickets]]),t[38]||(t[38]=T('<div class="mt-2 bg-yellow-50 border border-yellow-200 rounded-lg p-3"><div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-yellow-800"><strong>Profil Vendeur Individuel:</strong> Le nombre de tickets est fixé à 500 pour garantir un prix de ticket minimum de 200 FCFA. </p></div></div></div>',1))])):(i(),l("div",_t,[m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>s.total_tickets=r),type:"number",required:"",min:"10",max:"10000",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 400",onInput:I,onBlur:ae},null,544),[[x,s.total_tickets]]),a.total_tickets?(i(),l("p",vt,n(a.total_tickets),1)):s.total_tickets&&(parseInt(s.total_tickets)<10||parseInt(s.total_tickets)>1e4)?(i(),l("p",kt,"Entre 10 et 10,000 tickets")):(i(),l("p",wt,"Entre 10 et 10,000 tickets"))]))]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin de vente * ",-1)),m(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s.end_date=r),type:"datetime-local",required:"",min:G.value,onChange:ie,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},null,40,ht),[[x,s.end_date]]),a.end_date?(i(),l("p",Ft,n(a.end_date),1)):s.end_date&&new Date(s.end_date)<=new Date?(i(),l("p",Ct,"La date de fin doit être dans le futur")):c("",!0)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tickets minimum pour valider * ",-1)),m(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>s.min_tickets=r),type:"number",required:"",max:s.total_tickets,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Ex: 200"},null,8,Vt),[[x,s.min_tickets]]),a.min_tickets?(i(),l("p",Dt,n(a.min_tickets),1)):s.min_tickets&&s.total_tickets&&parseInt(s.min_tickets)>parseInt(s.total_tickets)?(i(),l("p",Pt,"Ne peut pas dépasser le nombre total de tickets")):(i(),l("p",Mt,"Si pas atteint, remboursement automatique"))]),e("div",jt,[e("div",Ut,[t[45]||(t[45]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Aperçu de la tombola",-1)),e("div",It,[e("div",Et,[e("p",At,n(g(C.value.totalRevenue)),1),t[42]||(t[42]=e("p",{class:"text-sm text-gray-600"},"Revenus potentiels",-1))]),e("div",Lt,[e("p",St,n(C.value.profitMargin)+"%",1),t[43]||(t[43]=e("p",{class:"text-sm text-gray-600"},"Marge bénéficiaire",-1))]),e("div",qt,[e("p",Rt,n(g(C.value.platformFee)),1),t[44]||(t[44]=e("p",{class:"text-sm text-gray-600"},"Frais plateforme (5%)",-1))])])])])])])):c("",!0)])):c("",!0),u.value===4?(i(),l("div",Tt,[t[65]||(t[65]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Vérification et publication",-1)),e("div",$t,[e("div",null,[t[52]||(t[52]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Résumé du produit",-1)),e("div",Nt,[e("div",zt,[t[47]||(t[47]=e("span",{class:"text-gray-800"},"Nom :",-1)),e("span",Bt,n(s.name),1)]),e("div",Gt,[t[48]||(t[48]=e("span",{class:"text-gray-800"},"Valeur :",-1)),e("span",Ot,n(g(s.price))+" FCFA",1)]),e("div",Jt,[t[49]||(t[49]=e("span",{class:"text-gray-800"},"Condition :",-1)),e("span",Wt,n(Z(s.condition)),1)]),e("div",Ht,[t[50]||(t[50]=e("span",{class:"text-gray-800"},"Localisation :",-1)),e("span",Kt,n(s.location),1)]),e("div",Qt,[t[51]||(t[51]=e("span",{class:"text-gray-800"},"Photos :",-1)),e("span",Xt,n(s.imageUrls?.length||s.images?.length||0)+" image(s)",1)])])]),e("div",null,[e("h3",Yt,n(s.sale_mode==="lottery"?"Configuration tombola":"Configuration vente"),1),s.sale_mode==="direct"?(i(),l("div",Zt,[t[56]||(t[56]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-[#0099cc]"},"Vente directe")],-1)),e("div",es,[t[53]||(t[53]=e("span",{class:"text-gray-800"},"Prix de vente :",-1)),e("span",ts,n(g(s.price))+" FCFA",1)]),e("div",ss,[t[54]||(t[54]=e("span",{class:"text-gray-800"},"Commission (5%) :",-1)),e("span",os,n(g(s.price*.05))+" FCFA",1)]),e("div",rs,[t[55]||(t[55]=e("span",{class:"text-gray-800"},"Vous recevrez :",-1)),e("span",is,n(g(s.price*.95))+" FCFA",1)])])):s.sale_mode==="lottery"?(i(),l("div",ls,[t[62]||(t[62]=e("div",{class:"flex justify-between"},[e("span",{class:"text-gray-800"},"Mode de vente :"),e("span",{class:"font-medium text-purple-600"},"Tombola")],-1)),e("div",as,[t[57]||(t[57]=e("span",{class:"text-gray-800"},"Prix/ticket :",-1)),e("span",ns,n(g(s.ticket_price))+" FCFA",1)]),e("div",ds,[t[58]||(t[58]=e("span",{class:"text-gray-800"},"Total tickets :",-1)),e("span",cs,n(s.total_tickets),1)]),e("div",us,[t[59]||(t[59]=e("span",{class:"text-gray-800"},"Minimum requis :",-1)),e("span",ms,n(s.min_tickets),1)]),e("div",ps,[t[60]||(t[60]=e("span",{class:"text-gray-800"},"Date de fin :",-1)),e("span",gs,n(Y(s.end_date)),1)]),e("div",xs,[t[61]||(t[61]=e("span",{class:"text-gray-800"},"Revenus max :",-1)),e("span",fs,n(g(C.value.totalRevenue))+" FCFA",1)])])):c("",!0)])]),e("div",bs,[e("label",ys,[m(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>s.terms_accepted=r),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded"},null,512),[[pe,s.terms_accepted]]),e("span",_s,[t[63]||(t[63]=b(" J'accepte les ",-1)),t[64]||(t[64]=e("a",{href:"#",class:"text-[#0099cc] hover:underline"},"conditions de vente",-1)),b(" et confirme que toutes les informations sont exactes. Je comprends que Koumbaya prélèvera des frais de 5% sur les revenus "+n(s.sale_mode==="lottery"?"de la tombola":"de la vente")+". ",1)])])])])):c("",!0),e("div",vs,[u.value>1?(i(),l("button",{key:0,onClick:H,type:"button",class:"inline-flex items-center px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[v(p($),{class:"w-4 h-4 mr-2"}),t[66]||(t[66]=b(" Précédent ",-1))])):(i(),l("div",ks)),e("div",ws," Étape "+n(u.value)+" sur "+n(y.length),1),u.value<y.length?(i(),l("button",{key:2,onClick:W,type:"button",class:"inline-flex items-center px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!P.value||p(k)},[t[67]||(t[67]=b(" Suivant ",-1)),v(p(fe),{class:"w-4 h-4 ml-2"})],8,hs)):c("",!0),u.value===y.length?(i(),l("button",{key:3,type:"submit",disabled:h.value||!P.value||p(k),class:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors"},[h.value||p(k)?(i(),l("span",Cs,[t[68]||(t[68]=e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1)),b(" "+n(h.value?"Publication...":"Chargement..."),1)])):(i(),l("span",Vs,[v(p(N),{class:"w-4 h-4 mr-2"}),t[69]||(t[69]=b(" Publier le produit ",-1))]))],8,Fs)):c("",!0)])],32)])}}};export{Es as default};
