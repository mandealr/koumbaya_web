import{r as u,c as G,j as H,b as n,e,l as y,g as p,i as A,u as f,az as O,x as V,aH as J,U as x,a0 as g,a6 as K,f as E,t as a,F as Q,z as W,y as N,ao as z,o as i,a3 as X,aU as Y,aO as Z}from"./vendor-Bi4LjMey.js";import{a as ee}from"./app-BX5nqjbU.js";const te={class:"px-6"},se={class:"mb-8"},le={class:"flex justify-between items-center"},ae={class:"flex gap-3"},oe={class:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6"},re={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ne={class:"bg-white rounded-lg shadow-sm border border-gray-200"},ie={class:"px-6 py-4 border-b border-gray-200"},de={class:"flex justify-between items-center"},ue={class:"text-lg font-semibold text-gray-900"},ce={key:0,class:"p-8 text-center"},me={key:1,class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200"},fe={class:"bg-white divide-y divide-gray-200"},xe={key:0},ve={class:"px-6 py-4 whitespace-nowrap"},ge={class:"flex items-center"},ye={class:"flex-shrink-0 h-10 w-10"},be={key:0,class:"h-10 w-10 rounded-full overflow-hidden"},_e=["src","alt"],he={key:1,class:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center"},we={class:"text-white font-semibold"},ke={class:"ml-4"},Ce={class:"text-sm font-medium text-gray-900"},Ve={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"text-sm text-gray-900"},je={class:"px-6 py-4 whitespace-nowrap"},Me={class:"text-sm text-gray-500"},$e={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"text-sm text-gray-500"},Ae={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Se={class:"flex space-x-2"},Le=["onClick"],Fe=["onClick"],Pe=["onClick"],Be={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},De={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Ie={class:"flex justify-between items-center"},Te={class:"text-xl font-bold text-gray-900"},qe={class:"bg-gray-50 rounded-lg p-4 mb-4"},Re={class:"grid grid-cols-2 gap-4"},Ge={class:"bg-blue-50 rounded-lg p-4 mb-4"},He={class:"bg-gray-50 rounded-lg p-4 mb-4"},Oe={class:"space-y-4"},Je={key:0,class:"bg-blue-50 border-l-4 border-blue-400 rounded-lg p-4 mb-4"},Ke={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Qe={class:"flex justify-end space-x-3 pt-4 border-t"},We=["disabled"],Xe={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Ye={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4"},Ze={class:"flex justify-between items-center"},et={class:"p-6 space-y-6"},tt={class:"flex items-center space-x-4"},st={key:0,class:"h-20 w-20 rounded-full overflow-hidden"},lt=["src","alt"],at={key:1,class:"h-20 w-20 rounded-full bg-blue-500 flex items-center justify-center"},ot={class:"text-white text-2xl font-semibold"},rt={class:"text-xl font-bold text-gray-900"},nt={class:"text-gray-600"},it={class:"grid grid-cols-2 gap-4"},dt={class:"font-medium"},ut={class:"font-medium"},ct={class:"font-medium"},xt={__name:"VendorManagement",setup(mt){const{get:S,post:L,put:F,del:P}=ee(),b=u(!1),_=u(!1),j=u([]),r=u(null),c=u(!1),w=u(!1),k=u(!1),v=u(""),d=u({search:"",status:""}),o=u({first_name:"",last_name:"",email:"",phone:"",company_name:"",password:"",password_confirmation:""}),C=G(()=>{let s=j.value;if(d.value.search){const t=d.value.search.toLowerCase();s=s.filter(l=>l.first_name?.toLowerCase().includes(t)||l.last_name?.toLowerCase().includes(t)||l.email?.toLowerCase().includes(t)||l.company_name?.toLowerCase().includes(t))}return d.value.status&&(d.value.status==="verified"?s=s.filter(t=>t.email_verified_at):d.value.status==="unverified"&&(s=s.filter(t=>!t.email_verified_at))),s}),h=async()=>{b.value=!0;try{const s=await S("/admin/vendors");s?.data?.vendors&&(j.value=s.data.vendors)}catch(s){console.error("Error loading vendors:",s)}finally{b.value=!1}},B=()=>{d.value={search:"",status:""}},D=()=>{o.value={first_name:"",last_name:"",email:"",phone:"",company_name:"",password:"",password_confirmation:""},v.value=""},m=()=>{c.value=!1,w.value=!1,k.value=!1,r.value=null,D()},I=async()=>{if(v.value="",!o.value.company_name?.trim()){v.value="Le nom de l'entreprise est obligatoire pour les vendeurs professionnels";return}_.value=!0;try{const s={first_name:o.value.first_name,last_name:o.value.last_name,email:o.value.email,phone:o.value.phone,company_name:o.value.company_name,role:"Business"};c.value?await L("/admin/vendors",s):await F(`/admin/vendors/${r.value.id}`,s),m(),h()}catch(s){v.value=s.response?.data?.message||"Une erreur est survenue"}finally{_.value=!1}},T=s=>{r.value=s,k.value=!0},q=s=>{r.value=s,o.value={first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone||"",company_name:s.company_name||"",password:"",password_confirmation:""},w.value=!0},R=async s=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le vendeur ${s.first_name} ${s.last_name} ?`))try{await P(`/admin/vendors/${s.id}`),h()}catch{alert("Erreur lors de la suppression")}},M=s=>(s.first_name?.[0]||"")+(s.last_name?.[0]||""),$=s=>s?new Date(s).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A";return H(()=>{h()}),(s,t)=>(i(),n("div",te,[e("div",se,[e("div",le,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des Vendeurs Pro"),e("p",{class:"mt-2 text-gray-600"},"Gérez les comptes vendeurs professionnels (Business)")],-1)),e("div",ae,[e("button",{onClick:t[0]||(t[0]=l=>c.value=!0),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center"},[p(f(O),{class:"w-5 h-5 mr-2"}),t[8]||(t[8]=A(" Créer un Vendeur Pro ",-1))]),e("button",{onClick:h,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"},[p(f(J),{class:V(["w-5 h-5 inline mr-2",b.value?"animate-spin":""])},null,8,["class"]),t[9]||(t[9]=A(" Recharger ",-1))])])])]),e("div",oe,[e("div",re,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>d.value.search=l),type:"text",placeholder:"Nom, email, entreprise...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,d.value.search]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>d.value.status=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},t[12]||(t[12]=[E('<option value="">Tous les statuts</option><option value="active">Actif</option><option value="inactive">Inactif</option><option value="verified">Vérifié</option><option value="unverified">Non vérifié</option>',5)]),512),[[K,d.value.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:B,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),e("div",ne,[e("div",ie,[e("div",de,[e("h3",ue," Vendeurs Pro ("+a(C.value.length)+") ",1)])]),b.value?(i(),n("div",ce,t[14]||(t[14]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)]))):(i(),n("div",me,[e("table",pe,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Entreprise"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Créé le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",fe,[C.value.length===0?(i(),n("tr",xe,t[15]||(t[15]=[e("td",{colspan:"7",class:"px-6 py-8 text-center text-gray-500"}," Aucun vendeur pro trouvé ",-1)]))):y("",!0),(i(!0),n(Q,null,W(C.value,l=>(i(),n("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",ve,[e("div",ge,[e("div",ye,[l.avatar_url?(i(),n("div",be,[e("img",{src:l.avatar_url,alt:l.first_name,class:"h-full w-full object-cover"},null,8,_e)])):(i(),n("div",he,[e("span",we,a(M(l)),1)]))]),e("div",ke,[e("div",Ce,a(l.first_name)+" "+a(l.last_name),1)])])]),e("td",Ve,[e("div",Ne,a(l.company_name||"N/A"),1)]),e("td",je,[e("div",Me,a(l.email),1)]),e("td",$e,[e("div",Ue,a(l.phone||"N/A"),1)]),e("td",Ae,[e("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",l.email_verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(l.email_verified_at?"Vérifié":"Non vérifié"),3)]),e("td",Ee,a($(l.created_at)),1),e("td",ze,[e("div",Se,[e("button",{onClick:U=>T(l),class:"text-blue-600 hover:text-blue-900",title:"Voir les détails"},[p(f(X),{class:"w-5 h-5"})],8,Le),e("button",{onClick:U=>q(l),class:"text-green-600 hover:text-green-900",title:"Modifier"},[p(f(Y),{class:"w-5 h-5"})],8,Fe),e("button",{onClick:U=>R(l),class:"text-red-600 hover:text-red-900",title:"Supprimer"},[p(f(Z),{class:"w-5 h-5"})],8,Pe)])])]))),128))])])]))]),c.value||w.value?(i(),n("div",{key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:N(m,["self"])},[e("div",Be,[e("div",De,[e("div",Ie,[e("h2",Te,a(c.value?"Créer un Vendeur Pro":"Modifier le Vendeur Pro"),1),e("button",{onClick:m,class:"text-gray-400 hover:text-gray-600"},[p(f(z),{class:"w-6 h-6"})])])]),e("form",{onSubmit:N(I,["prevent"]),class:"p-6 space-y-4"},[e("div",qe,[t[19]||(t[19]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Informations personnelles",-1)),e("div",Re,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prénom *",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.first_name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,o.value.first_name]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom *",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.last_name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,o.value.last_name]])])])]),e("div",Ge,[t[22]||(t[22]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Informations de l'entreprise",-1)),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de l'entreprise *",-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.company_name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,o.value.company_name]]),t[21]||(t[21]=e("p",{class:"text-xs text-gray-500 mt-1"},"Ce champ est obligatoire pour les vendeurs professionnels",-1))])]),e("div",He,[t[25]||(t[25]=e("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"Informations de contact",-1)),e("div",Oe,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email *",-1)),x(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.email=l),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,o.value.email]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.phone=l),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,o.value.phone]])])])]),c.value?(i(),n("div",Je,t[26]||(t[26]=[E('<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-semibold text-blue-800 mb-1">Création de mot de passe</h3><p class="text-sm text-blue-700"> Un email sera automatiquement envoyé au vendeur avec un lien pour créer son mot de passe. Il pourra se connecter après avoir défini son mot de passe. </p></div></div>',1)]))):y("",!0),v.value?(i(),n("div",Ke,a(v.value),1)):y("",!0),e("div",Qe,[e("button",{type:"button",onClick:m,class:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"}," Annuler "),e("button",{type:"submit",disabled:_.value,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50"},a(_.value?"Enregistrement...":c.value?"Créer":"Enregistrer"),9,We)])],32)])])):y("",!0),k.value&&r.value?(i(),n("div",{key:1,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:N(m,["self"])},[e("div",Xe,[e("div",Ye,[e("div",Ze,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold text-gray-900"},"Détails du Vendeur Pro",-1)),e("button",{onClick:m,class:"text-gray-400 hover:text-gray-600"},[p(f(z),{class:"w-6 h-6"})])])]),e("div",et,[e("div",tt,[r.value.avatar_url?(i(),n("div",st,[e("img",{src:r.value.avatar_url,alt:r.value.first_name,class:"h-full w-full object-cover"},null,8,lt)])):(i(),n("div",at,[e("span",ot,a(M(r.value)),1)])),e("div",null,[e("h3",rt,a(r.value.first_name)+" "+a(r.value.last_name),1),e("p",nt,a(r.value.company_name||"N/A"),1)])]),e("div",it,[e("div",null,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-500"},"Email",-1)),e("p",dt,a(r.value.email),1)]),e("div",null,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-500"},"Téléphone",-1)),e("p",ut,a(r.value.phone||"N/A"),1)]),e("div",null,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-500"},"Statut",-1)),e("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",r.value.email_verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(r.value.email_verified_at?"Vérifié":"Non vérifié"),3)]),e("div",null,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-500"},"Créé le",-1)),e("p",ct,a($(r.value.created_at)),1)])]),e("div",{class:"flex justify-end pt-4 border-t"},[e("button",{onClick:m,class:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"}," Fermer ")])])])])):y("",!0)]))}};export{xt as default};
