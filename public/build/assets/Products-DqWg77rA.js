import{r as v,Y as fe,c as K,j as ve,b as l,e as t,l as x,g as p,w as L,h as ye,F as M,z as A,u as m,V as k,U as _e,a1 as he,a7 as j,f as z,N as q,aq as we,t as n,x as C,A as E,s as ke,o as r,i as b,aB as Q,W as Y,aO as Ce,aP as $e,n as Pe,a4 as H,b3 as Fe,aW as J,b4 as Se,aM as X,aQ as ee,M as Me,P as Ae}from"./vendor-DnFm82Vn.js";import{a as se,e as te,f as je}from"./app-c6psJkyK.js";function Ee(){const{get:I,loading:$,error:V}=se(),y=v([{label:"Produits actifs",value:"0",change:0,color:"bg-blue-500",icon:"GiftIcon"},{label:"Total revenus",value:"0 FCFA",change:0,color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"Vues totales",value:"0",change:0,color:"bg-purple-500",icon:"EyeIcon"},{label:"Taux conversion",value:"0%",change:0,color:"bg-yellow-500",icon:"ChartBarIcon"}]),P=v([]),_=v([]),T=async()=>{try{const c=await I("/stats/merchant/products");if(c&&c.success){const u=c.data.summary||c.data.stats||{};y.value=[{label:"Produits actifs",value:u.active_products?.toString()||u.total_products?.toString()||"0",change:u.active_products_change||0,color:"bg-blue-500",icon:"GiftIcon"},{label:"Total revenus",value:F(u.total_revenue||0),change:u.revenue_change||0,color:"bg-green-500",icon:"CurrencyDollarIcon"},{label:"Vues totales",value:(u.total_views||0).toString(),change:u.views_change||0,color:"bg-purple-500",icon:"EyeIcon"},{label:"Taux conversion",value:(u.avg_conversion_rate||u.conversion_rate||0).toFixed(1)+"%",change:u.conversion_change||0,color:"bg-yellow-500",icon:"ChartBarIcon"}],P.value=c.data.top_products||[]}}catch(c){console.error("Erreur lors du chargement des statistiques de produits:",c)}},B=async()=>{try{const c=await I("/categories");c&&c.categories&&(_.value=c.categories)}catch(c){console.error("Erreur lors du chargement des catégories:",c),_.value=[]}},F=c=>{const u=parseFloat(c)||0;return u>=1e6?(u/1e6).toFixed(1)+"M FCFA":u>=1e3?(u/1e3).toFixed(0)+"k FCFA":u.toLocaleString("fr-FR")+" FCFA"};return{productStats:y,topProducts:P,categories:_,loading:$,error:V,loadProductStats:T,loadCategories:B,formatCurrency:F,formatNumber:c=>new Intl.NumberFormat("fr-FR").format(c||0)}}const Ie={class:"space-y-6"},Ve={class:"flex items-center justify-between"},Te={class:"flex space-x-3"},Be={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},De={class:"flex items-center justify-between"},Ne={class:"text-sm font-medium text-gray-600"},Le={class:"text-2xl font-bold text-gray-900 mt-1"},ze={class:"mt-4 pt-4 border-t border-gray-100"},qe={class:"flex items-center text-xs"},Re={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},Ue={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Ge={class:"relative"},Oe=["value"],We={key:0,class:"flex justify-center py-12"},Ze={key:1,class:"text-center py-12"},Ke={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Qe={class:"relative h-48 bg-gray-200 rounded-t-xl overflow-hidden"},Ye={class:"absolute top-3 left-3"},He={class:"absolute top-3 right-3 flex flex-col gap-2"},Je={class:"bg-black/50 text-white px-2 py-1 rounded-lg text-xs font-medium backdrop-blur-sm"},Xe={class:"p-5 flex-1 flex flex-col"},et={class:"mb-3"},tt={class:"text-lg font-semibold text-gray-900 line-clamp-2 mb-2"},st={class:"flex items-center justify-between"},ot={class:"text-2xl font-bold text-[#0099cc]"},rt={class:"text-gray-600 text-sm mb-4 line-clamp-2"},lt={class:"space-y-3 mb-4"},nt={key:0,class:"text-center py-2"},at={key:1},it={class:"flex justify-between text-sm mb-1"},dt={class:"font-semibold text-purple-700"},ct={class:"w-full bg-gray-200 rounded-full h-2.5 mb-2"},ut={class:"flex justify-between text-xs text-gray-500"},gt={class:"font-medium"},mt={key:0,class:"font-medium"},pt={class:"grid grid-cols-2 gap-3 mb-4"},bt={class:"bg-gradient-to-br from-green-50 to-green-100 p-3 rounded-lg border border-green-200"},xt={class:"text-green-700 font-bold text-base"},ft={class:"bg-gradient-to-br from-blue-50 to-blue-100 p-3 rounded-lg border border-blue-200"},vt={key:0,class:"text-blue-700 font-bold text-base"},yt={key:1,class:"text-blue-700 font-bold text-base"},_t={key:2,class:"text-blue-600 text-xs font-medium"},ht={key:3,class:"text-blue-600 text-xs font-medium"},wt={class:"mt-auto"},kt={class:"grid grid-cols-2 gap-2 mb-2"},Ct=["onClick"],$t=["onClick"],Pt=["onClick"],Ft=["onClick"],St={class:"grid grid-cols-3 gap-2"},Mt=["onClick"],At=["onClick"],jt=["onClick"],Et={key:1,disabled:"",class:"px-3 py-2 bg-gray-50 text-gray-400 rounded-lg text-xs font-medium cursor-not-allowed inline-flex items-center justify-center gap-1 border border-gray-200",title:"Impossible de supprimer"},It={key:3,class:"fixed inset-0 bg-black/40 overflow-y-auto h-full w-full z-50"},Vt={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-xl bg-white max-h-[80vh] overflow-y-auto"},Tt={class:"flex items-center justify-between mb-6"},Bt={key:0,class:"space-y-6"},Dt={key:0},Nt={class:"grid grid-cols-3 gap-2"},Lt={class:"grid grid-cols-2 gap-4"},zt={class:"text-sm text-gray-900"},qt={class:"text-sm text-gray-900"},Rt={class:"text-sm text-gray-900 font-semibold"},Ut={class:"text-sm text-gray-900"},Gt={key:0},Ot={class:"text-sm text-gray-900 font-semibold"},Wt={class:"text-sm text-gray-900 bg-gray-100 p-3 rounded-lg"},Zt={key:1},Kt={class:"grid grid-cols-3 gap-4 text-center"},Qt={class:"bg-[#0099cc]/10 p-4 rounded-lg"},Yt={class:"text-2xl font-bold text-[#0099cc]"},Ht={class:"bg-blue-100 p-4 rounded-lg"},Jt={class:"text-2xl font-bold text-blue-600"},Xt={class:"bg-purple-100 p-4 rounded-lg"},es={class:"text-2xl font-bold text-purple-600"},ts={key:2,class:"bg-green-50 border border-green-200 rounded-lg p-4"},ss={class:"mt-6 flex justify-end space-x-3"},ls={__name:"Products",setup(I){const $=ke(),{get:V,post:y,put:P,delete:_,loading:T}=se(),{productStats:B,categories:F,loading:R,loadProductStats:c,loadCategories:u}=Ee(),D=v(!1),a=v(null),d=fe({search:"",category:"",status:"",saleMode:"",sortBy:"date_desc"}),N=v([]),oe=K(()=>T.value||R.value),U=K(()=>N.value),h=async()=>{await w()},re=o=>({draft:"bg-gray-100 text-gray-800 px-3 py-1 text-xs font-medium rounded-full",active:"bg-blue-100 text-blue-800 px-3 py-1 text-xs font-medium rounded-full",completed:"bg-blue-100 text-blue-800 px-3 py-1 text-xs font-medium rounded-full",cancelled:"bg-red-100 text-red-800 px-3 py-1 text-xs font-medium rounded-full"})[o]||"bg-gray-100 text-gray-800 px-3 py-1 text-xs font-medium rounded-full",le=o=>({draft:"Brouillon",active:"Actif",completed:"Terminé",cancelled:"Annulé"})[o]||o,G=o=>({direct:"bg-green-100 text-green-800 px-2 py-1 text-xs font-medium rounded-lg",lottery:"bg-purple-100 text-purple-800 px-2 py-1 text-xs font-medium rounded-lg"})[o]||"bg-gray-100 text-gray-800 px-2 py-1 text-xs font-medium rounded-lg",O=o=>{const e={direct:"Vente directe",lottery:"Tombola"};return e[o]||e.direct},ne=o=>({new:"Neuf",like_new:"Comme neuf",good:"Bon état",fair:"État correct"})[o]||o,f=o=>new Intl.NumberFormat("fr-FR").format(o||0),ae=o=>o?new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"",ie=o=>{a.value=o,D.value=!0},W=()=>{D.value=!1,a.value=null},Z=o=>{$.push(`/merchant/products/${o.id}/edit`)},w=async()=>{try{const o=new URLSearchParams;d.search&&o.append("search",d.search),d.category&&o.append("category_id",d.category),d.status&&o.append("status",d.status),d.saleMode&&o.append("sale_mode",d.saleMode),d.sortBy&&o.append("sort_by",d.sortBy);const e=await V(`/merchant/products?${o.toString()}`);console.log("Products API Response:",e),e&&e.data&&Array.isArray(e.data)?N.value=e.data.map(i=>(console.log("Product mapping:",{id:i.id,name:i.name,lottery:i.lottery,lottery_progression:i.lottery_progression,sale_mode:i.sale_mode,revenue:i.revenue,can_delete:i.can_delete}),{...i,lottery:i.lottery||null,lottery_progression:i.lottery_progression||null,ticket_price:parseFloat(i.ticket_price||0),price:parseFloat(i.price||0),revenue:i.revenue||0,can_delete:i.can_delete,paid_orders_count:i.paid_orders_count||0})):N.value=[]}catch(o){console.error("Error loading products:",o)}},de=async o=>{const e=o.sale_mode==="lottery"?"tombola":"produit",i=`Publier ${e==="tombola"?"la":"le"} ${e} "${o.title||o.name}" ?`;if(confirm(i))try{let s;if(o.sale_mode==="lottery"){if(!o.ticket_price||o.ticket_price<100){window.$toast&&window.$toast.error("Le prix du ticket doit être défini et supérieur à 100 FCFA","❌ Erreur");return}s=await y(`/products/${o.id}/create-lottery`,{duration_days:7})}else s=await P(`/products/${o.id}`,{status:"active"});if(s&&(s.success||s.product)){if(await w(),window.$toast){const g=o.sale_mode==="lottery"?"Tombola publiée avec succès !":"Produit publié avec succès !";window.$toast.success(g,"✅ Publication")}}else throw new Error(s?.message||"Erreur lors de la publication")}catch(s){console.error("Error publishing product:",s);let g="Erreur lors de la publication";s.response?.data?.error?g=s.response.data.error:s.response?.data?.message?g=s.response.data.message:s.message&&(g=s.message),window.$toast&&window.$toast.error(g,"❌ Erreur")}},ce=async o=>{if(confirm(`Dupliquer le produit "${o.title||o.name}" ?`))try{const e=await y("/products",{title:(o.title||o.name)+" (Copie)",description:o.description,price:o.price||o.value,category_id:o.category_id,image:o.image});if(e&&e.success)await w(),window.$toast&&window.$toast.success("Produit dupliqué avec succès !","✅ Duplication");else throw new Error(e?.message||"Erreur lors de la duplication")}catch(e){console.error("Error duplicating product:",e),window.$toast&&window.$toast.error("Erreur lors de la duplication","❌ Erreur")}},ue=o=>{$.push(`/merchant/analytics?product=${o.id}`)},ge=async o=>{if(confirm(`Supprimer définitivement "${o.title||o.name}" ? Cette action est irréversible.`))try{const e=await _(`/products/${o.id}`);if(e&&e.success)await w(),window.$toast&&window.$toast.success("Produit supprimé","✅ Suppression");else throw new Error(e?.message||"Erreur lors de la suppression")}catch(e){console.error("Error deleting product:",e),window.$toast&&window.$toast.error("Erreur lors de la suppression","❌ Erreur")}},{getProductImageUrlWithFallback:me}=je(),pe=o=>me(o,"/images/products/placeholder.jpg"),be=o=>({GiftIcon:q,CurrencyDollarIcon:Ae,EyeIcon:H,ChartBarIcon:X,ShoppingBagIcon:Me})[o]||q,xe=o=>o.can_delete!==void 0?o.can_delete:!(!["draft","active"].includes(o.status)||o.sale_mode==="lottery"&&o.lottery&&(o.lottery.sold_tickets||0)>0||o.sale_mode==="direct"&&(o.paid_orders_count||0)>0),S=o=>{if(o.sale_mode!=="lottery")return{sold:0,max:0,percentage:0};const e=o.lottery_progression||o.lottery;if(!e)return{sold:0,max:0,percentage:0};const i=e.sold_tickets||0,s=e.max_tickets||0,g=s>0?Math.round(i/s*100):0;return{sold:i,max:s,percentage:g}};return ve(async()=>{await Promise.all([w(),u(),c()])}),(o,e)=>{const i=ye("router-link");return r(),l("div",Ie,[t("div",Ve,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Mes Articles"),t("p",{class:"mt-2 text-gray-600"},"Gérez vos articles et suivez vos tirages spéciaux en cours")],-1)),t("div",Te,[p(i,{to:"/merchant/products/create",class:"inline-flex items-center gap-2 px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl"},{default:L(()=>[p(m(Q),{class:"w-5 h-5"}),e[5]||(e[5]=b(" Nouvel Article ",-1))]),_:1,__:[5]})])]),t("div",Be,[(r(!0),l(M,null,A(m(B),s=>(r(),l("div",{key:s.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},[t("div",De,[t("div",null,[t("p",Ne,n(s.label),1),t("p",Le,n(s.value),1)]),t("div",{class:C(["p-3 rounded-xl",s.color])},[(r(),E(Y(be(s.icon)),{class:"w-6 h-6 text-white"}))],2)]),t("div",ze,[t("div",qe,[t("span",{class:C(["inline-flex items-center px-2 py-1 rounded-full font-medium",s.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(r(),E(Y(s.change>=0?m(Ce):m($e)),{class:"w-3 h-3 mr-1"})),b(" "+n(Math.abs(s.change))+"% ",1)],2),e[7]||(e[7]=t("span",{class:"ml-2 text-gray-500"},"ce mois",-1))])])]))),128))]),t("div",Re,[t("div",Ue,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),t("div",Ge,[p(m(_e),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.search=s),type:"text",placeholder:"Nom du produit...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black",onInput:h},null,544),[[he,d.search]])])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>d.category=s),onChange:h,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},[e[9]||(e[9]=t("option",{value:""},"Toutes les catégories",-1)),(r(!0),l(M,null,A(m(F),s=>(r(),l("option",{key:s.id,value:s.id},n(s.name),9,Oe))),128))],544),[[j,d.category]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>d.status=s),onChange:h,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},e[11]||(e[11]=[z('<option value="">Tous les statuts</option><option value="draft">Brouillon</option><option value="active">Actif</option><option value="completed">Terminé</option><option value="cancelled">Annulé</option>',5)]),544),[[j,d.status]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mode de vente",-1)),k(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.saleMode=s),onChange:h,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},e[13]||(e[13]=[t("option",{value:""},"Tous les modes",-1),t("option",{value:"direct"},"Vente directe",-1),t("option",{value:"lottery"},"Tombola",-1)]),544),[[j,d.saleMode]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trier par",-1)),k(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>d.sortBy=s),onChange:h,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},e[15]||(e[15]=[z('<option value="date_desc">Date de création (récent)</option><option value="date_asc">Date de création (ancien)</option><option value="price_desc">Prix (élevé à bas)</option><option value="price_asc">Prix (bas à élevé)</option><option value="name_asc">Nom (A-Z)</option><option value="name_desc">Nom (Z-A)</option><option value="popularity">Popularité</option>',7)]),544),[[j,d.sortBy]])])])]),oe.value?(r(),l("div",We,e[17]||(e[17]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):U.value.length===0?(r(),l("div",Ze,[p(m(q),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e[19]||(e[19]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun produit",-1)),e[20]||(e[20]=t("p",{class:"text-gray-600 mb-6"},"Vous n'avez pas encore de produits. Créez votre premier produit !",-1)),p(i,{to:"/merchant/products/create",class:"inline-flex items-center gap-2 px-6 py-3 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-xl font-semibold transition-colors"},{default:L(()=>[p(m(Q),{class:"w-5 h-5"}),e[18]||(e[18]=b(" Créer mon premier produit ",-1))]),_:1,__:[18]})])):(r(),l("div",Ke,[(r(!0),l(M,null,A(U.value,s=>(r(),l("div",{key:s.id,class:"bg-white rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200 flex flex-col"},[t("div",Qe,[p(te,{src:pe(s),alt:s.name,"container-class":"w-full h-full","image-class":"w-full h-full object-cover"},null,8,["src","alt"]),t("div",Ye,[t("span",{class:C(re(s.status))},n(le(s.status)),3)]),t("div",He,[t("div",Je,n(s.category?.name||"Sans catégorie"),1),t("div",{class:C(G(s.sale_mode))},n(O(s.sale_mode)),3)])]),t("div",Xe,[t("div",et,[t("h3",tt,n(s.name),1),t("div",st,[t("span",ot,n(f(s.price)),1),e[21]||(e[21]=t("span",{class:"text-xs text-gray-500 font-medium"},"FCFA",-1))])]),t("p",rt,n(s.description),1),t("div",lt,[s.sale_mode==="direct"?(r(),l("div",nt,e[22]||(e[22]=[t("div",{class:"inline-flex items-center px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium border border-blue-200"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),b(" Vente directe ")],-1)]))):s.sale_mode==="lottery"?(r(),l("div",at,[t("div",it,[e[23]||(e[23]=t("span",{class:"text-gray-600 font-medium"},"Progression",-1)),t("span",dt,n(S(s).sold)+"/"+n(S(s).max),1)]),t("div",ct,[t("div",{class:"bg-gradient-to-r from-purple-500 to-purple-600 h-2.5 rounded-full transition-all duration-500",style:Pe({width:S(s).percentage+"%"})},null,4)]),t("div",ut,[t("span",gt,n(S(s).percentage)+"% vendu",1),s.lottery?.draw_date?(r(),l("span",mt,"Fin: "+n(ae(s.lottery.draw_date)),1)):x("",!0)])])):x("",!0)]),t("div",pt,[t("div",bt,[t("p",xt,n(f(s.revenue||0)),1),e[24]||(e[24]=t("p",{class:"text-green-600 text-xs font-medium"},"Revenus",-1))]),t("div",ft,[s.sale_mode==="lottery"?(r(),l("p",vt,n(f(s.lottery?.ticket_price||0)),1)):(r(),l("p",yt,n(s.stock_quantity||0),1)),s.sale_mode==="lottery"?(r(),l("p",_t,"Prix/ticket")):(r(),l("p",ht,"Stock"))])]),t("div",wt,[t("div",kt,[t("button",{onClick:g=>ie(s),class:"px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-all hover:scale-105 inline-flex items-center justify-center gap-1.5"},[p(m(H),{class:"w-4 h-4"}),e[25]||(e[25]=b(" Voir ",-1))],8,Ct),s.status==="draft"?(r(),l("button",{key:0,onClick:g=>de(s),class:"px-4 py-2.5 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg text-sm font-medium transition-all hover:scale-105 inline-flex items-center justify-center gap-1.5 shadow-md"},[p(m(Fe),{class:"w-4 h-4"}),e[26]||(e[26]=b(" Publier ",-1))],8,$t)):s.status==="active"?(r(),l("button",{key:1,onClick:g=>Z(s),class:"px-4 py-2.5 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg text-sm font-medium transition-all hover:scale-105 inline-flex items-center justify-center gap-1.5 shadow-md"},[p(m(J),{class:"w-4 h-4"}),e[27]||(e[27]=b(" Modifier ",-1))],8,Pt)):(r(),l("button",{key:2,onClick:g=>Z(s),class:"px-4 py-2.5 bg-gray-400 hover:bg-gray-500 text-white rounded-lg text-sm font-medium transition-all hover:scale-105 inline-flex items-center justify-center gap-1.5"},[p(m(J),{class:"w-4 h-4"}),e[28]||(e[28]=b(" Modifier ",-1))],8,Ft))]),t("div",St,[t("button",{onClick:g=>ce(s),class:"px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg text-xs font-medium transition-all inline-flex items-center justify-center gap-1 border border-blue-200",title:"Dupliquer"},[p(m(Se),{class:"w-4 h-4"}),e[29]||(e[29]=t("span",{class:"hidden sm:inline"},"Dupliquer",-1))],8,Mt),t("button",{onClick:g=>ue(s),class:"px-3 py-2 bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-lg text-xs font-medium transition-all inline-flex items-center justify-center gap-1 border border-purple-200",title:"Analytiques"},[p(m(X),{class:"w-4 h-4"}),e[30]||(e[30]=t("span",{class:"hidden sm:inline"},"Stats",-1))],8,At),xe(s)?(r(),l("button",{key:0,onClick:g=>ge(s),class:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all inline-flex items-center justify-center gap-1 border border-red-200",title:"Supprimer"},[p(m(ee),{class:"w-4 h-4"}),e[31]||(e[31]=t("span",{class:"hidden sm:inline"},"Supprimer",-1))],8,jt)):(r(),l("button",Et,[p(m(ee),{class:"w-4 h-4"}),e[32]||(e[32]=t("span",{class:"hidden sm:inline"},"Supprimer",-1))]))])])])]))),128))])),D.value?(r(),l("div",It,[t("div",Vt,[t("div",Tt,[e[33]||(e[33]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Détails du produit",-1)),t("button",{onClick:W,class:"text-gray-400 hover:text-gray-600"},[p(m(we),{class:"w-6 h-6"})])]),a.value?(r(),l("div",Bt,[a.value.images&&a.value.images.length>0?(r(),l("div",Dt,[e[34]||(e[34]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Images",-1)),t("div",Nt,[(r(!0),l(M,null,A(a.value.images.slice(0,6),(s,g)=>(r(),E(te,{key:g,src:s,alt:`Produit ${g+1}`,"container-class":"w-full h-20 rounded-lg","image-class":"w-full h-full object-cover rounded-lg","fallback-class":"w-full h-full rounded-lg"},null,8,["src","alt"]))),128))])])):x("",!0),t("div",Lt,[t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),t("p",zt,n(a.value.name),1)]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),t("p",qt,n(a.value.category?.name||a.value.category||"Sans catégorie"),1)]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700"},"Valeur",-1)),t("p",Rt,n(f(a.value.price||a.value.value))+" FCFA",1)]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700"},"Condition",-1)),t("p",Ut,n(ne(a.value.condition)),1)]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700"},"Mode de vente",-1)),t("span",{class:C(G(a.value.sale_mode))},n(O(a.value.sale_mode)),3)]),a.value.sale_mode==="lottery"&&a.value.ticket_price?(r(),l("div",Gt,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700"},"Prix du ticket",-1)),t("p",Ot,n(f(a.value.ticket_price))+" FCFA",1)])):x("",!0)]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),t("p",Wt,n(a.value.description),1)]),a.value.sale_mode==="lottery"?(r(),l("div",Zt,[e[45]||(e[45]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Statistiques de la tombola",-1)),t("div",Kt,[t("div",Qt,[t("p",Yt,n(a.value.sold_tickets),1),e[42]||(e[42]=t("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),t("div",Ht,[t("p",Jt,n(f(a.value.revenue)),1),e[43]||(e[43]=t("p",{class:"text-sm text-gray-600"},"Koumbich (FCFA)",-1))]),t("div",Xt,[t("p",es,n(a.value.progress)+"%",1),e[44]||(e[44]=t("p",{class:"text-sm text-gray-600"},"Progression",-1))])])])):a.value.sale_mode==="direct"?(r(),l("div",ts,e[46]||(e[46]=[z('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><h4 class="text-md font-semibold text-green-800">Vente directe</h4><p class="text-sm text-green-600">Les clients peuvent acheter ce produit directement sans participer à une tombola.</p></div></div>',1)]))):x("",!0)])):x("",!0),t("div",ss,[t("button",{onClick:W,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300"}," Fermer "),a.value?(r(),E(i,{key:0,to:`/merchant/products/${a.value.id}/edit`,class:"px-4 py-2 bg-[#0099cc] text-white rounded-lg hover:bg-[#0088bb]"},{default:L(()=>e[47]||(e[47]=[b(" Modifier ",-1)])),_:1,__:[47]},8,["to"])):x("",!0)])])])):x("",!0)])}}};export{ls as default};
