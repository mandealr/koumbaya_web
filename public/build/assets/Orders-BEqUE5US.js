import{r as m,x as Q,c as y,g as W,b as r,e as t,j as f,i as u,l as p,u as d,F as h,n as w,A as v,B as M,E as O,f as X,t as a,p as k,o as n,s as E,v as L}from"./vendor-DPjO4LyL.js";import{d as V,j as Y,B as tt,z as et,C as st,D as ot,p as at,q as lt,m as nt,n as rt,h as it,s as dt,o as ct,E as ut}from"./app-DdWZgSvz.js";const mt={class:"space-y-6"},pt={class:"flex items-center justify-between"},xt={class:"flex space-x-3"},gt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},bt={class:"flex items-center justify-between"},yt={class:"text-sm font-medium text-gray-600"},ft={class:"text-2xl font-bold text-gray-900 mt-1"},vt={class:"mt-4 pt-4 border-t border-gray-100"},_t={class:"flex items-center text-xs"},ht={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},wt={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},kt={class:"relative"},Ct=["value"],Dt={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},Mt={key:0,class:"flex justify-center py-12"},$t={key:1,class:"text-center py-12"},Ft={key:2,class:"overflow-x-auto"},Pt={class:"min-w-full"},St={class:"bg-white divide-y divide-gray-200"},At={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm font-medium text-gray-900"},jt={class:"text-sm text-gray-500"},Ot={class:"px-6 py-4 whitespace-nowrap"},Et={class:"flex items-center"},Lt={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},Vt={class:"ml-3"},Bt={class:"text-sm font-medium text-gray-900"},Nt={class:"text-sm text-gray-500"},Rt={class:"px-6 py-4 whitespace-nowrap"},zt={class:"flex items-center"},It=["src","alt"],Ut={class:"ml-3"},Zt={class:"text-sm font-medium text-gray-900"},qt={class:"text-sm text-gray-500"},Jt={class:"px-6 py-4 whitespace-nowrap"},Gt={class:"text-sm text-gray-900"},Ht={class:"text-sm text-gray-500"},Kt={class:"px-6 py-4 whitespace-nowrap"},Qt={class:"text-sm font-semibold text-gray-900"},Wt={class:"text-sm text-gray-500"},Xt={class:"px-6 py-4 whitespace-nowrap"},Yt={class:"px-6 py-4 whitespace-nowrap"},te={class:"text-sm text-gray-900"},ee={class:"text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},oe={class:"flex items-center space-x-2"},ae=["onClick"],le=["onClick"],ne=["onClick"],re={class:"bg-white px-6 py-3 border-t border-gray-200 flex items-center justify-between"},ie={class:"text-sm text-gray-700"},de={class:"font-medium"},ce={class:"font-medium"},ue={class:"font-medium"},me={class:"flex space-x-2"},pe=["disabled"],xe=["disabled"],ge={key:0,class:"fixed inset-0 bg-black bg-opacity-20 overflow-y-auto h-full w-full z-50"},be={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-xl bg-white"},ye={class:"flex items-center justify-between mb-6"},fe={key:0,class:"space-y-6"},ve={class:"grid grid-cols-2 gap-4"},_e={class:"text-sm text-gray-900"},he={class:"text-sm text-gray-900"},we={class:"text-sm text-gray-900 font-semibold"},ke={class:"bg-gray-50 p-4 rounded-lg"},Ce={class:"grid grid-cols-2 gap-4"},De={class:"text-sm text-gray-900"},Me={class:"text-sm text-gray-900"},$e={class:"bg-gray-50 p-4 rounded-lg"},Fe={class:"text-sm text-gray-700 mb-2"},Pe={class:"flex flex-wrap gap-2"},Se={class:"mt-6 flex justify-end space-x-3"},Oe={__name:"Orders",setup(Ae){const C=m(!1),D=m(!1),i=m(null),c=m(1),x=m(10),l=Q({search:"",status:"",product:"",startDate:"",endDate:""}),B=m([{label:"Total commandes",value:"247",change:15.3,icon:V,color:"bg-[#0099cc]"},{label:"Revenus",value:"156,200",change:8.7,icon:Y,color:"bg-blue-500"},{label:"En attente",value:"12",change:-2.1,icon:tt,color:"bg-yellow-500"},{label:"Taux confirmation",value:"94.2%",change:3.2,icon:et,color:"bg-purple-500"}]),$=m([{id:1,name:"iPhone 15 Pro"},{id:2,name:"MacBook Pro M3"},{id:3,name:"PlayStation 5"}]),N=m([{id:1,order_number:"ORD-2025-001",customer_name:"Jean Dupont",customer_email:"jean@example.com",product_name:"iPhone 15 Pro",product_image:"/images/products/placeholder.jpg",tickets_count:3,ticket_numbers:["001","045","112"],ticket_price:2500,total_amount:7500,currency:"FCFA",payment_method:"Mobile Money",status:"completed",created_at:"2025-01-09T10:30:00Z"},{id:2,order_number:"ORD-2025-002",customer_name:"Marie Martin",customer_email:"marie@example.com",product_name:"MacBook Pro M3",product_image:"/images/products/placeholder.jpg",tickets_count:1,ticket_numbers:["278"],ticket_price:5e3,total_amount:5e3,currency:"FCFA",payment_method:"Carte bancaire",status:"pending",created_at:"2025-01-09T09:15:00Z"},{id:3,order_number:"ORD-2025-003",customer_name:"Paul Durant",customer_email:"paul@example.com",product_name:"PlayStation 5",product_image:"/images/products/placeholder.jpg",tickets_count:2,ticket_numbers:["089","156"],ticket_price:1500,total_amount:3e3,currency:"FCFA",payment_method:"Mobile Money",status:"confirmed",created_at:"2025-01-09T08:45:00Z"}]),g=y(()=>{let o=N.value;if(l.search){const e=l.search.toLowerCase();o=o.filter(s=>s.order_number.toLowerCase().includes(e)||s.customer_name.toLowerCase().includes(e)||s.product_name.toLowerCase().includes(e))}return l.status&&(o=o.filter(e=>e.status===l.status)),l.product&&(o=o.filter(e=>e.product_name.includes($.value.find(s=>s.id==l.product)?.name||""))),l.startDate&&(o=o.filter(e=>new Date(e.created_at)>=new Date(l.startDate))),l.endDate&&(o=o.filter(e=>new Date(e.created_at)<=new Date(l.endDate))),o}),F=y(()=>Math.ceil(g.value.length/x.value)),R=y(()=>{const o=(c.value-1)*x.value,e=o+x.value;return g.value.slice(o,e)}),z=y(()=>(c.value-1)*x.value+1),I=y(()=>{const o=c.value*x.value;return Math.min(o,g.value.length)}),b=()=>{c.value=1},U=()=>{c.value>1&&c.value--},Z=()=>{c.value<F.value&&c.value++},P=o=>({pending:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",confirmed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",completed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",cancelled:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800"})[o]||"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",S=o=>({pending:"En attente",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé"})[o]||o,A=o=>new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),q=o=>new Date(o).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),J=o=>{i.value=o,D.value=!0},_=()=>{D.value=!1,i.value=null},T=async o=>{if(confirm(`Confirmer la commande ${o.order_number} ?`))try{o.status="confirmed",alert("Commande confirmée avec succès !"),_()}catch{alert("Erreur lors de la confirmation")}},G=async o=>{if(confirm(`Annuler la commande ${o.order_number} ? Cette action est irréversible.`))try{o.status="cancelled",alert("Commande annulée"),_()}catch{alert("Erreur lors de l'annulation")}},H=()=>{C.value=!0,setTimeout(()=>{C.value=!1,alert("Commandes actualisées")},1e3)},K=()=>{alert("Export des commandes en cours de développement")};return W(()=>{console.log("Orders page loaded")}),(o,e)=>(n(),r("div",mt,[t("div",pt,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Mes Commandes"),t("p",{class:"mt-2 text-gray-600"},"Suivez et gérez toutes vos ventes de tickets de tombola")],-1)),t("div",xt,[t("button",{onClick:H,class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[u(d(st),{class:"w-4 h-4 mr-2"}),e[6]||(e[6]=p(" Actualiser ",-1))]),t("button",{onClick:K,class:"inline-flex items-center px-4 py-2 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors"},[u(d(ot),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=p(" Exporter ",-1))])])]),t("div",gt,[(n(!0),r(h,null,w(B.value,s=>(n(),r("div",{key:s.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},[t("div",bt,[t("div",null,[t("p",yt,a(s.label),1),t("p",ft,a(s.value),1)]),t("div",{class:k(["p-3 rounded-xl",s.color])},[(n(),E(L(s.icon),{class:"w-6 h-6 text-white"}))],2)]),t("div",vt,[t("div",_t,[t("span",{class:k(["inline-flex items-center px-2 py-1 rounded-full font-medium",s.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(n(),E(L(s.change>=0?d(nt):d(rt)),{class:"w-3 h-3 mr-1"})),p(" "+a(Math.abs(s.change))+"% ",1)],2),e[9]||(e[9]=t("span",{class:"ml-2 text-gray-500"},"vs semaine dernière",-1))])])]))),128))]),t("div",ht,[t("div",wt,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),t("div",kt,[u(d(at),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.search=s),type:"text",placeholder:"ID, client, produit...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black",onInput:b},null,544),[[M,l.search]])])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.status=s),onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},e[11]||(e[11]=[X('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="confirmed">Confirmé</option><option value="completed">Terminé</option><option value="cancelled">Annulé</option>',5)]),544),[[O,l.status]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Produit",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.product=s),onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},[e[13]||(e[13]=t("option",{value:""},"Tous les produits",-1)),(n(!0),r(h,null,w($.value,s=>(n(),r("option",{key:s.id,value:s.id},a(s.name),9,Ct))),128))],544),[[O,l.product]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date début",-1)),v(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.startDate=s),type:"date",onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[M,l.startDate]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date fin",-1)),v(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.endDate=s),type:"date",onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[M,l.endDate]])])])]),t("div",Dt,[e[25]||(e[25]=t("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes")],-1)),C.value?(n(),r("div",Mt,e[17]||(e[17]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):g.value.length===0?(n(),r("div",$t,[u(d(V),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucune commande",-1)),e[19]||(e[19]=t("p",{class:"text-gray-600"},"Aucune commande ne correspond à vos critères.",-1))])):(n(),r("div",Ft,[t("table",Pt,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Commande "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Client "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tickets "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Montant "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",St,[(n(!0),r(h,null,w(R.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[t("td",At,[t("div",null,[t("div",Tt,"#"+a(s.order_number),1),t("div",jt,a(s.payment_method),1)])]),t("td",Ot,[t("div",Et,[t("div",Lt,[u(d(it),{class:"w-5 h-5 text-gray-600"})]),t("div",Vt,[t("div",Bt,a(s.customer_name),1),t("div",Nt,a(s.customer_email),1)])])]),t("td",Rt,[t("div",zt,[t("img",{class:"h-12 w-12 rounded-lg object-cover",src:s.product_image,alt:s.product_name},null,8,It),t("div",Ut,[t("div",Zt,a(s.product_name),1),t("div",qt,a(s.ticket_price.toLocaleString())+" FCFA/ticket",1)])])]),t("td",Jt,[t("div",Gt,a(s.tickets_count)+" tickets",1),t("div",Ht,"N° "+a(s.ticket_numbers.join(", ")),1)]),t("td",Kt,[t("div",Qt,a(s.total_amount.toLocaleString())+" FCFA",1),t("div",Wt,a(s.currency),1)]),t("td",Xt,[t("span",{class:k(P(s.status))},a(S(s.status)),3)]),t("td",Yt,[t("div",te,a(A(s.created_at)),1),t("div",ee,a(q(s.created_at)),1)]),t("td",se,[t("div",oe,[t("button",{onClick:j=>J(s),class:"text-[#0099cc] hover:text-[#0088bb] transition-colors",title:"Voir détails"},[u(d(dt),{class:"w-4 h-4"})],8,ae),s.status==="pending"?(n(),r("button",{key:0,onClick:j=>T(s),class:"text-blue-600 hover:text-blue-800 transition-colors",title:"Confirmer"},[u(d(ct),{class:"w-4 h-4"})],8,le)):f("",!0),["pending","confirmed"].includes(s.status)?(n(),r("button",{key:1,onClick:j=>G(s),class:"text-red-600 hover:text-red-800 transition-colors",title:"Annuler"},[u(d(ut),{class:"w-4 h-4"})],8,ne)):f("",!0)])])]))),128))])])])),t("div",re,[t("div",ie,[e[21]||(e[21]=p(" Affichage de ",-1)),t("span",de,a(z.value),1),e[22]||(e[22]=p(" à ",-1)),t("span",ce,a(I.value),1),e[23]||(e[23]=p(" sur ",-1)),t("span",ue,a(g.value.length),1),e[24]||(e[24]=p(" résultats ",-1))]),t("div",me,[t("button",{onClick:U,disabled:c.value===1,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,pe),t("button",{onClick:Z,disabled:c.value===F.value,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,xe)])])]),D.value?(n(),r("div",ge,[t("div",be,[t("div",ye,[e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Détails de la commande",-1)),t("button",{onClick:_,class:"text-gray-400 hover:text-gray-600"},[u(d(lt),{class:"w-6 h-6"})])]),i.value?(n(),r("div",fe,[t("div",ve,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},"N° de commande",-1)),t("p",_e,a(i.value.order_number),1)]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),t("p",he,a(A(i.value.created_at)),1)]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),t("span",{class:k(P(i.value.status))},a(S(i.value.status)),3)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),t("p",we,a(i.value.total_amount.toLocaleString())+" FCFA",1)])]),t("div",null,[e[33]||(e[33]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Informations client",-1)),t("div",ke,[t("div",Ce,[t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),t("p",De,a(i.value.customer_name),1)]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),t("p",Me,a(i.value.customer_email),1)])])])]),t("div",null,[e[34]||(e[34]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Tickets achetés",-1)),t("div",$e,[t("p",Fe,[t("strong",null,a(i.value.tickets_count)+" tickets",1),p(" pour "+a(i.value.product_name),1)]),t("div",Pe,[(n(!0),r(h,null,w(i.value.ticket_numbers,s=>(n(),r("span",{key:s,class:"inline-block bg-[#0099cc] text-white px-2 py-1 rounded text-xs font-mono"}," #"+a(s),1))),128))])])])])):f("",!0),t("div",Se,[t("button",{onClick:_,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300"}," Fermer "),i.value?.status==="pending"?(n(),r("button",{key:0,onClick:e[5]||(e[5]=s=>T(i.value)),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Confirmer la commande ")):f("",!0)])])])):f("",!0)]))}};export{Oe as default};
