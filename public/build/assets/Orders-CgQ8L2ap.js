import{r as m,x as Q,c as y,g as W,b as r,e,j as f,i as u,l as p,u as d,F as h,n as w,z as v,A as M,D as T,f as X,t as a,p as k,o as n,s as L,v as V}from"./vendor-CznQeBe4.js";import{d as E,j as Y,C as ee,A as te,D as se,E as oe,q as ae,s as le,n as ne,o as re,h as ie,t as de,p as ce,F as ue}from"./app-Dy6ZhDj2.js";const me={class:"space-y-6"},pe={class:"flex items-center justify-between"},xe={class:"flex space-x-3"},ge={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},be={class:"flex items-center justify-between"},ye={class:"text-sm font-medium text-gray-600"},fe={class:"text-2xl font-bold text-gray-900 mt-1"},ve={class:"mt-4 pt-4 border-t border-gray-100"},_e={class:"flex items-center text-xs"},he={class:"bg-white rounded-xl shadow-lg border border-gray-100 p-6"},we={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},ke={class:"relative"},Ce=["value"],De={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},Me={key:0,class:"flex justify-center py-12"},Fe={key:1,class:"text-center py-12"},$e={key:2,class:"overflow-x-auto"},Pe={class:"min-w-full"},Se={class:"bg-white divide-y divide-gray-200"},Ae={class:"px-6 py-4 whitespace-nowrap"},je={class:"text-sm font-medium text-gray-900"},Oe={class:"text-sm text-gray-500"},Te={class:"px-6 py-4 whitespace-nowrap"},Le={class:"flex items-center"},Ve={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},Ee={class:"ml-3"},Be={class:"text-sm font-medium text-gray-900"},Ne={class:"text-sm text-gray-500"},Re={class:"px-6 py-4 whitespace-nowrap"},ze={class:"flex items-center"},Ie=["src","alt"],Ue={class:"ml-3"},Ze={class:"text-sm font-medium text-gray-900"},qe={class:"text-sm text-gray-500"},Je={class:"px-6 py-4 whitespace-nowrap"},Ge={class:"text-sm text-gray-900"},He={class:"text-sm text-gray-500"},Ke={class:"px-6 py-4 whitespace-nowrap"},Qe={class:"text-sm font-semibold text-gray-900"},We={class:"text-sm text-gray-500"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ye={class:"px-6 py-4 whitespace-nowrap"},et={class:"text-sm text-gray-900"},tt={class:"text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ot={class:"flex items-center space-x-2"},at=["onClick"],lt=["onClick"],nt=["onClick"],rt={class:"bg-white px-6 py-3 border-t border-gray-200 flex items-center justify-between"},it={class:"text-sm text-gray-700"},dt={class:"font-medium"},ct={class:"font-medium"},ut={class:"font-medium"},mt={class:"flex space-x-2"},pt=["disabled"],xt=["disabled"],gt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},bt={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/2 shadow-lg rounded-xl bg-white"},yt={class:"flex items-center justify-between mb-6"},ft={key:0,class:"space-y-6"},vt={class:"grid grid-cols-2 gap-4"},_t={class:"text-sm text-gray-900"},ht={class:"text-sm text-gray-900"},wt={class:"text-sm text-gray-900 font-semibold"},kt={class:"bg-gray-50 p-4 rounded-lg"},Ct={class:"grid grid-cols-2 gap-4"},Dt={class:"text-sm text-gray-900"},Mt={class:"text-sm text-gray-900"},Ft={class:"bg-gray-50 p-4 rounded-lg"},$t={class:"text-sm text-gray-700 mb-2"},Pt={class:"flex flex-wrap gap-2"},St={class:"mt-6 flex justify-end space-x-3"},Tt={__name:"Orders",setup(At){const C=m(!1),D=m(!1),i=m(null),c=m(1),x=m(10),l=Q({search:"",status:"",product:"",startDate:"",endDate:""}),B=m([{label:"Total commandes",value:"247",change:15.3,icon:E,color:"bg-[#0099cc]"},{label:"Revenus",value:"156,200",change:8.7,icon:Y,color:"bg-green-500"},{label:"En attente",value:"12",change:-2.1,icon:ee,color:"bg-yellow-500"},{label:"Taux confirmation",value:"94.2%",change:3.2,icon:te,color:"bg-purple-500"}]),F=m([{id:1,name:"iPhone 15 Pro"},{id:2,name:"MacBook Pro M3"},{id:3,name:"PlayStation 5"}]),N=m([{id:1,order_number:"ORD-2025-001",customer_name:"Jean Dupont",customer_email:"jean@example.com",product_name:"iPhone 15 Pro",product_image:"/images/products/placeholder.jpg",tickets_count:3,ticket_numbers:["001","045","112"],ticket_price:2500,total_amount:7500,currency:"FCFA",payment_method:"Mobile Money",status:"completed",created_at:"2025-01-09T10:30:00Z"},{id:2,order_number:"ORD-2025-002",customer_name:"Marie Martin",customer_email:"marie@example.com",product_name:"MacBook Pro M3",product_image:"/images/products/placeholder.jpg",tickets_count:1,ticket_numbers:["278"],ticket_price:5e3,total_amount:5e3,currency:"FCFA",payment_method:"Carte bancaire",status:"pending",created_at:"2025-01-09T09:15:00Z"},{id:3,order_number:"ORD-2025-003",customer_name:"Paul Durant",customer_email:"paul@example.com",product_name:"PlayStation 5",product_image:"/images/products/placeholder.jpg",tickets_count:2,ticket_numbers:["089","156"],ticket_price:1500,total_amount:3e3,currency:"FCFA",payment_method:"Mobile Money",status:"confirmed",created_at:"2025-01-09T08:45:00Z"}]),g=y(()=>{let o=N.value;if(l.search){const t=l.search.toLowerCase();o=o.filter(s=>s.order_number.toLowerCase().includes(t)||s.customer_name.toLowerCase().includes(t)||s.product_name.toLowerCase().includes(t))}return l.status&&(o=o.filter(t=>t.status===l.status)),l.product&&(o=o.filter(t=>t.product_name.includes(F.value.find(s=>s.id==l.product)?.name||""))),l.startDate&&(o=o.filter(t=>new Date(t.created_at)>=new Date(l.startDate))),l.endDate&&(o=o.filter(t=>new Date(t.created_at)<=new Date(l.endDate))),o}),$=y(()=>Math.ceil(g.value.length/x.value)),R=y(()=>{const o=(c.value-1)*x.value,t=o+x.value;return g.value.slice(o,t)}),z=y(()=>(c.value-1)*x.value+1),I=y(()=>{const o=c.value*x.value;return Math.min(o,g.value.length)}),b=()=>{c.value=1},U=()=>{c.value>1&&c.value--},Z=()=>{c.value<$.value&&c.value++},P=o=>({pending:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",confirmed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",completed:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",cancelled:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800"})[o]||"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",S=o=>({pending:"En attente",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé"})[o]||o,A=o=>new Date(o).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),q=o=>new Date(o).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),J=o=>{i.value=o,D.value=!0},_=()=>{D.value=!1,i.value=null},j=async o=>{if(confirm(`Confirmer la commande ${o.order_number} ?`))try{o.status="confirmed",alert("Commande confirmée avec succès !"),_()}catch{alert("Erreur lors de la confirmation")}},G=async o=>{if(confirm(`Annuler la commande ${o.order_number} ? Cette action est irréversible.`))try{o.status="cancelled",alert("Commande annulée"),_()}catch{alert("Erreur lors de l'annulation")}},H=()=>{C.value=!0,setTimeout(()=>{C.value=!1,alert("Commandes actualisées")},1e3)},K=()=>{alert("Export des commandes en cours de développement")};return W(()=>{console.log("Orders page loaded")}),(o,t)=>(n(),r("div",me,[e("div",pe,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mes Commandes"),e("p",{class:"mt-2 text-gray-600"},"Suivez et gérez toutes vos ventes de billets de tombola")],-1)),e("div",xe,[e("button",{onClick:H,class:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors"},[u(d(se),{class:"w-4 h-4 mr-2"}),t[6]||(t[6]=p(" Actualiser ",-1))]),e("button",{onClick:K,class:"inline-flex items-center px-4 py-2 bg-[#0099cc] hover:bg-[#0088bb] text-white rounded-lg transition-colors"},[u(d(oe),{class:"w-4 h-4 mr-2"}),t[7]||(t[7]=p(" Exporter ",-1))])])]),e("div",ge,[(n(!0),r(h,null,w(B.value,s=>(n(),r("div",{key:s.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},[e("div",be,[e("div",null,[e("p",ye,a(s.label),1),e("p",fe,a(s.value),1)]),e("div",{class:k(["p-3 rounded-xl",s.color])},[(n(),L(V(s.icon),{class:"w-6 h-6 text-white"}))],2)]),e("div",ve,[e("div",_e,[e("span",{class:k(["inline-flex items-center px-2 py-1 rounded-full font-medium",s.change>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[(n(),L(V(s.change>=0?d(ne):d(re)),{class:"w-3 h-3 mr-1"})),p(" "+a(Math.abs(s.change))+"% ",1)],2),t[9]||(t[9]=e("span",{class:"ml-2 text-gray-500"},"vs semaine dernière",-1))])])]))),128))]),e("div",he,[e("div",we,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),e("div",ke,[u(d(ae),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.search=s),type:"text",placeholder:"ID, client, produit...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black",onInput:b},null,544),[[M,l.search]])])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.status=s),onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},t[11]||(t[11]=[X('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="confirmed">Confirmé</option><option value="completed">Terminé</option><option value="cancelled">Annulé</option>',5)]),544),[[T,l.status]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Produit",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.product=s),onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},[t[13]||(t[13]=e("option",{value:""},"Tous les produits",-1)),(n(!0),r(h,null,w(F.value,s=>(n(),r("option",{key:s.id,value:s.id},a(s.name),9,Ce))),128))],544),[[T,l.product]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date début",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.startDate=s),type:"date",onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[M,l.startDate]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date fin",-1)),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.endDate=s),type:"date",onChange:b,class:"w-full py-2 px-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent text-black"},null,544),[[M,l.endDate]])])])]),e("div",De,[t[25]||(t[25]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes")],-1)),C.value?(n(),r("div",Me,t[17]||(t[17]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):g.value.length===0?(n(),r("div",Fe,[u(d(E),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t[18]||(t[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucune commande",-1)),t[19]||(t[19]=e("p",{class:"text-gray-600"},"Aucune commande ne correspond à vos critères.",-1))])):(n(),r("div",$e,[e("table",Pe,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Commande "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Client "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Billets "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Montant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Se,[(n(!0),r(h,null,w(R.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Ae,[e("div",null,[e("div",je,"#"+a(s.order_number),1),e("div",Oe,a(s.payment_method),1)])]),e("td",Te,[e("div",Le,[e("div",Ve,[u(d(ie),{class:"w-5 h-5 text-gray-600"})]),e("div",Ee,[e("div",Be,a(s.customer_name),1),e("div",Ne,a(s.customer_email),1)])])]),e("td",Re,[e("div",ze,[e("img",{class:"h-12 w-12 rounded-lg object-cover",src:s.product_image,alt:s.product_name},null,8,Ie),e("div",Ue,[e("div",Ze,a(s.product_name),1),e("div",qe,a(s.ticket_price.toLocaleString())+" FCFA/billet",1)])])]),e("td",Je,[e("div",Ge,a(s.tickets_count)+" billets",1),e("div",He,"N° "+a(s.ticket_numbers.join(", ")),1)]),e("td",Ke,[e("div",Qe,a(s.total_amount.toLocaleString())+" FCFA",1),e("div",We,a(s.currency),1)]),e("td",Xe,[e("span",{class:k(P(s.status))},a(S(s.status)),3)]),e("td",Ye,[e("div",et,a(A(s.created_at)),1),e("div",tt,a(q(s.created_at)),1)]),e("td",st,[e("div",ot,[e("button",{onClick:O=>J(s),class:"text-[#0099cc] hover:text-[#0088bb] transition-colors",title:"Voir détails"},[u(d(de),{class:"w-4 h-4"})],8,at),s.status==="pending"?(n(),r("button",{key:0,onClick:O=>j(s),class:"text-green-600 hover:text-green-800 transition-colors",title:"Confirmer"},[u(d(ce),{class:"w-4 h-4"})],8,lt)):f("",!0),["pending","confirmed"].includes(s.status)?(n(),r("button",{key:1,onClick:O=>G(s),class:"text-red-600 hover:text-red-800 transition-colors",title:"Annuler"},[u(d(ue),{class:"w-4 h-4"})],8,nt)):f("",!0)])])]))),128))])])])),e("div",rt,[e("div",it,[t[21]||(t[21]=p(" Affichage de ",-1)),e("span",dt,a(z.value),1),t[22]||(t[22]=p(" à ",-1)),e("span",ct,a(I.value),1),t[23]||(t[23]=p(" sur ",-1)),e("span",ut,a(g.value.length),1),t[24]||(t[24]=p(" résultats ",-1))]),e("div",mt,[e("button",{onClick:U,disabled:c.value===1,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,pt),e("button",{onClick:Z,disabled:c.value===$.value,class:"px-3 py-1 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,xt)])])]),D.value?(n(),r("div",gt,[e("div",bt,[e("div",yt,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Détails de la commande",-1)),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600"},[u(d(le),{class:"w-6 h-6"})])]),i.value?(n(),r("div",ft,[e("div",vt,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"N° de commande",-1)),e("p",_t,a(i.value.order_number),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("p",ht,a(A(i.value.created_at)),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:k(P(i.value.status))},a(S(i.value.status)),3)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",wt,a(i.value.total_amount.toLocaleString())+" FCFA",1)])]),e("div",null,[t[33]||(t[33]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Informations client",-1)),e("div",kt,[e("div",Ct,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Dt,a(i.value.customer_name),1)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Mt,a(i.value.customer_email),1)])])])]),e("div",null,[t[34]||(t[34]=e("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Billets achetés",-1)),e("div",Ft,[e("p",$t,[e("strong",null,a(i.value.tickets_count)+" billets",1),p(" pour "+a(i.value.product_name),1)]),e("div",Pt,[(n(!0),r(h,null,w(i.value.ticket_numbers,s=>(n(),r("span",{key:s,class:"inline-block bg-[#0099cc] text-white px-2 py-1 rounded text-xs font-mono"}," #"+a(s),1))),128))])])])])):f("",!0),e("div",St,[e("button",{onClick:_,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300"}," Fermer "),i.value?.status==="pending"?(n(),r("button",{key:0,onClick:t[5]||(t[5]=s=>j(i.value)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," Confirmer la commande ")):f("",!0)])])])):f("",!0)]))}};export{Tt as default};
