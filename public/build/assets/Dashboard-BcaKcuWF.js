import{a as E,c as O}from"./app-BQ7SjCzr.js";import{r as f,c as $,j as B,b as u,e as t,g as l,w as p,h as I,F as C,y as F,u as i,aH as P,t as a,o as d,av as N,E as A,v as _,z as R,N as V,i as j,aJ as T,aK as z}from"./vendor-jx2CZFIM.js";function L(){const{get:v,loading:k,error:D}=E(),r=f({products:{total:0,active:0,total_views:0},orders:{total:0,total_revenue:0},lotteries:{total:0,active:0,completed:0,total_tickets_sold:0},revenue:{monthly:0,weekly:0,total:0}}),m=f([]),y=f([]),g=f([]),h=$(()=>[{label:"Produits actifs",value:r.value.products.active.toString(),total:`/ ${r.value.products.total}`,color:"bg-blue-500",icon:"CubeIcon"},{label:"Commandes",value:r.value.orders.total.toString(),color:"bg-green-500",icon:"ShoppingBagIcon"},{label:"Revenus total",value:c(r.value.revenue.total),color:"bg-yellow-500",icon:"CurrencyDollarIcon"},{label:"Tombolas actives",value:r.value.lotteries.active.toString(),total:`/ ${r.value.lotteries.total}`,color:"bg-purple-500",icon:"TicketIcon"}]),x=async()=>{try{const o=await v("/stats/merchant/dashboard");o&&o.success&&(r.value=o.data)}catch(o){console.error("Erreur lors du chargement des statistiques:",o)}},w=async()=>{try{const o=await v("/stats/merchant/orders");o&&o.success&&(m.value=o.data.recent_orders||[]);const n=await v("/stats/merchant/lotteries");n&&n.success&&(y.value=n.data.recent_lotteries||[]);const S=await v("/stats/merchant/analytics?period=30d");S&&S.success&&(g.value=S.data.top_products||[])}catch(o){console.error("Erreur lors du chargement des données récentes:",o)}},c=o=>{const n=parseFloat(o)||0;return n>=1e6?(n/1e6).toFixed(1)+"M FCFA":n>=1e3?(n/1e3).toFixed(0)+"k FCFA":n.toLocaleString("fr-FR")+" FCFA"};return{stats:h,dashboardStats:r,recentOrders:m,recentLotteries:y,topProducts:g,loading:k,error:D,loadDashboardData:async()=>{await Promise.all([x(),w()])},loadDashboardStats:x,loadRecentData:w,formatCurrency:c,formatDate:o=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(o)),getStatusColor:o=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800",active:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"})[o]||"bg-gray-100 text-gray-800"}}const M={class:"space-y-6"},q={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},G={class:"flex items-center"},H={class:"flex items-center"},J={class:"flex items-center"},K={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Q={class:"flex items-center justify-between"},U={class:"text-sm font-medium text-gray-600"},W={class:"text-3xl font-bold text-gray-900 mt-2"},X={class:"mt-4 pt-4 border-t border-gray-100"},Y={class:"flex items-center text-sm"},Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},tt={class:"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-gray-100"},et={class:"flex items-center justify-between mb-6"},st={class:"flex space-x-2"},ot=["onClick"],at={class:"h-64 bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-lg flex items-center justify-center"},lt={class:"text-center"},rt={class:"text-gray-400 text-sm"},nt={class:"mt-6 grid grid-cols-3 gap-4"},it={class:"text-center"},dt={class:"text-2xl font-bold text-[#0099cc]"},ct={class:"text-center"},ut={class:"text-2xl font-bold text-blue-600"},mt={class:"text-center"},gt={class:"text-2xl font-bold text-purple-600"},xt={class:"space-y-6"},bt={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},vt={class:"flex items-center justify-between mb-4"},ht={class:"space-y-3"},pt={class:"flex items-center space-x-3"},_t={class:"w-10 h-10 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},ft={class:"font-medium text-gray-900"},yt={class:"text-sm text-gray-500"},wt={class:"text-right"},Ct={class:"font-semibold text-gray-900"},Ft={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},kt={class:"flex items-center justify-between mb-4"},Dt={class:"space-y-3"},St={class:"flex-shrink-0 w-6 h-6 bg-[#0099cc] text-white text-xs font-bold rounded-full flex items-center justify-center"},jt={class:"flex-1 min-w-0"},Pt={class:"font-medium text-gray-900 truncate"},At={class:"flex items-center space-x-2 text-sm text-gray-500"},$t={__name:"Dashboard",setup(v){const{stats:k,recentOrders:D,topProducts:r,summary:m,loadDashboardData:y}=L(),g=f("30j"),h=$(()=>({totalSales:m.value.total_revenue||0,totalOrders:m.value.total_orders||0,avgOrder:m.value.avg_order_value||0})),x=c=>new Intl.NumberFormat("fr-FR").format(c),w=c=>({completed:"Terminé",pending:"En attente",processing:"En cours",cancelled:"Annulé",paid:"Payé",awaiting_payment:"En attente de paiement"})[c]||c;return B(async()=>{await y()}),(c,s)=>{const b=I("router-link");return d(),u("div",M,[s[13]||(s[13]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de Bord Vendeur"),t("p",{class:"mt-2 text-gray-600"},"Suivez vos ventes, gérez vos produits et analysez vos performances")],-1)),t("div",q,[l(b,{to:"/merchant/products/create",class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:p(()=>[t("div",G,[l(i(N),{class:"w-8 h-8 mr-4"}),s[0]||(s[0]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Nouveau Produit"),t("p",{class:"text-blue-100 text-sm"},"Publier un produit")],-1))])]),_:1}),l(b,{to:"/merchant/orders",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:p(()=>[t("div",H,[l(i(A),{class:"w-8 h-8 mr-4"}),s[1]||(s[1]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Commandes"),t("p",{class:"text-blue-100 text-sm"},"Suivre les ventes")],-1))])]),_:1}),l(b,{to:"/merchant/analytics",class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:p(()=>[t("div",J,[l(i(P),{class:"w-8 h-8 mr-4"}),s[2]||(s[2]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Analytiques"),t("p",{class:"text-purple-100 text-sm"},"Voir les stats")],-1))])]),_:1})]),t("div",K,[(d(!0),u(C,null,F(i(k),e=>(d(),u("div",{key:e.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200"},[t("div",Q,[t("div",null,[t("p",U,a(e.label),1),t("p",W,a(e.value),1)]),t("div",{class:_(["p-4 rounded-xl",e.color])},[(d(),R(V(e.icon),{class:"w-8 h-8 text-white"}))],2)]),t("div",X,[t("div",Y,[t("span",{class:_(["font-medium flex items-center px-2 py-1 rounded-full text-xs",e.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(d(),R(V(e.change>=0?i(T):i(z)),{class:"w-3 h-3 mr-1"})),j(" "+a(Math.abs(e.change))+"% ",1)],2),s[3]||(s[3]=t("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),t("div",Z,[t("div",tt,[t("div",et,[s[4]||(s[4]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Évolution des Ventes",-1)),t("div",st,[(d(),u(C,null,F(["7j","30j","90j"],e=>t("button",{key:e,onClick:o=>g.value=e,class:_(["px-3 py-1 rounded-lg text-sm font-medium transition-all",g.value===e?"bg-[#0099cc] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},a(e),11,ot)),64))])]),t("div",at,[t("div",lt,[l(i(P),{class:"w-16 h-16 text-[#0099cc] mx-auto mb-4"}),s[5]||(s[5]=t("p",{class:"text-gray-600 font-medium"},"Graphique des ventes",-1)),t("p",rt,"Données des derniers "+a(g.value),1)])]),t("div",nt,[t("div",it,[t("p",dt,a(x(h.value.totalSales||0)),1),s[6]||(s[6]=t("p",{class:"text-sm text-gray-600"},"Ventes totales (FCFA)",-1))]),t("div",ct,[t("p",ut,a(h.value.totalOrders||0),1),s[7]||(s[7]=t("p",{class:"text-sm text-gray-600"},"Commandes",-1))]),t("div",mt,[t("p",gt,a(x(h.value.avgOrder||0)),1),s[8]||(s[8]=t("p",{class:"text-sm text-gray-600"},"Panier moyen (FCFA)",-1))])])]),t("div",xt,[t("div",bt,[t("div",vt,[s[10]||(s[10]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes",-1)),l(b,{to:"/merchant/orders",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:p(()=>s[9]||(s[9]=[j(" Voir tout → ",-1)])),_:1,__:[9]})]),t("div",ht,[(d(!0),u(C,null,F(i(D),e=>(d(),u("div",{key:e.id,class:"flex items-center justify-between p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"},[t("div",pt,[t("div",_t,[l(i(A),{class:"w-5 h-5 text-[#0099cc]"})]),t("div",null,[t("p",ft,a(e.product_name),1),t("p",yt,a(e.customer_name),1)])]),t("div",wt,[t("p",Ct,a(x(e.amount||0))+" FCFA",1),t("span",{class:_(["inline-block px-2 py-1 text-xs font-medium rounded-full",e.status==="completed"?"bg-blue-100 text-blue-800":e.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},a(w(e.status)),3)])]))),128))])]),t("div",Ft,[t("div",kt,[s[12]||(s[12]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Produits populaires",-1)),l(b,{to:"/merchant/products",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:p(()=>s[11]||(s[11]=[j(" Gérer → ",-1)])),_:1,__:[11]})]),t("div",Dt,[(d(!0),u(C,null,F(i(r),(e,o)=>(d(),u("div",{key:e.id,class:"flex items-center space-x-3"},[t("div",St,a(o+1),1),l(O,{src:e.image_url||e.main_image||e.image,alt:e.name,"container-class":"w-12 h-12 rounded-lg","image-class":"w-12 h-12 rounded-lg object-cover","fallback-class":"w-12 h-12 rounded-lg","fallback-text":"Photo"},null,8,["src","alt"]),t("div",jt,[t("p",Pt,a(e.name),1),t("div",At,[t("span",null,a(e.sales)+" ventes",1),t("span",{class:_(["font-medium",e.growth>=0?"text-blue-600":"text-red-600"])},a(e.growth>=0?"+":"")+a(e.growth)+"% ",3)])])]))),128))])])])])])}}};export{$t as default};
