const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MerchantLayout-ehXDugB-.js","assets/vendor-CTxEzfV9.js","assets/Dashboard-CC_Tz33y.js","assets/Products-B7qDJLx2.js","assets/RocketLaunchIcon-Cq_GBda_.js","assets/CreateProduct-BKeZk_Pq.js","assets/EditProduct-CHrQPHTR.js","assets/Orders-BJak5TiH.js","assets/LotteriesSimple-D6hvpnbJ.js","assets/LotteryView-CMMxSmCz.js","assets/Analytics-BGwhXqX6.js","assets/Settings-BhnV8paX.js","assets/Profile-Cx1sEWBU.js"])))=>i.map(i=>d[i]);
import{a as Dt,r as R,d as Ot,c as Q,b as s,e,o as t,f as oe,u,g as ce,h as Xe,i as b,j as U,w as Y,k as pe,t as o,l as O,m as he,F as W,n as J,p as ne,q as Z,s as Ue,v as _e,x as de,y as ke,z as ge,A as G,B as X,C as Ge,D as Ee,E as ie,G as we,H as Ht,I as Lt,J as Gt,K as Kt,L as Zt,T as Wt,M as Jt,N as Xt,O as Yt}from"./vendor-CTxEzfV9.js";window.axios=Dt;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Qt="modulepreload",es=function(_){return"/build/"+_},jt={},$e=function(v,M,j){let f=Promise.resolve();if(M&&M.length>0){let c=function(y){return Promise.all(y.map(E=>Promise.resolve(E).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};document.getElementsByTagName("link");const $=document.querySelector("meta[property=csp-nonce]"),i=$?.nonce||$?.getAttribute("nonce");f=c(M.map(y=>{if(y=es(y),y in jt)return;jt[y]=!0;const E=y.endsWith(".css"),V=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${V}`))return;const A=document.createElement("link");if(A.rel=E?"stylesheet":Qt,E||(A.as="script"),A.crossOrigin="",A.href=y,i&&A.setAttribute("nonce",i),document.head.appendChild(A),E)return new Promise((I,D)=>{A.addEventListener("load",I),A.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${y}`)))})}))}function h($){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=$,window.dispatchEvent(i),!i.defaultPrevented)throw $}return f.then($=>{for(const i of $||[])i.status==="rejected"&&h(i.reason);return v().catch(h)})},ye=Dt.create({baseURL:"https://koumbaya.com/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});ye.interceptors.request.use(_=>{const v=localStorage.getItem("auth_token");return v&&(_.headers.Authorization=`Bearer ${v}`),_},_=>Promise.reject(_));ye.interceptors.response.use(_=>_,_=>{const v=localStorage.getItem("auth_token");return _.response?.status===401&&!_.config?.url?.includes("/auth/login")&&v&&(localStorage.removeItem("auth_token"),window.router?window.router.push("/login"):window.location.href="/login"),Promise.reject(_)});function ae(){const _=R(!1),v=R(null),M=async i=>{_.value=!0,v.value=null;try{return(await i()).data}catch(c){throw v.value=c.response?.data?.message||c.message||"Une erreur est survenue",c}finally{_.value=!1}};return{loading:_,error:v,get:(i,c={})=>M(()=>ye.get(i,c)),post:(i,c={},y={})=>{if(c instanceof FormData){const E={...y};return delete E.headers?.["Content-Type"],M(()=>ye.post(i,c,E))}return M(()=>ye.post(i,c,y))},put:(i,c={},y={})=>M(()=>ye.put(i,c,y)),delete:(i,c={})=>M(()=>ye.delete(i,c)),api:ye}}const ve=Ot("auth",()=>{const _=R(null),v=R(localStorage.getItem("auth_token")),M=R(!1),j=R(""),f=Q(()=>!!v.value&&!!_.value),h=Q(()=>{if(_.value?.userType?.name==="MANAGER"||_.value?.user_type_id===1)return!0;if(_.value?.roles&&Array.isArray(_.value.roles)){const K=["Super Admin","Admin","Agent","Agent Back Office"];return _.value.roles.some(ee=>K.includes(ee.name))}return _.value?.email?["superadmin@koumbaya.ga","admin@koumbaya.ga","agent@koumbaya.ga","backoffice@koumbaya.ga"].includes(_.value.email):!1}),$=Q(()=>{if(_.value?.roles&&Array.isArray(_.value.roles)){const K=["Super Admin","Admin"];return _.value.roles.some(ee=>K.includes(ee.name))}return _.value?.email?.includes("superadmin")?!0:_.value?.email?["superadmin@koumbaya.ga","admin@koumbaya.ga"].includes(_.value.email):!1}),i=Q(()=>{if(_.value?.roles&&Array.isArray(_.value.roles)){const K=["Agent","Agent Back Office"];return _.value.roles.some(ee=>K.includes(ee.name))}return _.value?.email?["agent@koumbaya.ga","backoffice@koumbaya.ga"].includes(_.value.email):!1}),c=Q(()=>_.value?.roles&&Array.isArray(_.value.roles)?_.value.roles.some(K=>K.name==="Business"):_.value?.can_sell&&_.value?.account_type==="business"?!0:_.value?.email?["business@koumbaya.ga","business2@koumbaya.ga"].includes(_.value.email):!1),y=Q(()=>h.value?!1:_.value?.roles&&Array.isArray(_.value.roles)?_.value.roles.some(K=>K.name==="Particulier"):_.value?.account_type==="personal"?!0:!h.value&&!c.value),E=Q(()=>_.value?.account_type==="business"||_.value?.roles?.some(K=>K.name==="Business")),V=Q(()=>_.value?.account_type==="personal"||_.value?.roles?.some(K=>K.name==="Particulier")),A=Q(()=>_.value?.can_sell===!0||E.value||_.value?.roles?.some(K=>K.name==="Business"));async function I(K){M.value=!0,j.value="";try{const ee=await ye.post("/auth/login",K),{access_token:se,user:H}=ee.data;return v.value=se,_.value=H,localStorage.setItem("auth_token",se),{success:!0}}catch(ee){let se="Erreur de connexion";if(ee.response?.status===401)se="Identifiants incorrects";else if(ee.response?.status===429)se="Trop de tentatives. Veuillez patienter.";else if(ee.response?.status===422){const H=ee.response?.data?.errors;H?se=Object.values(H).flat().join(", "):se=ee.response?.data?.message||"Données invalides"}else ee.response?se=ee.response?.data?.error||ee.response?.data?.message||"Erreur de connexion":se="Problème de connexion réseau";return j.value=se,{success:!1,error:se}}finally{M.value=!1}}async function D(K){M.value=!0,j.value="";try{const ee=await ye.post("/auth/register",K),{access_token:se,user:H}=ee.data;return v.value=se,_.value=H,localStorage.setItem("auth_token",se),{success:!0}}catch(ee){return j.value=ee.response?.data?.error||ee.response?.data?.message||"Erreur lors de l'inscription",{success:!1,error:j.value}}finally{M.value=!1}}async function z(){try{await ye.post("/auth/logout")}catch(K){console.error("Erreur lors de la déconnexion:",K)}finally{_.value=null,v.value=null,localStorage.removeItem("auth_token")}}async function p(){if(v.value)try{const K=await ye.get("/auth/me");_.value=K.data.user}catch{_.value=null,v.value=null,localStorage.removeItem("auth_token")}}async function d(){if(f.value)try{const K=await ye.get("/auth/me");_.value=K.data.user}catch(K){console.error("Erreur lors du rafraîchissement:",K)}}function S(){j.value=""}function n(K){j.value=K}function l(K){_.value=K}function a(K){v.value=K,K?localStorage.setItem("auth_token",K):localStorage.removeItem("auth_token")}function L(){return _.value?(console.log("🔄 Logique de redirection:",{email:_.value?.email,user:_.value,roles:_.value?.roles,isManager:h.value,isAdmin:$.value,isAgent:i.value,isMerchant:c.value,isCustomer:y.value,account_type:_.value?.account_type,roles:_.value?.roles?.map(K=>K.name)}),h.value?(console.log("✅ Redirection vers admin.dashboard (Manager)"),"admin.dashboard"):_.value?.roles&&Array.isArray(_.value.roles)&&_.value.roles.some(ee=>ee.name==="Business")?(console.log("✅ Redirection vers merchant.dashboard (Business)"),"merchant.dashboard"):(console.log("✅ Redirection vers customer.dashboard (Customer par défaut)"),"customer.dashboard")):"home"}return{user:_,token:v,loading:M,error:j,isAuthenticated:f,isManager:h,isAdmin:$,isAgent:i,isMerchant:c,isCustomer:y,isBusiness:E,isPersonal:V,canSell:A,login:I,register:D,logout:z,checkAuth:p,refreshUser:d,clearError:S,setError:n,setUser:l,setToken:a,getDefaultRedirect:L}}),St="/build/logo.png";function ts(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function at(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})])}function ss(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function ot(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function Fe(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function He(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function Tt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"})])}function os(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})])}function ht(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function yt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function nt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function Vt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function At(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})])}function it(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function Pt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function Rt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function je(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function le(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function lt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function rs(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Ke(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Et(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function as(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}function ns(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"})])}function is(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"})])}function Ft(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}function Ie(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ls(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})])}function ds(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function cs(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Ze(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function be(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})])}function Be(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function We(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Me(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Oe(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function us(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}function ms(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})])}function It(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function Te(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function ps(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"})])}function Nt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Ne(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function gt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])}function gs(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}function rt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function ze(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function vt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function zt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function vs(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}function dt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}function Re(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function xt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function Je(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function Se(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"})])}function ft(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function qe(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})])}function _t(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})])}function qt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}function Pe(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function Ye(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function wt(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function De(_,v){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const Qe="/build/assets/logo-ZbB75Npb.png",Le=(_,v)=>{const M=_.__vccOpts||_;for(const[j,f]of v)M[j]=f;return M},xs={class:"bg-white border-t border-gray-200 mt-12"},fs={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},bs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},hs={class:"col-span-1 md:col-span-2 lg:col-span-1"},ys={class:"flex items-center"},_s=["src"],ws={__name:"KoumbayaFooter",setup(_){return(v,M)=>(t(),s("footer",xs,[e("div",fs,[e("div",bs,[e("div",hs,[e("div",ys,[e("img",{src:u(Qe),alt:"Koumbaya",class:"h-15 w-auto"},null,8,_s)]),M[0]||(M[0]=oe('<p class="mt-4 text-gray-600 text-sm leading-relaxed" data-v-97bf4cec> La marketplace innovante qui vous permet d&#39;acquérir des produits premium à prix imbattables grâce aux tombolas équitables. </p><div class="mt-6 flex space-x-4" data-v-97bf4cec><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>Facebook</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" data-v-97bf4cec></path></svg></a><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>Instagram</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path fill-rule="evenodd" d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.618 5.367 11.986 11.988 11.986s11.987-5.368 11.987-11.986C24.004 5.367 18.635.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.68 13.729 3.68 12.417s.518-2.478 1.446-3.274c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.928.796 1.446 1.962 1.446 3.274s-.518 2.478-1.446 3.274c-.875.807-2.026 1.297-3.323 1.297zm7.718 0c-1.297 0-2.448-.49-3.323-1.297-.928-.796-1.446-1.962-1.446-3.274s.518-2.478 1.446-3.274c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.928.796 1.446 1.962 1.446 3.274s-.518 2.478-1.446 3.274c-.875.807-2.026 1.297-3.323 1.297z" clip-rule="evenodd" data-v-97bf4cec></path></svg></a><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>Twitter</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" data-v-97bf4cec></path></svg></a><a href="#" class="text-gray-400 hover:text-[#0099cc] transition-colors" data-v-97bf4cec><span class="sr-only" data-v-97bf4cec>LinkedIn</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" data-v-97bf4cec><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" data-v-97bf4cec></path></svg></a></div>',2))]),M[1]||(M[1]=oe('<div data-v-97bf4cec><h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4" data-v-97bf4cec> Informations sur l&#39;entreprise </h3><ul class="space-y-3" data-v-97bf4cec><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>À propos de Koumbaya</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Affiliés &amp; Influenceurs</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Gagnez des Gombos</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Nous contacter</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Carrières</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Media &amp; Presse</a></li></ul></div><div data-v-97bf4cec><h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4" data-v-97bf4cec> Service client </h3><ul class="space-y-3" data-v-97bf4cec><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Participation aux tombolas</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Politique de propriété intellectuelle</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Informations sur la réception des commandes</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Signaler une activité suspecte</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Centre d&#39;assistance</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Centre de sécurité</a></li></ul></div><div data-v-97bf4cec><h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4" data-v-97bf4cec> Centre d&#39;Assistance </h3><ul class="space-y-3" data-v-97bf4cec><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Centre de Sécurité</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Avoir la paix sur Koumbaya</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Plan du site</a></li><li data-v-97bf4cec><a href="#" class="text-sm text-gray-600 hover:text-[#0099cc] transition-colors font-medium" data-v-97bf4cec>Vendre sur Koumbaya</a></li></ul></div>',3))]),M[2]||(M[2]=oe('<div class="mt-12 pt-8 border-t border-gray-200" data-v-97bf4cec><div class="flex flex-col md:flex-row justify-between items-center" data-v-97bf4cec><div class="flex flex-wrap items-center space-x-6 mb-4 md:mb-0" data-v-97bf4cec><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Conditions d&#39;utilisation</a><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Politique de confidentialité</a><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Mentions légales</a><a href="#" class="text-sm text-gray-500 hover:text-[#0099cc] transition-colors" data-v-97bf4cec>Cookies</a></div><div class="text-sm text-gray-500" data-v-97bf4cec> © 2025 Koumbaya. Tous droits réservés. </div></div></div>',1))])]))}},Ut=Le(ws,[["__scopeId","data-v-97bf4cec"]]),$s={class:"min-h-screen bg-gray-50"},ks={class:"bg-white shadow-sm"},Cs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},js={class:"flex justify-between items-center h-16"},As={key:1,class:"flex items-center space-x-1 sm:space-x-2"},Ps={class:"hidden md:flex space-x-8"},Es={class:"flex items-center space-x-2 sm:space-x-4"},Is={key:0,class:"flex items-center space-x-2 sm:space-x-4"},Ms={class:"relative"},Ds={class:"w-8 h-8 bg-[#0099cc] rounded-full flex items-center justify-center"},Ls={class:"text-sm font-medium text-white"},Ss={class:"px-4 py-2 text-sm text-gray-700 border-b border-gray-100"},Ts={class:"font-medium"},Vs={class:"text-xs text-gray-500"},Rs={key:1,class:"flex items-center space-x-2 sm:space-x-4"},Fs={key:0,class:"md:hidden border-t border-gray-200 bg-white"},Ns={class:"px-4 py-3 space-y-1"},zs={class:"border-t border-gray-200 pt-4 mt-4"},qs={key:0,class:"space-y-2"},Us={class:"px-3 py-2 text-sm text-gray-600"},Bs={key:1,class:"space-y-2"},Os={__name:"GuestLayout",setup(_){const v=he(),M=ve(),j=R(!1),f=R(!1),h=R(!1),$=Q(()=>{const V=M.user;return V?(V.first_name?.[0]||"")+(V.last_name?.[0]||""):"U"}),i=Q(()=>{const V=M.getDefaultRedirect();return{"admin.dashboard":"/admin","merchant.dashboard":"/merchant/dashboard","customer.dashboard":"/customer"}[V]||"/customer"}),c=async()=>{f.value=!1,await M.logout(),v.push({name:"login"})},y=()=>{h.value=!0},E=V=>{V.target.closest(".relative")||(f.value=!1)};return ce(()=>{document.addEventListener("click",E)}),Xe(()=>{document.removeEventListener("click",E)}),(V,A)=>{const I=pe("router-link"),D=pe("router-view");return t(),s("div",$s,[e("header",ks,[e("div",Cs,[e("div",js,[b(I,{to:"/",class:"flex items-center min-w-0 flex-shrink-0"},{default:Y(()=>[h.value?(t(),s("div",As,A[11]||(A[11]=[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-[#0099cc] rounded flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white font-bold text-sm sm:text-lg"},"K")],-1),e("span",{class:"text-lg sm:text-xl font-bold text-[#0099cc] whitespace-nowrap"},"Koumbaya",-1)]))):(t(),s("img",{key:0,src:St,alt:"Koumbaya",class:"h-8 sm:h-10 w-auto object-contain max-w-none",onError:y},null,32))]),_:1}),e("nav",Ps,[b(I,{to:"/",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:Y(()=>A[12]||(A[12]=[O(" Accueil ",-1)])),_:1,__:[12]}),b(I,{to:"/products",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:Y(()=>A[13]||(A[13]=[O(" Produits ",-1)])),_:1,__:[13]}),b(I,{to:"/how-it-works",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:Y(()=>A[14]||(A[14]=[O(" Comment ça marche ",-1)])),_:1,__:[14]}),b(I,{to:"/contact",class:"text-gray-600 hover:text-[#0099cc] px-3 py-2 rounded-md text-sm font-medium transition-colors"},{default:Y(()=>A[15]||(A[15]=[O(" Contact ",-1)])),_:1,__:[15]})]),e("div",Es,[u(M).isAuthenticated?(t(),s("div",Is,[b(I,{to:i.value,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors flex items-center whitespace-nowrap"},{default:Y(()=>[b(u(Pe),{class:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2 flex-shrink-0"}),A[16]||(A[16]=e("span",{class:"hidden sm:inline"},"Mon Espace",-1)),A[17]||(A[17]=e("span",{class:"sm:hidden"},"Espace",-1))]),_:1,__:[16,17]},8,["to"]),e("div",Ms,[e("button",{onClick:A[0]||(A[0]=z=>f.value=!f.value),class:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100"},[e("div",Ds,[e("span",Ls,o($.value),1)]),b(u(lt),{class:"w-4 h-4 text-gray-500"})]),f.value?(t(),s("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",onClick:A[2]||(A[2]=z=>f.value=!1)},[e("div",Ss,[e("p",Ts,o(u(M).user?.first_name)+" "+o(u(M).user?.last_name),1),e("p",Vs,o(u(M).user?.email),1)]),b(I,{to:i.value,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:A[1]||(A[1]=z=>f.value=!1)},{default:Y(()=>[b(u(Pe),{class:"w-4 h-4 inline mr-2"}),A[18]||(A[18]=O(" Mon Espace ",-1))]),_:1,__:[18]},8,["to"]),e("button",{onClick:c,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[b(u(Fe),{class:"w-4 h-4 inline mr-2"}),A[19]||(A[19]=O(" Se déconnecter ",-1))])])):U("",!0)])])):(t(),s("div",Rs,[b(I,{to:"/login",class:"text-gray-600 hover:text-[#0099cc] px-2 sm:px-3 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap"},{default:Y(()=>A[20]||(A[20]=[e("span",{class:"hidden sm:inline"},"Se connecter",-1),e("span",{class:"sm:hidden"},"Connexion",-1)])),_:1,__:[20]}),b(I,{to:"/register",class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap"},{default:Y(()=>A[21]||(A[21]=[O(" S'inscrire ",-1)])),_:1,__:[21]})])),e("button",{onClick:A[3]||(A[3]=z=>j.value=!j.value),class:"md:hidden p-1 sm:p-2 rounded-md text-gray-400 hover:text-gray-600 flex-shrink-0"},[b(u(yt),{class:"w-5 h-5 sm:w-6 sm:h-6"})])])])]),j.value?(t(),s("div",Fs,[e("div",Ns,[b(I,{to:"/",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:A[4]||(A[4]=z=>j.value=!1)},{default:Y(()=>A[22]||(A[22]=[O(" Accueil ",-1)])),_:1,__:[22]}),b(I,{to:"/products",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:A[5]||(A[5]=z=>j.value=!1)},{default:Y(()=>A[23]||(A[23]=[O(" Produits ",-1)])),_:1,__:[23]}),b(I,{to:"/how-it-works",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:A[6]||(A[6]=z=>j.value=!1)},{default:Y(()=>A[24]||(A[24]=[O(" Comment ça marche ",-1)])),_:1,__:[24]}),b(I,{to:"/contact",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:A[7]||(A[7]=z=>j.value=!1)},{default:Y(()=>A[25]||(A[25]=[O(" Contact ",-1)])),_:1,__:[25]}),e("div",zs,[u(M).isAuthenticated?(t(),s("div",qs,[b(I,{to:i.value,class:"block px-3 py-2 rounded-md text-base font-medium bg-[#0099cc] text-white hover:bg-[#0088bb] flex items-center",onClick:A[8]||(A[8]=z=>j.value=!1)},{default:Y(()=>[b(u(Pe),{class:"w-5 h-5 mr-2"}),A[26]||(A[26]=O(" Mon Espace ",-1))]),_:1,__:[26]},8,["to"]),e("div",Us,o(u(M).user?.first_name)+" "+o(u(M).user?.last_name),1),e("button",{onClick:c,class:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5"},[b(u(Fe),{class:"w-5 h-5 inline mr-2"}),A[27]||(A[27]=O(" Se déconnecter ",-1))])])):(t(),s("div",Bs,[b(I,{to:"/login",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5",onClick:A[9]||(A[9]=z=>j.value=!1)},{default:Y(()=>A[28]||(A[28]=[O(" Se connecter ",-1)])),_:1,__:[28]}),b(I,{to:"/register",class:"block px-3 py-2 rounded-md text-base font-medium bg-[#0099cc] text-white hover:bg-[#0088bb]",onClick:A[10]||(A[10]=z=>j.value=!1)},{default:Y(()=>A[29]||(A[29]=[O(" S'inscrire ",-1)])),_:1,__:[29]})]))])])])):U("",!0)]),e("main",null,[b(D)]),b(Ut)])}}},Hs={key:0,class:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-4 mb-6 shadow-sm"},Gs={class:"flex items-start"},Ks={class:"flex-shrink-0"},Zs={class:"ml-3 flex-1"},Ws={class:"flex flex-col sm:flex-row gap-2"},Js=["disabled"],Xs={key:0},Ys={key:1,class:"flex items-center"},Qs={class:"flex-shrink-0 ml-2"},eo={__name:"VerificationBanner",setup(_){const v=ve(),{post:M}=ae(),j=R(!1),f=R(!1),h=Q(()=>v.user),$=Q(()=>!f.value),i=async()=>{j.value=!0;try{const E=await M("/auth/resend-verification",{email:h.value.email});window.$toast&&window.$toast.success(`Un nouvel email de vérification a été envoyé à ${h.value.email}. Vérifiez votre boîte email.`,"✅ Email envoyé",8e3),setTimeout(()=>{f.value=!0,localStorage.setItem("verification_banner_hidden_until",Date.now()+1800*1e3)},2e3)}catch(E){console.error("Erreur lors de l'envoi de l'email de vérification:",E);let V="Une erreur est survenue lors de l'envoi de l'email.";E.response?.status===429?V="Trop de tentatives. Veuillez patienter avant de renvoyer un email.":E.response?.data?.message&&(V=E.response.data.message),window.$toast&&window.$toast.error(V,"Erreur")}finally{j.value=!1}},c=()=>{f.value=!0,localStorage.setItem("verification_banner_hidden_until",Date.now()+3600*1e3)},y=localStorage.getItem("verification_banner_hidden_until");return y&&Date.now()<parseInt(y)&&(f.value=!0),(E,V)=>h.value&&!h.value.verified_at&&$.value?(t(),s("div",Hs,[e("div",Gs,[e("div",Ks,[b(u(Be),{class:"h-6 w-6 text-yellow-600"})]),e("div",Zs,[V[1]||(V[1]=e("h3",{class:"text-sm font-semibold text-yellow-800 mb-1"}," Compte non vérifié ",-1)),V[2]||(V[2]=e("p",{class:"text-sm text-yellow-700 mb-3"}," Votre compte n'est pas encore vérifié. Certaines fonctionnalités peuvent être limitées. ",-1)),e("div",Ws,[e("button",{onClick:i,disabled:j.value,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-lg text-yellow-800 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors disabled:opacity-50"},[j.value?(t(),s("span",Ys,V[0]||(V[0]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-yellow-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),O(" Envoi en cours... ",-1)]))):(t(),s("span",Xs,"Renvoyer l'email de vérification"))],8,Js),e("button",{onClick:c,class:"inline-flex items-center px-3 py-2 text-sm leading-4 font-medium rounded-lg text-yellow-600 hover:text-yellow-800 transition-colors"}," Masquer ")])]),e("div",Qs,[e("button",{onClick:c,class:"inline-flex rounded-lg p-1.5 text-yellow-400 hover:text-yellow-600 hover:bg-yellow-100 transition-colors"},[b(u(De),{class:"h-4 w-4"})])])])])):U("",!0)}},to={class:"min-h-screen bg-gray-50"},so={class:"bg-white shadow-sm border-b border-gray-200"},oo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ro={class:"flex justify-between items-center h-16"},ao={class:"flex items-center min-w-0 flex-shrink-0"},no={key:1,class:"flex items-center space-x-1 sm:space-x-2"},io={class:"hidden md:flex space-x-8"},lo={class:"flex items-center space-x-2 sm:space-x-4"},co={class:"p-1 sm:p-2 text-gray-400 hover:text-gray-600 relative"},uo={key:0,class:"absolute top-0 right-0 block h-2 w-2 bg-red-400 rounded-full"},mo={key:1,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold"},po={class:"relative"},go={class:"w-7 h-7 sm:w-8 sm:h-8 bg-[#0099cc] rounded-full flex items-center justify-center flex-shrink-0"},vo={class:"text-xs sm:text-sm font-medium text-white"},xo={class:"hidden md:block text-left min-w-0"},fo={class:"text-sm font-medium text-gray-700 truncate"},bo={class:"text-xs text-gray-500 truncate"},ho={key:0,class:"md:hidden border-t border-gray-200 bg-white"},yo={class:"px-4 py-3 space-y-1"},_o={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},wo={__name:"CustomerLayout",setup(_){const v=ve(),M=he(),{get:j}=ae(),f=R(!1),h=R(!1),$=R(!1),i=R(0),c=[{name:"customer.dashboard",to:{name:"customer.dashboard"},label:"Accueil"},{name:"customer.products",to:{name:"customer.products"},label:"Produits"},{name:"customer.tickets",to:{name:"customer.tickets"},label:"Mes Tickets"}],y=Q(()=>{const z=v.user;return z?(z.first_name?.[0]||"")+(z.last_name?.[0]||""):"U"}),E=Q(()=>v.isAuthenticated&&v.user&&!v.user.verified_at),V=async()=>{await v.logout(),M.push({name:"login"})},A=()=>{$.value=!0},I=z=>{z.target.closest(".relative")||(f.value=!1)},D=async()=>{try{const z=await j("/notifications/unread-count");z&&z.data&&z.data.unread_count!==void 0&&(i.value=z.data.unread_count)}catch(z){console.error("Erreur lors du chargement des notifications:",z),i.value=0}};return ce(()=>{document.addEventListener("click",I),D();const z=setInterval(D,120*1e3);Xe(()=>{document.removeEventListener("click",I),clearInterval(z)})}),(z,p)=>{const d=pe("router-link"),S=pe("router-view");return t(),s("div",to,[e("header",so,[e("div",oo,[e("div",ro,[e("div",ao,[b(d,{to:"/customer",class:"flex items-center"},{default:Y(()=>[$.value?(t(),s("div",no,p[6]||(p[6]=[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-[#0099cc] rounded flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-white font-bold text-sm sm:text-lg"},"K")],-1),e("span",{class:"text-lg sm:text-xl font-bold text-[#0099cc] whitespace-nowrap"},"Koumbaya",-1)]))):(t(),s("img",{key:0,class:"h-8 sm:h-10 w-auto object-contain max-w-none",src:St,alt:"Koumbaya Marketplace",onError:A},null,32))]),_:1})]),e("nav",io,[(t(),s(W,null,J(c,n=>b(d,{key:n.name,to:n.to,class:Z(["px-3 py-2 rounded-md text-sm font-medium transition-colors",z.$route.name===n.name?"text-white bg-[#0099cc]":"text-gray-600 hover:text-[#0099cc] hover:bg-[#0099cc]/5"])},{default:Y(()=>[O(o(n.label),1)]),_:2},1032,["to","class"])),64))]),e("div",lo,[e("button",co,[b(u(nt),{class:"w-5 h-5 sm:w-6 sm:h-6"}),i.value>0?(t(),s("span",uo)):U("",!0),i.value>9?(t(),s("span",mo,o(i.value>99?"99+":i.value),1)):U("",!0)]),e("div",po,[e("button",{onClick:p[0]||(p[0]=n=>f.value=!f.value),class:"flex items-center space-x-1 sm:space-x-3 p-1 sm:p-2 rounded-lg hover:bg-gray-100"},[e("div",go,[e("span",vo,o(y.value),1)]),e("div",xo,[e("p",fo,o(u(v).user?.first_name),1),e("p",bo,o(u(v).user?.email),1)]),b(u(lt),{class:"w-3 h-3 sm:w-4 sm:h-4 text-gray-500 flex-shrink-0"})]),f.value?(t(),s("div",{key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",onClick:p[3]||(p[3]=n=>f.value=!1)},[b(d,{to:"/customer/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:p[1]||(p[1]=n=>f.value=!1)},{default:Y(()=>[b(u(Pe),{class:"w-4 h-4 inline mr-2"}),p[7]||(p[7]=O(" Mon Profil ",-1))]),_:1,__:[7]}),b(d,{to:"/customer/tickets",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:p[2]||(p[2]=n=>f.value=!1)},{default:Y(()=>[b(u(Se),{class:"w-4 h-4 inline mr-2"}),p[8]||(p[8]=O(" Mes Tickets ",-1))]),_:1,__:[8]}),p[10]||(p[10]=e("div",{class:"border-t border-gray-100 my-1"},null,-1)),e("button",{onClick:V,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[b(u(Fe),{class:"w-4 h-4 inline mr-2"}),p[9]||(p[9]=O(" Se déconnecter ",-1))])])):U("",!0)]),e("button",{onClick:p[4]||(p[4]=n=>h.value=!h.value),class:"md:hidden p-1 sm:p-2 rounded-md text-gray-400 hover:text-gray-600 flex-shrink-0"},[b(u(yt),{class:"w-5 h-5 sm:w-6 sm:h-6"})])])])]),h.value?(t(),s("div",ho,[e("div",yo,[(t(),s(W,null,J(c,n=>b(d,{key:n.name,to:n.to,class:Z(["block px-3 py-2 rounded-md text-base font-medium",z.$route.name===n.name?"text-[#0099cc] bg-blue-50":"text-gray-600 hover:text-[#0099cc] hover:bg-blue-50"]),onClick:p[5]||(p[5]=l=>h.value=!1)},{default:Y(()=>[O(o(n.label),1)]),_:2},1032,["to","class"])),64))])])):U("",!0)]),e("main",_o,[E.value?(t(),ne(eo,{key:0})):U("",!0),b(S)]),b(Ut)])}}},$o="/build/icon.png",ko={class:"min-h-screen admin-layout"},Co={class:"mt-6 flex-1"},jo={class:"px-3 space-y-1"},Ao={class:"font-medium"},Po={key:0,class:"ml-auto bg-orange-500 text-white text-xs px-2 py-1 rounded-full"},Eo={class:"absolute bottom-4 left-0 right-0 px-3"},Io={class:"bg-gray-700 rounded-lg p-4"},Mo={class:"flex items-center space-x-3"},Do={class:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center"},Lo={class:"flex-1 min-w-0"},So={class:"text-sm font-medium text-white truncate"},To={class:"lg:pl-72"},Vo={class:"admin-header sticky top-0 z-30"},Ro={class:"flex items-center justify-between px-6 py-4"},Fo={class:"flex items-center space-x-4"},No={class:"hidden lg:flex items-center space-x-2 text-sm"},zo={class:"text-gray-600"},qo={class:"flex items-center space-x-4"},Uo={class:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"},Bo={class:"hidden md:flex items-center"},Oo={class:"relative"},Ho={class:"relative"},Go={class:"w-8 h-8 bg-[#0099cc] rounded-lg flex items-center justify-center"},Ko={class:"text-sm font-semibold text-white"},Zo={class:"hidden md:block text-left"},Wo={class:"text-sm font-semibold text-gray-800"},Jo={class:"px-4 py-3 border-b border-gray-100"},Xo={class:"text-sm font-medium text-gray-800"},Yo={class:"text-xs text-gray-500"},Qo={href:"#",class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 transition-colors"},er={href:"#",class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 transition-colors"},tr={class:"border-t border-gray-100 mt-2 pt-2"},sr={class:"p-6"},or={__name:"AdminLayout",setup(_){const v=ve(),M=he(),j=Ue(),{get:f}=ae(),h=R(!0),$=R(!1),i=R({users:0,lotteries:0,refunds:0}),c=Q(()=>[{name:"admin.dashboard",to:{name:"admin.dashboard"},label:"Tableau de bord",icon:It},{name:"admin.users",to:{name:"admin.users"},label:"Utilisateurs",icon:Ye,badge:i.value.users>0?i.value.users.toString():null},{name:"admin.products",to:{name:"admin.products"},label:"Produits",icon:Re},{name:"admin.lotteries",to:{name:"admin.lotteries"},label:"Tombolas",icon:Oe,badge:i.value.lotteries>0?i.value.lotteries.toString():null},{name:"admin.refunds",to:{name:"admin.refunds"},label:"Remboursements",icon:Ie,badge:i.value.refunds>0?i.value.refunds.toString():null},{name:"admin.payments",to:{name:"admin.payments"},label:"Paiements",icon:Ie},{name:"admin.settings",to:{name:"admin.settings"},label:"Paramètres",icon:Et}]),y=Q(()=>c.value.find(z=>z.name===j.name)?.label||"Page"),E=async()=>{try{const D=await f("/admin/dashboard/stats");D?.data?.users&&(i.value.users=D.data.users.growth>0?Math.ceil(D.data.users.total*(D.data.users.growth/100)):0);const z=await f("/admin/lotteries?status=active");if(z?.data?.lotteries){const d=z.data.lotteries.filter(S=>{const a=(new Date(S.end_date)-new Date)/(1e3*60*60);return a<=24&&a>0});i.value.lotteries=d.length}const p=await f("/admin/refunds?status=pending");p?.data?.refunds&&(i.value.refunds=p.data.refunds.length)}catch(D){console.error("Erreur lors du chargement des compteurs de badges:",D)}},V=Q(()=>{const D=v.user;return D?(D.first_name?.[0]||"")+(D.last_name?.[0]||""):"AD"}),A=async()=>{await v.logout(),M.push({name:"login"})},I=D=>{D.target.closest(".relative")||($.value=!1)};return ce(()=>{document.addEventListener("click",I),E();const D=setInterval(E,300*1e3);Xe(()=>{document.removeEventListener("click",I),clearInterval(D)})}),(D,z)=>{const p=pe("router-link"),d=pe("router-view");return t(),s("div",ko,[e("aside",{class:Z(["fixed inset-y-0 left-0 z-50 w-72 admin-sidebar transform transition-transform duration-300 ease-in-out lg:translate-x-0",{"-translate-x-full lg:translate-x-0":!h.value,"translate-x-0":h.value}])},[z[5]||(z[5]=oe('<div class="flex items-center justify-between h-16 px-6 border-b border-gray-700"><div class="flex items-center space-x-3"><div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center p-1"><img src="'+$o+'" alt="Koumbaya" class="w-full h-full object-contain"></div><div class="text-white"><h1 class="text-lg font-bold">Koumbaya</h1><p class="text-xs text-gray-300">Administration</p></div></div></div>',1)),e("nav",Co,[e("div",jo,[(t(!0),s(W,null,J(c.value,S=>(t(),ne(p,{key:S.name,to:S.to,class:Z(["admin-sidebar-item",D.$route.name===S.name?"active":""])},{default:Y(()=>[(t(),ne(_e(S.icon),{class:"w-5 h-5 mr-3"})),e("span",Ao,o(S.label),1),S.badge?(t(),s("span",Po,o(S.badge),1)):U("",!0)]),_:2},1032,["to","class"]))),128))]),e("div",Eo,[e("div",Io,[e("div",Mo,[e("div",Do,[b(u(Pe),{class:"w-5 h-5 text-gray-300"})]),e("div",Lo,[e("p",So,o(u(v).user?.first_name)+" "+o(u(v).user?.last_name),1),z[4]||(z[4]=e("p",{class:"text-xs text-gray-300 truncate"},"Super Administrateur",-1))]),e("button",{onClick:A,class:"text-gray-300 hover:text-white transition-colors",title:"Se déconnecter"},[b(u(Fe),{class:"w-5 h-5"})])])])])])],2),h.value?(t(),s("div",{key:0,class:"fixed inset-0 z-40 bg-black/20 lg:hidden",onClick:z[0]||(z[0]=S=>h.value=!1)})):U("",!0),e("div",To,[e("header",Vo,[e("div",Ro,[e("div",Fo,[e("button",{onClick:z[1]||(z[1]=S=>h.value=!h.value),class:"lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors"},[b(u(yt),{class:"w-6 h-6"})]),e("nav",No,[b(u(It),{class:"w-4 h-4 text-gray-400"}),b(u(rs),{class:"w-4 h-4 text-gray-400"}),e("span",zo,o(y.value),1)])]),e("div",qo,[e("button",Uo,[b(u(nt),{class:"w-6 h-6"}),z[6]||(z[6]=e("span",{class:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"},null,-1))]),e("div",Bo,[e("div",Oo,[b(u(Ne),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),z[7]||(z[7]=e("input",{type:"text",placeholder:"Rechercher...",class:"pl-10 pr-4 py-2 w-64 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0099cc] focus:border-transparent"},null,-1))])]),e("div",Ho,[e("button",{onClick:z[2]||(z[2]=S=>$.value=!$.value),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",Go,[e("span",Ko,o(V.value),1)]),e("div",Zo,[e("p",Wo,o(u(v).user?.first_name)+" "+o(u(v).user?.last_name),1),z[8]||(z[8]=e("p",{class:"text-xs text-gray-500"},"Super Admin",-1))]),b(u(lt),{class:"w-4 h-4 text-gray-400"})]),$.value?(t(),s("div",{key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",onClick:z[3]||(z[3]=S=>$.value=!1)},[e("div",Jo,[e("p",Xo,o(u(v).user?.first_name)+" "+o(u(v).user?.last_name),1),e("p",Yo,o(u(v).user?.email),1)]),e("a",Qo,[b(u(Pe),{class:"w-4 h-4 mr-3 text-gray-400"}),z[9]||(z[9]=O(" Mon Profil ",-1))]),e("a",er,[b(u(Et),{class:"w-4 h-4 mr-3 text-gray-400"}),z[10]||(z[10]=O(" Paramètres ",-1))]),e("div",tr,[e("button",{onClick:A,class:"flex items-center w-full px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors"},[b(u(Fe),{class:"w-4 h-4 mr-3"}),z[11]||(z[11]=O(" Se déconnecter ",-1))])])])):U("",!0)])])])]),e("main",sr,[b(d)])])])}}};function rr(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var ut={exports:{}},Mt;function ar(){return Mt||(Mt=1,function(_){(function(v){_.exports?_.exports=v():window.intlTelInput=v()})(()=>{var v=(()=>{var M=Object.defineProperty,j=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,$=(r,k)=>{for(var P in k)M(r,P,{get:k[P],enumerable:!0})},i=(r,k,P,x)=>{if(k&&typeof k=="object"||typeof k=="function")for(let q of f(k))!h.call(r,q)&&q!==P&&M(r,q,{get:()=>k[q],enumerable:!(x=j(k,q))||x.enumerable});return r},c=r=>i(M({},"__esModule",{value:!0}),r),y={};$(y,{Iti:()=>B,default:()=>m});var E=[["af","93"],["ax","358",1],["al","355"],["dz","213"],["as","1",5,["684"]],["ad","376"],["ao","244"],["ai","1",6,["264"]],["ag","1",7,["268"]],["ar","54"],["am","374"],["aw","297"],["ac","247"],["au","61",0,null,"0"],["at","43"],["az","994"],["bs","1",8,["242"]],["bh","973"],["bd","880"],["bb","1",9,["246"]],["by","375"],["be","32"],["bz","501"],["bj","229"],["bm","1",10,["441"]],["bt","975"],["bo","591"],["ba","387"],["bw","267"],["br","55"],["io","246"],["vg","1",11,["284"]],["bn","673"],["bg","359"],["bf","226"],["bi","257"],["kh","855"],["cm","237"],["ca","1",1,["204","226","236","249","250","263","289","306","343","354","365","367","368","382","387","403","416","418","428","431","437","438","450","584","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","879","902","905"]],["cv","238"],["bq","599",1,["3","4","7"]],["ky","1",12,["345"]],["cf","236"],["td","235"],["cl","56"],["cn","86"],["cx","61",2,["89164"],"0"],["cc","61",1,["89162"],"0"],["co","57"],["km","269"],["cg","242"],["cd","243"],["ck","682"],["cr","506"],["ci","225"],["hr","385"],["cu","53"],["cw","599",0],["cy","357"],["cz","420"],["dk","45"],["dj","253"],["dm","1",13,["767"]],["do","1",2,["809","829","849"]],["ec","593"],["eg","20"],["sv","503"],["gq","240"],["er","291"],["ee","372"],["sz","268"],["et","251"],["fk","500"],["fo","298"],["fj","679"],["fi","358",0],["fr","33"],["gf","594"],["pf","689"],["ga","241"],["gm","220"],["ge","995"],["de","49"],["gh","233"],["gi","350"],["gr","30"],["gl","299"],["gd","1",14,["473"]],["gp","590",0],["gu","1",15,["671"]],["gt","502"],["gg","44",1,["1481","7781","7839","7911"],"0"],["gn","224"],["gw","245"],["gy","592"],["ht","509"],["hn","504"],["hk","852"],["hu","36"],["is","354"],["in","91"],["id","62"],["ir","98"],["iq","964"],["ie","353"],["im","44",2,["1624","74576","7524","7924","7624"],"0"],["il","972"],["it","39",0],["jm","1",4,["876","658"]],["jp","81"],["je","44",3,["1534","7509","7700","7797","7829","7937"],"0"],["jo","962"],["kz","7",1,["33","7"],"8"],["ke","254"],["ki","686"],["xk","383"],["kw","965"],["kg","996"],["la","856"],["lv","371"],["lb","961"],["ls","266"],["lr","231"],["ly","218"],["li","423"],["lt","370"],["lu","352"],["mo","853"],["mg","261"],["mw","265"],["my","60"],["mv","960"],["ml","223"],["mt","356"],["mh","692"],["mq","596"],["mr","222"],["mu","230"],["yt","262",1,["269","639"],"0"],["mx","52"],["fm","691"],["md","373"],["mc","377"],["mn","976"],["me","382"],["ms","1",16,["664"]],["ma","212",0,null,"0"],["mz","258"],["mm","95"],["na","264"],["nr","674"],["np","977"],["nl","31"],["nc","687"],["nz","64"],["ni","505"],["ne","227"],["ng","234"],["nu","683"],["nf","672"],["kp","850"],["mk","389"],["mp","1",17,["670"]],["no","47",0],["om","968"],["pk","92"],["pw","680"],["ps","970"],["pa","507"],["pg","675"],["py","595"],["pe","51"],["ph","63"],["pl","48"],["pt","351"],["pr","1",3,["787","939"]],["qa","974"],["re","262",0,null,"0"],["ro","40"],["ru","7",0,null,"8"],["rw","250"],["ws","685"],["sm","378"],["st","239"],["sa","966"],["sn","221"],["rs","381"],["sc","248"],["sl","232"],["sg","65"],["sx","1",21,["721"]],["sk","421"],["si","386"],["sb","677"],["so","252"],["za","27"],["kr","82"],["ss","211"],["es","34"],["lk","94"],["bl","590",1],["sh","290"],["kn","1",18,["869"]],["lc","1",19,["758"]],["mf","590",2],["pm","508"],["vc","1",20,["784"]],["sd","249"],["sr","597"],["sj","47",1,["79"]],["se","46"],["ch","41"],["sy","963"],["tw","886"],["tj","992"],["tz","255"],["th","66"],["tl","670"],["tg","228"],["tk","690"],["to","676"],["tt","1",22,["868"]],["tn","216"],["tr","90"],["tm","993"],["tc","1",23,["649"]],["tv","688"],["ug","256"],["ua","380"],["ae","971"],["gb","44",0,null,"0"],["us","1",0],["uy","598"],["vi","1",24,["340"]],["uz","998"],["vu","678"],["va","39",1,["06698"]],["ve","58"],["vn","84"],["wf","681"],["eh","212",1,["5288","5289"],"0"],["ye","967"],["zm","260"],["zw","263"]],V=[];for(let r=0;r<E.length;r++){const k=E[r];V[r]={name:"",iso2:k[0],dialCode:k[1],priority:k[2]||0,areaCodes:k[3]||null,nodeById:{},nationalPrefix:k[4]||null}}var A=V,I={ad:"Andorra",ae:"United Arab Emirates",af:"Afghanistan",ag:"Antigua & Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",ar:"Argentina",as:"American Samoa",at:"Austria",au:"Australia",aw:"Aruba",ax:"Åland Islands",az:"Azerbaijan",ba:"Bosnia & Herzegovina",bb:"Barbados",bd:"Bangladesh",be:"Belgium",bf:"Burkina Faso",bg:"Bulgaria",bh:"Bahrain",bi:"Burundi",bj:"Benin",bl:"St. Barthélemy",bm:"Bermuda",bn:"Brunei",bo:"Bolivia",bq:"Caribbean Netherlands",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cc:"Cocos (Keeling) Islands",cd:"Congo - Kinshasa",cf:"Central African Republic",cg:"Congo - Brazzaville",ch:"Switzerland",ci:"Côte d’Ivoire",ck:"Cook Islands",cl:"Chile",cm:"Cameroon",cn:"China",co:"Colombia",cr:"Costa Rica",cu:"Cuba",cv:"Cape Verde",cw:"Curaçao",cx:"Christmas Island",cy:"Cyprus",cz:"Czechia",de:"Germany",dj:"Djibouti",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",eh:"Western Sahara",er:"Eritrea",es:"Spain",et:"Ethiopia",fi:"Finland",fj:"Fiji",fk:"Falkland Islands",fm:"Micronesia",fo:"Faroe Islands",fr:"France",ga:"Gabon",gb:"United Kingdom",gd:"Grenada",ge:"Georgia",gf:"French Guiana",gg:"Guernsey",gh:"Ghana",gi:"Gibraltar",gl:"Greenland",gm:"Gambia",gn:"Guinea",gp:"Guadeloupe",gq:"Equatorial Guinea",gr:"Greece",gt:"Guatemala",gu:"Guam",gw:"Guinea-Bissau",gy:"Guyana",hk:"Hong Kong SAR China",hn:"Honduras",hr:"Croatia",ht:"Haiti",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",im:"Isle of Man",in:"India",io:"British Indian Ocean Territory",iq:"Iraq",ir:"Iran",is:"Iceland",it:"Italy",je:"Jersey",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Kyrgyzstan",kh:"Cambodia",ki:"Kiribati",km:"Comoros",kn:"St. Kitts & Nevis",kp:"North Korea",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"St. Lucia",li:"Liechtenstein",lk:"Sri Lanka",lr:"Liberia",ls:"Lesotho",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",ly:"Libya",ma:"Morocco",mc:"Monaco",md:"Moldova",me:"Montenegro",mf:"St. Martin",mg:"Madagascar",mh:"Marshall Islands",mk:"North Macedonia",ml:"Mali",mm:"Myanmar (Burma)",mn:"Mongolia",mo:"Macao SAR China",mp:"Northern Mariana Islands",mq:"Martinique",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mv:"Maldives",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",nc:"New Caledonia",ne:"Niger",nf:"Norfolk Island",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",no:"Norway",np:"Nepal",nr:"Nauru",nu:"Niue",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pf:"French Polynesia",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pm:"St. Pierre & Miquelon",pr:"Puerto Rico",ps:"Palestinian Territories",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",re:"Réunion",ro:"Romania",rs:"Serbia",ru:"Russia",rw:"Rwanda",sa:"Saudi Arabia",sb:"Solomon Islands",sc:"Seychelles",sd:"Sudan",se:"Sweden",sg:"Singapore",sh:"St. Helena",si:"Slovenia",sj:"Svalbard & Jan Mayen",sk:"Slovakia",sl:"Sierra Leone",sm:"San Marino",sn:"Senegal",so:"Somalia",sr:"Suriname",ss:"South Sudan",st:"São Tomé & Príncipe",sv:"El Salvador",sx:"Sint Maarten",sy:"Syria",sz:"Eswatini",tc:"Turks & Caicos Islands",td:"Chad",tg:"Togo",th:"Thailand",tj:"Tajikistan",tk:"Tokelau",tl:"Timor-Leste",tm:"Turkmenistan",tn:"Tunisia",to:"Tonga",tr:"Turkey",tt:"Trinidad & Tobago",tv:"Tuvalu",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",us:"United States",uy:"Uruguay",uz:"Uzbekistan",va:"Vatican City",vc:"St. Vincent & Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vi:"U.S. Virgin Islands",vn:"Vietnam",vu:"Vanuatu",wf:"Wallis & Futuna",ws:"Samoa",ye:"Yemen",yt:"Mayotte",za:"South Africa",zm:"Zambia",zw:"Zimbabwe"},D=I,z={selectedCountryAriaLabel:"Selected country",noCountrySelected:"No country selected",countryListAriaLabel:"List of countries",searchPlaceholder:"Search",zeroSearchResults:"No results found",oneSearchResult:"1 result found",multipleSearchResults:"${count} results found",ac:"Ascension Island",xk:"Kosovo"},p=z,d={...D,...p},S=d;for(let r=0;r<A.length;r++)A[r].name=S[A[r].iso2];var n=0,l={allowDropdown:!0,autoPlaceholder:"polite",containerClass:"",countryOrder:null,countrySearch:!0,customPlaceholder:null,dropdownContainer:null,excludeCountries:[],fixDropdownWidth:!0,formatAsYouType:!0,formatOnDisplay:!0,geoIpLookup:null,hiddenInput:null,i18n:{},initialCountry:"",loadUtils:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",showFlags:!0,separateDialCode:!1,strictMode:!1,useFullscreenPopup:typeof navigator<"u"&&typeof window<"u"?/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=500:!1,validationNumberTypes:["MOBILE"]},a=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],L=r=>r.replace(/\D/g,""),K=(r="")=>r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),ee=r=>{const k=L(r);if(k.charAt(0)==="1"){const P=k.substr(1,3);return a.includes(P)}return!1},se=(r,k,P,x)=>{if(P===0&&!x)return 0;let q=0;for(let T=0;T<k.length;T++){if(/[+0-9]/.test(k[T])&&q++,q===r&&!x)return T+1;if(x&&q===r+1)return T}return k.length},H=(r,k,P)=>{const x=document.createElement(r);return k&&Object.entries(k).forEach(([q,T])=>x.setAttribute(q,T)),P&&P.appendChild(x),x},F=(r,...k)=>{const{instances:P}=w;Object.values(P).forEach(x=>x[r](...k))},B=class{constructor(r,k={}){this.id=n++,this.telInput=r,this.highlightedItem=null,this.options=Object.assign({},l,k),this.hadInitialPlaceholder=!!r.getAttribute("placeholder")}_init(){this.options.useFullscreenPopup&&(this.options.fixDropdownWidth=!1),this.options.onlyCountries.length===1&&(this.options.initialCountry=this.options.onlyCountries[0]),this.options.separateDialCode&&(this.options.nationalMode=!1),this.options.allowDropdown&&!this.options.showFlags&&!this.options.separateDialCode&&(this.options.nationalMode=!1),this.options.useFullscreenPopup&&!this.options.dropdownContainer&&(this.options.dropdownContainer=document.body),this.isAndroid=typeof navigator<"u"?/Android/i.test(navigator.userAgent):!1,this.isRTL=!!this.telInput.closest("[dir=rtl]");const r=this.options.allowDropdown||this.options.separateDialCode;this.showSelectedCountryOnLeft=this.isRTL?!r:r,this.options.separateDialCode&&(this.isRTL?this.originalPaddingRight=this.telInput.style.paddingRight:this.originalPaddingLeft=this.telInput.style.paddingLeft),this.options.i18n={...S,...this.options.i18n};const k=new Promise((x,q)=>{this.resolveAutoCountryPromise=x,this.rejectAutoCountryPromise=q}),P=new Promise((x,q)=>{this.resolveUtilsScriptPromise=x,this.rejectUtilsScriptPromise=q});this.promise=Promise.all([k,P]),this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}_processCountryData(){this._processAllCountries(),this._processDialCodes(),this._translateCountryNames(),this._sortCountries()}_sortCountries(){this.options.countryOrder&&(this.options.countryOrder=this.options.countryOrder.map(r=>r.toLowerCase())),this.countries.sort((r,k)=>{const{countryOrder:P}=this.options;if(P){const x=P.indexOf(r.iso2),q=P.indexOf(k.iso2),T=x>-1,g=q>-1;if(T||g)return T&&g?x-q:T?-1:1}return r.name.localeCompare(k.name)})}_addToDialCodeMap(r,k,P){k.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=k.length),this.dialCodeToIso2Map.hasOwnProperty(k)||(this.dialCodeToIso2Map[k]=[]);for(let q=0;q<this.dialCodeToIso2Map[k].length;q++)if(this.dialCodeToIso2Map[k][q]===r)return;const x=P!==void 0?P:this.dialCodeToIso2Map[k].length;this.dialCodeToIso2Map[k][x]=r}_processAllCountries(){const{onlyCountries:r,excludeCountries:k}=this.options;if(r.length){const P=r.map(x=>x.toLowerCase());this.countries=A.filter(x=>P.includes(x.iso2))}else if(k.length){const P=k.map(x=>x.toLowerCase());this.countries=A.filter(x=>!P.includes(x.iso2))}else this.countries=A}_translateCountryNames(){for(let r=0;r<this.countries.length;r++){const k=this.countries[r].iso2.toLowerCase();this.options.i18n.hasOwnProperty(k)&&(this.countries[r].name=this.options.i18n[k])}}_processDialCodes(){this.dialCodes={},this.dialCodeMaxLen=0,this.dialCodeToIso2Map={};for(let r=0;r<this.countries.length;r++){const k=this.countries[r];this.dialCodes[k.dialCode]||(this.dialCodes[k.dialCode]=!0),this._addToDialCodeMap(k.iso2,k.dialCode,k.priority)}for(let r=0;r<this.countries.length;r++){const k=this.countries[r];if(k.areaCodes){const P=this.dialCodeToIso2Map[k.dialCode][0];for(let x=0;x<k.areaCodes.length;x++){const q=k.areaCodes[x];for(let T=1;T<q.length;T++){const g=q.substr(0,T),C=k.dialCode+g;this._addToDialCodeMap(P,C),this._addToDialCodeMap(k.iso2,C)}this._addToDialCodeMap(k.iso2,k.dialCode+q)}}}}_generateMarkup(){this.telInput.classList.add("iti__tel-input"),!this.telInput.hasAttribute("autocomplete")&&!(this.telInput.form&&this.telInput.form.hasAttribute("autocomplete"))&&this.telInput.setAttribute("autocomplete","off");const{allowDropdown:r,separateDialCode:k,showFlags:P,containerClass:x,hiddenInput:q,dropdownContainer:T,fixDropdownWidth:g,useFullscreenPopup:C,countrySearch:te,i18n:re}=this.options;let ue="iti";r&&(ue+=" iti--allow-dropdown"),P&&(ue+=" iti--show-flags"),x&&(ue+=` ${x}`),C||(ue+=" iti--inline-dropdown");const me=H("div",{class:ue});if(this.telInput.parentNode?.insertBefore(me,this.telInput),r||P||k){this.countryContainer=H("div",{class:"iti__country-container"},me),this.showSelectedCountryOnLeft?this.countryContainer.style.left="0px":this.countryContainer.style.right="0px",r?(this.selectedCountry=H("button",{type:"button",class:"iti__selected-country","aria-expanded":"false","aria-label":this.options.i18n.selectedCountryAriaLabel,"aria-haspopup":"true","aria-controls":`iti-${this.id}__dropdown-content`,role:"combobox"},this.countryContainer),this.telInput.disabled&&this.selectedCountry.setAttribute("disabled","true")):this.selectedCountry=H("div",{class:"iti__selected-country"},this.countryContainer);const Ae=H("div",{class:"iti__selected-country-primary"},this.selectedCountry);if(this.selectedCountryInner=H("div",{class:"iti__flag"},Ae),this.selectedCountryA11yText=H("span",{class:"iti__a11y-text"},this.selectedCountryInner),r&&(this.dropdownArrow=H("div",{class:"iti__arrow","aria-hidden":"true"},Ae)),k&&(this.selectedDialCode=H("div",{class:"iti__selected-dial-code"},this.selectedCountry)),r){const xe=g?"":"iti--flexible-dropdown-width";if(this.dropdownContent=H("div",{id:`iti-${this.id}__dropdown-content`,class:`iti__dropdown-content iti__hide ${xe}`}),te&&(this.searchInput=H("input",{type:"text",class:"iti__search-input",placeholder:re.searchPlaceholder,role:"combobox","aria-expanded":"true","aria-label":re.searchPlaceholder,"aria-controls":`iti-${this.id}__country-listbox`,"aria-autocomplete":"list",autocomplete:"off"},this.dropdownContent),this.searchResultsA11yText=H("span",{class:"iti__a11y-text"},this.dropdownContent)),this.countryList=H("ul",{class:"iti__country-list",id:`iti-${this.id}__country-listbox`,role:"listbox","aria-label":re.countryListAriaLabel},this.dropdownContent),this._appendListItems(),te&&this._updateSearchResultsText(),T){let fe="iti iti--container";C?fe+=" iti--fullscreen-popup":fe+=" iti--inline-dropdown",this.dropdown=H("div",{class:fe}),this.dropdown.appendChild(this.dropdownContent)}else this.countryContainer.appendChild(this.dropdownContent)}}if(me.appendChild(this.telInput),this._updateInputPadding(),q){const Ae=this.telInput.getAttribute("name")||"",xe=q(Ae);if(xe.phone){const fe=this.telInput.form?.querySelector(`input[name="${xe.phone}"]`);fe?this.hiddenInput=fe:(this.hiddenInput=H("input",{type:"hidden",name:xe.phone}),me.appendChild(this.hiddenInput))}if(xe.country){const fe=this.telInput.form?.querySelector(`input[name="${xe.country}"]`);fe?this.hiddenInputCountry=fe:(this.hiddenInputCountry=H("input",{type:"hidden",name:xe.country}),me.appendChild(this.hiddenInputCountry))}}}_appendListItems(){for(let r=0;r<this.countries.length;r++){const k=this.countries[r],P=r===0?"iti__highlight":"",x=H("li",{id:`iti-${this.id}__item-${k.iso2}`,class:`iti__country ${P}`,tabindex:"-1",role:"option","data-dial-code":k.dialCode,"data-country-code":k.iso2,"aria-selected":"false"},this.countryList);k.nodeById[this.id]=x;let q="";this.options.showFlags&&(q+=`<div class='iti__flag iti__${k.iso2}'></div>`),q+=`<span class='iti__country-name'>${k.name}</span>`,q+=`<span class='iti__dial-code'>+${k.dialCode}</span>`,x.insertAdjacentHTML("beforeend",q)}}_setInitialState(r=!1){const k=this.telInput.getAttribute("value"),P=this.telInput.value,q=k&&k.charAt(0)==="+"&&(!P||P.charAt(0)!=="+")?k:P,T=this._getDialCode(q),g=ee(q),{initialCountry:C,geoIpLookup:te}=this.options,re=C==="auto"&&te;if(T&&!g)this._updateCountryFromNumber(q);else if(!re||r){const ue=C?C.toLowerCase():"";ue&&this._getCountryData(ue,!0)?this._setCountry(ue):T&&g?this._setCountry("us"):this._setCountry()}q&&this._updateValFromNumber(q)}_initListeners(){this._initTelInputListeners(),this.options.allowDropdown&&this._initDropdownListeners(),(this.hiddenInput||this.hiddenInputCountry)&&this.telInput.form&&this._initHiddenInputListener()}_initHiddenInputListener(){this._handleHiddenInputSubmit=()=>{this.hiddenInput&&(this.hiddenInput.value=this.getNumber()),this.hiddenInputCountry&&(this.hiddenInputCountry.value=this.getSelectedCountryData().iso2||"")},this.telInput.form?.addEventListener("submit",this._handleHiddenInputSubmit)}_initDropdownListeners(){this._handleLabelClick=k=>{this.dropdownContent.classList.contains("iti__hide")?this.telInput.focus():k.preventDefault()};const r=this.telInput.closest("label");r&&r.addEventListener("click",this._handleLabelClick),this._handleClickSelectedCountry=()=>{this.dropdownContent.classList.contains("iti__hide")&&!this.telInput.disabled&&!this.telInput.readOnly&&this._openDropdown()},this.selectedCountry.addEventListener("click",this._handleClickSelectedCountry),this._handleCountryContainerKeydown=k=>{this.dropdownContent.classList.contains("iti__hide")&&["ArrowUp","ArrowDown"," ","Enter"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),this._openDropdown()),k.key==="Tab"&&this._closeDropdown()},this.countryContainer.addEventListener("keydown",this._handleCountryContainerKeydown)}_initRequests(){let{loadUtils:r,initialCountry:k,geoIpLookup:P}=this.options;r&&!w.utils?(this._handlePageLoad=()=>{window.removeEventListener("load",this._handlePageLoad),w.attachUtils(r)?.catch(()=>{})},w.documentReady()?this._handlePageLoad():window.addEventListener("load",this._handlePageLoad)):this.resolveUtilsScriptPromise(),k==="auto"&&P&&!this.selectedCountryData.iso2?this._loadAutoCountry():this.resolveAutoCountryPromise()}_loadAutoCountry(){w.autoCountry?this.handleAutoCountry():w.startedLoadingAutoCountry||(w.startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup((r="")=>{const k=r.toLowerCase();k&&this._getCountryData(k,!0)?(w.autoCountry=k,setTimeout(()=>F("handleAutoCountry"))):(this._setInitialState(!0),F("rejectAutoCountryPromise"))},()=>{this._setInitialState(!0),F("rejectAutoCountryPromise")}))}_openDropdownWithPlus(){this._openDropdown(),this.searchInput.value="+",this._filterCountries("",!0)}_initTelInputListeners(){const{strictMode:r,formatAsYouType:k,separateDialCode:P,formatOnDisplay:x,allowDropdown:q,countrySearch:T}=this.options;let g=!1;new RegExp("\\p{L}","u").test(this.telInput.value)&&(g=!0),this._handleInputEvent=C=>{if(this.isAndroid&&C?.data==="+"&&P&&q&&T){const me=this.telInput.selectionStart||0,Ae=this.telInput.value.substring(0,me-1),xe=this.telInput.value.substring(me);this.telInput.value=Ae+xe,this._openDropdownWithPlus();return}this._updateCountryFromNumber(this.telInput.value)&&this._triggerCountryChange();const te=C?.data&&/[^+0-9]/.test(C.data),re=C?.inputType==="insertFromPaste"&&this.telInput.value;te||re&&!r?g=!0:/[^+0-9]/.test(this.telInput.value)||(g=!1);const ue=C?.detail&&C.detail.isSetNumber&&!x;if(k&&!g&&!ue){const me=this.telInput.selectionStart||0,xe=this.telInput.value.substring(0,me).replace(/[^+0-9]/g,"").length,fe=C?.inputType==="deleteContentForward",et=this._formatNumberAsYouType(),tt=se(xe,et,me,fe);this.telInput.value=et,this.telInput.setSelectionRange(tt,tt)}},this.telInput.addEventListener("input",this._handleInputEvent),(r||P)&&(this._handleKeydownEvent=C=>{if(C.key&&C.key.length===1&&!C.altKey&&!C.ctrlKey&&!C.metaKey){if(P&&q&&T&&C.key==="+"){C.preventDefault(),this._openDropdownWithPlus();return}if(r){const te=this.telInput.value,re=te.charAt(0)==="+",ue=!re&&this.telInput.selectionStart===0&&C.key==="+",me=/^[0-9]$/.test(C.key),Ae=P?me:ue||me,xe=te.slice(0,this.telInput.selectionStart)+C.key+te.slice(this.telInput.selectionEnd),fe=this._getFullNumber(xe),et=w.utils.getCoreNumber(fe,this.selectedCountryData.iso2),tt=this.maxCoreNumberLength&&et.length>this.maxCoreNumberLength;let Ct=!1;if(re){const Bt=this.selectedCountryData.iso2;Ct=this._getCountryFromNumber(fe)!==Bt}(!Ae||tt&&!Ct&&!ue)&&C.preventDefault()}}},this.telInput.addEventListener("keydown",this._handleKeydownEvent))}_cap(r){const k=parseInt(this.telInput.getAttribute("maxlength")||"",10);return k&&r.length>k?r.substr(0,k):r}_trigger(r,k={}){const P=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:k});this.telInput.dispatchEvent(P)}_openDropdown(){const{fixDropdownWidth:r,countrySearch:k}=this.options;if(r&&(this.dropdownContent.style.width=`${this.telInput.offsetWidth}px`),this.dropdownContent.classList.remove("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","true"),this._setDropdownPosition(),k){const P=this.countryList.firstElementChild;P&&(this._highlightListItem(P,!1),this.countryList.scrollTop=0),this.searchInput.focus()}this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}_setDropdownPosition(){if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.options.useFullscreenPopup){const r=this.telInput.getBoundingClientRect(),k=this.telInput.offsetHeight;this.options.dropdownContainer&&(this.dropdown.style.top=`${r.top+k}px`,this.dropdown.style.left=`${r.left}px`,this._handleWindowScroll=()=>this._closeDropdown(),window.addEventListener("scroll",this._handleWindowScroll))}}_bindDropdownListeners(){this._handleMouseoverCountryList=x=>{const q=x.target?.closest(".iti__country");q&&this._highlightListItem(q,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=x=>{const q=x.target?.closest(".iti__country");q&&this._selectListItem(q)},this.countryList.addEventListener("click",this._handleClickCountryList);let r=!0;this._handleClickOffToClose=()=>{r||this._closeDropdown(),r=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);let k="",P=null;if(this._handleKeydownOnDropdown=x=>{["ArrowUp","ArrowDown","Enter","Escape"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),x.key==="ArrowUp"||x.key==="ArrowDown"?this._handleUpDownKey(x.key):x.key==="Enter"?this._handleEnterKey():x.key==="Escape"&&this._closeDropdown()),!this.options.countrySearch&&/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(x.key)&&(x.stopPropagation(),P&&clearTimeout(P),k+=x.key.toLowerCase(),this._searchForCountry(k),P=setTimeout(()=>{k=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch){const x=()=>{const T=this.searchInput.value.trim();T?this._filterCountries(T):this._filterCountries("",!0)};let q=null;this._handleSearchChange=()=>{q&&clearTimeout(q),q=setTimeout(()=>{x(),q=null},100)},this.searchInput.addEventListener("input",this._handleSearchChange),this.searchInput.addEventListener("click",T=>T.stopPropagation())}}_searchForCountry(r){for(let k=0;k<this.countries.length;k++){const P=this.countries[k];if(P.name.substr(0,r.length).toLowerCase()===r){const q=P.nodeById[this.id];this._highlightListItem(q,!1),this._scrollTo(q);break}}}_filterCountries(r,k=!1){let P=!0;this.countryList.innerHTML="";const x=K(r);for(let q=0;q<this.countries.length;q++){const T=this.countries[q],g=K(T.name),C=T.name.split(/[^a-zA-ZÀ-ÿа-яА-Я]/).map(re=>re[0]).join("").toLowerCase(),te=`+${T.dialCode}`;if(k||g.includes(x)||te.includes(x)||T.iso2.includes(x)||C.includes(x)){const re=T.nodeById[this.id];re&&this.countryList.appendChild(re),P&&(this._highlightListItem(re,!1),P=!1)}}P&&this._highlightListItem(null,!1),this.countryList.scrollTop=0,this._updateSearchResultsText()}_updateSearchResultsText(){const{i18n:r}=this.options,k=this.countryList.childElementCount;let P;"searchResultsText"in r?P=r.searchResultsText(k):k===0?P=r.zeroSearchResults:k===1?P=r.oneSearchResult:P=r.multipleSearchResults.replace("${count}",k.toString()),this.searchResultsA11yText.textContent=P}_handleUpDownKey(r){let k=r==="ArrowUp"?this.highlightedItem?.previousElementSibling:this.highlightedItem?.nextElementSibling;!k&&this.countryList.childElementCount>1&&(k=r==="ArrowUp"?this.countryList.lastElementChild:this.countryList.firstElementChild),k&&(this._scrollTo(k),this._highlightListItem(k,!1))}_handleEnterKey(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}_updateValFromNumber(r){let k=r;if(this.options.formatOnDisplay&&w.utils&&this.selectedCountryData){const P=this.options.nationalMode||k.charAt(0)!=="+"&&!this.options.separateDialCode,{NATIONAL:x,INTERNATIONAL:q}=w.utils.numberFormat,T=P?x:q;k=w.utils.formatNumber(k,this.selectedCountryData.iso2,T)}k=this._beforeSetNumber(k),this.telInput.value=k}_updateCountryFromNumber(r){const k=this._getCountryFromNumber(r);return k!==null?this._setCountry(k):!1}_ensureHasDialCode(r){const{dialCode:k,nationalPrefix:P}=this.selectedCountryData;if(r.charAt(0)==="+"||!k)return r;const T=P&&r.charAt(0)===P&&!this.options.separateDialCode?r.substring(1):r;return`+${k}${T}`}_getCountryFromNumber(r){const k=r.indexOf("+");let P=k?r.substring(k):r;const x=this.selectedCountryData.iso2,q=this.selectedCountryData.dialCode;P=this._ensureHasDialCode(P);const T=this._getDialCode(P,!0),g=L(P);if(T){const C=L(T),te=this.dialCodeToIso2Map[C];if(!x&&this.defaultCountry&&te.includes(this.defaultCountry))return this.defaultCountry;const re=x&&te.includes(x)&&(g.length===C.length||!this.selectedCountryData.areaCodes);if(!(q==="1"&&ee(g))&&!re){for(let me=0;me<te.length;me++)if(te[me])return te[me]}}else{if(P.charAt(0)==="+"&&g.length)return"";if((!P||P==="+")&&!this.selectedCountryData.iso2)return this.defaultCountry}return null}_highlightListItem(r,k){const P=this.highlightedItem;if(P&&(P.classList.remove("iti__highlight"),P.setAttribute("aria-selected","false")),this.highlightedItem=r,this.highlightedItem){this.highlightedItem.classList.add("iti__highlight"),this.highlightedItem.setAttribute("aria-selected","true");const x=this.highlightedItem.getAttribute("id")||"";this.selectedCountry.setAttribute("aria-activedescendant",x),this.options.countrySearch&&this.searchInput.setAttribute("aria-activedescendant",x)}k&&this.highlightedItem.focus()}_getCountryData(r,k){for(let P=0;P<this.countries.length;P++)if(this.countries[P].iso2===r)return this.countries[P];if(k)return null;throw new Error(`No country data for '${r}'`)}_setCountry(r){const{separateDialCode:k,showFlags:P,i18n:x}=this.options,q=this.selectedCountryData.iso2?this.selectedCountryData:{};if(this.selectedCountryData=r?this._getCountryData(r,!1)||{}:{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedCountryInner){let T="",g="";r&&P?(T=`iti__flag iti__${r}`,g=`${this.selectedCountryData.name} +${this.selectedCountryData.dialCode}`):(T="iti__flag iti__globe",g=x.noCountrySelected),this.selectedCountryInner.className=T,this.selectedCountryA11yText.textContent=g}if(this._setSelectedCountryTitleAttribute(r,k),k){const T=this.selectedCountryData.dialCode?`+${this.selectedCountryData.dialCode}`:"";this.selectedDialCode.innerHTML=T,this._updateInputPadding()}return this._updatePlaceholder(),this._updateMaxLength(),q.iso2!==r}_updateInputPadding(){if(this.selectedCountry){const k=(this.selectedCountry.offsetWidth||this._getHiddenSelectedCountryWidth())+6;this.showSelectedCountryOnLeft?this.telInput.style.paddingLeft=`${k}px`:this.telInput.style.paddingRight=`${k}px`}}_updateMaxLength(){const{strictMode:r,placeholderNumberType:k,validationNumberTypes:P}=this.options,{iso2:x}=this.selectedCountryData;if(r&&w.utils)if(x){const q=w.utils.numberType[k];let T=w.utils.getExampleNumber(x,!1,q,!0),g=T;for(;w.utils.isPossibleNumber(T,x,P);)g=T,T+="0";const C=w.utils.getCoreNumber(g,x);this.maxCoreNumberLength=C.length,x==="by"&&(this.maxCoreNumberLength=C.length+1)}else this.maxCoreNumberLength=null}_setSelectedCountryTitleAttribute(r=null,k){if(!this.selectedCountry)return;let P;r&&!k?P=`${this.selectedCountryData.name}: +${this.selectedCountryData.dialCode}`:r?P=this.selectedCountryData.name:P="Unknown",this.selectedCountry.setAttribute("title",P)}_getHiddenSelectedCountryWidth(){if(this.telInput.parentNode){const r=this.telInput.parentNode.cloneNode(!1);r.style.visibility="hidden",document.body.appendChild(r);const k=this.countryContainer.cloneNode();r.appendChild(k);const P=this.selectedCountry.cloneNode(!0);k.appendChild(P);const x=P.offsetWidth;return document.body.removeChild(r),x}return 0}_updatePlaceholder(){const{autoPlaceholder:r,placeholderNumberType:k,nationalMode:P,customPlaceholder:x}=this.options,q=r==="aggressive"||!this.hadInitialPlaceholder&&r==="polite";if(w.utils&&q){const T=w.utils.numberType[k];let g=this.selectedCountryData.iso2?w.utils.getExampleNumber(this.selectedCountryData.iso2,P,T):"";g=this._beforeSetNumber(g),typeof x=="function"&&(g=x(g,this.selectedCountryData)),this.telInput.setAttribute("placeholder",g)}}_selectListItem(r){const k=this._setCountry(r.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(r.getAttribute("data-dial-code")),this.telInput.focus(),k&&this._triggerCountryChange()}_closeDropdown(){this.dropdownContent.classList.add("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","false"),this.selectedCountry.removeAttribute("aria-activedescendant"),this.highlightedItem&&this.highlightedItem.setAttribute("aria-selected","false"),this.options.countrySearch&&this.searchInput.removeAttribute("aria-activedescendant"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch&&this.searchInput.removeEventListener("input",this._handleSearchChange),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.options.useFullscreenPopup||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._handlePageLoad&&window.removeEventListener("load",this._handlePageLoad),this._trigger("close:countrydropdown")}_scrollTo(r){const k=this.countryList,P=document.documentElement.scrollTop,x=k.offsetHeight,q=k.getBoundingClientRect().top+P,T=q+x,g=r.offsetHeight,C=r.getBoundingClientRect().top+P,te=C+g,re=C-q+k.scrollTop;if(C<q)k.scrollTop=re;else if(te>T){const ue=x-g;k.scrollTop=re-ue}}_updateDialCode(r){const k=this.telInput.value,P=`+${r}`;let x;if(k.charAt(0)==="+"){const q=this._getDialCode(k);q?x=k.replace(q,P):x=P,this.telInput.value=x}}_getDialCode(r,k){let P="";if(r.charAt(0)==="+"){let x="";for(let q=0;q<r.length;q++){const T=r.charAt(q);if(!isNaN(parseInt(T,10))){if(x+=T,k)this.dialCodeToIso2Map[x]&&(P=r.substr(0,q+1));else if(this.dialCodes[x]){P=r.substr(0,q+1);break}if(x.length===this.dialCodeMaxLen)break}}}return P}_getFullNumber(r){const k=r||this.telInput.value.trim(),{dialCode:P}=this.selectedCountryData;let x;const q=L(k);return this.options.separateDialCode&&k.charAt(0)!=="+"&&P&&q?x=`+${P}`:x="",x+k}_beforeSetNumber(r){let k=r;if(this.options.separateDialCode){let P=this._getDialCode(k);if(P){P=`+${this.selectedCountryData.dialCode}`;const x=k[P.length]===" "||k[P.length]==="-"?P.length+1:P.length;k=k.substr(x)}}return this._cap(k)}_triggerCountryChange(){this._trigger("countrychange")}_formatNumberAsYouType(){const r=this._getFullNumber(),k=w.utils?w.utils.formatNumberAsYouType(r,this.selectedCountryData.iso2):r,{dialCode:P}=this.selectedCountryData;return this.options.separateDialCode&&this.telInput.value.charAt(0)!=="+"&&k.includes(`+${P}`)?(k.split(`+${P}`)[1]||"").trim():k}handleAutoCountry(){this.options.initialCountry==="auto"&&w.autoCountry&&(this.defaultCountry=w.autoCountry,this.selectedCountryData.iso2||this.selectedCountryInner.classList.contains("iti__globe")||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}handleUtils(){w.utils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this.selectedCountryData.iso2&&(this._updatePlaceholder(),this._updateMaxLength())),this.resolveUtilsScriptPromise()}destroy(){this.telInput.iti=void 0;const{allowDropdown:r,separateDialCode:k}=this.options;if(r){this._closeDropdown(),this.selectedCountry.removeEventListener("click",this._handleClickSelectedCountry),this.countryContainer.removeEventListener("keydown",this._handleCountryContainerKeydown);const q=this.telInput.closest("label");q&&q.removeEventListener("click",this._handleLabelClick)}const{form:P}=this.telInput;this._handleHiddenInputSubmit&&P&&P.removeEventListener("submit",this._handleHiddenInputSubmit),this.telInput.removeEventListener("input",this._handleInputEvent),this._handleKeydownEvent&&this.telInput.removeEventListener("keydown",this._handleKeydownEvent),this.telInput.removeAttribute("data-intl-tel-input-id"),k&&(this.isRTL?this.telInput.style.paddingRight=this.originalPaddingRight:this.telInput.style.paddingLeft=this.originalPaddingLeft);const x=this.telInput.parentNode;x?.parentNode?.insertBefore(this.telInput,x),x?.parentNode?.removeChild(x),delete w.instances[this.id]}getExtension(){return w.utils?w.utils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}getNumber(r){if(w.utils){const{iso2:k}=this.selectedCountryData;return w.utils.formatNumber(this._getFullNumber(),k,r)}return""}getNumberType(){return w.utils?w.utils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}getSelectedCountryData(){return this.selectedCountryData}getValidationError(){if(w.utils){const{iso2:r}=this.selectedCountryData;return w.utils.getValidationError(this._getFullNumber(),r)}return-99}isValidNumber(){if(!this.selectedCountryData.iso2)return!1;const r=this._getFullNumber(),k=r.search(new RegExp("\\p{L}","u"));if(k>-1){const P=r.substring(0,k),x=this._utilsIsPossibleNumber(P),q=this._utilsIsPossibleNumber(r);return x&&q}return this._utilsIsPossibleNumber(r)}_utilsIsPossibleNumber(r){return w.utils?w.utils.isPossibleNumber(r,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}isValidNumberPrecise(){if(!this.selectedCountryData.iso2)return!1;const r=this._getFullNumber(),k=r.search(new RegExp("\\p{L}","u"));if(k>-1){const P=r.substring(0,k),x=this._utilsIsValidNumber(P),q=this._utilsIsValidNumber(r);return x&&q}return this._utilsIsValidNumber(r)}_utilsIsValidNumber(r){return w.utils?w.utils.isValidNumber(r,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}setCountry(r){const k=r?.toLowerCase(),P=this.selectedCountryData.iso2;(r&&k!==P||!r&&P)&&(this._setCountry(k),this._updateDialCode(this.selectedCountryData.dialCode),this._triggerCountryChange())}setNumber(r){const k=this._updateCountryFromNumber(r);this._updateValFromNumber(r),k&&this._triggerCountryChange(),this._trigger("input",{isSetNumber:!0})}setPlaceholderNumberType(r){this.options.placeholderNumberType=r,this._updatePlaceholder()}setDisabled(r){this.telInput.disabled=r,r?this.selectedCountry.setAttribute("disabled","true"):this.selectedCountry.removeAttribute("disabled")}},N=r=>{if(!w.utils&&!w.startedLoadingUtilsScript){let k;if(typeof r=="function")try{k=Promise.resolve(r())}catch(P){return Promise.reject(P)}else return Promise.reject(new TypeError(`The argument passed to attachUtils must be a function that returns a promise for the utilities module, not ${typeof r}`));return w.startedLoadingUtilsScript=!0,k.then(P=>{const x=P?.default;if(!x||typeof x!="object")throw new TypeError("The loader function passed to attachUtils did not resolve to a module object with utils as its default export.");return w.utils=x,F("handleUtils"),!0}).catch(P=>{throw F("rejectUtilsScriptPromise",P),P})}return null},w=Object.assign((r,k)=>{const P=new B(r,k);return P._init(),r.setAttribute("data-intl-tel-input-id",P.id.toString()),w.instances[P.id]=P,r.iti=P,P},{defaults:l,documentReady:()=>document.readyState==="complete",getCountryData:()=>A,getInstance:r=>{const k=r.getAttribute("data-intl-tel-input-id");return k?w.instances[k]:null},instances:{},attachUtils:N,startedLoadingUtilsScript:!1,startedLoadingAutoCountry:!1,version:"25.4.2"}),m=w;return c(y)})();return v.default})}(ut)),ut.exports}var nr=ar();const ir=rr(nr),lr={name:"PhoneInput",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Numéro de téléphone"},preferredCountries:{type:Array,default:()=>["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"]},initialCountry:{type:String,default:"ga"}},data(){return{phoneNumber:this.modelValue,iti:null}},watch:{phoneNumber(_){this.$emit("update:modelValue",_)},modelValue(_){_!==this.phoneNumber&&(this.phoneNumber=_,this.iti&&this.$refs.phoneInput&&_&&this.iti.setNumber(_))}},mounted(){this.initializeIntlTelInput()},beforeUnmount(){this.iti&&this.iti.destroy()},methods:{initializeIntlTelInput(){const _=this.$refs.phoneInput;this.iti=ir(_,{preferredCountries:this.preferredCountries,initialCountry:this.initialCountry,separateDialCode:!0,customPlaceholder:(v,M)=>v}),_.addEventListener("input",v=>{this.phoneNumber=v.target.value,this.emitAllData()}),_.addEventListener("countrychange",()=>{this.emitAllData()}),setTimeout(()=>{this.modelValue&&this.iti.setNumber(this.modelValue),this.emitAllData()},100)},emitAllData(){if(this.iti&&this.iti.getSelectedCountryData)try{const _=this.iti.getSelectedCountryData(),v=this.phoneNumber||"";let M="";v.trim()&&(v.startsWith("+")?M=v:M=`+${_.dialCode}${v}`);const j=this.validatePhoneNumber(v,_);this.$emit("update:modelValue",M),console.log("PhoneInput emitting:",{number:v,fullNumber:M,countryCode:_.dialCode,countryIso2:_.iso2,isValid:j}),this.$emit("phone-change",{number:v,fullNumber:M,countryCode:_.dialCode,countryIso2:_.iso2,isValid:j})}catch(_){console.warn("PhoneInput: Error emitting data",_)}},emitPhoneData(){this.emitAllData()},validatePhoneNumber(_,v){if(!_||!_.trim())return!1;const j={ga:{min:7,max:8},cm:{min:8,max:9},ci:{min:8,max:10},fr:{min:9,max:10},ca:{min:10,max:10},cg:{min:8,max:9},cf:{min:8,max:8},td:{min:8,max:8},gq:{min:9,max:9},bf:{min:8,max:8},bj:{min:8,max:8},tg:{min:8,max:8}}[v.iso2]||{min:7,max:15},f=_.replace(/[^\d]/g,"");return f.length>=j.min&&f.length<=j.max},getNumber(){if(this.iti&&this.iti.getSelectedCountryData){const _=this.iti.getSelectedCountryData(),v=this.phoneNumber||"";if(v.trim())return v.startsWith("+")?v:`+${_.dialCode}${v}`}return""},isValidNumber(){if(this.iti&&this.iti.getSelectedCountryData){const _=this.iti.getSelectedCountryData();return this.validatePhoneNumber(this.phoneNumber,_)}return!1},setNumber(_){this.iti&&(this.iti.setNumber(_),this.phoneNumber=_,this.emitAllData())}}},dr={class:"phone-input-wrapper"},cr=["placeholder"];function ur(_,v,M,j,f,h){return t(),s("div",dr,[e("input",{ref:"phoneInput",type:"tel",class:"form-control",placeholder:M.placeholder},null,8,cr)])}const ct=Le(lr,[["render",ur],["__scopeId","data-v-118cdfc2"]]),mr={class:"min-h-screen bg-gradient-to-br from-koumbaya-primary/5 via-white to-koumbaya-primary/10 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},pr={class:"sm:mx-auto sm:w-full sm:max-w-md"},gr={class:"flex justify-center mb-8"},vr=["src"],xr={class:"text-center text-sm text-gray-500"},fr={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},br={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},hr={class:"koumbaya-card-body p-8"},yr={key:0,class:"mb-6 rounded-xl bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-200 p-4 shadow-lg"},_r={class:"flex items-start"},wr={class:"ml-3 flex-1"},$r={class:"text-sm font-semibold text-green-800 mb-2"},kr={class:"text-sm text-green-700 leading-relaxed"},Cr={key:0,class:"mt-2 text-xs text-green-600 bg-green-100 rounded-lg p-2"},jr={class:"space-y-1 list-disc list-inside ml-2"},Ar={class:"flex justify-center space-x-2 p-1 bg-gray-100 rounded-lg mb-6"},Pr={key:0,class:"rounded-xl bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 p-4 shadow-lg"},Er={class:"flex items-start"},Ir={class:"flex-shrink-0"},Mr={class:"ml-3 flex-1"},Dr={class:"text-sm text-red-800 font-semibold leading-relaxed"},Lr={key:0,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},Sr={key:1,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},Tr={key:2,class:"mt-2 text-xs text-red-600 bg-red-100 rounded-lg p-2"},Vr={key:1,class:"koumbaya-form-group"},Rr={for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},Fr={class:"flex items-center"},Nr={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},zr={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},qr={key:2,class:"koumbaya-form-group"},Ur={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},Br={class:"flex items-center"},Or={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Hr={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},Gr={class:"koumbaya-form-group"},Kr={for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},Zr={class:"flex items-center"},Wr={class:"relative"},Jr=["type"],Xr={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Yr={key:1,class:"mt-2 text-sm text-blue-600 flex items-center"},Qr={class:"flex items-center justify-between"},ea={class:"flex items-center cursor-pointer group"},ta={class:"pt-2"},sa=["disabled"],oa={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-4"},ra={class:"flex items-center justify-center"},aa={__name:"Login",setup(_){const v=he(),M=Ue(),j=ve(),f=de({email:"",phone:"",password:"",rememberMe:!1}),h=R("email"),$=R(null),i=R(!1),c=de({email:"",phone:"",password:"",general:""}),y=p=>{console.log("Login phone change:",p),i.value=p.isValid,f.phone=p.fullNumber,p.isValid&&p.fullNumber&&(c.phone="")},E=R(!1),V=R(!1),A=R(null),I=()=>{let p=!0;return Object.keys(c).forEach(d=>{c[d]=""}),h.value==="email"?f.email?f.email.includes("@")?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)?f.email.length>100&&(c.email="L'adresse email est trop longue (max 100 caractères)",p=!1):(c.email="Format d'email invalide (exemple: nom@domaine.com)",p=!1):(c.email="L'adresse email doit contenir le symbole @",p=!1):(c.email="L'adresse email est obligatoire",p=!1):!f.phone||f.phone.trim()===""?(c.phone="📱 Le numéro de téléphone est obligatoire",p=!1):!i.value&&f.phone.length>3&&(c.phone="Format de téléphone invalide",p=!1),f.password?f.password.length<6?(c.password="Le mot de passe doit contenir au moins 6 caractères",p=!1):f.password.length>50?(c.password="Le mot de passe est trop long (max 50 caractères)",p=!1):f.password.includes(" ")&&(c.password="Le mot de passe ne doit pas contenir d'espaces",p=!1):(c.password="Le mot de passe est obligatoire",p=!1),p},D=async p=>{if(p&&(p.preventDefault(),p.stopPropagation()),!!I()){E.value=!0,c.general="";try{const d={password:f.password};h.value==="email"?d.email=f.email:d.phone=f.phone;const S=await j.login(d);if(S.success){if(window.$toast){const a=j.user?.name||j.user?.first_name||"utilisateur";window.$toast.success(`🎉 Bienvenue ${a} ! Redirection en cours...`,"✅ Connexion réussie")}console.log("User data après connexion:",j.user);const n=M.query.redirect,l=M.query.action;setTimeout(()=>{if(n&&(l==="participate"||l==="wishlist")){const L=n.match(/\/products\/(\d+)/)?.[1];if(L){v.push({name:"customer.product.detail",params:{id:L}});return}}if(n){v.push(n);return}const a=j.getDefaultRedirect();console.log("Redirection logic:",{user:j.user,redirectTo:a,isAdmin:j.isAdmin,isMerchant:j.isMerchant,isCustomer:j.isCustomer}),v.push({name:a}).catch(L=>{console.error("Erreur de redirection vers",a,":",L),v.push({name:"customer.dashboard"}).catch(()=>{v.push("/")})})},100)}else{const n=S.error||"Erreur de connexion inconnue";n.toLowerCase().includes("identifiants incorrects")||n.toLowerCase().includes("invalid credentials")||n.includes("401")?(c.general="Identifiants incorrects. Vérifiez votre adresse email et votre mot de passe.",c.email="Adresse email ou mot de passe incorrect",c.password="Adresse email ou mot de passe incorrect"):n.toLowerCase().includes("trop de tentatives")||n.toLowerCase().includes("too many")||n.includes("429")?c.general="Trop de tentatives de connexion. Veuillez patienter 15 minutes avant de réessayer.":n.toLowerCase().includes("network")||n.toLowerCase().includes("réseau")||n.toLowerCase().includes("connexion")?c.general="Problème de connexion internet. Vérifiez votre connexion et réessayez.":n.toLowerCase().includes("email")&&n.toLowerCase().includes("verify")?c.general="Votre compte n'est pas encore vérifié. Vérifiez votre boîte email et cliquez sur le lien de vérification.":n.toLowerCase().includes("blocked")||n.toLowerCase().includes("suspendu")?c.general="Votre compte est temporairement suspendu. Contactez le support client.":c.general=`${n}`,window.$toast&&window.$toast.error(c.general,"🚫 Erreur de connexion"),setTimeout(()=>{c.email,document.getElementById("email")?.focus()},100)}}catch(d){console.error("Erreur lors de la connexion:",d);let S="Une erreur technique est survenue. Veuillez réessayer.";if(d.response?.status===401)S="🚫 Identifiants incorrects. Vérifiez votre adresse email et votre mot de passe.",c.email="Adresse email ou mot de passe incorrect",c.password="Adresse email ou mot de passe incorrect";else if(d.response?.status===422)if(d.response.data?.errors){const n=d.response.data.errors;n.email&&(c.email=n.email[0]),n.password&&(c.password=n.password[0]),S="⚠️ Veuillez corriger les erreurs ci-dessous."}else S="⚠️ Données invalides. Vérifiez vos informations.";else d.response?.status===429?S="⏳ Trop de tentatives de connexion. Veuillez patienter 15 minutes avant de réessayer.":d.response?.status===500?S="🔧 Erreur du serveur. Nos équipes sont notifiées. Veuillez réessayer dans quelques minutes.":d.response?.status===503?S="⚙️ Service temporairement indisponible. Maintenance en cours.":d.code==="NETWORK_ERROR"||!d.response?S="🌐 Impossible de joindre le serveur. Vérifiez votre connexion internet.":d.response?.data?.message?S=`${d.response.data.message}`:d.message&&(S=`${d.message}`);if(c.general=S,window.$toast){let n="🚫 Erreur de connexion";d.response?.status===500?n="🔧 Erreur serveur":d.code==="NETWORK_ERROR"&&(n="🌐 Problème réseau"),window.$toast.error(S,n)}setTimeout(()=>{c.email?document.getElementById("email")?.focus():c.password?document.getElementById("password")?.focus():document.getElementById("email")?.focus()},100)}finally{E.value=!1}}};ke(()=>f.email,p=>{c.email&&p&&p.includes("@")&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p)&&(c.email="")},{debounce:300}),ke(()=>f.password,p=>{c.password&&p&&p.length>=6&&p.length<=50&&!p.includes(" ")&&(c.password="")},{debounce:300}),ke([()=>f.email,()=>f.password],()=>{c.general&&(c.general="")});const z=()=>{A.value=null,sessionStorage.removeItem("registration_success")};return ce(()=>{if(M.query.registered==="true"){const p=sessionStorage.getItem("registration_success");if(p)try{A.value=JSON.parse(p),A.value.email&&(f.email=A.value.email)}catch(d){console.error("Erreur lors du parsing des données d'inscription:",d)}else M.query.email&&(f.email=M.query.email,A.value={email:M.query.email,first_name:"utilisateur",verification_message:"Un email de vérification a été envoyé à votre adresse. Veuillez consulter votre boîte email pour vérifier votre compte.",requires_verification:!0})}}),(p,d)=>{const S=pe("router-link");return t(),s("div",mr,[e("div",pr,[e("div",gr,[e("img",{class:"h-20 w-auto",src:u(Qe),alt:"Koumbaya"},null,8,vr)]),d[10]||(d[10]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Content de vous revoir ! ",-1)),d[11]||(d[11]=e("p",{class:"text-center text-lg text-gray-600 mb-8"}," Connectez-vous pour accéder à vos tombolas ",-1)),e("p",xr,[d[9]||(d[9]=O(" Pas encore de compte ? ",-1)),b(S,{to:"/register",class:"font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors ml-1"},{default:Y(()=>d[8]||(d[8]=[O(" Inscrivez-vous gratuitement → ",-1)])),_:1,__:[8]})])]),e("div",fr,[e("div",br,[e("div",hr,[A.value?(t(),s("div",yr,[e("div",_r,[d[17]||(d[17]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",wr,[e("div",$r," Inscription réussie ! Bienvenue "+o(A.value.first_name),1),e("div",kr,o(A.value.verification_message),1),A.value.email?(t(),s("div",Cr,[d[15]||(d[15]=e("div",{class:"font-medium mb-1"},"Que faire maintenant :",-1)),e("ul",jr,[e("li",null,[d[12]||(d[12]=O("Consultez votre boîte email : ",-1)),e("strong",null,o(A.value.email),1)]),d[13]||(d[13]=e("li",null,"Cliquez sur le lien de vérification dans l'email",-1)),d[14]||(d[14]=e("li",null,"Revenez ici pour vous connecter avec vos identifiants",-1))])])):U("",!0)]),e("button",{onClick:z,class:"flex-shrink-0 ml-2 text-green-400 hover:text-green-600 transition-colors",title:"Fermer ce message"},d[16]||(d[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])):U("",!0),e("form",{onSubmit:ge(D,["prevent"]),class:"space-y-6"},[e("div",Ar,[e("button",{type:"button",onClick:d[0]||(d[0]=n=>h.value="email"),class:Z(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",h.value==="email"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(u(Ze),{class:"w-4 h-4 inline-block mr-2"}),d[18]||(d[18]=O(" Email ",-1))],2),e("button",{type:"button",onClick:d[1]||(d[1]=n=>h.value="phone"),class:Z(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",h.value==="phone"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(u(ze),{class:"w-4 h-4 inline-block mr-2"}),d[19]||(d[19]=O(" Téléphone ",-1))],2)]),c.general?(t(),s("div",Pr,[e("div",Er,[e("div",Ir,[b(u(be),{class:"w-6 h-6 text-red-500 animate-pulse"})]),e("div",Mr,[e("div",Dr,o(c.general),1),c.general.includes("Identifiants incorrects")?(t(),s("div",Lr,d[20]||(d[20]=[e("div",{class:"font-medium mb-1"},"💡 Conseils :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Vérifiez que votre adresse email est correcte"),e("li",null,"Assurez-vous que les majuscules/minuscules sont respectées"),e("li",null,"Essayez de réinitialiser votre mot de passe si nécessaire")],-1)]))):c.general.includes("connexion internet")?(t(),s("div",Sr,d[21]||(d[21]=[e("div",{class:"font-medium mb-1"},"💡 Conseils :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Vérifiez votre connexion WiFi ou données mobiles"),e("li",null,"Essayez de rafraîchir la page"),e("li",null,"Contactez votre fournisseur internet si le problème persiste")],-1)]))):c.general.includes("Trop de tentatives")?(t(),s("div",Tr,d[22]||(d[22]=[e("div",{class:"font-medium mb-1"},"💡 Que faire :",-1),e("ul",{class:"space-y-1 list-disc list-inside ml-2"},[e("li",null,"Attendez 15 minutes avant de réessayer"),e("li",null,"Utilisez ce temps pour vérifier vos identifiants"),e("li",null,"Réinitialisez votre mot de passe si nécessaire")],-1)]))):U("",!0)]),e("button",{onClick:d[2]||(d[2]=n=>c.general=""),class:"flex-shrink-0 ml-2 text-red-400 hover:text-red-600 transition-colors",title:"Fermer ce message"},d[23]||(d[23]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])):U("",!0),h.value==="email"?(t(),s("div",Vr,[e("label",Rr,[e("div",Fr,[b(u(Ze),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),d[24]||(d[24]=e("span",null,"Adresse e-mail",-1))])]),G(e("input",{id:"email",name:"email",type:"email","onUpdate:modelValue":d[3]||(d[3]=n=>f.email=n),required:"",class:Z(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":c.email,"border-blue-300 focus:border-blue-500":!c.email&&f.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)}]),style:{color:"#5f5f5f"},placeholder:"exemple@koumbaya.com"},null,2),[[X,f.email]]),c.email?(t(),s("p",Nr,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(c.email),1)])):!c.email&&f.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)?(t(),s("p",zr,d[25]||(d[25]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),O(" ✓ Adresse email valide ",-1)]))):U("",!0)])):U("",!0),h.value==="phone"?(t(),s("div",qr,[e("label",Ur,[e("div",Br,[b(u(ze),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),d[26]||(d[26]=e("span",null,"Numéro de téléphone",-1))])]),b(ct,{ref_key:"phoneInputRef",ref:$,modelValue:f.phone,"onUpdate:modelValue":d[4]||(d[4]=n=>f.phone=n),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:y},null,8,["modelValue"]),c.phone?(t(),s("p",Or,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(c.phone),1)])):i.value?(t(),s("p",Hr,d[27]||(d[27]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),O(" ✓ Numéro de téléphone valide ",-1)]))):U("",!0)])):U("",!0),e("div",Gr,[e("label",Kr,[e("div",Zr,[b(u(Nt),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),d[28]||(d[28]=e("span",null,"Mot de passe",-1))])]),e("div",Wr,[G(e("input",{id:"password",name:"password",type:V.value?"text":"password","onUpdate:modelValue":d[5]||(d[5]=n=>f.password=n),required:"",class:Z(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":c.password,"border-blue-300 focus:border-blue-500":!c.password&&f.password&&f.password.length>=6}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Jr),[[Ge,f.password]]),e("button",{type:"button",onClick:d[6]||(d[6]=n=>V.value=!V.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[V.value?(t(),ne(u(We),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(t(),ne(u(Me),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),c.password?(t(),s("p",Xr,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(c.password),1)])):!c.password&&f.password&&f.password.length>=6?(t(),s("p",Yr,d[29]||(d[29]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),O(" ✓ Mot de passe valide ",-1)]))):U("",!0)]),e("div",Qr,[e("label",ea,[G(e("input",{id:"remember-me",name:"remember-me",type:"checkbox","onUpdate:modelValue":d[7]||(d[7]=n=>f.rememberMe=n),class:"w-4 h-4 text-koumbaya-primary bg-white border-2 border-gray-300 rounded focus:ring-koumbaya-primary focus:ring-2 transition-colors"},null,512),[[Ee,f.rememberMe]]),d[30]||(d[30]=e("span",{class:"ml-3 text-sm text-gray-700 group-hover:text-gray-900 transition-colors"}," Se souvenir de moi ",-1))]),b(S,{to:"/forgot-password",class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors"},{default:Y(()=>d[31]||(d[31]=[O(" Mot de passe oublié ? ",-1)])),_:1,__:[31]})]),e("div",ta,[e("button",{type:"submit",disabled:E.value,class:"koumbaya-btn koumbaya-btn-primary koumbaya-btn-full koumbaya-btn-lg relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all duration-300"},[E.value?(t(),s("span",oa,d[32]||(d[32]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1)]))):U("",!0),e("span",ra,[E.value?U("",!0):(t(),ne(u(Fe),{key:0,class:"w-5 h-5 mr-2 group-hover:translate-x-1 transition-transform"})),O(" "+o(E.value?"Connexion en cours...":"Se connecter"),1)])],8,sa)])],32),d[33]||(d[33]=oe('<div class="my-8" data-v-b168a1c4><div class="relative" data-v-b168a1c4><div class="absolute inset-0 flex items-center" data-v-b168a1c4><div class="w-full border-t border-gray-200" data-v-b168a1c4></div></div><div class="relative flex justify-center text-sm" data-v-b168a1c4><span class="px-4 bg-white text-gray-500 font-medium" data-v-b168a1c4>Ou continuez avec</span></div></div></div><div class="grid grid-cols-2 gap-4" data-v-b168a1c4><button class="flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl shadow-sm bg-white hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group" data-v-b168a1c4><svg class="w-5 h-5 text-gray-600 group-hover:text-gray-700" viewBox="0 0 24 24" data-v-b168a1c4><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-b168a1c4></path><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-b168a1c4></path><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-b168a1c4></path><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-b168a1c4></path></svg><span class="ml-2 text-sm font-medium text-gray-700" data-v-b168a1c4>Google</span></button><button class="flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl shadow-sm bg-white hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group" data-v-b168a1c4><svg class="w-5 h-5 text-gray-600 group-hover:text-gray-700" fill="currentColor" viewBox="0 0 24 24" data-v-b168a1c4><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" data-v-b168a1c4></path></svg><span class="ml-2 text-sm font-medium text-gray-700" data-v-b168a1c4>Twitter</span></button></div>',2))])])])])}}},na=Le(aa,[["__scopeId","data-v-b168a1c4"]]),st={async loginWithFacebook(){try{const v=await ae().get("/auth/facebook");v.redirect_url&&(window.location.href=v.redirect_url)}catch(_){throw console.error("Facebook login error:",_),new Error("Erreur lors de la connexion avec Facebook")}},async loginWithGoogle(){try{const v=await ae().get("/auth/google");v.redirect_url&&(window.location.href=v.redirect_url)}catch(_){throw console.error("Google login error:",_),new Error("Erreur lors de la connexion avec Google")}},async loginWithApple(){try{const v=await ae().get("/auth/apple");v.redirect_url&&(window.location.href=v.redirect_url)}catch(_){throw console.error("Apple login error:",_),new Error("Erreur lors de la connexion avec Apple")}},async handleSocialCallback(_,v){try{const j=await ae().get(`/auth/${_}/callback`,{params:v});if(j.access_token){const f=ve();return f.setUser(j.user),f.setToken(j.access_token),{success:!0,user:j.user,message:j.message}}else throw new Error("Réponse invalide du serveur")}catch(M){return console.error("Social callback error:",M),{success:!1,message:M.response?.data?.message||"Erreur lors de l'authentification"}}},async openSocialLoginPopup(_){return new Promise((v,M)=>{try{const j=window.open(`/api/auth/${_}`,"socialLogin","width=600,height=700,scrollbars=yes,resizable=yes"),f=setInterval(()=>{j.closed&&(clearInterval(f),st.checkAuthenticationStatus().then(v).catch(M))},1e3);setTimeout(()=>{clearInterval(f),j.closed||j.close(),M(new Error("Timeout lors de l'authentification"))},3e5)}catch(j){M(j)}})},async checkAuthenticationStatus(){try{const v=await ae().get("/auth/me");return v.user?(ve().setUser(v.user),{success:!0,user:v.user}):{success:!1}}catch{return{success:!1}}}},ia={class:"min-h-screen bg-white flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},la={class:"max-w-4xl w-full"},da={class:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden"},ca={class:"grid grid-cols-1 lg:grid-cols-2"},ua={class:"p-8 lg:p-12"},ma={class:"max-w-md mx-auto"},pa={class:"text-gray-600 mb-8"},ga={class:"mb-6"},va={class:"grid grid-cols-2 gap-3"},xa={class:"flex items-center"},fa={key:0,class:"w-full h-full rounded-full bg-white scale-50"},ba={class:"flex items-center"},ha={key:0,class:"w-full h-full rounded-full bg-white scale-50"},ya={key:0,class:"transition-all duration-300"},_a={key:0,class:"mt-2 text-sm text-red-600"},wa={class:"grid grid-cols-2 gap-4"},$a={key:0,class:"mt-1 text-sm text-red-600"},ka={key:0,class:"mt-1 text-sm text-red-600"},Ca={key:0,class:"mt-1 text-sm text-red-600"},ja={key:0,class:"mt-1 text-sm text-red-600"},Aa={class:"relative"},Pa=["disabled"],Ea=["value"],Ia={key:0,class:"mt-1 text-sm text-red-600"},Ma={key:1,class:"mt-1 text-sm text-gray-500"},Da={key:1,class:"grid grid-cols-2 gap-4 transition-all duration-300"},La=["required"],Sa={key:0,class:"mt-1 text-sm text-red-600"},Ta={key:0,class:"mt-1 text-sm text-red-600"},Va={class:"grid grid-cols-2 gap-4"},Ra={class:"relative"},Fa=["type"],Na={key:0,class:"mt-1 text-sm text-red-600"},za={class:"relative"},qa=["type"],Ua={key:0,class:"mt-1 text-sm text-red-600"},Ba={class:"flex items-start space-x-3"},Oa={class:"flex items-center h-6"},Ha={key:2,class:"text-sm text-red-600"},Ga={key:3,class:"rounded-xl bg-red-50 p-4 border border-red-200"},Ka={class:"flex"},Za={class:"ml-3"},Wa={class:"mt-1 text-sm text-red-700"},Ja=["disabled"],Xa={key:0,class:"flex items-center space-x-2"},Ya={key:1},Qa="/logo_white.png",en={__name:"Register",setup(_){const v=he(),M=ve(),{get:j}=ae(),f=R(!1),h=R(!1),$=R([]),i=R(!1),c=R(!1);R("GA");const y=de({account_type:"personal",business_name:"",first_name:"",last_name:"",email:"",phone:"",city:"",address:"",country_id:"",password:"",password_confirmation:"",terms:!1}),E=de({account_type:"",business_name:"",first_name:"",last_name:"",email:"",phone:"",city:"",address:"",country_id:"",password:"",password_confirmation:"",terms:""}),V=()=>{Object.keys(E).forEach(n=>{E[n]=""});let S=!0;return y.account_type==="business"&&!y.business_name.trim()&&(E.business_name="Le nom de l'entreprise est requis pour un compte business",S=!1),y.first_name.trim()||(E.first_name="Le prénom est requis",S=!1),y.last_name.trim()||(E.last_name="Le nom est requis",S=!1),y.email?/\S+@\S+\.\S+/.test(y.email)||(E.email="Format d'email invalide",S=!1):(E.email="L'email est requis",S=!1),!y.phone||y.phone.trim()===""?(E.phone="Le numéro de téléphone est requis",S=!1):!c.value&&y.phone.length>3&&(E.phone="Format de téléphone invalide",S=!1),y.account_type==="business"&&!y.city.trim()&&(E.city="La ville est requise pour un compte business",S=!1),y.country_id||(E.country_id="Le pays est requis",S=!1),y.password?y.password.length<8&&(E.password="Le mot de passe doit contenir au moins 8 caractères",S=!1):(E.password="Le mot de passe est requis",S=!1),y.password!==y.password_confirmation&&(E.password_confirmation="Les mots de passe ne correspondent pas",S=!1),y.terms||(E.terms="Vous devez accepter les conditions d'utilisation",S=!1),S},A=S=>{console.log("Phone change:",S),c.value=S.isValid,y.phone=S.fullNumber,S.isValid&&S.fullNumber&&(E.phone="")},I=async()=>{if(!V())return;M.clearError();const S={account_type:y.account_type,first_name:y.first_name.trim(),last_name:y.last_name.trim(),email:y.email.trim(),phone:y.phone.trim(),country_id:parseInt(y.country_id),password:y.password,password_confirmation:y.password_confirmation,can_sell:y.account_type==="business",can_buy:!0};y.account_type==="business"&&(S.city=y.city.trim(),S.address=y.address.trim()||null),y.account_type==="business"&&y.business_name.trim()&&(S.business_name=y.business_name.trim());const n=await M.register(S);if(n.success){console.log("Inscription réussie, données utilisateur:",M.user),M.logout();const l=y.account_type==="business"?"marchand":"client",a=n.verification_type==="email_link"?`Un email de vérification a été envoyé à ${n.verification_sent_to}. Veuillez cliquer sur le lien dans votre email, puis vous connecter ci-dessous.`:`Un code de vérification a été envoyé à ${n.verification_sent_to}. Veuillez vérifier votre compte, puis vous connecter ci-dessous.`;sessionStorage.setItem("registration_success",JSON.stringify({email:y.email.trim(),first_name:n.user?.first_name||y.first_name,account_type:l,verification_message:a,requires_verification:n.requires_verification||!1})),console.log("Redirection vers la page de connexion après inscription"),v.push({name:"login",query:{registered:"true",email:y.email.trim()}})}else if(console.error("Erreur lors de l'inscription:",n),window.$toast){const l=n.message||"Une erreur est survenue lors de l'inscription";window.$toast.error(l,"Erreur d'inscription")}},D=async()=>{try{M.clearError(),await st.loginWithFacebook()}catch(S){M.setError(S.message||"Erreur lors de la connexion avec Facebook")}},z=async()=>{try{M.clearError(),await st.loginWithGoogle()}catch(S){M.setError(S.message||"Erreur lors de la connexion avec Google")}},p=async()=>{try{M.clearError(),await st.loginWithApple()}catch(S){M.setError(S.message||"Erreur lors de la connexion avec Apple")}},d=async()=>{try{i.value=!0;const S=await j("/countries");$.value=S.countries||[];const n=$.value.find(l=>l.name==="Gabon");n&&!y.country_id&&(y.country_id=n.id)}catch(S){console.error("Erreur lors du chargement des pays:",S)}finally{i.value=!1}};return ce(()=>{d()}),(S,n)=>{const l=pe("router-link");return t(),s("div",ia,[e("div",la,[e("div",da,[e("div",ca,[e("div",{class:"bg-gradient-to-br from-[#0099cc] to-[#0088bb] p-8 lg:p-12 flex flex-col justify-center relative overflow-hidden"},[n[16]||(n[16]=e("div",{class:"absolute inset-0 opacity-10"},[e("div",{class:"absolute -top-10 -right-10 w-40 h-40 bg-white rounded-full"}),e("div",{class:"absolute -bottom-16 -left-16 w-60 h-60 bg-white rounded-full"})],-1)),e("div",{class:"relative z-10"},[e("div",{class:"flex items-center mb-8"},[e("img",{src:Qa,alt:"Logo Koumbaya",class:"h-16 w-auto mr-4"})]),n[15]||(n[15]=oe('<h2 class="text-4xl lg:text-5xl font-bold text-white mb-6"> Rejoignez notre marketplace ! </h2><p class="text-blue-100 text-lg leading-relaxed mb-8"> Créez votre compte hybride et profitez d&#39;une expérience unique : <strong class="text-white">achetez malin</strong> et <strong class="text-white">vendez facilement</strong> sur la même plateforme. </p><div class="space-y-4"><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Compte hybride acheteur-vendeur</span></div><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Produits authentiques à prix réduits</span></div><div class="flex items-center text-blue-100"><div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center mr-3"><span class="text-white text-sm">✓</span></div><span>Système de notation communautaire</span></div></div>',3))])]),e("div",ua,[e("div",ma,[n[40]||(n[40]=e("h3",{class:"text-3xl font-bold text-gray-900 mb-2"},"Créer un compte",-1)),e("p",pa,[n[18]||(n[18]=O(" Déjà membre ? ",-1)),b(l,{to:"/login",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},{default:Y(()=>n[17]||(n[17]=[O(" Se connecter ",-1)])),_:1,__:[17]})]),e("div",{class:"space-y-3 mb-8"},[e("button",{onClick:D,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},n[19]||(n[19]=[e("svg",{class:"w-5 h-5 mr-3",viewBox:"0 0 24 24",fill:"#1877F2"},[e("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})],-1),O(" Continuer avec Facebook ",-1)])),e("button",{onClick:z,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},n[20]||(n[20]=[oe('<svg class="w-5 h-5 mr-3" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Continuer avec Google ',2)])),e("button",{onClick:p,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 group"},n[21]||(n[21]=[e("svg",{class:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12.017 0C8.396 0 8.025.044 8.025 2.551c0 1.983 1.396 3.329 3.396 3.329 3.329 0 3.329-2.551 3.329-2.551S14.75.044 12.017 0zm2.076 24c-1.825 0-2.631-1.078-4.076-1.078-1.513 0-2.513 1.078-4.025 1.078C3.759 24 0 18.444 0 12.861c0-5.516 3.759-9.861 8.944-9.861 1.825 0 2.631 1.078 4.076 1.078 1.513 0 2.513-1.078 4.025-1.078C19.278 3 24 7.861 24 12.861 24 18.444 19.278 24 14.093 24z"})],-1),O(" Continuer avec Apple ",-1)]))]),n[41]||(n[41]=oe('<div class="relative my-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white text-gray-500">ou créer avec email</span></div></div>',1)),e("div",ga,[n[24]||(n[24]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-3"},"Type de compte",-1)),e("div",va,[e("div",{onClick:n[0]||(n[0]=a=>y.account_type="personal"),class:Z(["relative cursor-pointer p-4 border-2 rounded-xl transition-all duration-200 hover:border-[#0099cc]/50",y.account_type==="personal"?"border-[#0099cc] bg-[#0099cc]/5":"border-gray-200"])},[e("div",xa,[e("div",{class:Z(["w-4 h-4 rounded-full border-2 mr-3 transition-colors",y.account_type==="personal"?"border-[#0099cc] bg-[#0099cc]":"border-gray-300"])},[y.account_type==="personal"?(t(),s("div",fa)):U("",!0)],2),n[22]||(n[22]=e("div",null,[e("h4",{class:"font-semibold text-gray-900"},"Personnel"),e("p",{class:"text-xs text-gray-600"},"Acheteur particulier")],-1))])],2),e("div",{onClick:n[1]||(n[1]=a=>y.account_type="business"),class:Z(["relative cursor-pointer p-4 border-2 rounded-xl transition-all duration-200 hover:border-[#0099cc]/50",y.account_type==="business"?"border-[#0099cc] bg-[#0099cc]/5":"border-gray-200"])},[e("div",ba,[e("div",{class:Z(["w-4 h-4 rounded-full border-2 mr-3 transition-colors",y.account_type==="business"?"border-[#0099cc] bg-[#0099cc]":"border-gray-300"])},[y.account_type==="business"?(t(),s("div",ha)):U("",!0)],2),n[23]||(n[23]=e("div",null,[e("h4",{class:"font-semibold text-gray-900"},"Business"),e("p",{class:"text-xs text-gray-600"},"Vendeur professionnel")],-1))])],2)])]),e("form",{onSubmit:ge(I,["prevent"]),class:"space-y-5"},[y.account_type==="business"?(t(),s("div",ya,[n[25]||(n[25]=e("label",{for:"business_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Nom de l'entreprise * ",-1)),G(e("input",{id:"business_name","onUpdate:modelValue":n[2]||(n[2]=a=>y.business_name=a),type:"text",required:"",class:Z(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.business_name}]),style:{color:"#5f5f5f"},placeholder:"Ma Super Entreprise"},null,2),[[X,y.business_name]]),E.business_name?(t(),s("p",_a,o(E.business_name),1)):U("",!0)])):U("",!0),e("div",wa,[e("div",null,[n[26]||(n[26]=e("label",{for:"first_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Prénom * ",-1)),G(e("input",{id:"first_name","onUpdate:modelValue":n[3]||(n[3]=a=>y.first_name=a),type:"text",required:"",class:Z(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.first_name}]),style:{color:"#5f5f5f"},placeholder:"Jean"},null,2),[[X,y.first_name]]),E.first_name?(t(),s("p",$a,o(E.first_name),1)):U("",!0)]),e("div",null,[n[27]||(n[27]=e("label",{for:"last_name",class:"block text-sm font-semibold text-gray-900 mb-2"}," Nom * ",-1)),G(e("input",{id:"last_name","onUpdate:modelValue":n[4]||(n[4]=a=>y.last_name=a),type:"text",required:"",class:Z(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.last_name}]),style:{color:"#5f5f5f"},placeholder:"Dupont"},null,2),[[X,y.last_name]]),E.last_name?(t(),s("p",ka,o(E.last_name),1)):U("",!0)])]),e("div",null,[n[28]||(n[28]=e("label",{for:"email",class:"block text-sm font-semibold text-gray-900 mb-2"}," Adresse email * ",-1)),G(e("input",{id:"email","onUpdate:modelValue":n[5]||(n[5]=a=>y.email=a),type:"email",required:"",class:Z(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.email}]),style:{color:"#5f5f5f"},placeholder:"jean@exemple.com"},null,2),[[X,y.email]]),E.email?(t(),s("p",Ca,o(E.email),1)):U("",!0)]),e("div",null,[n[29]||(n[29]=e("label",{for:"phone",class:"block text-sm font-semibold text-gray-900 mb-2"}," Numéro de téléphone * ",-1)),b(ct,{ref:"phoneInputRef",modelValue:y.phone,"onUpdate:modelValue":n[6]||(n[6]=a=>y.phone=a),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:A},null,8,["modelValue"]),E.phone?(t(),s("p",ja,o(E.phone),1)):U("",!0)]),e("div",null,[n[32]||(n[32]=e("label",{for:"country",class:"block text-sm font-semibold text-gray-900 mb-2"}," Pays * ",-1)),e("div",Aa,[G(e("select",{id:"country","onUpdate:modelValue":n[7]||(n[7]=a=>y.country_id=a),required:"",class:Z(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all appearance-none bg-white",{"border-red-300 bg-red-50":E.country_id}]),style:{color:"#5f5f5f"},disabled:i.value},[n[30]||(n[30]=e("option",{value:"",disabled:""},"Sélectionnez votre pays",-1)),(t(!0),s(W,null,J($.value,a=>(t(),s("option",{key:a.id,value:a.id},o(a.name),9,Ea))),128))],10,Pa),[[ie,y.country_id]]),n[31]||(n[31]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),E.country_id?(t(),s("p",Ia,o(E.country_id),1)):U("",!0),i.value?(t(),s("p",Ma,"Chargement des pays...")):U("",!0)]),y.account_type=="business"?(t(),s("div",Da,[e("div",null,[n[33]||(n[33]=e("label",{for:"city",class:"block text-sm font-semibold text-gray-900 mb-2"}," Ville * ",-1)),G(e("input",{id:"city","onUpdate:modelValue":n[8]||(n[8]=a=>y.city=a),type:"text",required:y.account_type==="business",class:Z(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.city}]),style:{color:"#5f5f5f"},placeholder:"Libreville"},null,10,La),[[X,y.city]]),E.city?(t(),s("p",Sa,o(E.city),1)):U("",!0)]),e("div",null,[n[34]||(n[34]=e("label",{for:"address",class:"block text-sm font-semibold text-gray-900 mb-2"}," Adresse ",-1)),G(e("input",{id:"address","onUpdate:modelValue":n[9]||(n[9]=a=>y.address=a),type:"text",class:Z(["w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.address}]),style:{color:"#5f5f5f"},placeholder:"123 Rue Example"},null,2),[[X,y.address]]),E.address?(t(),s("p",Ta,o(E.address),1)):U("",!0)])])):U("",!0),e("div",Va,[e("div",null,[n[35]||(n[35]=e("label",{for:"password",class:"block text-sm font-semibold text-gray-900 mb-2"}," Mot de passe * ",-1)),e("div",Ra,[G(e("input",{id:"password","onUpdate:modelValue":n[10]||(n[10]=a=>y.password=a),type:f.value?"text":"password",required:"",class:Z(["w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.password}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,Fa),[[Ge,y.password]]),e("button",{type:"button",onClick:n[11]||(n[11]=a=>f.value=!f.value),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[f.value?(t(),ne(u(We),{key:1,class:"h-5 w-5"})):(t(),ne(u(Me),{key:0,class:"h-5 w-5"}))])]),E.password?(t(),s("p",Na,o(E.password),1)):U("",!0)]),e("div",null,[n[36]||(n[36]=e("label",{for:"password_confirmation",class:"block text-sm font-semibold text-gray-900 mb-2"}," Confirmer * ",-1)),e("div",za,[G(e("input",{id:"password_confirmation","onUpdate:modelValue":n[12]||(n[12]=a=>y.password_confirmation=a),type:h.value?"text":"password",required:"",class:Z(["w-full px-4 py-3 pr-12 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",{"border-red-300 bg-red-50":E.password_confirmation}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,qa),[[Ge,y.password_confirmation]]),e("button",{type:"button",onClick:n[13]||(n[13]=a=>h.value=!h.value),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[h.value?(t(),ne(u(We),{key:1,class:"h-5 w-5"})):(t(),ne(u(Me),{key:0,class:"h-5 w-5"}))])]),E.password_confirmation?(t(),s("p",Ua,o(E.password_confirmation),1)):U("",!0)])]),e("div",Ba,[e("div",Oa,[G(e("input",{id:"terms","onUpdate:modelValue":n[14]||(n[14]=a=>y.terms=a),type:"checkbox",class:Z(["h-4 w-4 text-[#0099cc] focus:ring-[#0099cc] border-gray-300 rounded",{"border-red-500":E.terms}])},null,2),[[Ee,y.terms]])]),n[37]||(n[37]=e("label",{for:"terms",class:"text-sm text-gray-600 leading-6"},[O(" J'accepte les "),e("a",{href:"#",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},"conditions d'utilisation"),O(" et la "),e("a",{href:"#",class:"text-[#0099cc] hover:text-[#0088bb] font-semibold"},"politique de confidentialité")],-1))]),E.terms?(t(),s("p",Ha,o(E.terms),1)):U("",!0),u(M).error?(t(),s("div",Ga,[e("div",Ka,[b(u(Be),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",Za,[n[38]||(n[38]=e("h3",{class:"text-sm font-semibold text-red-800"}," Erreur d'inscription ",-1)),e("div",Wa,o(u(M).error),1)])])])):U("",!0),e("button",{type:"submit",disabled:u(M).loading,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[u(M).loading?(t(),s("span",Xa,n[39]||(n[39]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Création en cours...",-1)]))):(t(),s("span",Ya,"Créer mon compte Koumbaya"))],8,Ja)],32)])])])])])])}}},tn={class:"min-h-screen bg-white flex items-center justify-center py-12 px-4"},sn={class:"max-w-md w-full bg-white rounded-3xl shadow-2xl border border-gray-100 p-8"},on={class:"text-center mb-8"},rn=["src"],an={key:0,class:"text-center"},nn={key:1,class:"text-center"},ln={class:"text-2xl font-bold text-[#0099cc] mb-2"},dn={class:"text-gray-600 mb-6"},cn={class:"space-y-3"},un={key:2,class:"text-center"},mn={class:"text-gray-600 mb-6"},pn={class:"space-y-3"},gn={__name:"VerifyEmail",setup(_){const v=Ue(),M=he(),j=ve(),{get:f}=ae(),h=R(!0),$=R(null),i=R(""),c=async()=>{try{const E=v.query.token;if(!E)throw new Error("Token de vérification manquant");const V=await f(`/auth/verify-email/${encodeURIComponent(E)}`);if(V.success)$.value=V,j.isAuthenticated&&await j.refreshUser();else throw new Error(V.message||"Erreur de vérification")}catch(E){console.error("Erreur lors de la vérification:",E),$.value={success:!1},i.value=E.response?.data?.message||E.message||"Une erreur est survenue lors de la vérification"}finally{h.value=!1}},y=()=>{if(j.isAuthenticated){const E=j.getDefaultRedirect();M.push({name:E}).catch(()=>{M.push("/dashboard")})}else M.push("/login")};return ce(()=>{c()}),(E,V)=>(t(),s("div",tn,[e("div",sn,[e("div",on,[e("img",{src:u(Qe),alt:"Logo Koumbaya",class:"h-16 w-auto mx-auto mb-4"},null,8,rn)]),h.value?(t(),s("div",an,V[3]||(V[3]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-[#0099cc] border-t-transparent mx-auto mb-4"},null,-1),e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Vérification en cours...",-1),e("p",{class:"text-gray-600"},"Nous vérifions votre lien de vérification.",-1)]))):$.value?.success?(t(),s("div",nn,[V[4]||(V[4]=e("div",{class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-[#0099cc]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("h2",ln,o($.value.already_verified?"Déjà vérifié !":"Compte vérifié !"),1),e("p",dn,o($.value.message),1),e("div",cn,[e("button",{onClick:y,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"}," Accéder à mon compte "),e("button",{onClick:V[0]||(V[0]=A=>E.$router.push("/")),class:"w-full border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Retour à l'accueil ")])])):(t(),s("div",un,[V[5]||(V[5]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),V[6]||(V[6]=e("h2",{class:"text-2xl font-bold text-red-600 mb-2"},"Vérification échouée",-1)),e("p",mn,o(i.value),1),e("div",pn,[e("button",{onClick:V[1]||(V[1]=A=>E.$router.push("/register")),class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Créer un nouveau compte "),e("button",{onClick:V[2]||(V[2]=A=>E.$router.push("/login")),class:"w-full border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200"}," Se connecter ")])])),V[7]||(V[7]=oe('<div class="mt-8 p-4 bg-blue-50 rounded-xl border border-blue-200"><div class="flex items-start"><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h4 class="text-sm font-semibold text-blue-900">Pourquoi vérifier mon compte ?</h4><p class="text-sm text-blue-700 mt-1"> La vérification de votre compte est nécessaire pour pouvoir acheter des produits et participer aux tombolas sur Koumbaya. </p></div></div></div>',1))])]))}},vn={class:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},xn={class:"sm:mx-auto sm:w-full sm:max-w-md"},fn={class:"flex justify-center mb-8"},bn=["src"],hn={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},yn={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},_n={class:"koumbaya-card-body p-8"},wn={class:"flex justify-center space-x-2 p-1 bg-gray-100 rounded-lg mb-6"},$n={key:0,class:"koumbaya-form-group"},kn={for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},Cn={class:"flex items-center"},jn={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},An={key:1,class:"koumbaya-form-group"},Pn={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},En={class:"flex items-center"},In={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},Mn={key:2,class:"rounded-xl bg-red-50 p-4 border border-red-200"},Dn={class:"flex"},Ln={class:"ml-3"},Sn={class:"mt-1 text-sm text-red-700"},Tn={key:3,class:"rounded-xl bg-green-50 p-4 border border-green-200"},Vn={class:"flex"},Rn={class:"ml-3"},Fn={class:"mt-1 text-sm text-green-700"},Nn=["disabled"],zn={key:0,class:"flex items-center space-x-2"},qn={key:1},Un={class:"text-center"},Bn={__name:"ForgotPassword",setup(_){const v=he(),{post:M}=ae(),j=R("email"),f=R(!1),h=R(!1),$=R(!1),i=de({email:"",phone:""}),c=de({email:"",phone:"",general:""}),y=A=>{f.value=A.isValid,i.phone=A.fullNumber,A.isValid&&(c.phone="")},E=()=>{Object.keys(c).forEach(I=>{c[I]=""});let A=!0;return j.value==="email"?i.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(c.email="Format d'email invalide",A=!1):(c.email="L'adresse email est obligatoire",A=!1):i.phone?f.value||(c.phone="Format de téléphone invalide",A=!1):(c.phone="Le numéro de téléphone est obligatoire",A=!1),A},V=async()=>{if(E()){h.value=!0,c.general="",$.value=!1;try{const A=j.value==="email"?i.email:i.phone,I=await M("/otp/send",{identifier:A,type:j.value==="email"?"email":"sms",purpose:"password_reset"});I.success?($.value=!0,setTimeout(()=>{v.push({name:"reset-password-verify",query:{identifier:A,method:j.value}})},2e3)):c.general=I.message||"Une erreur est survenue"}catch(A){console.error("Erreur lors de l'envoi du code:",A),c.general="Une erreur est survenue lors de l'envoi du code"}finally{h.value=!1}}};return(A,I)=>{const D=pe("router-link");return t(),s("div",vn,[e("div",xn,[e("div",fn,[e("img",{class:"h-20 w-auto",src:u(Qe),alt:"Koumbaya"},null,8,bn)]),I[4]||(I[4]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Mot de passe oublié ? ",-1)),I[5]||(I[5]=e("p",{class:"text-center text-lg text-gray-600 mb-8"}," Entrez votre adresse email ou votre numéro de téléphone ",-1))]),e("div",hn,[e("div",yn,[e("div",_n,[e("form",{onSubmit:ge(V,["prevent"]),class:"space-y-6"},[e("div",wn,[e("button",{type:"button",onClick:I[0]||(I[0]=z=>j.value="email"),class:Z(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",j.value==="email"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(u(Ze),{class:"w-4 h-4 inline-block mr-2"}),I[6]||(I[6]=O(" Email ",-1))],2),e("button",{type:"button",onClick:I[1]||(I[1]=z=>j.value="phone"),class:Z(["flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200",j.value==="phone"?"bg-white text-koumbaya-primary shadow-sm":"text-gray-600 hover:text-gray-900"])},[b(u(ze),{class:"w-4 h-4 inline-block mr-2"}),I[7]||(I[7]=O(" Téléphone ",-1))],2)]),j.value==="email"?(t(),s("div",$n,[e("label",kn,[e("div",Cn,[b(u(Ze),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),I[8]||(I[8]=e("span",null,"Adresse e-mail",-1))])]),G(e("input",{id:"email",name:"email",type:"email","onUpdate:modelValue":I[2]||(I[2]=z=>i.email=z),required:"",class:Z(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":c.email}]),style:{color:"#5f5f5f"},placeholder:"exemple@koumbaya.com"},null,2),[[X,i.email]]),c.email?(t(),s("p",jn,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(c.email),1)])):U("",!0)])):U("",!0),j.value==="phone"?(t(),s("div",An,[e("label",Pn,[e("div",En,[b(u(ze),{class:"w-4 h-4 mr-2 text-gray-500 flex-shrink-0"}),I[9]||(I[9]=e("span",null,"Numéro de téléphone",-1))])]),b(ct,{ref:"phoneInputRef",modelValue:i.phone,"onUpdate:modelValue":I[3]||(I[3]=z=>i.phone=z),"preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"],"initial-country":"ga",onPhoneChange:y},null,8,["modelValue"]),c.phone?(t(),s("p",In,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(c.phone),1)])):U("",!0)])):U("",!0),c.general?(t(),s("div",Mn,[e("div",Dn,[b(u(be),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",Ln,[I[10]||(I[10]=e("h3",{class:"text-sm font-semibold text-red-800"},"Erreur",-1)),e("div",Sn,o(c.general),1)])])])):U("",!0),$.value?(t(),s("div",Tn,[e("div",Vn,[b(u(je),{class:"h-5 w-5 text-green-400 mt-0.5"}),e("div",Rn,[I[11]||(I[11]=e("h3",{class:"text-sm font-semibold text-green-800"},"Code envoyé !",-1)),e("div",Fn," Un code de réinitialisation a été envoyé à "+o(j.value==="email"?i.email:i.phone),1)])])])):U("",!0),e("button",{type:"submit",disabled:h.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[h.value?(t(),s("span",zn,I[12]||(I[12]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Envoi en cours...",-1)]))):(t(),s("span",qn,"Envoyer le code"))],8,Nn),e("div",Un,[b(D,{to:"/login",class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors"},{default:Y(()=>I[13]||(I[13]=[O(" ← Retour à la connexion ",-1)])),_:1,__:[13]})])],32)])])])])}}},On=Le(Bn,[["__scopeId","data-v-51805275"]]),Hn={class:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Gn={class:"sm:mx-auto sm:w-full sm:max-w-md"},Kn={class:"flex justify-center mb-8"},Zn=["src"],Wn={class:"text-center text-lg text-gray-600 mb-8"},Jn={class:"mt-12 sm:mx-auto sm:w-full sm:max-w-md"},Xn={class:"koumbaya-card bg-white/80 backdrop-blur-sm border-0 shadow-2xl"},Yn={class:"koumbaya-card-body p-8"},Qn={class:"koumbaya-form-group"},ei={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},ti={class:"koumbaya-form-group"},si={class:"relative"},oi=["type"],ri={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},ai={class:"koumbaya-form-group"},ni={class:"relative"},ii=["type"],li={key:0,class:"mt-2 text-sm text-red-600 flex items-center"},di={key:0,class:"rounded-xl bg-red-50 p-4 border border-red-200"},ci={class:"flex"},ui={class:"ml-3"},mi={class:"mt-1 text-sm text-red-700"},pi={key:1,class:"rounded-xl bg-green-50 p-4 border border-green-200"},gi={class:"flex"},vi=["disabled"],xi={key:0,class:"flex items-center space-x-2"},fi={key:1},bi={class:"text-center"},hi=["disabled"],yi={key:0},_i={key:1},wi={key:2},$i={__name:"ResetPasswordVerify",setup(_){const v=he(),M=Ue(),{post:j}=ae(),f=R(M.query.identifier||""),h=R(M.query.method||"email"),$=R(!1),i=R(!1),c=R(!1),y=R(!1),E=R(!1),V=R(0),A=R(null),I=de({otp:"",password:"",password_confirmation:""}),D=de({otp:"",password:"",password_confirmation:"",general:""}),z=()=>{Object.keys(D).forEach(l=>{D[l]=""});let n=!0;return I.otp?I.otp.length!==6&&(D.otp="Le code doit contenir 6 chiffres",n=!1):(D.otp="Le code est obligatoire",n=!1),I.password?I.password.length<8&&(D.password="Le mot de passe doit contenir au moins 8 caractères",n=!1):(D.password="Le mot de passe est obligatoire",n=!1),I.password!==I.password_confirmation&&(D.password_confirmation="Les mots de passe ne correspondent pas",n=!1),n},p=async()=>{if(z()){$.value=!0,D.general="",i.value=!1;try{const n=await j("/auth/reset-password",{identifier:f.value,otp:I.otp,password:I.password,password_confirmation:I.password_confirmation});n.success?(i.value=!0,setTimeout(()=>{v.push({name:"login"})},2e3)):D.general=n.message||"Une erreur est survenue"}catch(n){console.error("Erreur lors de la réinitialisation:",n),n.response?.data?.message?D.general=n.response.data.message:D.general="Une erreur est survenue lors de la réinitialisation"}finally{$.value=!1}}},d=async()=>{E.value=!0;try{const n=await j("/otp/resend",{identifier:f.value,type:h.value==="email"?"email":"sms",purpose:"password_reset"});n.success?S():D.general=n.message||"Erreur lors du renvoi du code"}catch(n){console.error("Erreur lors du renvoi:",n),D.general="Erreur lors du renvoi du code"}finally{E.value=!1}},S=()=>{V.value=60,A.value=setInterval(()=>{V.value--,V.value<=0&&clearInterval(A.value)},1e3)};return ce(()=>{f.value||v.push({name:"forgot-password"})}),Xe(()=>{A.value&&clearInterval(A.value)}),(n,l)=>(t(),s("div",Hn,[e("div",Gn,[e("div",Kn,[e("img",{class:"h-20 w-auto",src:u(Qe),alt:"Koumbaya"},null,8,Zn)]),l[5]||(l[5]=e("h2",{class:"text-center text-4xl font-bold text-gray-900 mb-3"}," Vérification du code ",-1)),e("p",Wn," Entrez le code reçu "+o(h.value==="email"?"par email":"par SMS"),1)]),e("div",Jn,[e("div",Xn,[e("div",Yn,[e("form",{onSubmit:ge(p,["prevent"]),class:"space-y-6"},[e("div",Qn,[l[6]||(l[6]=e("label",{for:"otp",class:"block text-sm font-medium text-gray-700 mb-2"}," Code de vérification ",-1)),G(e("input",{id:"otp",name:"otp",type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>I.otp=a),required:"",maxlength:"6",class:Z(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 text-center text-2xl letter-spacing-wide",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":D.otp}]),style:{color:"#5f5f5f"},placeholder:"123456"},null,2),[[X,I.otp]]),D.otp?(t(),s("p",ei,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(D.otp),1)])):U("",!0)]),e("div",ti,[l[7]||(l[7]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," Nouveau mot de passe ",-1)),e("div",si,[G(e("input",{id:"password",name:"password",type:c.value?"text":"password","onUpdate:modelValue":l[1]||(l[1]=a=>I.password=a),required:"",class:Z(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":D.password}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,oi),[[Ge,I.password]]),e("button",{type:"button",onClick:l[2]||(l[2]=a=>c.value=!c.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[c.value?(t(),ne(u(We),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(t(),ne(u(Me),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),D.password?(t(),s("p",ri,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(D.password),1)])):U("",!0)]),e("div",ai,[l[8]||(l[8]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirmer le mot de passe ",-1)),e("div",ni,[G(e("input",{id:"password_confirmation",name:"password_confirmation",type:y.value?"text":"password","onUpdate:modelValue":l[3]||(l[3]=a=>I.password_confirmation=a),required:"",class:Z(["koumbaya-input bg-white/50 border-gray-200 focus:border-koumbaya-primary focus:ring-4 focus:ring-koumbaya-primary/10 rounded-xl transition-all duration-200 pr-12",{"border-red-300 focus:border-red-500 focus:ring-red-500/10":D.password_confirmation}]),style:{color:"#5f5f5f"},placeholder:"••••••••"},null,10,ii),[[Ge,I.password_confirmation]]),e("button",{type:"button",onClick:l[4]||(l[4]=a=>y.value=!y.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-gray-100 rounded-r-xl transition-colors"},[y.value?(t(),ne(u(We),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(t(),ne(u(Me),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))])]),D.password_confirmation?(t(),s("p",li,[b(u(be),{class:"w-4 h-4 mr-1"}),O(" "+o(D.password_confirmation),1)])):U("",!0)]),D.general?(t(),s("div",di,[e("div",ci,[b(u(be),{class:"h-5 w-5 text-red-400 mt-0.5"}),e("div",ui,[l[9]||(l[9]=e("h3",{class:"text-sm font-semibold text-red-800"},"Erreur",-1)),e("div",mi,o(D.general),1)])])])):U("",!0),i.value?(t(),s("div",pi,[e("div",gi,[b(u(je),{class:"h-5 w-5 text-green-400 mt-0.5"}),l[10]||(l[10]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-semibold text-green-800"},"Mot de passe réinitialisé !"),e("div",{class:"mt-1 text-sm text-green-700"}," Redirection vers la page de connexion... ")],-1))])])):U("",!0),e("button",{type:"submit",disabled:$.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"},[$.value?(t(),s("span",xi,l[11]||(l[11]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),e("span",null,"Réinitialisation...",-1)]))):(t(),s("span",fi,"Réinitialiser le mot de passe"))],8,vi),e("div",bi,[e("button",{type:"button",onClick:d,disabled:E.value||V.value>0,class:"text-sm font-semibold text-koumbaya-primary hover:text-koumbaya-primary-dark transition-colors disabled:opacity-50"},[V.value>0?(t(),s("span",yi," Renvoyer le code ("+o(V.value)+"s) ",1)):E.value?(t(),s("span",_i,"Envoi...")):(t(),s("span",wi,"Renvoyer le code"))],8,hi)])],32)])])])]))}},ki=Le($i,[["__scopeId","data-v-667fc4f1"]]),Ce="/build/assets/placeholder-BS1MYrTN.jpg",mt="/build/assets/placeholder-BS1MYrTN.jpg",Ci={class:"bg-white"},ji={class:"relative bg-gradient-to-br from-[#0099cc]/5 via-white to-[#0099cc]/10 overflow-hidden"},Ai={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pi={class:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center min-h-[90vh] py-20"},Ei={class:"space-y-8"},Ii={class:"space-y-4"},Mi={class:"inline-flex items-center gap-2 bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full text-sm font-medium"},Di={class:"flex flex-col sm:flex-row gap-4"},Li={class:"flex items-center gap-8 pt-8"},Si={class:"flex items-center gap-2 text-gray-600"},Ti={class:"flex items-center gap-2 text-gray-600"},Vi={class:"flex items-center gap-2 text-gray-600"},Ri={class:"relative lg:h-[600px] flex items-center justify-center"},Fi={class:"relative"},Ni={class:"bg-white rounded-3xl shadow-2xl p-8 max-w-sm relative z-10 border border-gray-100"},zi={class:"relative mb-6"},qi=["src"],Ui={class:"absolute inline-flex items-center -top-8 -left-8 bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full text-sm font-medium z-20 animate-float"},Bi={class:"py-20 bg-gray-50"},Oi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Hi={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},Gi={class:"text-center"},Ki={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Zi={class:"text-center"},Wi={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Ji={class:"text-center"},Xi={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},Yi={class:"text-center"},Qi={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},el={class:"py-20"},tl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},sl={class:"text-center mt-12"},ol={class:"py-20 bg-gray-50"},rl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},al={class:"flex items-center justify-between mb-12"},nl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},il=["onClick"],ll={class:"relative mb-6"},dl=["src","alt"],cl={class:"absolute -top-2 -right-2"},ul={class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold shadow-lg"},ml={key:0,class:"absolute top-4 left-4"},pl={class:"space-y-4"},gl={class:"text-xl font-bold text-black group-hover:text-[#0099cc] transition-colors"},vl={class:"text-gray-600"},xl={class:"space-y-2"},fl={class:"flex justify-between text-sm text-gray-600"},bl={class:"font-semibold"},hl={class:"w-full bg-gray-200 rounded-full h-3"},yl={class:"text-center text-sm text-gray-500"},_l={class:"text-center mt-12 md:hidden"},wl={class:"py-20"},$l={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},kl={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},Cl={class:"flex items-center mb-6"},jl=["src","alt"],Al={class:"ml-4"},Pl={class:"font-semibold text-gray-900"},El={class:"text-sm text-gray-600"},Il={class:"flex items-center mb-4"},Ml={class:"flex text-yellow-400"},Dl={class:"text-gray-700 italic leading-relaxed"},Ll={class:"mt-4 text-sm text-[#0099cc] font-medium"},Sl={class:"py-20 bg-gradient-to-r from-[#0099cc] to-cyan-600"},Tl={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},Vl={class:"flex flex-col sm:flex-row gap-4 justify-center"},Rl={__name:"Home",setup(_){const v=he(),M=R([{id:1,name:"iPhone 15 Pro Max",value:1299e3,ticketPrice:1500,image:Ce,soldTickets:750,isNew:!0},{id:2,name:"MacBook Pro M3",value:25e5,ticketPrice:2500,image:Ce,soldTickets:420,isNew:!0},{id:3,name:"Tesla Model Y",value:45e6,ticketPrice:5e4,image:Ce,soldTickets:320,isNew:!1}]),j=R([{id:1,name:"Marie Dubois",location:"Libreville",avatar:mt,review:"J'ai acheté un iPhone 14 Pro avec seulement 5 tickets ! Le processus était transparent et la livraison rapide.",won:"iPhone 14 Pro"},{id:2,name:"Jean Kamga",location:"Port-Gentil",avatar:mt,review:"Koumbaya a changé ma vie ! J'ai obtenu une moto à prix réduit et maintenant je participe à toutes les tombolas.",won:"Yamaha MT-03"},{id:3,name:"Fatou Ndongo",location:"Franceville",avatar:mt,review:"Platform très sérieuse, paiement sécurisé et service client réactif. Je recommande vivement !",won:"MacBook Air M2"}]),f=$=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format($).replace("XAF","FCFA"),h=$=>{v.push({name:"public.product.detail",params:{id:$.id}})};return($,i)=>{const c=pe("router-link");return t(),s("div",Ci,[e("section",ji,[e("div",Ai,[e("div",Pi,[e("div",Ei,[e("div",Ii,[e("div",Mi,[b(u(xt),{class:"h-4 w-4"}),i[0]||(i[0]=e("span",null,"Nouveau au Gabon",-1))]),i[1]||(i[1]=oe('<h1 class="text-5xl lg:text-6xl xl:text-7xl font-bold text-black leading-none" data-v-3127279f> Rendre l&#39;impossible <span class="text-[#0099cc]" data-v-3127279f>accessible</span></h1><p class="text-xl lg:text-2xl text-gray-600 leading-relaxed" data-v-3127279f> Des smartphones aux voitures, profitez de nos tombolas pour <strong class="text-[#0099cc]" data-v-3127279f>acheter malin</strong> et obtenir des produits <strong class="text-[#0099cc]" data-v-3127279f>à prix réduit</strong>. </p>',2))]),e("div",Di,[b(c,{to:"/products",class:"inline-flex items-center justify-center gap-2 bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold px-8 py-4 rounded-2xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl"},{default:Y(()=>[b(u(Re),{class:"h-5 w-5"}),i[2]||(i[2]=e("span",null,"Découvrir les produits",-1))]),_:1,__:[2]}),b(c,{to:"/how-it-works",class:"inline-flex items-center justify-center gap-2 border-2 border-[#0099cc] text-[#0099cc] hover:bg-[#0099cc]/5 font-semibold px-8 py-4 rounded-2xl transition-all duration-200"},{default:Y(()=>[b(u(zt),{class:"h-5 w-5"}),i[3]||(i[3]=e("span",null,"Comment ça marche",-1))]),_:1,__:[3]})]),e("div",Li,[e("div",Si,[b(u(dt),{class:"h-6 w-6 text-[#0099cc]"}),i[4]||(i[4]=e("span",{class:"font-medium"},"100% sécurisé",-1))]),e("div",Ti,[b(u(Rt),{class:"h-6 w-6 text-[#0099cc]"}),i[5]||(i[5]=e("span",{class:"font-medium"},"Produits authentiques",-1))]),e("div",Vi,[b(u(_t),{class:"h-6 w-6 text-[#0099cc]"}),i[6]||(i[6]=e("span",{class:"font-medium"},"Livraison gratuite",-1))])])]),e("div",Ri,[e("div",Fi,[e("div",Ni,[e("div",zi,[e("img",{src:u(Ce),alt:"iPhone 15 Pro",class:"w-full h-48 object-cover rounded-2xl bg-gray-100"},null,8,qi),i[7]||(i[7]=e("div",{class:"absolute -top-2 -right-2 bg-[#0099cc] text-white px-3 py-1 rounded-full text-sm font-bold"}," 1500 FCFA ",-1))]),i[8]||(i[8]=oe('<div class="space-y-4" data-v-3127279f><div data-v-3127279f><h3 class="text-xl font-bold text-black" data-v-3127279f>iPhone 15 Pro Max</h3><p class="text-gray-600" data-v-3127279f>Valeur: 1 299 000 FCFA</p></div><div class="space-y-2" data-v-3127279f><div class="flex justify-between text-sm text-gray-600" data-v-3127279f><span data-v-3127279f>Progression</span><span class="font-semibold" data-v-3127279f>75%</span></div><div class="w-full bg-gray-200 rounded-full h-3" data-v-3127279f><div class="bg-gradient-to-r from-[#0099cc] to-[#0088bb] h-3 rounded-full w-3/4 animate-pulse" data-v-3127279f></div></div><div class="text-center text-sm text-gray-500" data-v-3127279f>750/1000 tickets</div></div><button class="w-full bg-[#0099cc] text-white font-semibold py-3 rounded-xl hover:bg-[#0088bb] transition-colors" data-v-3127279f> Acheter maintenant </button></div>',1))]),e("div",Ui,[b(u(xt),{class:"h-4 w-4"}),i[9]||(i[9]=O(" Nouvelle tombola ",-1))]),i[10]||(i[10]=e("div",{class:"absolute -bottom-4 -right-8 bg-yellow-100 text-yellow-600 px-4 py-2 rounded-full text-sm font-medium z-20 animate-float-delayed"}," 🔥 Populaire ",-1))])])])])]),e("section",Bi,[e("div",Oi,[i[19]||(i[19]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Koumbaya en chiffres "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Rejoignez des milliers de participants qui ont déjà fait confiance à notre plateforme ")],-1)),e("div",Hi,[e("div",Gi,[e("div",Ki,[b(u(Ye),{class:"h-10 w-10 text-[#0099cc]"})]),i[11]||(i[11]=e("div",{class:"text-4xl font-bold text-black mb-2"},"12 000+",-1)),i[12]||(i[12]=e("div",{class:"text-gray-600"},"Participants actifs",-1))]),e("div",Zi,[e("div",Wi,[b(u(Oe),{class:"h-10 w-10 text-[#0099cc]"})]),i[13]||(i[13]=e("div",{class:"text-4xl font-bold text-black mb-2"},"250+",-1)),i[14]||(i[14]=e("div",{class:"text-gray-600"},"Produits gagnés",-1))]),e("div",Ji,[e("div",Xi,[b(u(Ie),{class:"h-10 w-10 text-[#0099cc]"})]),i[15]||(i[15]=e("div",{class:"text-4xl font-bold text-black mb-2"},"500M+",-1)),i[16]||(i[16]=e("div",{class:"text-gray-600"},"FCFA distribués",-1))]),e("div",Yi,[e("div",Qi,[b(u(Je),{class:"h-10 w-10 text-[#0099cc]"})]),i[17]||(i[17]=e("div",{class:"text-4xl font-bold text-black mb-2"},"4.9/5",-1)),i[18]||(i[18]=e("div",{class:"text-gray-600"},"Note utilisateurs",-1))])])])]),e("section",el,[e("div",tl,[i[21]||(i[21]=oe('<div class="text-center mb-16" data-v-3127279f><h2 class="text-3xl md:text-4xl font-bold text-black mb-4" data-v-3127279f> Simple comme bonjour </h2><p class="text-xl text-gray-600 max-w-3xl mx-auto" data-v-3127279f> 3 étapes suffisent pour obtenir vos produits à prix cassés </p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12" data-v-3127279f><div class="text-center group" data-v-3127279f><div class="relative mx-auto w-24 h-24 mb-6" data-v-3127279f><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-3127279f></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-3127279f><span class="text-2xl font-bold text-white" data-v-3127279f>1</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-3127279f>Choisissez votre produit</h3><p class="text-gray-600 leading-relaxed" data-v-3127279f> Parcourez notre catalogue de produits authentiques et sélectionnez celui que vous souhaitez acquérir. </p></div><div class="text-center group" data-v-3127279f><div class="relative mx-auto w-24 h-24 mb-6" data-v-3127279f><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-3127279f></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-3127279f><span class="text-2xl font-bold text-white" data-v-3127279f>2</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-3127279f>Achetez vos tickets</h3><p class="text-gray-600 leading-relaxed" data-v-3127279f> Participez à la tombola avec un petit budget. Plus vous prenez de tickets, meilleures sont vos chances d&#39;obtenir le produit. </p></div><div class="text-center group" data-v-3127279f><div class="relative mx-auto w-24 h-24 mb-6" data-v-3127279f><div class="absolute inset-0 bg-[#0099cc]/10 rounded-full group-hover:bg-[#0099cc]/20 transition-colors" data-v-3127279f></div><div class="absolute inset-3 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-3127279f><span class="text-2xl font-bold text-white" data-v-3127279f>3</span></div></div><h3 class="text-xl font-bold text-black mb-4" data-v-3127279f>Obtenez votre produit</h3><p class="text-gray-600 leading-relaxed" data-v-3127279f> Le tirage automatique désigne l&#39;acheteur. Nous livrons gratuitement partout au Gabon ! </p></div></div>',2)),e("div",sl,[b(c,{to:"/how-it-works",class:"inline-flex items-center gap-2 bg-black hover:bg-gray-800 text-white font-semibold px-8 py-4 rounded-2xl transition-all duration-200"},{default:Y(()=>[i[20]||(i[20]=e("span",null,"En savoir plus",-1)),b(u(He),{class:"h-5 w-5"})]),_:1,__:[20]})])])]),e("section",ol,[e("div",rl,[e("div",al,[i[23]||(i[23]=e("div",null,[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Produits en vedette "),e("p",{class:"text-xl text-gray-600"}," Découvrez les lots les plus convoités du moment ")],-1)),b(c,{to:"/products",class:"hidden md:inline-flex items-center gap-2 text-[#0099cc] hover:text-[#0088bb] font-semibold group"},{default:Y(()=>[i[22]||(i[22]=e("span",null,"Voir tout",-1)),b(u(He),{class:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]),_:1,__:[22]})]),e("div",nl,[(t(!0),s(W,null,J(M.value,y=>(t(),s("div",{key:y.id,onClick:E=>h(y),class:"bg-white rounded-3xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group border border-gray-100"},[e("div",ll,[e("img",{src:y.image_url||y.main_image||y.image||"/images/products/placeholder.jpg",alt:y.name,class:"w-full h-48 object-cover rounded-2xl bg-gray-100 group-hover:scale-105 transition-transform duration-300"},null,8,dl),e("div",cl,[e("span",ul,o(f(y.ticketPrice)),1)]),y.isNew?(t(),s("div",ml,i[24]||(i[24]=[e("span",{class:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium"}," Nouveau ",-1)]))):U("",!0)]),e("div",pl,[e("div",null,[e("h3",gl,o(y.name),1),e("p",vl,"Valeur: "+o(f(y.value)),1)]),e("div",xl,[e("div",fl,[i[25]||(i[25]=e("span",null,"Progression",-1)),e("span",bl,o(Math.round(y.soldTickets/1e3*100))+"%",1)]),e("div",hl,[e("div",{class:"bg-gradient-to-r from-[#0099cc] to-cyan-500 h-3 rounded-full transition-all duration-500",style:we({width:Math.round(y.soldTickets/1e3*100)+"%"})},null,4)]),e("div",yl,o(y.soldTickets)+"/1000 tickets ",1)]),i[26]||(i[26]=e("button",{class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold py-3 rounded-xl transition-colors group-hover:scale-105 group-hover:shadow-lg"}," Acheter maintenant ",-1))])],8,il))),128))]),e("div",_l,[b(c,{to:"/products",class:"inline-flex items-center gap-2 bg-[#0099cc] hover:bg-[#0088bb] text-white font-semibold px-8 py-4 rounded-2xl transition-all"},{default:Y(()=>[i[27]||(i[27]=e("span",null,"Voir tous les produits",-1)),b(u(He),{class:"h-5 w-5"})]),_:1,__:[27]})])])]),e("section",wl,[e("div",$l,[i[28]||(i[28]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-black mb-4"}," Ils ont acheté malin avec Koumbaya "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Découvrez les témoignages de nos clients satisfaits ")],-1)),e("div",kl,[(t(!0),s(W,null,J(j.value,y=>(t(),s("div",{key:y.id,class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},[e("div",Cl,[e("img",{src:y.avatar,alt:y.name,class:"w-12 h-12 rounded-full bg-gray-200"},null,8,jl),e("div",Al,[e("div",Pl,o(y.name),1),e("div",El,o(y.location),1)])]),e("div",Il,[e("div",Ml,[(t(),s(W,null,J(5,E=>b(u(Je),{key:E,class:"h-5 w-5 fill-current"})),64))])]),e("blockquote",Dl,' "'+o(y.review)+'" ',1),e("div",Ll," A obtenu: "+o(y.won),1)]))),128))])])]),e("section",Sl,[e("div",Tl,[i[31]||(i[31]=e("h2",{class:"text-4xl md:text-5xl font-bold text-white mb-6"}," Votre prochain lot vous attend ",-1)),i[32]||(i[32]=e("p",{class:"text-xl text-blue-100 mb-8 leading-relaxed"}," Rejoignez la communauté Koumbaya et tentez votre chance dès aujourd'hui. L'inscription est gratuite et ne prend que quelques minutes. ",-1)),e("div",Vl,[b(c,{to:"/register",class:"inline-flex items-center justify-center gap-2 bg-white text-[#0099cc] hover:text-[#0088bb] font-bold px-10 py-5 rounded-2xl transition-all duration-200 hover:scale-105 shadow-xl"},{default:Y(()=>[b(u(qt),{class:"h-6 w-6"}),i[29]||(i[29]=e("span",null,"S'inscrire gratuitement",-1))]),_:1,__:[29]}),b(c,{to:"/products",class:"inline-flex items-center justify-center gap-2 border-2 border-white text-white hover:bg-white hover:text-[#0099cc] font-bold px-10 py-5 rounded-2xl transition-all duration-200"},{default:Y(()=>[b(u(Me),{class:"h-6 w-6"}),i[30]||(i[30]=e("span",null,"Voir les produits",-1))]),_:1,__:[30]})])])])])}}},Fl=Le(Rl,[["__scopeId","data-v-3127279f"]]),Nl=["src","alt"],zl={class:"text-xs font-medium"},ql={key:2,class:"absolute inset-0 flex items-center justify-center bg-gray-100"},Ul={name:"ProductImage"},Ve=Object.assign(Ul,{props:{src:{type:String,default:""},alt:{type:String,default:""},fallbackText:{type:String,default:"Image non disponible"},containerClass:{type:String,default:"w-full h-48"},imageClass:{type:String,default:"w-full h-full object-cover"},fallbackClass:{type:String,default:"w-full h-full"}},setup(_){const v=_,M=R(!1),j=R(!1),f=Q(()=>v.src?v.src.startsWith("http")||v.src.startsWith("data:image/")||v.src.startsWith("/")?v.src:`/storage/products/${v.src}`:""),h=()=>{M.value=!0,j.value=!1},$=()=>{M.value=!1,j.value=!1},{src:i}=Ht(v);return ke(i,()=>{M.value=!1,j.value=!0}),(c,y)=>(t(),s("div",{class:Z(["relative overflow-hidden bg-gray-100 flex items-center justify-center",_.containerClass])},[!M.value&&f.value?(t(),s("img",{key:0,src:f.value,alt:_.alt||"Image du produit",class:Z(_.imageClass),onError:h,onLoad:$},null,42,Nl)):U("",!0),M.value||!f.value?(t(),s("div",{key:1,class:Z([_.fallbackClass,"flex flex-col items-center justify-center text-gray-600 bg-gray-100"])},[y[0]||(y[0]=e("svg",{class:"w-8 h-8 mb-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})],-1)),e("span",zl,o(_.fallbackText),1)],2)):U("",!0),j.value&&!M.value?(t(),s("div",ql,y[1]||(y[1]=[e("svg",{class:"animate-spin h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):U("",!0)],2))}}),Bl={class:"min-h-screen bg-gray-50"},Ol={class:"bg-gradient-to-r from-blue-600 to-blue-600 text-white"},Hl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Gl={class:"text-center"},Kl={class:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},Zl={class:"bg-white/20 rounded-lg p-4"},Wl={class:"text-2xl font-bold"},Jl={class:"bg-white/20 rounded-lg p-4"},Xl={class:"text-2xl font-bold"},Yl={class:"bg-white/20 rounded-lg p-4"},Ql={class:"text-2xl font-bold"},ed={class:"bg-white/20 rounded-lg p-4"},td={class:"text-2xl font-bold"},sd={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},od={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},rd={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ad={class:"flex space-x-2"},nd=["onClick"],id={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},ld={class:"flex gap-4"},dd=["disabled"],cd={key:0,class:"flex items-center text-blue-800"},ud={class:"text-sm mt-1"},md={key:1,class:"flex items-center text-red-800"},pd={class:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8"},gd={key:0,class:"p-8 text-center"},vd={key:1,class:"p-6"},xd={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},fd={class:"flex items-center space-x-4"},bd=["src","alt"],hd={class:"flex-1"},yd={class:"font-medium text-gray-900"},_d={class:"text-sm text-gray-600 mb-1"},wd={class:"text-sm font-medium text-blue-600"},$d={class:"text-xs text-gray-500"},kd={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Cd={key:0,class:"p-8 text-center"},jd={key:1,class:"p-8 text-center text-gray-500"},Ad={key:2,class:"overflow-x-auto"},Pd={class:"min-w-full divide-y divide-gray-200"},Ed={class:"bg-white divide-y divide-gray-200"},Id={class:"px-6 py-4 whitespace-nowrap"},Md={class:"flex items-center"},Dd={class:"text-sm font-medium text-gray-900"},Ld={class:"text-sm text-gray-500"},Sd={class:"text-xs text-gray-600"},Td={class:"px-6 py-4 whitespace-nowrap"},Vd={class:"flex items-center"},Rd={class:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3"},Fd={class:"text-sm font-medium text-gray-900"},Nd={class:"text-sm text-gray-500"},zd={class:"px-6 py-4 whitespace-nowrap"},qd={class:"text-sm font-mono font-medium text-gray-900"},Ud={class:"px-6 py-4 whitespace-nowrap"},Bd={class:"text-sm text-gray-900"},Od={class:"w-16 bg-gray-200 rounded-full h-1.5 mt-1"},Hd={class:"text-xs text-gray-500"},Gd={class:"px-6 py-4 whitespace-nowrap"},Kd={class:"text-sm text-gray-900"},Zd={class:"text-xs text-gray-500"},Wd={class:"px-6 py-4 whitespace-nowrap"},Jd={class:"text-xs font-mono text-gray-600 bg-gray-100 rounded px-2 py-1"},Xd=["onClick"],Yd={__name:"Results",setup(_){const{get:v}=ae(),M=R([]),j=R([]),f=R({}),h=R(!1),$=R(!1),i=R("month"),c=R(""),y=R(!1),E=R(null),V=[{value:"week",label:"Cette semaine"},{value:"month",label:"Ce mois"},{value:"year",label:"Cette année"}],A=async()=>{h.value=!0;try{const n=await v(`/public/results?period=${i.value}&limit=50`);M.value=n.data.results||[],f.value=n.data.stats||{}}catch(n){console.error("Erreur lors du chargement des résultats:",n)}finally{h.value=!1}},I=async()=>{$.value=!0;try{const n=await v("/public/results/recent-winners?limit=6");j.value=n.data.winners||[]}catch(n){console.error("Erreur lors du chargement des gagnants récents:",n)}finally{$.value=!1}},D=async()=>{if(c.value.trim()){y.value=!0,E.value=null;try{const n=await v(`/public/results/verify/${c.value.trim()}`);E.value=n.data,E.value.valid=!0}catch{E.value={valid:!1}}finally{y.value=!1}}},z=async n=>{try{await navigator.clipboard.writeText(n),window.$toast&&window.$toast.success("Code copié dans le presse-papiers!","✅ Copié")}catch(l){console.error("Erreur lors de la copie:",l)}},p=n=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(n||0)+" FCFA",d=n=>n?n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(0)+"K":n.toString():"0",S=n=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(n));return ce(async()=>{await Promise.all([A(),I()])}),(n,l)=>(t(),s("div",Bl,[e("div",Ol,[e("div",Hl,[e("div",Gl,[l[5]||(l[5]=e("h1",{class:"text-4xl font-bold mb-4"},"🏆 Résultats des Tombolas",-1)),l[6]||(l[6]=e("p",{class:"text-xl opacity-90 mb-8"}," Découvrez les gagnants et vérifiez les résultats officiels ",-1)),e("div",Kl,[e("div",Zl,[e("div",Wl,o(f.value.total_lotteries||0),1),l[1]||(l[1]=e("div",{class:"text-sm opacity-90"},"Tombolas terminées",-1))]),e("div",Jl,[e("div",Xl,o(f.value.total_winners||0),1),l[2]||(l[2]=e("div",{class:"text-sm opacity-90"},"Gagnants heureux",-1))]),e("div",Yl,[e("div",Ql,o(d(f.value.total_prizes_value)),1),l[3]||(l[3]=e("div",{class:"text-sm opacity-90"},"Valeur des prix",-1))]),e("div",ed,[e("div",td,o(f.value.total_tickets_sold||0),1),l[4]||(l[4]=e("div",{class:"text-sm opacity-90"},"Tickets vendus",-1))])])])])]),e("div",sd,[e("div",od,[e("div",rd,[l[7]||(l[7]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-900"},"Filtrer par période"),e("p",{class:"text-gray-600"},"Choisissez la période à afficher")],-1)),e("div",ad,[(t(),s(W,null,J(V,a=>e("button",{key:a.value,onClick:L=>{i.value=a.value,A()},class:Z(["px-4 py-2 rounded-md text-sm font-medium",i.value===a.value?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},o(a.label),11,nd)),64))])])]),e("div",id,[l[11]||(l[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"🔍 Vérifier un Résultat",-1)),e("div",ld,[G(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>c.value=a),type:"text",placeholder:"Entrez le code de vérification...",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",onKeyup:Lt(D,["enter"])},null,544),[[X,c.value]]),e("button",{onClick:D,disabled:!c.value||y.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},o(y.value?"Vérification...":"Vérifier"),9,dd)]),E.value?(t(),s("div",{key:0,class:Z(["mt-4 p-4 rounded-lg",[E.value.valid?"bg-blue-50 border border-blue-200":"bg-red-50 border border-red-200"]])},[E.value.valid?(t(),s("div",cd,[b(u(je),{class:"w-5 h-5 mr-2"}),e("div",null,[l[9]||(l[9]=e("div",{class:"font-medium"},"✅ Résultat vérifié",-1)),e("div",ud,[O(" Tombola "+o(E.value.lottery_number)+" - "+o(E.value.product_title)+" ",1),l[8]||(l[8]=e("br",null,null,-1)),O("Gagnant: "+o(E.value.winner_initial)+"**** le "+o(S(E.value.draw_date)),1)])])])):(t(),s("div",md,[b(u(wt),{class:"w-5 h-5 mr-2"}),l[10]||(l[10]=e("div",{class:"font-medium"},"Code invalide",-1))]))],2)):U("",!0)]),e("div",pd,[l[13]||(l[13]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"🎉 Gagnants Récents")],-1)),$.value?(t(),s("div",gd,l[12]||(l[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1)]))):(t(),s("div",vd,[e("div",xd,[(t(!0),s(W,null,J(j.value,a=>(t(),s("div",{key:a.lottery_number,class:"bg-gradient-to-r from-blue-50 to-blue-50 rounded-lg p-4 border border-blue-100"},[e("div",fd,[e("img",{src:a.product_image||"/images/products/placeholder.jpg",alt:a.product_title,class:"w-16 h-16 rounded-lg object-cover"},null,8,bd),e("div",hd,[e("div",yd,o(a.product_title),1),e("div",_d,o(p(a.product_value)),1),e("div",wd," Gagnant: "+o(a.winner_initial)+"**** ("+o(a.winner_city)+") ",1),e("div",$d," Il y a "+o(a.days_ago)+" jour"+o(a.days_ago>1?"s":""),1)])])]))),128))])]))]),e("div",kd,[l[18]||(l[18]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"📋 Historique Complet des Résultats")],-1)),h.value?(t(),s("div",Cd,l[14]||(l[14]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des résultats...",-1)]))):M.value.length===0?(t(),s("div",jd,[b(u(Oe),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),l[15]||(l[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun résultat",-1)),l[16]||(l[16]=e("p",null,"Aucune tombola terminée pour cette période.",-1))])):(t(),s("div",Ad,[e("table",Pd,[l[17]||(l[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Gagnant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ticket Gagnant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participation "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date de Tirage "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Vérification ")])],-1)),e("tbody",Ed,[(t(!0),s(W,null,J(M.value,a=>(t(),s("tr",{key:a.lottery_id,class:"hover:bg-gray-50"},[e("td",Id,[e("div",Md,[b(Ve,{src:a.product.image_url||a.product.image,alt:a.product.title,"container-class":"w-12 h-12 rounded-lg mr-4","image-class":"w-12 h-12 rounded-lg object-cover","fallback-class":"w-12 h-12 rounded-lg","fallback-text":"Photo"},null,8,["src","alt"]),e("div",null,[e("div",Dd,o(a.product.title),1),e("div",Ld,o(a.product.category?.name||a.product.category||"Sans catégorie")+" • "+o(p(a.product.price)),1),e("div",Sd,o(a.lottery_number),1)])])]),e("td",Td,[e("div",Vd,[e("div",Rd,o(a.winner.initial),1),e("div",null,[e("div",Fd,o(a.winner.name),1),e("div",Nd,o(a.winner.city),1)])])]),e("td",zd,[e("div",qd,o(a.winning_ticket),1)]),e("td",Ud,[e("div",Bd,o(a.sold_tickets)+"/"+o(a.total_tickets)+" tickets ",1),e("div",Od,[e("div",{class:"bg-blue-600 h-1.5 rounded-full",style:we({width:a.participation_rate+"%"})},null,4)]),e("div",Hd,o(a.participation_rate)+"%",1)]),e("td",Gd,[e("div",Kd,o(S(a.draw_date)),1),e("div",Zd,o(p(a.total_revenue))+" collectés ",1)]),e("td",Wd,[e("div",Jd,o(a.verification_code),1),e("button",{onClick:L=>z(a.verification_code),class:"text-xs text-blue-600 hover:text-blue-700 mt-1"}," Copier ",8,Xd)])]))),128))])])]))])])]))}},Qd={class:"min-h-screen bg-gray-50"},ec={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},tc={class:"bg-white rounded-lg shadow-lg border border-gray-200 p-8 mb-8"},sc={class:"max-w-md mx-auto"},oc={class:"mb-6"},rc=["disabled"],ac={key:0,class:"flex items-center justify-center"},nc={key:1},ic={key:0,class:"mb-8"},lc={key:0,class:"bg-white rounded-lg shadow-lg border-2 border-blue-200 overflow-hidden"},dc={class:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white p-6"},cc={class:"flex items-center justify-center"},uc={class:"p-8"},mc={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pc={class:"space-y-4"},gc={class:"space-y-2"},vc={class:"flex justify-between"},xc={class:"font-medium"},fc={class:"flex justify-between"},bc={class:"font-medium"},hc={class:"flex justify-between"},yc={class:"font-medium"},_c={class:"space-y-4"},wc={class:"space-y-2"},$c={class:"flex justify-between"},kc={class:"font-medium"},Cc={class:"flex justify-between"},jc={class:"font-mono font-medium text-blue-600"},Ac={class:"flex justify-between"},Pc={class:"font-medium"},Ec={class:"mt-8 p-4 bg-blue-50 rounded-lg"},Ic={class:"flex items-start"},Mc={class:"text-sm text-blue-800"},Dc={key:1,class:"bg-white rounded-lg shadow-lg border-2 border-red-200"},Lc={class:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6"},Sc={class:"flex items-center justify-center"},Tc={class:"p-8"},Vc={class:"text-center"},Rc={class:"text-gray-700 mb-4"},Fc={class:"font-mono bg-gray-100 px-2 py-1 rounded"},Nc={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},zc={class:"flex items-start"},qc={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Uc={key:0,class:"text-center text-gray-500 py-8"},Bc={key:1,class:"space-y-3"},Oc={class:"font-mono text-sm text-gray-600"},Hc={class:"text-xs text-gray-500"},Gc={__name:"VerifyWinner",setup(_){const{get:v}=ae(),M=R(""),j=R(!1),f=R(null),h=R([]),$=async()=>{if(!(!M.value.trim()||M.value.length!==8)){j.value=!0,f.value=null;try{const V=await v(`/public/results/verify/${M.value.trim()}`);f.value=V.data,f.value.valid=!0,i(M.value,!0)}catch{f.value={valid:!1,code:M.value.trim()},i(M.value,!1)}finally{j.value=!1}}},i=(V,A)=>{const I={id:Date.now(),code:V,valid:A,verified_at:new Date};h.value.unshift(I),h.value.length>5&&(h.value=h.value.slice(0,5)),localStorage.setItem("recent_verifications",JSON.stringify(h.value))},c=()=>{try{const V=localStorage.getItem("recent_verifications");V&&(h.value=JSON.parse(V).map(A=>({...A,verified_at:new Date(A.verified_at)})).slice(0,5))}catch(V){console.error("Failed to load recent verifications",V)}},y=V=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(V)),E=V=>{const I=new Date-V,D=Math.floor(I/6e4);if(D<1)return"À l'instant";if(D<60)return`${D}min`;const z=Math.floor(D/60);return z<24?`${z}h`:`${Math.floor(z/24)}j`};return ce(()=>{c()}),(V,A)=>(t(),s("div",Qd,[A[24]||(A[24]=oe('<div class="bg-gradient-to-r from-blue-600 to-blue-600 text-white"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div class="text-center"><h1 class="text-4xl font-bold mb-4">🔍 Vérification de Gain</h1><p class="text-xl opacity-90 mb-8"> Vérifiez l&#39;authenticité d&#39;un résultat de tombola </p></div></div></div>',1)),e("div",ec,[e("div",tc,[A[5]||(A[5]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6 text-center"},[e("span",{class:"text-blue-600"},"🏆"),O(" Outil de Vérification Officiel ")],-1)),e("div",sc,[e("div",oc,[A[2]||(A[2]=e("label",{for:"verification-code",class:"block text-sm font-medium text-gray-700 mb-2"}," Code de Vérification ",-1)),G(e("input",{id:"verification-code","onUpdate:modelValue":A[0]||(A[0]=I=>M.value=I),type:"text",placeholder:"Ex: A1B2C3D4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center text-lg font-mono uppercase",maxlength:"8",onInput:A[1]||(A[1]=I=>M.value=I.target.value.toUpperCase()),onKeyup:Lt($,["enter"])},null,544),[[X,M.value]]),A[3]||(A[3]=e("p",{class:"mt-2 text-sm text-gray-600"}," Entrez le code de 8 caractères fourni avec votre notification de gain ",-1))]),e("button",{onClick:$,disabled:!M.value||j.value||M.value.length!==8,class:"w-full py-3 px-6 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors duration-200"},[j.value?(t(),s("span",ac,A[4]||(A[4]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),O(" Vérification en cours... ",-1)]))):(t(),s("span",nc," 🔍 Vérifier le Gain "))],8,rc)])]),f.value?(t(),s("div",ic,[f.value.valid?(t(),s("div",lc,[e("div",dc,[e("div",cc,[b(u(je),{class:"w-12 h-12 mr-4"}),A[6]||(A[6]=e("div",null,[e("h3",{class:"text-2xl font-bold"},"✅ GAIN VÉRIFIÉ"),e("p",{class:"text-blue-100"},"Ce résultat est authentique et officiel")],-1))])]),e("div",uc,[e("div",mc,[e("div",pc,[A[10]||(A[10]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"📋 Informations de la Tombola",-1)),e("div",gc,[e("div",vc,[A[7]||(A[7]=e("span",{class:"text-gray-600"},"Numéro :",-1)),e("span",xc,o(f.value.lottery_number),1)]),e("div",fc,[A[8]||(A[8]=e("span",{class:"text-gray-600"},"Produit :",-1)),e("span",bc,o(f.value.product_title),1)]),e("div",hc,[A[9]||(A[9]=e("span",{class:"text-gray-600"},"Date du tirage :",-1)),e("span",yc,o(y(f.value.draw_date)),1)])])]),e("div",_c,[A[14]||(A[14]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"🏆 Gagnant",-1)),e("div",wc,[e("div",$c,[A[11]||(A[11]=e("span",{class:"text-gray-600"},"Identité :",-1)),e("span",kc,o(f.value.winner_initial)+"****",1)]),e("div",Cc,[A[12]||(A[12]=e("span",{class:"text-gray-600"},"Code :",-1)),e("span",jc,o(M.value),1)]),e("div",Ac,[A[13]||(A[13]=e("span",{class:"text-gray-600"},"Vérifié le :",-1)),e("span",Pc,o(y(f.value.verification_date)),1)])])])]),e("div",Ec,[e("div",Ic,[b(u(Te),{class:"w-5 h-5 text-blue-500 mt-0.5 mr-3"}),e("div",Mc,[A[15]||(A[15]=e("p",{class:"font-medium mb-1"},"Certificat de Vérification",-1)),e("p",null,"Ce résultat a été vérifié dans notre système officiel. La tombola "+o(f.value.lottery_number)+" s'est terminée le "+o(y(f.value.draw_date))+" avec un tirage transparent et équitable.",1)])])])])])):(t(),s("div",Dc,[e("div",Lc,[e("div",Sc,[b(u(wt),{class:"w-12 h-12 mr-4"}),A[16]||(A[16]=e("div",null,[e("h3",{class:"text-2xl font-bold"},"CODE INVALIDE"),e("p",{class:"text-red-100"},"Ce code de vérification n'existe pas")],-1))])]),e("div",Tc,[e("div",Vc,[e("p",Rc,[A[17]||(A[17]=O(" Le code ",-1)),e("span",Fc,o(M.value),1),A[18]||(A[18]=O(" ne correspond à aucun résultat officiel dans notre système. ",-1))]),e("div",Nc,[e("div",zc,[b(u(Be),{class:"w-5 h-5 text-yellow-500 mt-0.5 mr-3"}),A[19]||(A[19]=e("div",{class:"text-sm text-yellow-800"},[e("p",{class:"font-medium mb-1"},"Vérifications possibles :"),e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"Assurez-vous que le code est correct (8 caractères)"),e("li",null,"Vérifiez que le code provient d'une source officielle"),e("li",null,"Contactez notre support si vous pensez qu'il y a une erreur")])],-1))])])])])]))])):U("",!0),A[23]||(A[23]=oe('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"><h3 class="text-lg font-semibold text-gray-900 mb-4">ℹ️ Comment ça marche ?</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">1️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Recevez votre code</h4><p class="text-sm text-gray-600"> Après un tirage, le gagnant reçoit un code de vérification unique par email et SMS </p></div><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">2️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Vérifiez en ligne</h4><p class="text-sm text-gray-600"> Entrez le code sur cette page pour vérifier l&#39;authenticité du résultat </p></div><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"><span class="text-xl">3️⃣</span></div><h4 class="font-medium text-gray-900 mb-2">Confirmez le gain</h4><p class="text-sm text-gray-600"> Un résultat valide confirme officiellement le gain et ses détails </p></div></div></div>',1)),e("div",qc,[A[22]||(A[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"🔍 Vérifications Récentes",-1)),h.value.length===0?(t(),s("div",Uc,[b(u(Ne),{class:"w-12 h-12 mx-auto text-gray-300 mb-3"}),A[20]||(A[20]=e("p",null,"Aucune vérification récente",-1))])):(t(),s("div",Bc,[(t(!0),s(W,null,J(h.value,I=>(t(),s("div",{key:I.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("span",Oc,o(I.code),1),A[21]||(A[21]=e("span",{class:"mx-2"},"→",-1)),e("span",{class:Z(["text-sm",I.valid?"text-blue-600":"text-red-600"])},o(I.valid?"✅ Valide":"Invalide"),3)]),e("span",Hc,o(E(I.verified_at)),1)]))),128))]))])])]))}},Kc={class:"min-h-screen bg-gray-50"},Zc={class:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white"},Wc={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},Jc={class:"text-center"},Xc={class:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},Yc={class:"bg-white/20 rounded-lg p-4"},Qc={class:"text-2xl font-bold"},eu={class:"bg-white/20 rounded-lg p-4"},tu={class:"text-2xl font-bold"},su={class:"bg-white/20 rounded-lg p-4"},ou={class:"text-2xl font-bold"},ru={class:"bg-white/20 rounded-lg p-4"},au={class:"text-2xl font-bold"},nu={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},iu={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},lu={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},du={class:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-4"},cu=["value"],uu={class:"flex items-center space-x-4"},mu={class:"text-sm text-gray-500"},pu={key:0,class:"text-center py-12"},gu={key:1,class:"text-center py-12"},vu={key:2},xu={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},fu={class:"relative h-48 bg-gray-200"},bu=["src","alt"],hu={class:"absolute bottom-3 left-3"},yu={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white text-gray-900"},_u={class:"p-6"},wu={class:"mb-4"},$u={class:"text-lg font-semibold text-gray-900 mb-1"},ku={class:"text-2xl font-bold text-purple-600"},Cu={class:"text-sm text-gray-500"},ju={class:"bg-blue-50 rounded-lg p-4 mb-4"},Au={class:"flex items-center"},Pu={class:"w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3"},Eu={class:"flex-1"},Iu={class:"text-sm text-blue-700"},Mu={class:"grid grid-cols-2 gap-4 mb-4"},Du={class:"text-center"},Lu={class:"text-lg font-bold text-gray-900"},Su={class:"text-center"},Tu={class:"text-lg font-bold text-gray-900"},Vu={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},Ru={class:"flex items-center justify-between"},Fu={class:"text-sm text-gray-600"},Nu=["onClick"],zu={key:0,class:"flex items-center justify-center space-x-2"},qu=["disabled"],Uu=["onClick"],Bu={key:1,class:"px-3 py-2 text-sm text-gray-500"},Ou=["disabled"],Hu={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Gu={class:"flex items-center justify-center min-h-screen px-4"},Ku={class:"relative bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto"},Zu={class:"p-6"},Wu={class:"flex items-center justify-between mb-4"},Ju={class:"space-y-6"},Xu={class:"flex items-start space-x-4"},Yu=["src","alt"],Qu={class:"flex-1"},e0={class:"text-xl font-bold text-gray-900"},t0={class:"text-lg text-purple-600 font-semibold"},s0={class:"text-sm text-gray-600"},o0={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},r0={class:"flex items-center"},a0={class:"w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-4 text-lg font-bold"},n0={class:"font-medium text-blue-900"},i0={class:"text-sm text-blue-700"},l0={class:"text-sm text-blue-600"},d0={class:"grid grid-cols-2 gap-4"},c0={class:"bg-gray-50 p-4 rounded-lg"},u0={class:"text-2xl font-bold text-gray-900"},m0={class:"text-xs text-gray-500"},p0={class:"bg-gray-50 p-4 rounded-lg"},g0={class:"text-2xl font-bold text-gray-900"},v0={class:"bg-gray-50 p-4 rounded-lg"},x0={class:"text-2xl font-bold text-gray-900"},f0={class:"bg-gray-50 p-4 rounded-lg"},b0={class:"text-2xl font-bold text-gray-900 font-mono"},h0={class:"text-sm text-gray-600 space-y-1"},pt=12,y0={__name:"History",setup(_){const{get:v}=ae(),M=R([]),j=R({}),f=R([]),h=R(!1),$=R(null),i=R({period:"all",category:"",sort:"date_desc"}),c=R(1),y=Q(()=>{let n=[...M.value];switch(i.value.sort){case"date_asc":n.sort((l,a)=>new Date(l.draw_date)-new Date(a.draw_date));break;case"date_desc":n.sort((l,a)=>new Date(a.draw_date)-new Date(l.draw_date));break;case"value_asc":n.sort((l,a)=>l.product.price-a.product.price);break;case"value_desc":n.sort((l,a)=>a.product.price-l.product.price);break;case"participation_desc":n.sort((l,a)=>a.participation_rate-l.participation_rate);break}return n}),E=Q(()=>Math.ceil(y.value.length/pt)),V=Q(()=>{const n=(c.value-1)*pt,l=n+pt;return y.value.slice(n,l)}),A=Q(()=>{const n=[],l=c.value,a=E.value;if(a<=7)for(let L=1;L<=a;L++)n.push(L);else if(l<=4){for(let L=1;L<=5;L++)n.push(L);n.push("..."),n.push(a)}else if(l>=a-3){n.push(1),n.push("...");for(let L=a-4;L<=a;L++)n.push(L)}else{n.push(1),n.push("...");for(let L=l-1;L<=l+1;L++)n.push(L);n.push("..."),n.push(a)}return n}),I=async()=>{h.value=!0;try{const n=new URLSearchParams({period:i.value.period,limit:500});i.value.category&&n.append("category",i.value.category);const[l,a,L]=await Promise.all([v(`/public/results?${n}`),v("/public/results/stats"),v("/categories")]);M.value=l.data.results||[],j.value=l.data.stats||{},f.value=L.data||[]}catch(n){console.error("Erreur lors du chargement de l'historique:",n)}finally{h.value=!1}},D=()=>{i.value={period:"all",category:"",sort:"date_desc"},c.value=1},z=n=>{$.value=n},p=n=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(n||0)+" FCFA",d=n=>n?n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(0)+"K":n.toString():"0",S=n=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(n));return ke(i,()=>{c.value=1},{deep:!0}),ce(()=>{I()}),(n,l)=>(t(),s("div",Kc,[e("div",Zc,[e("div",Wc,[e("div",Jc,[l[11]||(l[11]=e("h1",{class:"text-4xl font-bold mb-4"},"📚 Historique des Tombolas",-1)),l[12]||(l[12]=e("p",{class:"text-xl opacity-90 mb-8"}," Explorez l'historique complet de toutes nos tombolas terminées ",-1)),e("div",Xc,[e("div",Yc,[e("div",Qc,o(j.value.total_lotteries||0),1),l[7]||(l[7]=e("div",{class:"text-sm opacity-90"},"Tombolas terminées",-1))]),e("div",eu,[e("div",tu,o(j.value.total_winners||0),1),l[8]||(l[8]=e("div",{class:"text-sm opacity-90"},"Gagnants heureux",-1))]),e("div",su,[e("div",ou,o(d(j.value.total_prizes_value)),1),l[9]||(l[9]=e("div",{class:"text-sm opacity-90"},"Valeur totale",-1))]),e("div",ru,[e("div",au,o(Math.round(j.value.average_participation_rate||0))+"%",1),l[10]||(l[10]=e("div",{class:"text-sm opacity-90"},"Participation moy.",-1))])])])])]),e("div",nu,[e("div",iu,[e("div",lu,[e("div",du,[e("div",null,[l[14]||(l[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période",-1)),G(e("select",{"onUpdate:modelValue":l[0]||(l[0]=a=>i.value.period=a),onChange:I,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},l[13]||(l[13]=[e("option",{value:"all"},"Toute la période",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1),e("option",{value:"year"},"Cette année",-1)]),544),[[ie,i.value.period]])]),e("div",null,[l[16]||(l[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),G(e("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>i.value.category=a),onChange:I,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},[l[15]||(l[15]=e("option",{value:""},"Toutes les catégories",-1)),(t(!0),s(W,null,J(f.value,a=>(t(),s("option",{key:a.id,value:a.id},o(a.name),9,cu))),128))],544),[[ie,i.value.category]])]),e("div",null,[l[18]||(l[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trier par",-1)),G(e("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>i.value.sort=a),onChange:I,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500"},l[17]||(l[17]=[oe('<option value="date_desc">Plus récent</option><option value="date_asc">Plus ancien</option><option value="value_desc">Valeur croissante</option><option value="value_asc">Valeur décroissante</option><option value="participation_desc">Participation élevée</option>',5)]),544),[[ie,i.value.sort]])])]),e("div",uu,[e("button",{onClick:D,class:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"}," Réinitialiser "),e("div",mu,o(V.value.length)+" résultat(s) ",1)])])]),h.value?(t(),s("div",pu,l[19]||(l[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement de l'historique...",-1)]))):M.value.length===0?(t(),s("div",gu,[b(u(ts),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),l[20]||(l[20]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Aucun historique",-1)),l[21]||(l[21]=e("p",{class:"text-gray-600"},"Aucune tombola terminée ne correspond à vos critères.",-1))])):(t(),s("div",vu,[e("div",xu,[(t(!0),s(W,null,J(V.value,a=>(t(),s("div",{key:a.lottery_id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200"},[e("div",fu,[a.product.image_url?(t(),s("img",{key:0,src:a.product.image_url,alt:a.product.title,class:"w-full h-full object-cover"},null,8,bu)):U("",!0),l[22]||(l[22]=e("div",{class:"absolute top-3 right-3"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"}," Terminé ")],-1)),e("div",hu,[e("span",yu,o(a.product.category?.name||a.product.category||"Sans catégorie"),1)])]),e("div",_u,[e("div",wu,[e("h3",$u,o(a.product.title),1),e("p",ku,o(p(a.product.price)),1),e("p",Cu,"Tombola "+o(a.lottery_number),1)]),e("div",ju,[e("div",Au,[e("div",Pu,o(a.winner.initial),1),e("div",Eu,[l[23]||(l[23]=e("div",{class:"text-sm font-medium text-blue-900"},"🏆 Gagnant",-1)),e("div",Iu,o(a.winner.name)+" • "+o(a.winner.city),1)])])]),e("div",Mu,[e("div",Du,[e("div",Lu,o(a.sold_tickets),1),l[24]||(l[24]=e("div",{class:"text-xs text-gray-500"},"Participants",-1))]),e("div",Su,[e("div",Tu,o(a.participation_rate)+"%",1),l[25]||(l[25]=e("div",{class:"text-xs text-gray-500"},"Participation",-1))])]),e("div",Vu,[e("div",{class:"bg-blue-500 h-2 rounded-full",style:we({width:a.participation_rate+"%"})},null,4)]),e("div",Ru,[e("div",Fu,o(S(a.draw_date)),1),e("button",{onClick:L=>z(a),class:"text-purple-600 hover:text-purple-700 text-sm font-medium"}," Voir détails → ",8,Nu)])])]))),128))]),E.value>1?(t(),s("div",zu,[e("button",{onClick:l[3]||(l[3]=a=>c.value=Math.max(1,c.value-1)),disabled:c.value===1,class:"px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,qu),(t(!0),s(W,null,J(A.value,a=>(t(),s(W,{key:a},[a!=="..."?(t(),s("button",{key:0,onClick:L=>c.value=a,class:Z(["px-4 py-2 text-sm font-medium border rounded-md",c.value===a?"bg-purple-600 text-white border-purple-600":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50"])},o(a),11,Uu)):(t(),s("span",Bu,"..."))],64))),128)),e("button",{onClick:l[4]||(l[4]=a=>c.value=Math.min(E.value,c.value+1)),disabled:c.value===E.value,class:"px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,Ou)])):U("",!0)]))]),$.value?(t(),s("div",Hu,[e("div",Gu,[e("div",{class:"fixed inset-0 bg-black/20",onClick:l[5]||(l[5]=a=>$.value=null)}),e("div",Ku,[e("div",Zu,[e("div",Wu,[l[26]||(l[26]=e("h3",{class:"text-lg font-semibold"},"Détails de la tombola",-1)),e("button",{onClick:l[6]||(l[6]=a=>$.value=null),class:"text-gray-400 hover:text-gray-600"},[b(u(De),{class:"w-6 h-6"})])]),e("div",Ju,[e("div",Xu,[$.value.product.image_url?(t(),s("img",{key:0,src:$.value.product.image_url,alt:$.value.product.title,class:"w-24 h-24 rounded-lg object-cover"},null,8,Yu)):U("",!0),e("div",Qu,[e("h4",e0,o($.value.product.title),1),e("p",t0,o(p($.value.product.price)),1),e("p",s0,o($.value.product.category?.name||$.value.product.category||"Sans catégorie"),1)])]),e("div",o0,[l[27]||(l[27]=e("h5",{class:"font-medium text-blue-900 mb-2"},"🏆 Gagnant officiel",-1)),e("div",r0,[e("div",a0,o($.value.winner.initial),1),e("div",null,[e("p",n0,o($.value.winner.name),1),e("p",i0,o($.value.winner.city),1),e("p",l0,"Ticket: "+o($.value.winning_ticket),1)])])]),e("div",d0,[e("div",c0,[e("div",u0,o($.value.sold_tickets),1),l[28]||(l[28]=e("div",{class:"text-sm text-gray-600"},"Tickets vendus",-1)),e("div",m0,"sur "+o($.value.total_tickets),1)]),e("div",p0,[e("div",g0,o($.value.participation_rate)+"%",1),l[29]||(l[29]=e("div",{class:"text-sm text-gray-600"},"Participation",-1))]),e("div",v0,[e("div",x0,o(d($.value.total_revenue)),1),l[30]||(l[30]=e("div",{class:"text-sm text-gray-600"},"Revenus",-1))]),e("div",f0,[e("div",b0,o($.value.verification_code),1),l[31]||(l[31]=e("div",{class:"text-sm text-gray-600"},"Code vérif.",-1))])]),e("div",null,[l[34]||(l[34]=e("h5",{class:"font-medium text-gray-900 mb-3"},"📅 Chronologie",-1)),e("div",h0,[e("p",null,[l[32]||(l[32]=e("strong",null,"Tirage :",-1)),O(" "+o(S($.value.draw_date)),1)]),e("p",null,[l[33]||(l[33]=e("strong",null,"Revenus :",-1)),O(" "+o(p($.value.total_revenue)),1)])])])])])])])])):U("",!0)]))}},_0={class:"min-h-screen bg-gray-50"},w0={class:"bg-white shadow-sm border-b"},$0={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},k0={class:"flex flex-col lg:flex-row gap-6"},C0={class:"flex-1"},j0={class:"relative"},A0={class:"lg:w-64"},P0=["value"],E0={class:"lg:w-48"},I0={class:"py-12"},M0={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},D0={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},L0={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},S0=["onClick"],T0={class:"relative overflow-hidden rounded-xl mb-4"},V0=["src","alt"],R0={class:"absolute top-3 right-3"},F0={class:"bg-[#0099cc] text-white px-3 py-1 rounded-full text-xs font-medium"},N0={key:0,class:"absolute top-3 left-3"},z0={class:"space-y-2"},q0={class:"font-bold text-lg text-black group-hover:text-[#0099cc] transition-colors"},U0={class:"text-gray-600 text-sm line-clamp-2"},B0={class:"flex items-center justify-between"},O0={class:"text-2xl font-bold text-[#0099cc]"},H0={class:"space-y-2"},G0={class:"flex justify-between text-sm"},K0={class:"font-medium"},Z0={class:"w-full bg-gray-200 rounded-full h-2"},W0={key:0,class:"flex justify-between text-xs text-gray-500"},J0={key:2,class:"text-center py-16"},X0={class:"w-32 h-32 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},Y0={class:"bg-gradient-to-r from-[#0099cc] to-cyan-600 py-16"},Q0={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},em={class:"flex flex-col sm:flex-row gap-4 justify-center"},tm={__name:"Products",setup(_){const v=he(),{get:M,loading:j}=ae(),f=R(""),h=R(""),$=R("newest"),i=R([]),c=R([]),y=async()=>{try{const p=await M("/products");console.log("Response from /products:",p),p&&p.success&&p.data?(i.value=p.data.products||[],console.log("Products loaded:",i.value.length)):console.log("Response structure not as expected:",p)}catch(p){console.error("Erreur lors du chargement des produits:",p)}},E=async()=>{try{const p=await M("/categories");p&&p.success&&(c.value=p.data||[])}catch(p){console.error("Erreur lors du chargement des catégories:",p)}},V=Q(()=>{let p=i.value;if(h.value&&(p=p.filter(d=>d.category_id==h.value)),f.value){const d=f.value.toLowerCase();p=p.filter(S=>S.name.toLowerCase().includes(d)||S.description.toLowerCase().includes(d))}return $.value==="price-asc"?p.sort((d,S)=>d.price-S.price):$.value==="price-desc"?p.sort((d,S)=>S.price-d.price):$.value==="popular"?p.sort((d,S)=>(S.active_lottery?.sold_tickets||0)-(d.active_lottery?.sold_tickets||0)):$.value==="newest"&&p.sort((d,S)=>new Date(S.created_at)-new Date(d.created_at)),p}),A=p=>new Intl.NumberFormat("fr-FR").format(p),I=p=>{if(!p.active_lottery)return 0;const d=p.active_lottery.sold_tickets||0,S=p.active_lottery.total_tickets||1;return Math.round(d/S*100)},D=p=>{v.push({name:"public.product.detail",params:{id:p.id}})},z=()=>{f.value="",h.value="",$.value="newest"};return ce(async()=>{await Promise.all([y(),E()])}),(p,d)=>{const S=pe("router-link");return t(),s("div",_0,[d[16]||(d[16]=oe('<section class="bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0077aa] text-white py-16" data-v-4ec350db><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" data-v-4ec350db><div class="text-center" data-v-4ec350db><h1 class="text-4xl md:text-5xl font-bold mb-4" data-v-4ec350db> Découvrez nos <span class="text-white/80" data-v-4ec350db>produits incroyables</span></h1><p class="text-xl text-white/80 max-w-3xl mx-auto mb-8" data-v-4ec350db> Des smartphones dernière génération aux gadgets high-tech, tous nos produits sont garantis et à gagner facilement </p><div class="flex flex-wrap justify-center gap-4" data-v-4ec350db><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-4ec350db><span class="text-sm font-medium" data-v-4ec350db>✓ Produits authentiques</span></div><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-4ec350db><span class="text-sm font-medium" data-v-4ec350db>✓ Livraison gratuite</span></div><div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-2" data-v-4ec350db><span class="text-sm font-medium" data-v-4ec350db>✓ Garantie constructeur</span></div></div></div></div></section>',1)),e("section",w0,[e("div",$0,[e("div",k0,[e("div",C0,[e("div",j0,[b(u(Ne),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),G(e("input",{"onUpdate:modelValue":d[0]||(d[0]=n=>f.value=n),type:"text",placeholder:"Rechercher un produit...",class:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all"},null,512),[[X,f.value]])])]),e("div",A0,[G(e("select",{"onUpdate:modelValue":d[1]||(d[1]=n=>h.value=n),class:"w-full py-3 px-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all"},[d[3]||(d[3]=e("option",{value:""},"Toutes catégories",-1)),(t(!0),s(W,null,J(c.value,n=>(t(),s("option",{key:n.id,value:n.id},o(n.name),9,P0))),128))],512),[[ie,h.value]])]),e("div",E0,[G(e("select",{"onUpdate:modelValue":d[2]||(d[2]=n=>$.value=n),class:"w-full py-3 px-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all"},d[4]||(d[4]=[e("option",{value:"newest"},"Plus récents",-1),e("option",{value:"price-asc"},"Prix croissant",-1),e("option",{value:"price-desc"},"Prix décroissant",-1),e("option",{value:"popular"},"Plus populaires",-1)]),512),[[ie,$.value]])])])])]),e("section",I0,[e("div",M0,[u(j)?(t(),s("div",D0,[(t(),s(W,null,J(12,n=>e("div",{key:n,class:"animate-pulse"},d[5]||(d[5]=[oe('<div class="bg-white rounded-2xl p-6 shadow-sm" data-v-4ec350db><div class="w-full h-48 bg-gray-200 rounded-xl mb-4" data-v-4ec350db></div><div class="h-4 bg-gray-200 rounded mb-2" data-v-4ec350db></div><div class="h-4 bg-gray-200 rounded w-2/3 mb-4" data-v-4ec350db></div><div class="h-6 bg-gray-200 rounded w-1/3" data-v-4ec350db></div></div>',1)]))),64))])):(t(),s("div",L0,[(t(!0),s(W,null,J(V.value,n=>(t(),s("div",{key:n.id,onClick:l=>D(n),class:"bg-white rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer group"},[e("div",T0,[e("img",{src:n.image_url||n.main_image||u(Ce),alt:n.name,class:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"},null,8,V0),e("div",R0,[e("span",F0,o(A(n.active_lottery?.ticket_price||n.ticket_price||1e3))+" FCFA ",1)]),n.featured?(t(),s("div",N0,d[6]||(d[6]=[e("span",{class:"bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-medium"}," Vedette ",-1)]))):U("",!0)]),e("div",z0,[e("h3",q0,o(n.name),1),e("p",U0,o(n.description),1),e("div",B0,[e("div",O0,o(A(n.price)),1),d[7]||(d[7]=e("div",{class:"text-sm text-gray-500"}," Valeur du lot ",-1))]),e("div",H0,[e("div",G0,[d[8]||(d[8]=e("span",{class:"text-gray-600"},"Progression",-1)),e("span",K0,o(I(n))+"%",1)]),e("div",Z0,[e("div",{class:"bg-gradient-to-r from-[#0099cc] to-cyan-500 h-2 rounded-full transition-all duration-500",style:we({width:I(n)+"%"})},null,4)]),n.active_lottery?(t(),s("div",W0,[e("span",null,o(n.active_lottery.sold_tickets||0)+" vendus",1),e("span",null,o(n.active_lottery.total_tickets||1e3)+" tickets total",1)])):U("",!0)]),d[9]||(d[9]=e("button",{class:"w-full mt-4 bg-[#0099cc] hover:bg-[#0088bb] text-white font-medium py-3 rounded-xl transition-all duration-200 group-hover:scale-[1.02]"}," Participer maintenant ",-1))])],8,S0))),128))])),!u(j)&&V.value.length===0?(t(),s("div",J0,[e("div",X0,[b(u(Ne),{class:"w-16 h-16 text-gray-400"})]),d[10]||(d[10]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Aucun produit trouvé",-1)),d[11]||(d[11]=e("p",{class:"text-gray-600 mb-6"},"Essayez de modifier vos critères de recherche",-1)),e("button",{onClick:z,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors"}," Réinitialiser les filtres ")])):U("",!0)])]),e("section",Y0,[e("div",Q0,[d[14]||(d[14]=e("h2",{class:"text-3xl md:text-4xl font-bold text-white mb-4"}," Prêt à tenter votre chance ? ",-1)),d[15]||(d[15]=e("p",{class:"text-xl text-blue-100 mb-8"}," Inscrivez-vous gratuitement et participez à vos premiers tirages ",-1)),e("div",em,[b(S,{to:"/register",class:"bg-white text-[#0099cc] px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-colors"},{default:Y(()=>d[12]||(d[12]=[O(" S'inscrire gratuitement ",-1)])),_:1,__:[12]}),b(S,{to:"/login",class:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-[#0099cc] transition-all"},{default:Y(()=>d[13]||(d[13]=[O(" Se connecter ",-1)])),_:1,__:[13]})])])])])}}},sm=Le(tm,[["__scopeId","data-v-4ec350db"]]),om={class:"min-h-screen bg-gray-50"},rm={key:0,class:"animate-pulse"},am={key:1,class:"bg-white"},nm={class:"bg-gray-50 border-b"},im={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},lm={class:"flex items-center space-x-2 text-sm"},dm={class:"text-gray-900 font-medium"},cm={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"},um={class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},mm={class:"space-y-4"},pm={class:"relative overflow-hidden rounded-2xl bg-gray-100"},gm={key:0,class:"absolute top-4 right-4"},vm={class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold"},xm={key:1,class:"absolute top-4 right-4"},fm={key:2,class:"absolute top-4 left-4"},bm={class:"grid grid-cols-4 gap-4"},hm={class:"space-y-8"},ym={class:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4"},_m={class:"flex items-center gap-4 mb-6"},wm={class:"bg-[#0099cc]/10 text-[#0099cc] px-4 py-2 rounded-full font-semibold"},$m={class:"flex items-center text-yellow-500"},km={class:"bg-gradient-to-r from-[#0099cc]/5 to-[#0099cc]/10 rounded-2xl p-6"},Cm={class:"text-center"},jm={class:"text-sm text-gray-600 mb-2"},Am={class:"text-4xl font-bold text-[#0099cc] mb-2"},Pm={key:0,class:"text-sm text-gray-600"},Em={class:"font-semibold text-[#0099cc]"},Im={key:1,class:"text-sm text-gray-600"},Mm={key:0,class:"space-y-4"},Dm={class:"space-y-3"},Lm={class:"flex justify-between text-sm"},Sm={class:"font-semibold"},Tm={class:"w-full bg-gray-200 rounded-full h-4"},Vm={class:"flex justify-between text-sm"},Rm={class:"text-[#0099cc] font-medium"},Fm={class:"text-gray-600"},Nm={key:1,class:"bg-gray-50 rounded-2xl p-6 space-y-4"},zm={class:"grid grid-cols-2 gap-4 text-sm"},qm={class:"font-semibold"},Um={class:"font-semibold"},Bm={key:2,class:"bg-green-50 rounded-2xl p-6 space-y-4"},Om={class:"space-y-3"},Hm={class:"flex items-center gap-3"},Gm={class:"flex items-center gap-3"},Km={class:"flex items-center gap-3"},Zm={class:"flex items-center gap-3"},Wm={class:"space-y-4"},Jm={class:"grid grid-cols-2 gap-4"},Xm=["title"],Ym={class:"flex items-center gap-6 pt-6 border-t"},Qm={class:"flex items-center gap-2 text-sm text-gray-600"},ep={class:"flex items-center gap-2 text-sm text-gray-600"},tp={class:"flex items-center gap-2 text-sm text-gray-600"},sp={class:"mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8"},op={class:"lg:col-span-2"},rp={class:"prose max-w-none text-gray-700"},ap={class:"text-lg leading-relaxed mb-6"},np={class:"space-y-2 mb-6"},ip={class:"flex items-start gap-3"},lp={class:"flex items-start gap-3"},dp={class:"flex items-start gap-3"},cp={class:"flex items-start gap-3"},up={class:"space-y-6"},mp={class:"bg-gray-50 rounded-2xl p-6"},pp={class:"space-y-3 text-sm"},gp={class:"flex justify-between"},vp={class:"font-medium"},xp={class:"flex justify-between"},fp={class:"font-medium"},bp={class:"flex justify-between"},hp={class:"font-medium text-[#0099cc]"},yp={class:"bg-[#0099cc]/5 rounded-2xl p-6"},_p={class:"space-y-3 text-sm"},wp={class:"flex items-start gap-3"},$p={class:"flex items-start gap-3"},kp={class:"flex items-start gap-3"},Cp={class:"flex items-start gap-3"},jp={class:"bg-gray-50 py-16"},Ap={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pp={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ep=["onClick"],Ip={class:"relative overflow-hidden rounded-xl mb-4"},Mp={class:"absolute top-2 right-2"},Dp={class:"bg-[#0099cc] text-white px-2 py-1 rounded-full text-xs"},Lp={class:"font-semibold text-gray-900 mb-2"},Sp={class:"text-lg font-bold text-[#0099cc]"},Tp={key:2,class:"min-h-screen flex items-center justify-center"},Vp={class:"text-center"},Rp={class:"w-32 h-32 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center"},Fp={class:"text-xl font-semibold text-gray-900 mb-2"},Np={class:"text-gray-600 mb-6"},zp={class:"space-y-3"},qp={__name:"ProductDetail",setup(_){const v=Ue(),M=he(),{get:j}=ae(),f=ve(),h=R(!0),$=R(null),i=R(null),c=Q(()=>$.value&&$.value.activeLottery&&$.value.activeLottery.id),y=R([{id:2,name:"MacBook Pro M3",value:25e5,ticketPrice:2500,image:Ce},{id:3,name:"PlayStation 5",value:65e4,ticketPrice:1e3,image:Ce},{id:4,name:"AirPods Pro 2",value:35e4,ticketPrice:500,image:Ce},{id:5,name:"Tesla Model Y",value:45e6,ticketPrice:5e4,image:Ce}]),E=l=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XAF",minimumFractionDigits:0}).format(l).replace("XAF","FCFA"),V=l=>l?new Date(l).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Non définie",A=l=>({electronics:"Électronique",fashion:"Mode",automotive:"Automobile",home:"Maison"})[l]||"Autre",I=()=>"5j 12h",D=()=>{f.isAuthenticated?f.isCustomer?M.push({name:"customer.product.detail",params:{id:v.params.id}}):f.isMerchant?M.push({name:"merchant.dashboard"}):M.push({name:"customer.product.detail",params:{id:v.params.id}}):M.push({name:"login",query:{redirect:`/products/${v.params.id}`,action:"participate"}})},z=()=>{f.isAuthenticated?f.isCustomer?M.push({name:"customer.product.detail",params:{id:v.params.id}}):f.isMerchant?M.push({name:"merchant.dashboard"}):M.push({name:"customer.product.detail",params:{id:v.params.id}}):M.push({name:"login",query:{redirect:`/products/${v.params.id}`,action:"buy"}})},p=()=>{if(!f.isAuthenticated){M.push({name:"login",query:{redirect:`/products/${v.params.id}`,action:"wishlist"}});return}window.$toast&&window.$toast.success("Produit ajouté aux favoris !","Favoris")},d=()=>{navigator.share?navigator.share({title:$.value.name,text:$.value.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),window.$toast&&window.$toast.success("Lien copié dans le presse-papier !","Partage"))},S=l=>{M.push({name:"public.product.detail",params:{id:l.id}})},n=async()=>{try{h.value=!0,i.value=null;const l=v.params.id,a=await j(`/products/${l}`);console.log("🔍 API Response structure:",a);let L=a.data?.product||a.product;if(console.log("📦 Product data:",L),!L)throw console.error("Product data is null/undefined"),console.error("Full response:",JSON.stringify(a,null,2)),new Error("Produit non trouvé dans la réponse API");const K=L.id%2===1;$.value={id:L.id,name:L.name||(K?"iPhone 15 Pro":"MacBook Pro M3"),description:L.description||(K?"Le dernier flagship d'Apple avec une caméra révolutionnaire et la puce A17 Pro":"Le MacBook Pro le plus puissant avec la puce M3 et un écran Liquid Retina XDR"),value:L.price||(K?75e4:12e5),ticketPrice:L.ticket_price||(K?1e3:0),image:L.image_url||L.main_image||Ce,category:L.category?.name||"electronics",soldTickets:K?L.active_lottery?.sold_tickets||637:0,participants:K?L.active_lottery?.sold_tickets||637:0,drawDate:K?L.active_lottery?.end_date||new Date(Date.now()+10080*60*1e3):null,isNew:L.created_at?new Date(L.created_at)>new Date(Date.now()-720*60*60*1e3):!1,activeLottery:K?L.active_lottery||{id:1,sold_tickets:637,end_date:new Date(Date.now()+10080*60*1e3)}:null,lotteries:L.lotteries||[]},console.log("✅ Product loaded successfully:",$.value.name)}catch(l){console.error("Erreur lors du chargement du produit:",l),i.value=l.response?.data?.message||"Erreur lors du chargement du produit",$.value=null}finally{h.value=!1}};return ce(()=>{n()}),(l,a)=>{const L=pe("router-link");return t(),s("div",om,[h.value?(t(),s("div",rm,a[0]||(a[0]=[oe('<div class="bg-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"><div class="grid grid-cols-1 lg:grid-cols-2 gap-12"><div class="h-96 bg-gray-200 rounded-2xl"></div><div class="space-y-4"><div class="h-8 bg-gray-200 rounded"></div><div class="h-4 bg-gray-200 rounded w-3/4"></div><div class="h-20 bg-gray-200 rounded"></div></div></div></div></div>',1)]))):$.value?(t(),s("div",am,[e("div",nm,[e("div",im,[e("nav",lm,[b(L,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:Y(()=>a[1]||(a[1]=[O("Accueil",-1)])),_:1,__:[1]}),a[3]||(a[3]=e("span",{class:"text-gray-400"},"/",-1)),b(L,{to:"/products",class:"text-gray-500 hover:text-gray-700"},{default:Y(()=>a[2]||(a[2]=[O("Produits",-1)])),_:1,__:[2]}),a[4]||(a[4]=e("span",{class:"text-gray-400"},"/",-1)),e("span",dm,o($.value.name),1)])])]),e("div",cm,[e("div",um,[e("div",mm,[e("div",pm,[b(Ve,{src:$.value.image_url||$.value.main_image||$.value.image,alt:$.value.name,"container-class":"w-full h-96 lg:h-[500px]","image-class":"w-full h-full object-cover"},null,8,["src","alt"]),c.value?(t(),s("div",gm,[e("span",vm,o(E($.value.ticketPrice))+" / ticket ",1)])):(t(),s("div",xm,a[5]||(a[5]=[e("span",{class:"bg-green-600 text-white px-4 py-2 rounded-full font-semibold"}," Achat direct ",-1)]))),$.value.isNew?(t(),s("div",fm,a[6]||(a[6]=[e("span",{class:"bg-[#0099cc] text-white px-4 py-2 rounded-full font-semibold"}," Nouveau ",-1)]))):U("",!0)]),e("div",bm,[(t(),s(W,null,J(4,K=>e("div",{key:K,class:"relative overflow-hidden rounded-xl bg-gray-100 cursor-pointer hover:ring-2 hover:ring-[#0099cc] transition-all"},[b(Ve,{src:$.value.image_url||$.value.main_image||$.value.image,alt:`${$.value.name} - Vue ${K}`,"container-class":"w-full h-20","image-class":"w-full h-full object-cover"},null,8,["src","alt"])])),64))])]),e("div",hm,[e("div",null,[e("h1",ym,o($.value.name),1),e("div",_m,[e("span",wm,o(A($.value.category)),1),e("div",$m,[(t(),s(W,null,J(5,K=>b(u(Je),{key:K,class:"h-5 w-5 fill-current"})),64)),a[7]||(a[7]=e("span",{class:"ml-2 text-gray-600"},"(4.8)",-1))])])]),e("div",km,[e("div",Cm,[e("div",jm,o(c.value?"Valeur du produit":"Prix"),1),e("div",Am,o(E($.value.value)),1),c.value?(t(),s("div",Pm,[a[8]||(a[8]=O(" Prix d'un ticket : ",-1)),e("span",Em,o(E($.value.ticketPrice)),1)])):(t(),s("div",Im,a[9]||(a[9]=[e("span",{class:"font-semibold text-green-600"},"Disponible à l'achat direct",-1)])))])]),c.value?(t(),s("div",Mm,[a[11]||(a[11]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Progression du tirage",-1)),e("div",Dm,[e("div",Lm,[a[10]||(a[10]=e("span",{class:"text-gray-600"},"Tickets vendus",-1)),e("span",Sm,o($.value.soldTickets)+" / 1000",1)]),e("div",Tm,[e("div",{class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] h-4 rounded-full transition-all duration-500",style:we({width:Math.round($.value.soldTickets/1e3*100)+"%"})},null,4)]),e("div",Vm,[e("span",Rm,o(Math.round($.value.soldTickets/1e3*100))+"% vendu",1),e("span",Fm,o(1e3-$.value.soldTickets)+" tickets restants",1)])])])):U("",!0),c.value?(t(),s("div",Nm,[a[16]||(a[16]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Informations du tirage",-1)),e("div",zm,[e("div",null,[a[12]||(a[12]=e("span",{class:"text-gray-600"},"Date limite :",-1)),e("p",qm,o(V($.value.drawDate)),1)]),e("div",null,[a[13]||(a[13]=e("span",{class:"text-gray-600"},"Participants :",-1)),e("p",Um,o($.value.participants||0),1)]),a[14]||(a[14]=e("div",null,[e("span",{class:"text-gray-600"},"Chances de gagner :"),e("p",{class:"font-semibold text-[#0099cc]"},"1 sur 1000")],-1)),a[15]||(a[15]=e("div",null,[e("span",{class:"text-gray-600"},"Statut :"),e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-[#0099cc]/10 text-[#0099cc]"}," En cours ")],-1))])])):(t(),s("div",Bm,[a[21]||(a[21]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Achat direct",-1)),e("div",Om,[e("div",Hm,[b(u(le),{class:"h-5 w-5 text-green-600"}),a[17]||(a[17]=e("span",{class:"text-sm text-gray-700"},"Disponible immédiatement",-1))]),e("div",Gm,[b(u(le),{class:"h-5 w-5 text-green-600"}),a[18]||(a[18]=e("span",{class:"text-sm text-gray-700"},"Pas de tirage au sort",-1))]),e("div",Km,[b(u(le),{class:"h-5 w-5 text-green-600"}),a[19]||(a[19]=e("span",{class:"text-sm text-gray-700"},"Livraison garantie",-1))]),e("div",Zm,[b(u(le),{class:"h-5 w-5 text-green-600"}),a[20]||(a[20]=e("span",{class:"text-sm text-gray-700"},"Paiement sécurisé",-1))])])])),e("div",Wm,[c.value?(t(),s("button",{key:0,onClick:D,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},o(u(f).isAuthenticated?`🍀 Participer maintenant - ${E($.value.ticketPrice)}`:`Se connecter pour participer - ${E($.value.ticketPrice)}`),1)):(t(),s("button",{key:1,onClick:z,class:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},o(u(f).isAuthenticated?`🛒 Acheter maintenant - ${E($.value.value)}`:`Se connecter pour acheter - ${E($.value.value)}`),1)),e("div",Jm,[e("button",{onClick:p,class:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-[#0099cc] text-gray-700 hover:text-[#0099cc] py-3 rounded-xl transition-all",title:u(f).isAuthenticated?"Ajouter aux favoris":"Se connecter pour ajouter aux favoris"},[b(u(ms),{class:"h-5 w-5"}),O(" "+o((u(f).isAuthenticated,"Favoris")),1)],8,Xm),e("button",{onClick:d,class:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-[#0099cc] text-gray-700 hover:text-[#0099cc] py-3 rounded-xl transition-all"},[b(u(vs),{class:"h-5 w-5"}),a[22]||(a[22]=O(" Partager ",-1))])])]),e("div",Ym,[e("div",Qm,[b(u(dt),{class:"h-5 w-5 text-[#0099cc]"}),a[23]||(a[23]=e("span",null,"Produit garanti",-1))]),e("div",ep,[b(u(_t),{class:"h-5 w-5 text-[#0099cc]"}),a[24]||(a[24]=e("span",null,"Livraison gratuite",-1))]),e("div",tp,[b(u(Rt),{class:"h-5 w-5 text-[#0099cc]"}),a[25]||(a[25]=e("span",null,"Authentique",-1))])])])]),e("div",sp,[e("div",op,[a[32]||(a[32]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Description",-1)),e("div",rp,[e("p",ap,o($.value.description),1),a[30]||(a[30]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Caractéristiques principales",-1)),e("ul",np,[e("li",ip,[b(u(le),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),a[26]||(a[26]=e("span",null,"Produit neuf avec garantie constructeur",-1))]),e("li",lp,[b(u(le),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),a[27]||(a[27]=e("span",null,"Livraison express partout au Cameroun",-1))]),e("li",dp,[b(u(le),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),a[28]||(a[28]=e("span",null,"Service client disponible 24h/7j",-1))]),e("li",cp,[b(u(le),{class:"h-5 w-5 text-[#0099cc] mt-0.5"}),a[29]||(a[29]=e("span",null,"Certification d'authenticité incluse",-1))])]),a[31]||(a[31]=oe('<h3 class="text-xl font-semibold text-gray-900 mb-4">Comment participer ?</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">1</div><h4 class="font-semibold mb-2">Achetez vos tickets</h4><p class="text-sm text-gray-600">Choisissez le nombre de tickets que vous souhaitez</p></div><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">2</div><h4 class="font-semibold mb-2">Attendez le tirage</h4><p class="text-sm text-gray-600">Le tirage se fait automatiquement à la date prévue</p></div><div class="text-center p-4 bg-[#0099cc]/5 rounded-xl"><div class="w-12 h-12 bg-[#0099cc] text-white rounded-full flex items-center justify-center mx-auto mb-3 font-bold text-lg">3</div><h4 class="font-semibold mb-2">Récupérez votre lot</h4><p class="text-sm text-gray-600">Si vous gagnez, nous vous livrons gratuitement</p></div></div>',2))])]),e("div",up,[e("div",mp,[a[36]||(a[36]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Statistiques",-1)),e("div",pp,[e("div",gp,[a[33]||(a[33]=e("span",{class:"text-gray-600"},"Participants uniques",-1)),e("span",vp,o($.value.participants||0),1)]),e("div",xp,[a[34]||(a[34]=e("span",{class:"text-gray-600"},"Tickets moyens/personne",-1)),e("span",fp,o(Math.round($.value.soldTickets/Math.max($.value.participants||1,1))),1)]),e("div",bp,[a[35]||(a[35]=e("span",{class:"text-gray-600"},"Temps restant",-1)),e("span",hp,o(I()),1)])])]),e("div",yp,[a[41]||(a[41]=e("h3",{class:"font-semibold text-gray-900 mb-4"},"Pourquoi Koumbaya ?",-1)),e("div",_p,[e("div",wp,[b(u(le),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),a[37]||(a[37]=e("span",null,"Tirages transparents et vérifiables",-1))]),e("div",$p,[b(u(le),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),a[38]||(a[38]=e("span",null,"Paiement 100% sécurisé",-1))]),e("div",kp,[b(u(le),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),a[39]||(a[39]=e("span",null,"Support client réactif",-1))]),e("div",Cp,[b(u(le),{class:"h-4 w-4 text-[#0099cc] mt-0.5"}),a[40]||(a[40]=e("span",null,"Plus de 10 000+ gagnants",-1))])])])])])]),e("section",jp,[e("div",Ap,[a[42]||(a[42]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-8"},"Produits similaires",-1)),e("div",Pp,[(t(!0),s(W,null,J(y.value,K=>(t(),s("div",{key:K.id,onClick:ee=>S(K),class:"bg-white rounded-2xl p-6 shadow-sm hover:shadow-lg transition-all cursor-pointer"},[e("div",Ip,[b(Ve,{src:K.image,alt:K.name,"container-class":"w-full h-40","image-class":"w-full h-full object-cover"},null,8,["src","alt"]),e("div",Mp,[e("span",Dp,o(E(K.ticketPrice)),1)])]),e("h3",Lp,o(K.name),1),e("div",Sp,o(E(K.value)),1)],8,Ep))),128))])])])])):(t(),s("div",Tp,[e("div",Vp,[e("div",Rp,[b(u(be),{class:"w-16 h-16 text-gray-400"})]),e("h3",Fp,o(i.value?"Erreur de chargement":"Produit introuvable"),1),e("p",Np,o(i.value||"Ce produit n'existe pas ou a été supprimé"),1),e("div",zp,[i.value?(t(),s("button",{key:0,onClick:n,class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors mr-4"}," Réessayer ")):U("",!0),b(L,{to:"/products",class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl transition-colors"},{default:Y(()=>a[43]||(a[43]=[O(" Retour aux produits ",-1)])),_:1,__:[43]})])])]))])}}},Up={class:"min-h-screen bg-white"},Bp={class:"py-20"},Op={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Hp={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12"},Gp={class:"relative text-center group"},Kp={class:"relative mx-auto w-32 h-32 mb-8"},Zp={class:"hidden lg:block absolute -right-16 top-1/2 transform -translate-y-1/2"},Wp={class:"mt-6 bg-[#0099cc]/5 rounded-xl p-4"},Jp={class:"flex items-center justify-center gap-2 text-[#0099cc] font-medium"},Xp={class:"relative text-center group"},Yp={class:"relative mx-auto w-32 h-32 mb-8"},Qp={class:"hidden lg:block absolute -right-16 top-1/2 transform -translate-y-1/2"},e1={class:"mt-6 bg-[#0099cc]/5 rounded-xl p-4"},t1={class:"flex items-center justify-center gap-2 text-[#0099cc] font-medium"},s1={class:"relative text-center group"},o1={class:"mt-6 bg-yellow-50 rounded-xl p-4"},r1={class:"flex items-center justify-center gap-2 text-yellow-700 font-medium"},a1={class:"py-20 bg-gray-50"},n1={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},i1={class:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center"},l1={class:"space-y-6"},d1={class:"flex gap-4"},c1={class:"flex-shrink-0"},u1={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},m1={class:"flex gap-4"},p1={class:"flex-shrink-0"},g1={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},v1={class:"flex gap-4"},x1={class:"flex-shrink-0"},f1={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},b1={class:"flex gap-4"},h1={class:"flex-shrink-0"},y1={class:"w-12 h-12 bg-[#0099cc] rounded-full flex items-center justify-center"},_1={class:"relative"},w1={class:"bg-white rounded-2xl p-8 shadow-xl border border-gray-100"},$1={class:"text-center mb-6"},k1={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},C1={class:"space-y-4"},j1={class:"bg-gray-50 rounded-lg p-4"},A1={class:"flex items-center justify-between mb-2"},P1={class:"bg-gray-50 rounded-lg p-4"},E1={class:"flex items-center justify-between mb-2"},I1={class:"bg-[#0099cc]/5 rounded-lg p-4 border border-[#0099cc]/20"},M1={class:"flex items-center justify-between mb-2"},D1={class:"py-20"},L1={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},S1={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},T1={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},V1={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6"},R1={class:"space-y-3 text-gray-600"},F1={class:"flex items-center gap-3"},N1={class:"flex items-center gap-3"},z1={class:"flex items-center gap-3"},q1={class:"flex items-center gap-3"},U1={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},B1={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6"},O1={class:"space-y-3 text-gray-600"},H1={class:"flex items-center gap-3"},G1={class:"flex items-center gap-3"},K1={class:"flex items-center gap-3"},Z1={class:"flex items-center gap-3"},W1={class:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100"},J1={class:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6"},X1={class:"space-y-3 text-gray-600"},Y1={class:"flex items-center gap-3"},Q1={class:"flex items-center gap-3"},eg={class:"flex items-center gap-3"},tg={class:"flex items-center gap-3"},sg={class:"py-20 bg-gray-50"},og={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},rg={class:"space-y-6"},ag=["onClick"],ng={class:"text-lg font-semibold text-gray-900"},ig={class:"py-20 bg-gradient-to-r from-[#0099cc] to-[#0088bb]"},lg={class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},dg={class:"flex flex-col sm:flex-row gap-4 justify-center"},cg={__name:"HowItWorks",setup(_){const v=R(null),M=R([{question:"Comment puis-je être sûr que le tirage est équitable ?",answer:"Notre système utilise un générateur de nombres aléatoires (RNG) certifié et audité régulièrement par des organismes indépendants. Tous les tirages sont enregistrés et vérifiables publiquement."},{question:"Que se passe-t-il si je gagne ?",answer:"Vous êtes immédiatement notifié par email et SMS. Notre équipe vous contacte dans les 24h pour organiser la livraison gratuite de votre lot. Vous recevez aussi un certificat d'authenticité."},{question:"Puis-je acheter plusieurs tickets pour le même produit ?",answer:"Oui, absolument ! Plus vous achetez de tickets, plus vous augmentez vos chances de gagner. Il n'y a pas de limite au nombre de tickets que vous pouvez acheter."},{question:"Les produits sont-ils vraiment authentiques ?",answer:"Tous nos produits sont 100% authentiques et neufs. Nous travaillons directement avec les distributeurs officiels et fournissons un certificat d'authenticité avec chaque lot."},{question:"Combien de temps ai-je pour réclamer mon lot ?",answer:"Vous avez 30 jours pour réclamer votre lot après le tirage. Passé ce délai, un nouveau tirage est organisé avec les tickets non gagnants."},{question:"Y a-t-il des frais cachés ?",answer:"Aucun frais caché ! Le prix affiché est le prix final. La livraison est gratuite partout au Gabon, et il n'y a aucun frais supplémentaire."}]),j=f=>{v.value=v.value===f?null:f};return(f,h)=>{const $=pe("router-link");return t(),s("div",Up,[h[47]||(h[47]=e("section",{class:"bg-gradient-to-br from-[#0099cc] via-[#0088bb] to-[#0099cc] text-white py-20"},[e("div",{class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},[e("h1",{class:"text-4xl md:text-6xl font-bold mb-6"}," Comment ça marche ? "),e("p",{class:"text-xl md:text-2xl text-[#0099cc]/70 leading-relaxed max-w-3xl mx-auto"}," Découvrez comment obtenir des produits incroyables à prix réduit en quelques clics seulement. C'est simple, transparent et malin ! ")])],-1)),e("section",Bp,[e("div",Op,[h[12]||(h[12]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," 3 étapes pour acheter malin "),e("p",{class:"text-xl text-gray-600 max-w-3xl mx-auto"}," Notre système de tombola est conçu pour être simple et équitable pour tous les participants ")],-1)),e("div",Hp,[e("div",Gp,[e("div",Kp,[h[0]||(h[0]=e("div",{class:"absolute inset-0 bg-[#0099cc]/10 rounded-full"},null,-1)),h[1]||(h[1]=e("div",{class:"absolute inset-2 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[e("span",{class:"text-4xl font-bold text-white"},"1")],-1)),e("div",Zp,[b(u(He),{class:"h-8 w-8 text-[#0099cc]/30"})])]),h[3]||(h[3]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"Choisissez votre produit",-1)),h[4]||(h[4]=e("p",{class:"text-gray-600 leading-relaxed"}," Parcourez notre catalogue de produits authentiques : smartphones, ordinateurs, voitures, montres de luxe et bien plus encore. ",-1)),e("div",Wp,[e("div",Jp,[b(u(Re),{class:"h-5 w-5"}),h[2]||(h[2]=e("span",null,"Plus de 100 produits disponibles",-1))])])]),e("div",Xp,[e("div",Yp,[h[5]||(h[5]=e("div",{class:"absolute inset-0 bg-[#0099cc]/10 rounded-full"},null,-1)),h[6]||(h[6]=e("div",{class:"absolute inset-2 bg-[#0099cc] rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[e("span",{class:"text-4xl font-bold text-white"},"2")],-1)),e("div",Qp,[b(u(He),{class:"h-8 w-8 text-[#0099cc]/30"})])]),h[8]||(h[8]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-4"},"Achetez vos tickets",-1)),h[9]||(h[9]=e("p",{class:"text-gray-600 leading-relaxed"}," Chaque produit a un prix de ticket unique. Plus vous achetez de tickets, plus vous augmentez vos chances d'obtenir le produit à prix réduit. ",-1)),e("div",e1,[e("div",t1,[b(u(Se),{class:"h-5 w-5"}),h[7]||(h[7]=e("span",null,"Tickets à partir de 500 FCFA",-1))])])]),e("div",s1,[h[11]||(h[11]=oe('<div class="relative mx-auto w-32 h-32 mb-8"><div class="absolute inset-0 bg-yellow-100 rounded-full"></div><div class="absolute inset-2 bg-yellow-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300"><span class="text-4xl font-bold text-white">3</span></div></div><h3 class="text-2xl font-bold text-gray-900 mb-4">Obtenez votre produit</h3><p class="text-gray-600 leading-relaxed"> Le tirage se fait automatiquement quand tous les tickets sont vendus. Si vous obtenez le produit, nous vous livrons gratuitement ! </p>',3)),e("div",o1,[e("div",r1,[b(u(Oe),{class:"h-5 w-5"}),h[10]||(h[10]=e("span",null,"Livraison gratuite partout",-1))])])])])])]),e("section",a1,[e("div",n1,[h[25]||(h[25]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Comment fonctionne notre tombola ? "),e("p",{class:"text-xl text-gray-600"}," Notre système de tombola est 100% équitable et transparent ")],-1)),e("div",i1,[e("div",l1,[e("div",d1,[e("div",c1,[e("div",u1,[b(u(le),{class:"h-6 w-6 text-white"})])]),h[13]||(h[13]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Tirage automatique"),e("p",{class:"text-gray-600"}," Dès que tous les tickets sont vendus, le tirage se lance automatiquement. Aucune intervention humaine possible. ")],-1))]),e("div",m1,[e("div",p1,[e("div",g1,[b(u(Me),{class:"h-6 w-6 text-white"})])]),h[14]||(h[14]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Transparence totale"),e("p",{class:"text-gray-600"}," Tous les tirages sont enregistrés et vérifiables. Vous pouvez consulter l'historique à tout moment. ")],-1))]),e("div",v1,[e("div",x1,[e("div",f1,[b(u(dt),{class:"h-6 w-6 text-white"})])]),h[15]||(h[15]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Sécurité garantie"),e("p",{class:"text-gray-600"}," Notre algorithme de tirage est certifié et audité régulièrement pour assurer une équité parfaite. ")],-1))]),e("div",b1,[e("div",h1,[e("div",y1,[b(u(nt),{class:"h-6 w-6 text-white"})])]),h[16]||(h[16]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"Notification immédiate"),e("p",{class:"text-gray-600"}," Les participants sélectionnés sont notifiés instantanément par email et SMS. Plus besoin d'attendre ! ")],-1))])]),e("div",_1,[e("div",w1,[e("div",$1,[e("div",k1,[b(u(is),{class:"h-10 w-10 text-[#0099cc]"})]),h[17]||(h[17]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Algorithme RNG",-1)),h[18]||(h[18]=e("p",{class:"text-gray-600 text-sm mt-2"},"Générateur de nombres aléatoires certifié",-1))]),e("div",C1,[e("div",j1,[e("div",A1,[h[19]||(h[19]=e("span",{class:"text-sm text-gray-600"},"Étape 1",-1)),b(u(le),{class:"h-4 w-4 text-[#0099cc]"})]),h[20]||(h[20]=e("div",{class:"text-sm font-medium text-gray-900"},"Collecte des tickets vendus",-1))]),e("div",P1,[e("div",E1,[h[21]||(h[21]=e("span",{class:"text-sm text-gray-600"},"Étape 2",-1)),b(u(le),{class:"h-4 w-4 text-[#0099cc]"})]),h[22]||(h[22]=e("div",{class:"text-sm font-medium text-gray-900"},"Génération nombre aléatoire",-1))]),e("div",I1,[e("div",M1,[h[23]||(h[23]=e("span",{class:"text-sm text-[#0099cc]"},"Étape 3",-1)),b(u(xt),{class:"h-4 w-4 text-[#0099cc]"})]),h[24]||(h[24]=e("div",{class:"text-sm font-medium text-gray-900"},"Désignation du participant sélectionné",-1))])])])])])])]),e("section",D1,[e("div",L1,[h[41]||(h[41]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Paiement sécurisé et livraison "),e("p",{class:"text-xl text-gray-600"}," Vos transactions sont protégées par les meilleurs systèmes de sécurité ")],-1)),e("div",S1,[e("div",T1,[e("div",V1,[b(u(Ft),{class:"h-8 w-8 text-[#0099cc]"})]),h[30]||(h[30]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Moyens de paiement",-1)),e("ul",R1,[e("li",F1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[26]||(h[26]=e("span",null,"Mobile Money (MTN, Orange)",-1))]),e("li",N1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[27]||(h[27]=e("span",null,"Carte bancaire Visa/Mastercard",-1))]),e("li",z1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[28]||(h[28]=e("span",null,"Virement bancaire",-1))]),e("li",q1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[29]||(h[29]=e("span",null,"Portefeuille électronique",-1))])])]),e("div",U1,[e("div",B1,[b(u(Nt),{class:"h-8 w-8 text-[#0099cc]"})]),h[35]||(h[35]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Sécurité des données",-1)),e("ul",O1,[e("li",H1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[31]||(h[31]=e("span",null,"Chiffrement SSL 256 bits",-1))]),e("li",G1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[32]||(h[32]=e("span",null,"Conformité PCI DSS",-1))]),e("li",K1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[33]||(h[33]=e("span",null,"Authentification 2 facteurs",-1))]),e("li",Z1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[34]||(h[34]=e("span",null,"Protection anti-fraude",-1))])])]),e("div",W1,[e("div",J1,[b(u(_t),{class:"h-8 w-8 text-yellow-500"})]),h[40]||(h[40]=e("h3",{class:"text-xl font-semibold text-gray-900 text-center mb-4"},"Livraison gratuite",-1)),e("ul",X1,[e("li",Y1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[36]||(h[36]=e("span",null,"Livraison partout au Gabon",-1))]),e("li",Q1,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[37]||(h[37]=e("span",null,"Suivi en temps réel",-1))]),e("li",eg,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[38]||(h[38]=e("span",null,"Délai 24-48h en ville",-1))]),e("li",tg,[b(u(le),{class:"h-4 w-4 text-[#0099cc]"}),h[39]||(h[39]=e("span",null,"Assurance colis incluse",-1))])])])])])]),e("section",sg,[e("div",og,[h[42]||(h[42]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Questions fréquentes "),e("p",{class:"text-xl text-gray-600"}," Trouvez rapidement les réponses à vos questions ")],-1)),e("div",rg,[(t(!0),s(W,null,J(M.value,(i,c)=>(t(),s("div",{key:c,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},[e("button",{onClick:y=>j(c),class:"w-full px-8 py-6 text-left flex items-center justify-between hover:bg-gray-50 transition-colors"},[e("span",ng,o(i.question),1),b(u(lt),{class:Z(["h-6 w-6 text-gray-400 transition-transform",v.value===c?"rotate-180":""])},null,8,["class"])],8,ag),G(e("div",{class:"px-8 pb-6 text-gray-600 leading-relaxed"},o(i.answer),513),[[Gt,v.value===c]])]))),128))])])]),e("section",ig,[e("div",lg,[h[45]||(h[45]=e("h2",{class:"text-3xl md:text-4xl font-bold text-white mb-6"}," Prêt à acheter malin ? ",-1)),h[46]||(h[46]=e("p",{class:"text-xl text-[#0099cc]/70 mb-8"}," Rejoignez les milliers de participants qui ont déjà acheté malin ",-1)),e("div",dg,[b($,{to:"/products",class:"bg-white text-[#0099cc] px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-colors shadow-lg"},{default:Y(()=>h[43]||(h[43]=[O(" Voir les produits ",-1)])),_:1,__:[43]}),b($,{to:"/register",class:"border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-[#0099cc] transition-all"},{default:Y(()=>h[44]||(h[44]=[O(" S'inscrire gratuitement ",-1)])),_:1,__:[44]})])])])])}}},ug={class:"min-h-screen bg-white"},mg={class:"py-20"},pg={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},gg={class:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16"},vg={class:"text-center group"},xg={class:"w-20 h-20 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-[#0099cc] transition-colors"},fg={class:"text-center group"},bg={class:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-blue-500 transition-colors"},hg={class:"text-center group"},yg={class:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-yellow-500 transition-colors"},_g={class:"py-20 bg-gray-50"},wg={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$g={class:"grid grid-cols-1 lg:grid-cols-2 gap-16"},kg={class:"bg-white rounded-2xl p-8 shadow-lg"},Cg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},jg={key:0,class:"text-red-500 text-sm mt-1"},Ag={key:0,class:"text-red-500 text-sm mt-1"},Pg={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Eg={key:0,class:"text-red-500 text-sm mt-1"},Ig={key:0,class:"text-red-500 text-sm mt-1"},Mg={class:"flex items-start gap-3"},Dg={for:"agree",class:"text-sm text-gray-600"},Lg=["disabled"],Sg={key:0,class:"flex items-center justify-center gap-2"},Tg={key:1},Vg={class:"space-y-8"},Rg={class:"bg-white rounded-2xl p-8 shadow-lg"},Fg={class:"space-y-6"},Ng={class:"flex gap-4"},zg={class:"flex-shrink-0"},qg={class:"w-12 h-12 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},Ug={class:"flex gap-4"},Bg={class:"flex-shrink-0"},Og={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},Hg={class:"bg-gradient-to-br from-[#0099cc] to-cyan-600 rounded-2xl p-8 text-white"},Gg={class:"grid grid-cols-2 gap-4"},Kg={href:"tel:+24107123456",class:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-4 hover:bg-white/20 transition-colors"},Zg={href:"https://wa.me/24107123456",target:"_blank",class:"flex items-center gap-3 bg-white/10 backdrop-blur-sm rounded-xl p-4 hover:bg-white/20 transition-colors"},Wg={class:"bg-gray-100 rounded-2xl p-8"},Jg={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Xg={class:"flex items-center justify-center min-h-screen px-4 text-center"},Yg={class:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle bg-white shadow-xl rounded-2xl transform transition-all"},Qg={class:"text-center"},ev={class:"w-16 h-16 bg-[#0099cc]/10 rounded-full flex items-center justify-center mx-auto mb-4"},tv={__name:"Contact",setup(_){const v=R(!1),M=R(!1),j=de({name:"",email:"",phone:"",subject:"",message:"",agree:!1}),f=de({name:"",email:"",subject:"",message:""}),h=()=>{let i=!0;return Object.keys(f).forEach(c=>{f[c]=""}),j.name.trim()?j.name.trim().length<2&&(f.name="Le nom doit contenir au moins 2 caractères",i=!1):(f.name="Le nom est requis",i=!1),j.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)||(f.email="Format d'email invalide",i=!1):(f.email="L'email est requis",i=!1),j.subject||(f.subject="Veuillez sélectionner un sujet",i=!1),j.message.trim()?j.message.trim().length<10&&(f.message="Le message doit contenir au moins 10 caractères",i=!1):(f.message="Le message est requis",i=!1),i},$=async()=>{if(h()){v.value=!0;try{await new Promise(i=>setTimeout(i,1500)),Object.keys(j).forEach(i=>{i==="agree"?j[i]=!1:j[i]=""}),M.value=!0,window.$toast&&window.$toast.success("Message envoyé avec succès !","Contact")}catch{window.$toast&&window.$toast.error("Erreur lors de l'envoi du message","Erreur")}finally{v.value=!1}}};return(i,c)=>{const y=pe("router-link");return t(),s("div",ug,[c[37]||(c[37]=e("section",{class:"bg-gradient-to-br from-[#0099cc] via-blue-500 to-cyan-600 text-white py-20"},[e("div",{class:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8"},[e("h1",{class:"text-4xl md:text-6xl font-bold mb-6"}," Contactez-nous "),e("p",{class:"text-xl md:text-2xl text-blue-100 leading-relaxed"}," Notre équipe est là pour répondre à toutes vos questions. N'hésitez pas à nous contacter ! ")])],-1)),e("section",mg,[e("div",pg,[e("div",gg,[e("div",vg,[e("div",xg,[b(u(ze),{class:"h-10 w-10 text-[#0099cc] group-hover:text-white transition-colors"})]),c[8]||(c[8]=oe('<h3 class="text-xl font-semibold text-gray-900 mb-2">Téléphone</h3><p class="text-gray-600 mb-4">Appelez-nous directement</p><div class="space-y-2"><a href="tel:+24107123456" class="block text-[#0099cc] hover:text-[#0088bb] font-medium"> +241 07 12 34 56 </a><a href="tel:+24106987654" class="block text-[#0099cc] hover:text-[#0088bb] font-medium"> +241 06 98 76 54 </a></div><p class="text-sm text-gray-500 mt-2">Lun - Ven : 8h - 20h</p>',4))]),e("div",fg,[e("div",bg,[b(u(Ze),{class:"h-10 w-10 text-blue-500 group-hover:text-white transition-colors"})]),c[9]||(c[9]=oe('<h3 class="text-xl font-semibold text-gray-900 mb-2">Email</h3><p class="text-gray-600 mb-4">Écrivez-nous un message</p><div class="space-y-2"><a href="mailto:contact@koumbaya.ga" class="block text-blue-600 hover:text-blue-700 font-medium"> contact@koumbaya.ga </a><a href="mailto:support@koumbaya.ga" class="block text-blue-600 hover:text-blue-700 font-medium"> support@koumbaya.ga </a></div><p class="text-sm text-gray-500 mt-2">Réponse sous 24h</p>',4))]),e("div",hg,[e("div",yg,[b(u(Pt),{class:"h-10 w-10 text-yellow-500 group-hover:text-white transition-colors"})]),c[10]||(c[10]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"WhatsApp",-1)),c[11]||(c[11]=e("p",{class:"text-gray-600 mb-4"},"Chat en temps réel",-1)),c[12]||(c[12]=e("a",{href:"https://wa.me/24107123456",target:"_blank",class:"inline-block bg-[#0099cc] text-white px-6 py-3 rounded-xl font-medium hover:bg-[#0088bb] transition-colors"}," Chatter maintenant ",-1)),c[13]||(c[13]=e("p",{class:"text-sm text-gray-500 mt-2"},"Disponible 24h/7j",-1))])])])]),e("section",_g,[e("div",wg,[e("div",$g,[e("div",kg,[c[24]||(c[24]=e("div",{class:"mb-8"},[e("h2",{class:"text-2xl md:text-3xl font-bold text-gray-900 mb-4"}," Envoyez-nous un message "),e("p",{class:"text-gray-600"}," Remplissez le formulaire ci-dessous et nous vous répondrons dans les plus brefs délais. ")],-1)),e("form",{onSubmit:ge($,["prevent"]),class:"space-y-6"},[e("div",Cg,[e("div",null,[c[14]||(c[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nom complet * ",-1)),G(e("input",{"onUpdate:modelValue":c[0]||(c[0]=E=>j.name=E),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"Votre nom"},null,512),[[X,j.name]]),f.name?(t(),s("div",jg,o(f.name),1)):U("",!0)]),e("div",null,[c[15]||(c[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Adresse email * ",-1)),G(e("input",{"onUpdate:modelValue":c[1]||(c[1]=E=>j.email=E),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"votre@email.com"},null,512),[[X,j.email]]),f.email?(t(),s("div",Ag,o(f.email),1)):U("",!0)])]),e("div",Pg,[e("div",null,[c[16]||(c[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Numéro de téléphone ",-1)),G(e("input",{"onUpdate:modelValue":c[2]||(c[2]=E=>j.phone=E),type:"tel",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"},placeholder:"+241 XX XX XX XX"},null,512),[[X,j.phone]])]),e("div",null,[c[18]||(c[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sujet * ",-1)),G(e("select",{"onUpdate:modelValue":c[3]||(c[3]=E=>j.subject=E),required:"",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#0099cc] focus:border-transparent transition-all",style:{color:"#5f5f5f"}},c[17]||(c[17]=[oe('<option value="">Choisir un sujet</option><option value="support">Support technique</option><option value="billing">Facturation</option><option value="product">Question sur un produit</option><option value="tombola">Question sur une tombola</option><option value="delivery">Livraison</option><option value="partnership">Partenariat</option><option value="other">Autre</option>',8)]),512),[[ie,j.subject]]),f.subject?(t(),s("div",Eg,o(f.subject),1)):U("",!0)])]),e("div",null,[c[19]||(c[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Message * ",-1)),G(e("textarea",{"onUpdate:modelValue":c[4]||(c[4]=E=>j.message=E),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",style:{color:"#5f5f5f"},placeholder:"Décrivez votre demande en détail..."},null,512),[[X,j.message]]),f.message?(t(),s("div",Ig,o(f.message),1)):U("",!0)]),e("div",Mg,[G(e("input",{"onUpdate:modelValue":c[5]||(c[5]=E=>j.agree=E),type:"checkbox",id:"agree",required:"",class:"mt-1 h-4 w-4 text-[#0099cc] border-gray-200 rounded focus:ring-[#0099cc]"},null,512),[[Ee,j.agree]]),e("label",Dg,[c[21]||(c[21]=O(" J'accepte que mes données soient utilisées pour traiter ma demande selon notre ",-1)),b(y,{to:"/privacy",class:"text-[#0099cc] hover:text-[#0088bb]"},{default:Y(()=>c[20]||(c[20]=[O("politique de confidentialité",-1)])),_:1,__:[20]}),c[22]||(c[22]=O(". ",-1))])]),e("button",{type:"submit",disabled:v.value,class:"w-full bg-[#0099cc] hover:bg-[#0088bb] disabled:opacity-50 text-white font-semibold py-4 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-lg hover:shadow-xl"},[v.value?(t(),s("span",Sg,c[23]||(c[23]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},null,-1),O(" Envoi en cours... ",-1)]))):(t(),s("span",Tg,"Envoyer le message"))],8,Lg)],32)]),e("div",Vg,[e("div",Rg,[c[27]||(c[27]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-6"},"Nos bureaux",-1)),e("div",Fg,[e("div",Ng,[e("div",zg,[e("div",qg,[b(u(gt),{class:"h-6 w-6 text-[#0099cc]"})])]),c[25]||(c[25]=e("div",null,[e("h4",{class:"font-semibold text-gray-900 mb-2"},"Libreville (Siège social)"),e("p",{class:"text-gray-600 mb-2"},[O(" Boulevard Triomphal, Centre-ville"),e("br"),O(" Face à l'Hôtel Intercontinental"),e("br"),O(" BP 1234 Libreville, Gabon ")]),e("div",{class:"text-sm text-gray-500"},[e("p",null,"Lun - Ven : 8h00 - 18h00"),e("p",null,"Sam : 9h00 - 15h00")])],-1))]),e("div",Ug,[e("div",Bg,[e("div",Og,[b(u(gt),{class:"h-6 w-6 text-blue-500"})])]),c[26]||(c[26]=e("div",null,[e("h4",{class:"font-semibold text-gray-900 mb-2"},"Port-Gentil"),e("p",{class:"text-gray-600 mb-2"},[O(" Avenue Savorgnan de Brazza"),e("br"),O(" Centre Commercial Delta"),e("br"),O(" BP 5678 Port-Gentil, Gabon ")]),e("div",{class:"text-sm text-gray-500"},[e("p",null,"Lun - Ven : 8h30 - 17h30"),e("p",null,"Sam : 9h00 - 14h00")])],-1))])])]),e("div",Hg,[c[30]||(c[30]=e("h3",{class:"text-2xl font-bold mb-4"},"Besoin d'une réponse rapide ?",-1)),c[31]||(c[31]=e("p",{class:"text-blue-100 mb-6"}," Notre équipe de support est disponible pour vous aider immédiatement. ",-1)),e("div",Gg,[e("a",Kg,[b(u(ze),{class:"h-6 w-6"}),c[28]||(c[28]=e("div",{class:"text-left"},[e("div",{class:"font-medium"},"Appelez-nous"),e("div",{class:"text-sm text-blue-100"},"24h/7j")],-1))]),e("a",Zg,[b(u(Pt),{class:"h-6 w-6"}),c[29]||(c[29]=e("div",{class:"text-left"},[e("div",{class:"font-medium"},"WhatsApp"),e("div",{class:"text-sm text-blue-100"},"Chat live")],-1))])])]),e("div",Wg,[c[33]||(c[33]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Consultez d'abord notre FAQ",-1)),c[34]||(c[34]=e("p",{class:"text-gray-600 mb-6"}," La plupart des questions trouvent leur réponse dans notre section FAQ. ",-1)),b(y,{to:"/how-it-works",class:"inline-flex items-center gap-2 bg-white text-gray-900 px-6 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors shadow-sm"},{default:Y(()=>[b(u(zt),{class:"h-5 w-5"}),c[32]||(c[32]=O(" Voir les questions fréquentes ",-1))]),_:1,__:[32]})])])])])]),M.value?(t(),s("div",Jg,[e("div",Xg,[e("div",{class:"fixed inset-0 bg-black/20 transition-opacity",onClick:c[6]||(c[6]=E=>M.value=!1)}),e("div",Yg,[e("div",Qg,[e("div",ev,[b(u(je),{class:"h-8 w-8 text-[#0099cc]"})]),c[35]||(c[35]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Message envoyé !",-1)),c[36]||(c[36]=e("p",{class:"text-gray-600 mb-6"}," Merci pour votre message. Nous vous répondrons dans les plus brefs délais. ",-1)),e("button",{onClick:c[7]||(c[7]=E=>M.value=!1),class:"bg-[#0099cc] hover:bg-[#0088bb] text-white px-6 py-3 rounded-xl font-medium transition-colors"}," Parfait ")])])])])):U("",!0)])}}};function sv(){const{get:_,loading:v,error:M}=ae(),j=R({ticketsBought:0,lotteriesParticipated:0,totalSpent:0,prizesWon:0}),f=R([]),h=R([]),$=Q(()=>[{label:"Tickets achetés",value:j.value.ticketsBought.toString(),color:"bg-blue-500",icon:"TicketIcon"},{label:"Tombolas participées",value:j.value.lotteriesParticipated.toString(),color:"bg-[#0099cc]",icon:"GiftIcon"},{label:"Total dépensé",value:E(j.value.totalSpent),color:"bg-yellow-500",icon:"CurrencyDollarIcon"},{label:"Prix gagnés",value:j.value.prizesWon.toString(),color:"bg-purple-500",icon:"TrophyIcon"}]),i=async()=>{try{const I=await _("/tickets/my-tickets");if(I&&I.success){const D=Array.isArray(I.data)?I.data:[],z=new Set;let p=0,d=0;D.forEach(S=>{S.lottery_id&&z.add(S.lottery_id),p+=parseFloat(S.amount||0),S.status==="won"&&d++}),j.value={ticketsBought:D.length,lotteriesParticipated:z.size,totalSpent:p,prizesWon:d}}}catch(I){console.error("Erreur lors du chargement des statistiques:",I),j.value={ticketsBought:0,lotteriesParticipated:0,totalSpent:0,prizesWon:0}}},c=async()=>{try{const I=await _("/tickets/my-tickets?limit=5&order=desc");I&&I.success&&Array.isArray(I.data)?f.value=I.data.map(D=>({id:D.id,product:{id:D.product?.id||D.lottery?.product?.id,title:D.product?.name||D.lottery?.product?.name||"Produit inconnu",image:D.product?.image_url||D.lottery?.product?.image_url||"/images/products/placeholder.jpg"},quantity:D.quantity||1,total_price:E(D.amount||0),status:D.status||"active",purchased_at:new Date(D.created_at)})):f.value=[]}catch(I){console.error("Erreur lors du chargement des tickets récents:",I),f.value=[]}},y=async()=>{try{const I=await _("/lotteries/active?limit=6");I&&I.success&&Array.isArray(I.data)?h.value=I.data.map(D=>({id:D.id,product:{id:D.product?.id,title:D.product?.name||"Produit inconnu",price:E(D.product?.price||0),image:D.product?.image_url||D.product?.main_image||"/images/products/placeholder.jpg"},progress:Math.round(D.sold_tickets/D.total_tickets*100)||0,draw_date:new Date(D.end_date)})):h.value=[]}catch(I){console.error("Erreur lors du chargement des tombolas actives:",I),h.value=[]}},E=I=>{const D=parseFloat(I)||0;return D>=1e6?(D/1e6).toFixed(1)+"M FCFA":D>=1e3?(D/1e3).toFixed(0)+"k FCFA":D.toLocaleString()+" FCFA"};return{stats:$,recentTickets:f,activeLotteries:h,loading:v,error:M,loadDashboardData:async()=>{await Promise.all([i(),c(),y()])},loadDashboardStats:i,loadRecentTickets:c,loadActiveLotteries:y,formatCurrency:E,formatDate:I=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(I)}}const ov={class:"mb-8"},rv={class:"text-3xl font-bold text-gray-900"},av={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},nv={class:"flex items-center"},iv={class:"ml-4"},lv={class:"text-sm font-medium text-gray-600"},dv={class:"text-2xl font-bold text-gray-900"},cv={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},uv={class:"flex"},mv={class:"ml-3"},pv={class:"mt-1 text-sm text-red-700"},gv={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-8"},vv={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xv={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},fv={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},bv={class:"flex justify-between items-center mb-4"},hv={key:0,class:"text-center py-8"},yv={key:1,class:"space-y-4"},_v=["src","alt"],wv={class:"flex-1"},$v={class:"font-medium text-gray-900"},kv={class:"text-sm text-gray-600"},Cv={class:"text-xs text-gray-500"},jv={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},Av={class:"flex justify-between items-center mb-4"},Pv={class:"space-y-4"},Ev={class:"flex items-start space-x-4"},Iv=["src","alt"],Mv={class:"flex-1"},Dv={class:"font-medium text-gray-900 mb-1"},Lv={class:"text-sm text-gray-600 mb-2"},Sv={class:"mb-3"},Tv={class:"flex justify-between text-sm text-gray-600 mb-1"},Vv={class:"w-full bg-gray-200 rounded-full h-2"},Rv={class:"flex justify-between items-center"},Fv={class:"text-xs text-gray-500"},Nv={__name:"Dashboard",setup(_){const v=ve(),{stats:M,recentTickets:j,activeLotteries:f,loading:h,error:$,loadDashboardData:i,formatDate:c}=sv(),y={TicketIcon:Se,GiftIcon:Oe,CurrencyDollarIcon:Ie,TrophyIcon:qe},E=Q(()=>M.value.map(I=>({...I,icon:y[I.icon]||Se}))),V=I=>({active:"Actif",won:"Gagné",lost:"Perdu",pending:"En attente"})[I]||I,A=async()=>{await i()};return ce(async()=>{await i()}),(I,D)=>{const z=pe("router-link");return t(),s("div",null,[e("div",ov,[e("h1",rv," Bonjour "+o(u(v).user?.first_name)+" ! ",1),D[0]||(D[0]=e("p",{class:"mt-2 text-gray-600"}," Voici un aperçu de vos activités sur la plateforme ",-1))]),e("div",av,[u(h)?(t(),s(W,{key:0},J(4,p=>e("div",{key:p,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 animate-pulse"},D[1]||(D[1]=[oe('<div class="flex items-center"><div class="p-3 rounded-lg bg-gray-200"></div><div class="ml-4 flex-1"><div class="h-4 bg-gray-200 rounded w-20 mb-2"></div><div class="h-6 bg-gray-200 rounded w-16"></div></div></div>',1)]))),64)):(t(!0),s(W,{key:1},J(E.value,p=>(t(),s("div",{key:p.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200"},[e("div",nv,[e("div",{class:Z(["p-3 rounded-lg",p.color])},[(t(),ne(_e(p.icon),{class:"w-6 h-6 text-white"}))],2),e("div",iv,[e("p",lv,o(p.label),1),e("p",dv,o(p.value),1)])])]))),128))]),u($)&&!u(h)?(t(),s("div",cv,[e("div",uv,[e("div",mv,[D[2]||(D[2]=e("h3",{class:"text-sm font-medium text-red-800"},"Erreur de chargement",-1)),e("p",pv,o(u($)),1),e("button",{onClick:A,class:"mt-2 text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded"}," Réessayer ")])])])):U("",!0),e("div",gv,[D[6]||(D[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Actions rapides",-1)),e("div",vv,[b(z,{to:"/customer/products",class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-[#0099cc] hover:bg-blue-50 transition-colors"},{default:Y(()=>[b(u(Re),{class:"w-8 h-8 text-[#0099cc] mr-3"}),D[3]||(D[3]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Acheter des tickets"),e("p",{class:"text-sm text-gray-600"},"Découvrir les produits disponibles")],-1))]),_:1,__:[3]}),b(z,{to:"/customer/tickets",class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-black hover:bg-gray-50 transition-colors"},{default:Y(()=>[b(u(Se),{class:"w-8 h-8 text-black mr-3"}),D[4]||(D[4]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Mes tickets"),e("p",{class:"text-sm text-gray-600"},"Voir mes participations")],-1))]),_:1,__:[4]}),b(z,{to:"/customer/profile",class:"flex items-center p-4 border border-gray-200 rounded-lg hover:border-[#0099cc] hover:bg-blue-50 transition-colors"},{default:Y(()=>[b(u(Pe),{class:"w-8 h-8 text-[#0099cc] mr-3"}),D[5]||(D[5]=e("div",null,[e("p",{class:"font-medium text-gray-900"},"Mon profil"),e("p",{class:"text-sm text-gray-600"},"Gérer mes informations")],-1))]),_:1,__:[5]})])]),e("div",xv,[e("div",fv,[e("div",bv,[D[8]||(D[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Mes derniers tickets",-1)),b(z,{to:"/customer/tickets",class:"text-sm text-[#0099cc] hover:text-blue-700"},{default:Y(()=>D[7]||(D[7]=[O(" Voir tout ",-1)])),_:1,__:[7]})]),u(j).length===0?(t(),s("div",hv,[b(u(Se),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),D[10]||(D[10]=e("p",{class:"text-gray-600"},"Aucun ticket acheté pour le moment",-1)),b(z,{to:"/customer/products",class:"inline-block mt-2 text-[#0099cc] hover:text-blue-700"},{default:Y(()=>D[9]||(D[9]=[O(" Acheter des tickets ",-1)])),_:1,__:[9]})])):(t(),s("div",yv,[(t(!0),s(W,null,J(u(j),p=>(t(),s("div",{key:p.id,class:"flex items-center space-x-4 p-3 border border-gray-200 rounded-lg"},[e("img",{src:p.product.image_url||p.product.main_image||p.product.image,alt:p.product.title,class:"w-12 h-12 rounded-lg object-cover"},null,8,_v),e("div",wv,[e("p",$v,o(p.product.title),1),e("p",kv,o(p.quantity)+" ticket"+o(p.quantity>1?"s":"")+" - "+o(p.total_price)+" FCFA ",1),e("p",Cv,o(u(c)(p.purchased_at)),1)]),e("span",{class:Z(["px-2 py-1 text-xs font-medium rounded-full",p.status==="active"?"bg-[#0099cc] text-white":p.status==="won"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o(V(p.status)),3)]))),128))]))]),e("div",jv,[e("div",Av,[D[12]||(D[12]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Tombolas populaires",-1)),b(z,{to:"/customer/products",class:"text-sm text-[#0099cc] hover:text-blue-700"},{default:Y(()=>D[11]||(D[11]=[O(" Voir tout ",-1)])),_:1,__:[11]})]),e("div",Pv,[(t(!0),s(W,null,J(u(f),p=>(t(),s("div",{key:p.id,class:"border border-gray-200 rounded-lg p-4 hover:border-[#0099cc] transition-colors"},[e("div",Ev,[e("img",{src:p.product.image_url||p.product.main_image||p.product.image,alt:p.product.title,class:"w-16 h-16 rounded-lg object-cover"},null,8,Iv),e("div",Mv,[e("h4",Dv,o(p.product.title),1),e("p",Lv,o(p.product.price)+" FCFA",1),e("div",Sv,[e("div",Tv,[D[13]||(D[13]=e("span",null,"Progression",-1)),e("span",null,o(p.progress)+"%",1)]),e("div",Vv,[e("div",{class:"bg-[#0099cc] h-2 rounded-full transition-all duration-300",style:we({width:p.progress+"%"})},null,4)])]),e("div",Rv,[e("span",Fv," Tirage le "+o(u(c)(p.draw_date)),1),b(z,{to:`/customer/products/${p.product.id}`,class:"text-sm bg-[#0099cc] text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors"},{default:Y(()=>D[14]||(D[14]=[O(" Participer ",-1)])),_:2,__:[14]},1032,["to"])])])])]))),128))])])])])}}},zv={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6"},qv={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Uv=["value"],Bv={key:0,class:"text-center py-12"},Ov={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Hv={class:"relative"},Gv=["src","alt"],Kv={key:0,class:"absolute top-4 right-4"},Zv={class:"p-6"},Wv={class:"mb-4"},Jv={class:"text-xl font-semibold text-gray-900 mb-2"},Xv={class:"text-gray-600 text-sm"},Yv={class:"flex justify-between items-center mb-4"},Qv={class:"text-2xl font-bold text-blue-600"},e2={class:"text-right"},t2={class:"text-lg font-semibold text-gray-900"},s2={class:"mb-4"},o2={class:"flex justify-between text-sm text-gray-600 mb-1"},r2={class:"w-full bg-gray-200 rounded-full h-2"},a2={key:0,class:"mb-4 text-sm text-gray-600"},n2={class:"flex items-center mb-1"},i2={class:"flex items-center"},l2={key:2,class:"text-center py-12"},d2={key:3,class:"text-center mt-8"},c2={__name:"Products",setup(_){const{get:v,loading:M}=ae(),j=R(!0),f=R([]),h=R([]),$=R({search:"",category:"",maxPrice:""}),i=Q(()=>{let p=f.value;if($.value.search){const d=$.value.search.toLowerCase();p=p.filter(S=>S.title.toLowerCase().includes(d)||S.description.toLowerCase().includes(d))}if($.value.category&&(p=p.filter(d=>d.category_id==$.value.category)),$.value.maxPrice){const d=parseInt($.value.maxPrice);p=p.filter(S=>S.price<=d)}return p}),c=async()=>{try{const p=await v("/products");console.log("Products API response:",p),p&&p.success&&p.data&&p.data.products?f.value=p.data.products||[]:f.value=p.data||[]}catch(p){console.error("Erreur lors du chargement des produits:",p),f.value=[]}},y=async()=>{try{const p=await v("/categories");h.value=p.data||[]}catch(p){console.error("Erreur lors du chargement des catégories:",p)}},E=()=>{$.value={search:"",category:"",maxPrice:""}},V=p=>{if(!p)return"";const d=new Date(p);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(d)},A=p=>{if(!p)return"";const d=new Date,n=new Date(p)-d,l=Math.floor(n/(1e3*60*60*24));if(l>7)return`Plus de ${l} jours restants`;if(l>0)return`${l} jour${l>1?"s":""} restant${l>1?"s":""}`;{const a=Math.floor(n/36e5);return a>0?`${a}h restantes`:"Se termine bientôt"}},I=p=>p==null||isNaN(p)?"0":new Intl.NumberFormat("fr-FR").format(Number(p)),D=p=>{if(!p.lottery)return 0;const d=p.lottery.sold_tickets||0,S=p.lottery.total_tickets||1;return Math.round(d/S*100)},z=async()=>{console.log("Loading more products..."),j.value=!1};return ce(async()=>{await Promise.all([c(),y()])}),(p,d)=>{const S=pe("router-link");return t(),s("div",null,[d[17]||(d[17]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Produits disponibles"),e("p",{class:"mt-2 text-gray-600"},"Découvrez tous les produits que vous pouvez gagner")],-1)),e("div",zv,[e("div",qv,[e("div",null,[d[3]||(d[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":d[0]||(d[0]=n=>$.value.search=n),type:"text",placeholder:"Nom du produit...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,$.value.search]])]),e("div",null,[d[5]||(d[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),G(e("select",{"onUpdate:modelValue":d[1]||(d[1]=n=>$.value.category=n),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[d[4]||(d[4]=e("option",{value:""},"Toutes les catégories",-1)),(t(!0),s(W,null,J(h.value,n=>(t(),s("option",{key:n.id,value:n.id},o(n.name),9,Uv))),128))],512),[[ie,$.value.category]])]),e("div",null,[d[7]||(d[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix max",-1)),G(e("select",{"onUpdate:modelValue":d[2]||(d[2]=n=>$.value.maxPrice=n),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},d[6]||(d[6]=[oe('<option value="">Tous les prix</option><option value="100000">100,000 FCFA</option><option value="500000">500,000 FCFA</option><option value="1000000">1,000,000 FCFA</option><option value="2000000">2,000,000+ FCFA</option>',5)]),512),[[ie,$.value.maxPrice]])]),e("div",{class:"flex items-end"},[e("button",{onClick:E,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),u(M)?(t(),s("div",Bv,d[8]||(d[8]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des produits...",-1)]))):(t(),s("div",Ov,[(t(!0),s(W,null,J(i.value,n=>(t(),s("div",{key:n.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300"},[e("div",Hv,[e("img",{src:n.image_url||n.main_image||n.image||"/images/products/placeholder.jpg",alt:n.title,class:"w-full h-48 object-cover"},null,8,Gv),d[9]||(d[9]=e("div",{class:"absolute top-4 left-4"},[e("span",{class:Z(["px-2 py-1 text-xs font-medium rounded-full","bg-blue-100 text-blue-800"])}," Actif ")],-1)),n.featured?(t(),s("div",Kv,[b(u(Je),{class:"w-6 h-6 text-yellow-500 fill-current"})])):U("",!0)]),e("div",Zv,[e("div",Wv,[e("h3",Jv,o(n.title),1),e("p",Xv,o(n.description),1)]),e("div",Yv,[e("div",null,[e("span",Qv,o(I(n.price))+" FCFA",1),d[10]||(d[10]=e("p",{class:"text-sm text-gray-500"},"Valeur du produit",-1))]),e("div",e2,[e("span",t2,o(I(n.lottery?.ticket_price||1e3))+" FCFA",1),d[11]||(d[11]=e("p",{class:"text-sm text-gray-500"},"Par ticket",-1))])]),e("div",s2,[e("div",o2,[d[12]||(d[12]=e("span",null,"Progression",-1)),e("span",null,o(D(n))+"%",1)]),e("div",r2,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:we({width:D(n)+"%"})},null,4)])]),n.lottery?(t(),s("div",a2,[e("div",n2,[b(u(Vt),{class:"w-4 h-4 mr-2"}),e("span",null,"Tirage le "+o(V(n.lottery.draw_date)),1)]),e("div",i2,[b(u(Ke),{class:"w-4 h-4 mr-2"}),e("span",null,o(A(n.lottery.draw_date)),1)])])):U("",!0),b(S,{to:`/customer/products/${n.id}`,class:"block w-full text-center bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors"},{default:Y(()=>d[13]||(d[13]=[O(" Voir le produit ",-1)])),_:2,__:[13]},1032,["to"])])]))),128))])),!u(M)&&i.value.length===0?(t(),s("div",l2,[b(u(Re),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),d[14]||(d[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun produit trouvé",-1)),d[15]||(d[15]=e("p",{class:"text-gray-600"},"Essayez de modifier vos filtres de recherche",-1))])):U("",!0),!u(M)&&i.value.length>0&&j.value?(t(),s("div",d2,[e("button",{onClick:z,class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-blue-600 bg-blue-50 hover:bg-blue-100"},[d[16]||(d[16]=O(" Charger plus de produits ",-1)),b(u(at),{class:"ml-2 w-5 h-5"})])])):U("",!0)])}}},bt=(_="Image",v=400,M=300,j="#e2e8f0",f="#64748b")=>{const h=Math.min(v,M)/15,$=`
    <svg width="${v}" height="${M}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="${j}"/>
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" 
            fill="${f}" font-family="Arial, sans-serif" font-size="${h}" font-weight="bold">
        ${_}
      </text>
    </svg>
  `;return`data:image/svg+xml;base64,${btoa($)}`},u2=(_,v="Image",M=400,j=300)=>{if(!_)return bt(v,M,j);const f=_.image_url||_.main_image||_.image||_.avatar_url||_.images&&_.images[0];return f?f.startsWith("http")||f.startsWith("/")?f:`/storage/${f}`:bt(v,M,j)},m2=(_,v="Image non disponible")=>{console.log("Image loading error, using placeholder");const M=_.target,j=M.naturalWidth||M.width||400,f=M.naturalHeight||M.height||300;M.src=bt(v,j,f)},p2={key:0,class:"text-center py-12"},g2={key:1,class:"max-w-7xl mx-auto"},v2={class:"mb-6"},x2={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},f2={class:"relative"},b2=["src","alt"],h2={class:"absolute top-4 left-4"},y2={key:0,class:"absolute top-4 right-4"},_2={key:0,class:"grid grid-cols-4 gap-2 mt-4"},w2=["src","alt","onClick"],$2={class:"mb-6"},k2={class:"text-3xl font-bold text-gray-900 mb-4"},C2={class:"text-lg text-gray-600 mb-4"},j2={class:"flex items-center space-x-4 mb-6"},A2={class:"text-center"},P2={class:"text-3xl font-bold text-blue-600"},E2={class:"text-sm text-gray-500"},I2={key:0,class:"text-center"},M2={class:"text-xl font-semibold text-gray-900"},D2={key:0,class:"mb-6"},L2={class:"flex justify-between text-sm text-gray-600 mb-2"},S2={class:"w-full bg-gray-200 rounded-full h-3"},T2={class:"flex justify-between text-xs text-gray-500 mt-1"},V2={key:1,class:"mb-6 p-4 bg-gray-50 rounded-lg"},R2={class:"flex items-center mb-2"},F2={class:"font-medium text-gray-900"},N2={class:"flex items-center"},z2={class:"text-gray-600"},q2={class:"bg-white border border-gray-200 rounded-xl p-6 mb-6"},U2={key:0},B2={class:"flex items-center space-x-4 mb-4"},O2={class:"flex items-center space-x-2"},H2=["disabled"],G2=["max"],K2=["disabled"],Z2={class:"flex justify-between items-center mb-4"},W2={class:"text-2xl font-bold text-blue-600"},J2=["disabled"],X2={key:0},Y2={key:1},Q2={key:2},ex={key:1},tx={class:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200"},sx={class:"flex items-center mb-2"},ox={class:"flex justify-between items-center mb-6"},rx={class:"text-3xl font-bold text-blue-600"},ax=["disabled"],nx={key:0},ix={class:"mb-8"},lx={class:"border-b border-gray-200 mb-6"},dx={class:"flex space-x-8"},cx=["onClick"],ux={key:0,class:"prose max-w-none"},mx={class:"text-gray-600 leading-relaxed"},px={key:0,class:"space-y-2"},gx={class:"text-gray-600"},vx={key:1,class:"prose max-w-none"},xx={key:2},fx={class:"text-lg font-semibold mb-3"},bx={key:0,class:"text-center py-8"},hx={key:1,class:"space-y-3"},yx={class:"flex items-center"},_x={class:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},wx={class:"ml-3 text-gray-900"},$x={class:"text-sm text-gray-600"},kx={key:2,class:"text-center py-12"},Cx={__name:"ProductDetail",setup(_){const v=Ue();he();const{get:M,post:j,loading:f}=ae(),h=ve(),$=R(!1),i=R(null),c=R(1),y=R("description"),E=R(""),V=R([]),A=[{key:"description",label:"Description"},{key:"rules",label:"Règles"},{key:"participants",label:"Participants"}],I=Q(()=>i.value&&(i.value.lottery||i.value.active_lottery)&&(i.value.lottery?.total_tickets>0||i.value.active_lottery?.total_tickets>0)),D=Q(()=>{if(!i.value)return 0;const B=i.value.lottery||i.value.active_lottery;return B?(B.ticket_price||i.value.ticket_price||0)*c.value:0}),z=()=>{if(!i.value)return 0;const B=i.value.lottery||i.value.active_lottery;if(!B)return 0;const N=B.sold_tickets||0,w=B.total_tickets||1;return Math.round(N/w*100)},p=B=>B==null||isNaN(B)?"0":new Intl.NumberFormat("fr-FR").format(Number(B)),d=()=>{const B=i.value.lottery||i.value.active_lottery,N=(B?.total_tickets||0)-(B?.sold_tickets||0);c.value<N&&c.value++},S=()=>{c.value>1&&c.value--},n=B=>{if(!B)return"";const N=new Date(B);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(N)},l=B=>{if(!B)return"";const N=new Date,m=new Date(B)-N,r=Math.floor(m/(1e3*60*60*24));if(r>7)return`Plus de ${r} jours restants`;if(r>0)return`${r} jour${r>1?"s":""} restant${r>1?"s":""}`;{const k=Math.floor(m/36e5);return k>0?`${k}h restantes`:"Se termine bientôt"}},a=B=>u2(B,"Produit",400,300),L=B=>{m2(B,"Image non disponible")},K=B=>({active:"Actif",ending_soon:"Bientôt terminé",completed:"Terminé"})[B]||B,ee=async()=>{$.value=!0;try{const B=i.value.lottery||i.value.active_lottery,w=(B?.ticket_price||i.value.ticket_price||0)*c.value,m=h.user?.phone;if(!m){window.$toast&&window.$toast.error("Veuillez ajouter un numéro de téléphone à votre profil avant d'effectuer un achat.","📱 Téléphone requis");return}const r=await j("/tickets/purchase",{lottery_id:B?.id,quantity:c.value,phone_number:m,total_amount:w});if(r&&r.success)window.$toast&&window.$toast.success("🎉 Tickets achetés avec succès ! Confirmez le paiement sur votre téléphone.","✅ Achat initié"),await H(),c.value=1;else throw new Error(r?.message||"Erreur lors de l'achat des tickets")}catch(B){console.error("Error purchasing tickets:",B);const N=B.response?.data?.message||B.message||"Erreur lors de l'achat des tickets";window.$toast&&window.$toast.error(""+N," Erreur d'achat")}finally{$.value=!1}},se=async()=>{$.value=!0;try{const B=await j("/payments/initiate",{product_id:i.value.id,type:"product_purchase",amount:i.value.price});if(B&&B.success)window.$toast&&window.$toast.success("🎉 Produit acheté avec succès ! Vous recevrez une confirmation par SMS.","✅ Achat confirmé"),await H();else throw new Error(B?.message||"Erreur lors de l'achat")}catch(B){console.error("Error purchasing product directly:",B);const N=B.response?.data?.message||B.message||"Erreur lors de l'achat";window.$toast&&window.$toast.error(" "+N," Erreur d'achat")}finally{$.value=!1}},H=async()=>{try{const B=v.params.id;console.log("Loading product ID:",B);const N=await M(`/products/${B}`);console.log("Product API response:",N),N&&N.success&&N.data?(i.value=N.data,E.value=i.value.image||"/images/products/placeholder.jpg",(i.value.lottery||i.value.active_lottery)&&await F()):N&&N.data?(i.value=N.data,E.value=i.value.image||"/images/products/placeholder.jpg"):(console.error("Product not found in response:",N),i.value=null)}catch(B){console.error("Error loading product:",B),i.value=null}},F=async()=>{try{const B=i.value.lottery||i.value.active_lottery;B&&(console.log("Participants endpoint not available yet for lottery:",B.id),V.value=[])}catch(B){console.error("Error loading participants:",B),V.value=[]}};return ce(()=>{H()}),(B,N)=>{const w=pe("router-link");return u(f)?(t(),s("div",p2,N[1]||(N[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement du produit...",-1)]))):i.value?(t(),s("div",g2,[e("div",v2,[b(w,{to:"/customer/products",class:"inline-flex items-center text-gray-600 hover:text-gray-900"},{default:Y(()=>[b(u(ss),{class:"w-5 h-5 mr-2"}),N[2]||(N[2]=O(" Retour aux produits ",-1))]),_:1,__:[2]})]),e("div",x2,[e("div",null,[e("div",f2,[e("img",{src:a(i.value),alt:i.value.title||i.value.name,class:"w-full h-96 object-cover rounded-xl",onError:L},null,40,b2),e("div",h2,[e("span",{class:Z(["px-3 py-1 text-sm font-medium rounded-full",i.value.status==="active"?"bg-blue-100 text-blue-800":i.value.status==="ending_soon"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o(K(i.value.status)),3)]),i.value.featured?(t(),s("div",y2,[b(u(Je),{class:"w-8 h-8 text-yellow-500 fill-current"})])):U("",!0)]),i.value.gallery&&i.value.gallery.length>0?(t(),s("div",_2,[(t(!0),s(W,null,J(i.value.gallery,(m,r)=>(t(),s("img",{key:r,src:m,alt:`${i.value.title} ${r+1}`,class:"w-full h-20 object-cover rounded-lg cursor-pointer hover:opacity-75 transition-opacity",onClick:k=>E.value=m},null,8,w2))),128))])):U("",!0)]),e("div",null,[e("div",$2,[e("h1",k2,o(i.value.title||i.value.name),1),e("p",C2,o(i.value.description),1),e("div",j2,[e("div",A2,[e("div",P2,o(p(i.value.price))+" FCFA",1),e("div",E2,o(I.value?"Valeur du produit":"Prix"),1)]),I.value?(t(),s("div",I2,[e("div",M2,o(p(i.value.lottery?.ticket_price||i.value.active_lottery?.ticket_price||i.value.ticket_price||0))+" FCFA",1),N[3]||(N[3]=e("div",{class:"text-sm text-gray-500"},"Prix par ticket",-1))])):U("",!0)]),I.value?(t(),s("div",D2,[e("div",L2,[N[4]||(N[4]=e("span",null,"Progression de la tombola",-1)),e("span",null,o(z())+"% ("+o(i.value.lottery?.sold_tickets||i.value.active_lottery?.sold_tickets||0)+"/"+o(i.value.lottery?.total_tickets||i.value.active_lottery?.total_tickets||0)+")",1)]),e("div",S2,[e("div",{class:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:we({width:z()+"%"})},null,4)]),e("div",T2,[N[5]||(N[5]=e("span",null,"0 tickets",-1)),e("span",null,o(i.value.lottery?.total_tickets||i.value.active_lottery?.total_tickets||0)+" tickets",1)])])):U("",!0),I.value?(t(),s("div",V2,[e("div",R2,[b(u(Vt),{class:"w-5 h-5 text-gray-600 mr-2"}),e("span",F2,"Date de tirage: "+o(n(i.value.lottery?.draw_date||i.value.active_lottery?.draw_date)),1)]),e("div",N2,[b(u(Ke),{class:"w-5 h-5 text-gray-600 mr-2"}),e("span",z2,o(l(i.value.lottery?.draw_date||i.value.active_lottery?.draw_date)),1)])])):U("",!0)]),e("div",q2,[I.value?(t(),s("div",U2,[N[8]||(N[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Acheter des tickets",-1)),e("div",B2,[N[6]||(N[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nombre de tickets:",-1)),e("div",O2,[e("button",{onClick:S,class:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",disabled:c.value<=1},[b(u(gs),{class:"w-4 h-4"})],8,H2),G(e("input",{"onUpdate:modelValue":N[0]||(N[0]=m=>c.value=m),type:"number",min:"1",max:(i.value.lottery?.total_tickets||i.value.active_lottery?.total_tickets||0)-(i.value.lottery?.sold_tickets||i.value.active_lottery?.sold_tickets||0),class:"w-20 text-center border border-gray-300 rounded-md py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,G2),[[X,c.value]]),e("button",{onClick:d,class:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50",disabled:c.value>=(i.value.lottery?.total_tickets||0)-(i.value.lottery?.sold_tickets||0)},[b(u(vt),{class:"w-4 h-4"})],8,K2)])]),e("div",Z2,[N[7]||(N[7]=e("span",{class:"text-gray-600"},"Total à payer:",-1)),e("span",W2,o(p(D.value))+" FCFA",1)]),e("button",{onClick:ee,disabled:$.value||i.value.status!=="active",class:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},[$.value?(t(),s("span",X2,"Achat en cours...")):i.value.status!=="active"?(t(),s("span",Y2,"Tombola terminée")):(t(),s("span",Q2,"Acheter "+o(c.value)+" ticket"+o(c.value>1?"s":""),1))],8,J2)])):(t(),s("div",ex,[N[14]||(N[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Acheter ce produit",-1)),e("div",tx,[e("div",sx,[b(u(je),{class:"w-5 h-5 text-green-600 mr-2"}),N[9]||(N[9]=e("span",{class:"font-medium text-green-900"},"Achat direct disponible",-1))]),N[10]||(N[10]=e("p",{class:"text-sm text-green-700"}," Ce produit peut être acheté directement sans passer par une tombola. ",-1))]),e("div",ox,[N[11]||(N[11]=e("span",{class:"text-gray-600 text-lg"},"Prix:",-1)),e("span",rx,o(i.value.price)+" FCFA",1)]),e("button",{onClick:se,disabled:$.value,class:"w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center space-x-2"},[$.value?(t(),s("span",nx,"Achat en cours...")):(t(),s(W,{key:1},[N[12]||(N[12]=e("span",null,"🛒",-1)),N[13]||(N[13]=e("span",null,"Acheter maintenant",-1))],64))],8,ax)]))])])]),e("div",ix,[e("div",lx,[e("nav",dx,[(t(),s(W,null,J(A,m=>e("button",{key:m.key,onClick:r=>y.value=m.key,class:Z(["py-2 px-1 border-b-2 font-medium text-sm",y.value===m.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},o(m.label),11,cx)),64))])]),y.value==="description"?(t(),s("div",ux,[N[15]||(N[15]=e("h3",{class:"text-lg font-semibold mb-3"},"Description détaillée",-1)),e("p",mx,o(i.value.detailed_description||i.value.description),1),N[16]||(N[16]=e("h4",{class:"text-md font-semibold mt-6 mb-3"},"Caractéristiques",-1)),i.value.features?(t(),s("ul",px,[(t(!0),s(W,null,J(i.value.features,m=>(t(),s("li",{key:m,class:"flex items-center"},[b(u(je),{class:"w-5 h-5 text-blue-500 mr-2 flex-shrink-0"}),e("span",gx,o(m),1)]))),128))])):U("",!0)])):U("",!0),y.value==="rules"?(t(),s("div",vx,N[17]||(N[17]=[e("h3",{class:"text-lg font-semibold mb-3"},"Règles de la tombola",-1),e("div",{class:"space-y-4 text-gray-600"},[e("p",null,"• Chaque ticket acheté vous donne une chance de gagner ce produit"),e("p",null,"• Le tirage aura lieu à la date indiquée une fois tous les tickets vendus"),e("p",null,"• Le gagnant sera choisi de manière aléatoire et équitable"),e("p",null,"• Vous serez notifié par email et SMS si vous gagnez"),e("p",null,"• Les prix non réclamés dans les 30 jours seront remis en jeu")],-1)]))):U("",!0),y.value==="participants"?(t(),s("div",xx,[e("h3",fx,"Participants ("+o(i.value.sold_tickets)+")",1),V.value.length===0?(t(),s("div",bx,[b(u(Ye),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),N[18]||(N[18]=e("p",{class:"text-gray-600"},"Soyez le premier à participer !",-1))])):(t(),s("div",hx,[(t(!0),s(W,null,J(V.value,m=>(t(),s("div",{key:m.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",yx,[e("div",_x,o(m.name.charAt(0).toUpperCase()),1),e("span",wx,o(m.name),1)]),e("span",$x,o(m.tickets)+" ticket"+o(m.tickets>1?"s":""),1)]))),128))]))])):U("",!0)])])):(t(),s("div",kx,[b(u(Be),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),N[20]||(N[20]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Produit introuvable",-1)),N[21]||(N[21]=e("p",{class:"text-gray-600 mb-4"},"Le produit que vous cherchez n'existe pas ou a été supprimé",-1)),b(w,{to:"/customer/products",class:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},{default:Y(()=>N[19]||(N[19]=[O(" Retour aux produits ",-1)])),_:1,__:[19]})]))}}},jx={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ax={class:"lg:col-span-1"},Px={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ex={class:"text-center mb-6"},Ix={class:"relative inline-block"},Mx=["src","alt"],Dx={class:"mt-4 text-lg font-semibold text-gray-900"},Lx={class:"text-sm text-gray-600"},Sx={class:"space-y-1"},Tx=["onClick"],Vx={class:"lg:col-span-2"},Rx={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Fx={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Nx={class:"mt-6 flex justify-end"},zx=["disabled"],qx={key:0},Ux={key:1},Bx={key:1,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ox={class:"space-y-4"},Hx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Gx={class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"},Kx={class:"mt-6 flex justify-end"},Zx=["disabled"],Wx={key:0},Jx={key:1},Xx={key:2,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Yx={class:"space-y-6"},Qx={class:"border-b border-gray-200 pb-6"},ef=["disabled"],tf={key:0},sf={key:1},of={class:"border-b border-gray-200 pb-6"},rf={class:"flex justify-between items-start"},af={class:"space-y-3"},nf={class:"flex items-center"},lf={class:"font-medium text-gray-900"},df={class:"text-sm text-gray-600"},cf={class:"flex items-center"},uf={key:0,class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mr-3"},mf=["onClick"],pf={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},gf={class:"space-y-6"},vf={class:"text-lg font-medium text-gray-900 mb-3"},xf={class:"space-y-3"},ff={class:"flex-1"},bf={class:"font-medium text-gray-900"},hf={class:"text-sm text-gray-600"},yf={class:"ml-4 flex space-x-4"},_f={class:"flex items-center"},wf=["onUpdate:modelValue"],$f={class:"flex items-center"},kf=["onUpdate:modelValue"],Cf={class:"mt-6 flex justify-end"},jf=["disabled"],Af={key:0},Pf={key:1},Ef={key:0,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},If={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},Mf={class:"mb-4"},Df={class:"flex justify-end space-x-3"},Lf=["disabled"],Sf={__name:"Profile",setup(_){ve();const{get:v,put:M,post:j}=ae(),f=R("personal"),h=R(!1),$=R(!1),i=R(!1),c=R(!1),y=R(!1),E=R(null),V=R(null),A=[{key:"personal",label:"Informations personnelles",icon:Pe},{key:"address",label:"Adresse",icon:gt},{key:"security",label:"Sécurité",icon:dt},{key:"notifications",label:"Notifications",icon:nt}],I=de({id:null,first_name:"",last_name:"",email:"",phone:"",birth_date:"",gender:"",avatar:null,two_factor_enabled:!1,address:{address:"",city:"",postal_code:"",country_id:null,state:""}}),D=de({first_name:I.first_name,last_name:I.last_name,email:I.email,phone:I.phone,birth_date:I.birth_date,gender:I.gender}),z=de({address:I.address.address,city:I.address.city,postal_code:I.address.postal_code,country_id:I.address.country_id}),p=de({current_password:"",new_password:"",confirm_password:""}),d=R([]),S=R([]),n=[{key:"lottery",title:"Tombolas",notifications:[{key:"draw_results",title:"Résultats des tirages",description:"Être notifié des résultats des tombolas auxquelles vous participez"},{key:"new_lottery",title:"Nouvelles tombolas",description:"Être informé des nouveaux produits mis en tombola"},{key:"ending_soon",title:"Fin de tombola",description:"Rappel quand une tombola se termine bientôt"}]},{key:"account",title:"Compte",notifications:[{key:"login",title:"Nouvelle connexion",description:"Être alerté des nouvelles connexions à votre compte"},{key:"profile_update",title:"Modification du profil",description:"Confirmation des modifications de votre profil"}]}],l=de({draw_results:{email:!0,sms:!0},new_lottery:{email:!0,sms:!1},ending_soon:{email:!0,sms:!0},login:{email:!0,sms:!1},profile_update:{email:!0,sms:!1}}),a=async()=>{h.value=!0;try{console.log("Updating personal info with data:",D);const P=await M("/user/profile",D);if(console.log("Update personal info response:",P),P&&P.success)Object.assign(I,D),window.$toast&&window.$toast.success("Informations personnelles mises à jour avec succès","✅ Profil mis à jour");else throw new Error(P?.message||"Erreur lors de la mise à jour")}catch(P){console.error("Error updating personal info:",P),console.error("Error details:",P.response?.data),window.$toast&&window.$toast.error("Erreur lors de la mise à jour: "+(P.response?.data?.message||P.message)," Erreur")}finally{h.value=!1}},L=async()=>{$.value=!0;try{console.log("Updating address with data:",z);const P=await M("/user/profile",z);if(console.log("Update address response:",P),P&&P.success)Object.assign(I,z),window.$toast&&window.$toast.success("Adresse mise à jour avec succès","✅ Adresse");else throw new Error(P?.message||"Erreur lors de la mise à jour")}catch(P){console.error("Error updating address:",P),console.error("Error details:",P.response?.data),window.$toast&&window.$toast.error("Erreur lors de la mise à jour: "+(P.response?.data?.message||P.message)," Erreur")}finally{$.value=!1}},K=async()=>{if(p.new_password!==p.confirm_password){window.$toast&&window.$toast.error("Les mots de passe ne correspondent pas","❌ Erreur de validation");return}i.value=!0;try{const P=await M("/user/password",{current_password:p.current_password,new_password:p.new_password,new_password_confirmation:p.confirm_password});if(P&&P.success)Object.assign(p,{current_password:"",new_password:"",confirm_password:""}),window.$toast&&window.$toast.success("Mot de passe mis à jour avec succès","✅ Sécurité");else throw new Error(P?.message||"Erreur lors de la mise à jour")}catch(P){console.error("Error updating password:",P),window.$toast&&window.$toast.error("Erreur lors de la mise à jour du mot de passe","❌ Erreur")}finally{i.value=!1}},ee=async()=>{c.value=!0;try{const P=await M("/user/preferences/detailed",{email_notifications:{lottery_results:l.draw_results.email,new_lotteries:l.new_lottery.email,ending_soon:l.ending_soon.email,account_updates:l.profile_update.email,login_alerts:l.login.email},sms_notifications:{lottery_results:l.draw_results.sms,new_lotteries:l.new_lottery.sms,ending_soon:l.ending_soon.sms,account_updates:l.profile_update.sms,login_alerts:l.login.sms},push_notifications:!0,marketing_emails:!0});if(P&&P.success)window.$toast&&window.$toast.success("Préférences de notifications mises à jour","✅ Notifications");else throw new Error(P?.message||"Erreur lors de la mise à jour")}catch(P){console.error("Error updating notifications:",P),window.$toast&&window.$toast.error("Erreur lors de la mise à jour des notifications","❌ Erreur")}finally{c.value=!1}},se=async()=>{try{const P=await j("/user/2fa/toggle",{enabled:!I.two_factor_enabled});if(P&&P.success)I.two_factor_enabled=!I.two_factor_enabled,window.$toast&&window.$toast.success(`Authentification à deux facteurs ${I.two_factor_enabled?"activée":"désactivée"}`,"✅ Sécurité mise à jour");else throw new Error(P?.message||"Erreur lors de la modification")}catch(P){console.error("Error toggling two-factor authentication:",P),window.$toast&&window.$toast.error("Erreur lors de la modification de l'authentification à deux facteurs","❌ Erreur")}},H=async P=>{try{const x=await j(`/user/sessions/${P}/revoke`);if(x&&x.success)S.value=S.value.filter(q=>q.id!==P),window.$toast&&window.$toast.success("Session révoquée avec succès","✅ Sécurité");else throw new Error(x?.message||"Erreur lors de la révocation")}catch(x){console.error("Error revoking session:",x),window.$toast&&window.$toast.error("Erreur lors de la révocation de la session","❌ Erreur")}},F=P=>{const x=P.target.files[0];x&&(E.value=x)},B=async()=>{if(E.value)try{const P=new FormData;P.append("avatar",E.value),console.log("Uploading avatar:",E.value);const x=await j("/user/avatar",P);if(console.log("Avatar upload response:",x),x&&x.success&&x.data)I.avatar=x.data.avatar_url,I.avatar_url=x.data.avatar_url,y.value=!1,E.value=null,window.$toast&&window.$toast.success("Photo de profil mise à jour avec succès","✅ Avatar"),await N();else throw new Error(x?.message||"Erreur lors du téléchargement")}catch(P){console.error("Error uploading avatar:",P),window.$toast&&window.$toast.error("Erreur lors du téléchargement de la photo","❌ Erreur")}},N=async()=>{try{const P=await v("/user/profile");if(console.log("Profile API response:",P),P&&P.success&&P.data&&P.data.user){const x=P.data.user;Object.assign(I,x),Object.assign(D,{first_name:x.first_name||"",last_name:x.last_name||"",email:x.email||"",phone:x.phone||"",birth_date:x.birth_date||"",gender:x.gender||""}),Object.assign(z,{address:x.address||"",city:x.city||"",postal_code:x.postal_code||"",country_id:x.country_id||null}),console.log("User data loaded:",x),console.log("Personal form:",D),console.log("Address form:",z),setTimeout(()=>{V.value&&D.phone&&V.value.setNumber(D.phone)},100)}else if(P&&P.data){const x=P.data;Object.assign(I,x),Object.assign(D,{first_name:x.first_name||"",last_name:x.last_name||"",email:x.email||"",phone:x.phone||"",birth_date:x.birth_date||"",gender:x.gender||""}),Object.assign(z,{address:x.address||"",city:x.city||"",postal_code:x.postal_code||"",country_id:x.country_id||null}),setTimeout(()=>{V.value&&D.phone&&V.value.setNumber(D.phone)},100)}}catch(P){console.error("Error loading user profile:",P)}},w=async()=>{try{const P=await v("/countries");P&&P.data&&(d.value=P.data)}catch(P){console.error("Error loading countries:",P)}},m=async()=>{try{const P=await v("/user/preferences");if(P&&P.data&&P.data.preferences){const x=P.data.preferences;x.email_notifications&&(l.draw_results.email=x.email_notifications.lottery_results||!0,l.new_lottery.email=x.email_notifications.new_lotteries||!0,l.ending_soon.email=x.email_notifications.ending_soon||!0,l.profile_update.email=x.email_notifications.account_updates||!0,l.login.email=x.email_notifications.login_alerts||!0),x.sms_notifications&&(l.draw_results.sms=x.sms_notifications.lottery_results||!1,l.new_lottery.sms=x.sms_notifications.new_lotteries||!1,l.ending_soon.sms=x.sms_notifications.ending_soon||!1,l.profile_update.sms=x.sms_notifications.account_updates||!1,l.login.sms=x.sms_notifications.login_alerts||!1)}}catch(P){console.error("Error loading user preferences:",P)}},r=P=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(P)),k=async()=>{try{const P=await v("/user/sessions");P&&P.data&&P.data.sessions&&(S.value=P.data.sessions.map(x=>({id:x.id,device_name:x.user_agent?.includes("Mobile")?"Mobile":"Desktop",device_type:x.user_agent?.includes("Mobile")?"mobile":"desktop",location:`${x.city||"Inconnue"}, ${x.country||"Inconnue"}`,last_active:x.last_activity,is_current:x.is_current})))}catch(P){console.error("Error loading sessions:",P)}};return ce(async()=>{await Promise.all([N(),w(),m(),k()])}),(P,x)=>(t(),s("div",null,[x[41]||(x[41]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mon profil"),e("p",{class:"mt-2 text-gray-600"},"Gérez vos informations personnelles et préférences")],-1)),e("div",jx,[e("div",Ax,[e("div",Px,[e("div",Ex,[e("div",Ix,[e("img",{src:I.avatar_url?`/storage/${I.avatar_url}`:"https://ui-avatars.com/api/?name="+encodeURIComponent((I.first_name||"")+"+"+(I.last_name||""))+"&background=3b82f6&color=ffffff&size=128",alt:I.first_name+" "+I.last_name,class:"w-24 h-24 rounded-full object-cover"},null,8,Mx),e("button",{onClick:x[0]||(x[0]=q=>y.value=!0),class:"absolute bottom-0 right-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors"},[b(u(At),{class:"w-4 h-4"})])]),e("h3",Dx,o(I.first_name)+" "+o(I.last_name),1),e("p",Lx,o(I.email),1)]),e("nav",Sx,[(t(),s(W,null,J(A,q=>e("button",{key:q.key,onClick:T=>f.value=q.key,class:Z(["w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",f.value===q.key?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"])},[(t(),ne(_e(q.icon),{class:"w-5 h-5 mr-3"})),O(" "+o(q.label),1)],10,Tx)),64))])])]),e("div",Vx,[f.value==="personal"?(t(),s("div",Rx,[x[22]||(x[22]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Informations personnelles",-1)),e("form",{onSubmit:ge(a,["prevent"])},[e("div",Fx,[e("div",null,[x[15]||(x[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prénom",-1)),G(e("input",{"onUpdate:modelValue":x[1]||(x[1]=q=>D.first_name=q),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,D.first_name]])]),e("div",null,[x[16]||(x[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom",-1)),G(e("input",{"onUpdate:modelValue":x[2]||(x[2]=q=>D.last_name=q),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,D.last_name]])]),e("div",null,[x[17]||(x[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),G(e("input",{"onUpdate:modelValue":x[3]||(x[3]=q=>D.email=q),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,D.email]])]),e("div",null,[x[18]||(x[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),b(ct,{ref_key:"phoneInputRef",ref:V,modelValue:D.phone,"onUpdate:modelValue":x[4]||(x[4]=q=>D.phone=q),class:"w-full","initial-country":"ga","preferred-countries":["ga","cm","ci","cg","cf","td","gq","bf","bj","tg","fr","ca"]},null,8,["modelValue"])]),e("div",null,[x[19]||(x[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de naissance",-1)),G(e("input",{"onUpdate:modelValue":x[5]||(x[5]=q=>D.birth_date=q),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,D.birth_date]])]),e("div",null,[x[21]||(x[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Genre",-1)),G(e("select",{"onUpdate:modelValue":x[6]||(x[6]=q=>D.gender=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},x[20]||(x[20]=[e("option",{value:""},"Sélectionner...",-1),e("option",{value:"male"},"Homme",-1),e("option",{value:"female"},"Femme",-1),e("option",{value:"other"},"Autre",-1)]),512),[[ie,D.gender]])])]),e("div",Nx,[e("button",{type:"submit",disabled:h.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[h.value?(t(),s("span",qx,"Mise à jour...")):(t(),s("span",Ux,"Mettre à jour"))],8,zx)])],32)])):U("",!0),f.value==="address"?(t(),s("div",Bx,[x[28]||(x[28]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Adresse",-1)),e("form",{onSubmit:ge(L,["prevent"])},[e("div",Ox,[e("div",null,[x[23]||(x[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse",-1)),G(e("input",{"onUpdate:modelValue":x[7]||(x[7]=q=>z.address=q),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,z.address]])]),e("div",Hx,[e("div",null,[x[24]||(x[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),G(e("input",{"onUpdate:modelValue":x[8]||(x[8]=q=>z.city=q),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,z.city]])]),e("div",null,[x[25]||(x[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code postal",-1)),G(e("input",{"onUpdate:modelValue":x[9]||(x[9]=q=>z.postal_code=q),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,z.postal_code]])])]),e("div",null,[x[27]||(x[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays",-1)),e("div",Gx,[O(o(I.country?.name||"Non spécifié")+" ",1),x[26]||(x[26]=e("div",{class:"text-xs text-gray-500 mt-1"},"Le pays n'est pas modifiable après l'inscription",-1))])])]),e("div",Kx,[e("button",{type:"submit",disabled:$.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[$.value?(t(),s("span",Wx,"Mise à jour...")):(t(),s("span",Jx,"Mettre à jour"))],8,Zx)])],32)])):U("",!0),f.value==="security"?(t(),s("div",Xx,[x[35]||(x[35]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Sécurité",-1)),e("div",Yx,[e("div",Qx,[x[32]||(x[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Changer le mot de passe",-1)),e("form",{onSubmit:ge(K,["prevent"]),class:"space-y-4"},[e("div",null,[x[29]||(x[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel",-1)),G(e("input",{"onUpdate:modelValue":x[10]||(x[10]=q=>p.current_password=q),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,p.current_password]])]),e("div",null,[x[30]||(x[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),G(e("input",{"onUpdate:modelValue":x[11]||(x[11]=q=>p.new_password=q),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,p.new_password]])]),e("div",null,[x[31]||(x[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le nouveau mot de passe",-1)),G(e("input",{"onUpdate:modelValue":x[12]||(x[12]=q=>p.confirm_password=q),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:"#5f5f5f"}},null,512),[[X,p.confirm_password]])]),e("button",{type:"submit",disabled:i.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[i.value?(t(),s("span",tf,"Mise à jour...")):(t(),s("span",sf,"Changer le mot de passe"))],8,ef)],32)]),e("div",of,[e("div",rf,[x[33]||(x[33]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Authentification à deux facteurs"),e("p",{class:"text-sm text-gray-600 mt-1"},"Ajoutez une couche de sécurité supplémentaire à votre compte")],-1)),e("button",{onClick:se,class:Z(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",I.two_factor_enabled?"bg-blue-600":"bg-gray-200"])},[e("span",{class:Z(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",I.two_factor_enabled?"translate-x-5":"translate-x-0"])},null,2)],2)])]),e("div",null,[x[34]||(x[34]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Sessions de connexion",-1)),e("div",af,[(t(!0),s(W,null,J(S.value,q=>(t(),s("div",{key:q.id,class:"flex justify-between items-center p-4 border border-gray-200 rounded-lg"},[e("div",nf,[q.device_type==="mobile"?(t(),ne(u(ls),{key:0,class:"w-6 h-6 text-gray-600 mr-3"})):(t(),ne(u(ns),{key:1,class:"w-6 h-6 text-gray-600 mr-3"})),e("div",null,[e("p",lf,o(q.device_name),1),e("p",df,o(q.location)+" • "+o(r(q.last_active)),1)])]),e("div",cf,[q.is_current?(t(),s("span",uf," Session actuelle ")):U("",!0),q.is_current?U("",!0):(t(),s("button",{key:1,onClick:T=>H(q.id),class:"text-sm text-red-600 hover:text-red-700"}," Révoquer ",8,mf))])]))),128))])])])])):U("",!0),f.value==="notifications"?(t(),s("div",pf,[x[38]||(x[38]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Préférences de notification",-1)),e("form",{onSubmit:ge(ee,["prevent"])},[e("div",gf,[(t(),s(W,null,J(n,q=>e("div",{key:q.key,class:"border-b border-gray-200 pb-6 last:border-b-0 last:pb-0"},[e("h3",vf,o(q.title),1),e("div",xf,[(t(!0),s(W,null,J(q.notifications,T=>(t(),s("div",{key:T.key,class:"flex justify-between items-start"},[e("div",ff,[e("p",bf,o(T.title),1),e("p",hf,o(T.description),1)]),e("div",yf,[e("label",_f,[G(e("input",{"onUpdate:modelValue":g=>l[T.key].email=g,type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,wf),[[Ee,l[T.key].email]]),x[36]||(x[36]=e("span",{class:"ml-2 text-sm text-gray-700"},"Email",-1))]),e("label",$f,[G(e("input",{"onUpdate:modelValue":g=>l[T.key].sms=g,type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,kf),[[Ee,l[T.key].sms]]),x[37]||(x[37]=e("span",{class:"ml-2 text-sm text-gray-700"},"SMS",-1))])])]))),128))])])),64))]),e("div",Cf,[e("button",{type:"submit",disabled:c.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[c.value?(t(),s("span",Af,"Mise à jour...")):(t(),s("span",Pf,"Sauvegarder les préférences"))],8,jf)])],32)])):U("",!0)])]),y.value?(t(),s("div",Ef,[e("div",If,[x[40]||(x[40]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Changer la photo de profil",-1)),e("div",Mf,[e("input",{ref:"avatarInput",type:"file",accept:"image/*",onChange:F,class:"hidden"},null,544),e("button",{onClick:x[13]||(x[13]=q=>P.$refs.avatarInput.click()),class:"w-full p-4 border-2 border-dashed border-gray-300 rounded-lg text-center hover:border-blue-500 transition-colors"},[b(u(At),{class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),x[39]||(x[39]=e("p",{class:"text-sm text-gray-600"},"Cliquez pour choisir une image",-1))])]),e("div",Df,[e("button",{onClick:x[14]||(x[14]=q=>y.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-900"}," Annuler "),e("button",{onClick:B,disabled:!E.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"}," Sauvegarder ",8,Lf)])])])):U("",!0)]))}};function Tf(){const{get:_,post:v,loading:M,error:j}=ae(),f=R([]),h=R({totalTickets:0,prizesWon:0,totalSpent:0,activeTickets:0}),$=R(1),i=R(!0),c=R(10),y=R(0),E=R({search:"",status:"",period:""}),V=Q(()=>{let H=f.value;if(E.value.search){const F=E.value.search.toLowerCase();H=H.filter(B=>B.product.title.toLowerCase().includes(F)||B.product.description.toLowerCase().includes(F))}if(E.value.status&&(H=H.filter(F=>F.status===E.value.status)),E.value.period){const F=new Date,B=E.value.period;H=H.filter(N=>{const w=new Date(N.purchased_at);if(B==="week"){const m=new Date(F.getTime()-6048e5);return w>=m}else if(B==="month"){const m=new Date(F.getFullYear(),F.getMonth()-1,F.getDate());return w>=m}else if(B==="quarter"){const m=new Date(F.getFullYear(),F.getMonth()-3,F.getDate());return w>=m}return!0})}return H.sort((F,B)=>new Date(B.purchased_at)-new Date(F.purchased_at))}),A=Q(()=>[{label:"Total tickets",value:h.value.totalTickets.toString(),color:"bg-blue-500",icon:"TicketIcon"},{label:"Prix gagnés",value:h.value.prizesWon.toString(),color:"bg-blue-500",icon:"TrophyIcon"},{label:"Total dépensé",value:L(h.value.totalSpent),color:"bg-yellow-500",icon:"CurrencyDollarIcon"},{label:"En cours",value:h.value.activeTickets.toString(),color:"bg-purple-500",icon:"ClockIcon"}]),I=async(H=1,F=!1)=>{try{const B=new URLSearchParams({page:H.toString(),per_page:c.value.toString()});E.value.search&&B.append("search",E.value.search),E.value.status&&B.append("status",E.value.status),E.value.period&&B.append("period",E.value.period);const N=await _(`/tickets/my-tickets?${B.toString()}`);if(N&&N.success){const w=N.data||[],m=N.pagination||{},r=w.map(k=>({id:k.id,product:{id:k.product?.id||k.lottery?.product?.id,title:k.product?.name||k.lottery?.product?.name||"Produit inconnu",description:k.product?.description||k.lottery?.product?.description||"",image:k.product?.image_url||k.lottery?.product?.image_url||"/images/products/placeholder.jpg"},lottery:{id:k.lottery?.id,draw_date:new Date(k.lottery?.end_date||k.lottery?.draw_date),progress:Math.round(k.lottery?.sold_tickets/k.lottery?.total_tickets*100)||0,winning_number:k.lottery?.winning_number||null},quantity:k.quantity||1,total_price:k.amount||0,status:k.status||"active",purchased_at:new Date(k.created_at),ticket_numbers:k.ticket_numbers||[],winning_number:k.winning_number||null,prize_claimed:k.prize_claimed||!1}));F?f.value=[...f.value,...r]:f.value=r,$.value=m.current_page||H,y.value=m.total||r.length,i.value=m.current_page<m.last_page,p()}}catch(B){console.error("Erreur lors du chargement des tickets:",B)}},D=async()=>{i.value&&!M.value&&await I($.value+1,!0)},z=async()=>{$.value=1,await I(1,!1)},p=()=>{const H=f.value.length,F=f.value.filter(w=>w.status==="won").length,B=f.value.reduce((w,m)=>{const r=parseFloat(m.total_price)||0;return w+r},0),N=f.value.filter(w=>w.status==="active"||w.status==="pending").length;h.value={totalTickets:H,prizesWon:F,totalSpent:B,activeTickets:N}},d=async H=>{try{const F=await v(`/tickets/${H}/claim-prize`);if(F&&F.success){const B=f.value.findIndex(N=>N.id===H);return B!==-1&&(f.value[B].prize_claimed=!0),F}}catch(F){throw console.error("Erreur lors de la réclamation du prix:",F),F}},S=async H=>{try{const F=await _(`/tickets/${H}/download`);if(F)if(typeof F=="string"&&F.startsWith("http")){const B=document.createElement("a");B.href=F,B.setAttribute("download",`ticket-${H}.pdf`),B.setAttribute("target","_blank"),document.body.appendChild(B),B.click(),B.remove()}else{const B=window.URL.createObjectURL(new Blob([F])),N=document.createElement("a");N.href=B,N.setAttribute("download",`ticket-${H}.pdf`),document.body.appendChild(N),N.click(),N.remove(),window.URL.revokeObjectURL(B)}}catch(F){throw console.error("Erreur lors du téléchargement du ticket:",F),F}},n=()=>{E.value={search:"",status:"",period:""},z()},l=()=>{z()};ke(()=>E.value,()=>{clearTimeout(a),a=setTimeout(()=>{l()},500)},{deep:!0});let a=null;const L=H=>{const F=parseFloat(H)||0;return F>=1e6?(F/1e6).toFixed(1)+"M FCFA":F>=1e3?(F/1e3).toFixed(0)+"k FCFA":F.toLocaleString("fr-FR")+" FCFA"};return{tickets:f,filteredTickets:V,stats:A,filters:E,currentPage:$,hasMore:i,total:y,loading:M,error:j,loadTickets:I,loadMore:D,refreshTickets:z,claimPrize:d,downloadTicket:S,resetFilters:n,applyFilters:l,formatCurrency:L,formatDate:H=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(H)),getRemainingTime:(H,F)=>{if(F==="lost"||F==="won")return"Tirage terminé";const B=new Date,w=new Date(H)-B;if(w<=0)return"Tirage en cours";const m=Math.floor(w/(1e3*60*60*24)),r=Math.floor(w%(1e3*60*60*24)/(1e3*60*60));return m>0?`Tirage dans ${m} jour${m>1?"s":""}`:r>0?`Tirage dans ${r}h`:`Tirage dans ${Math.floor(w%36e5/6e4)}min`},getStatusLabel:H=>({active:"En cours",won:"Gagné",lost:"Perdu",pending:"Tirage imminent"})[H]||H}}const Vf={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Rf={class:"flex items-center"},Ff={class:"ml-4"},Nf={class:"text-sm font-medium text-gray-600"},zf={class:"text-2xl font-bold text-gray-900"},qf={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6"},Uf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Bf={class:"flex items-end"},Of={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},Hf={class:"flex"},Gf={class:"ml-3"},Kf={class:"mt-2 text-sm text-red-700"},Zf={class:"mt-4"},Wf={key:1,class:"text-center py-12"},Jf={key:2,class:"text-center py-12"},Xf={class:"text-lg font-medium text-gray-900 mb-2"},Yf={class:"text-gray-600 mb-4"},Qf={key:3,class:"space-y-4"},eb={class:"p-6"},tb={class:"flex items-start space-x-4"},sb={class:"flex-shrink-0"},ob=["src","alt"],rb={class:"flex-1 min-w-0"},ab={class:"flex justify-between items-start mb-2"},nb={class:"text-lg font-semibold text-gray-900"},ib={class:"text-sm text-gray-600"},lb={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},db={class:"text-sm font-semibold text-gray-900"},cb={class:"text-sm font-semibold text-gray-900"},ub={class:"text-sm font-semibold text-gray-900"},mb={class:"text-sm font-semibold text-gray-900"},pb={class:"mb-4"},gb={class:"flex flex-wrap gap-2"},vb={key:0,class:"mb-4"},xb={class:"flex justify-between text-xs text-gray-600 mb-1"},fb={class:"w-full bg-gray-200 rounded-full h-2"},bb={key:1,class:"bg-blue-50 p-4 rounded-lg mb-4"},hb={class:"flex items-center mb-2"},yb={class:"text-sm text-blue-800"},_b={class:"text-sm text-blue-800"},wb={key:0,class:"mt-3"},$b=["onClick","disabled"],kb={key:1,class:"mt-3"},Cb={class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800"},jb={key:2,class:"bg-red-50 p-4 rounded-lg mb-4"},Ab={class:"flex items-center mb-2"},Pb={class:"text-sm text-red-800"},Eb={class:"text-sm text-red-800"},Ib={class:"flex justify-between items-center"},Mb={class:"text-sm text-gray-500"},Db={class:"flex space-x-2"},Lb=["onClick","disabled"],Sb={key:4,class:"text-center mt-8"},Tb={__name:"MyTickets",setup(_){const{filteredTickets:v,stats:M,filters:j,hasMore:f,loading:h,error:$,loadTickets:i,loadMore:c,claimPrize:y,downloadTicket:E,resetFilters:V,formatCurrency:A,formatDate:I,getRemainingTime:D,getStatusLabel:z}=Tf(),p={TicketIcon:Se,TrophyIcon:qe,CurrencyDollarIcon:Ie,ClockIcon:Ke},d=async n=>{try{await y(n),console.log("Prix réclamé avec succès")}catch(l){console.error("Erreur lors de la réclamation du prix:",l),window.$toast&&window.$toast.error("Erreur lors de la réclamation du prix. Veuillez réessayer.","Erreur")}},S=async n=>{try{await E(n)}catch(l){console.error("Erreur lors du téléchargement:",l),window.$toast&&window.$toast.error("Erreur lors du téléchargement. Veuillez réessayer.","Erreur")}};return ce(()=>{i()}),(n,l)=>{const a=pe("router-link");return t(),s("div",null,[l[25]||(l[25]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mes tickets"),e("p",{class:"mt-2 text-gray-600"},"Suivez vos participations aux tombolas")],-1)),e("div",Vf,[(t(!0),s(W,null,J(u(M),L=>(t(),s("div",{key:L.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},[e("div",Rf,[e("div",{class:Z(["p-3 rounded-lg",L.color])},[(t(),ne(_e(p[L.icon]),{class:"w-6 h-6 text-white"}))],2),e("div",Ff,[e("p",Nf,o(L.label),1),e("p",zf,o(L.value),1)])])]))),128))]),e("div",qf,[e("div",Uf,[e("div",null,[l[6]||(l[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":l[0]||(l[0]=L=>u(j).search=L),type:"text",placeholder:"Nom du produit...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,u(j).search]])]),e("div",null,[l[8]||(l[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":l[1]||(l[1]=L=>u(j).status=L),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},l[7]||(l[7]=[oe('<option value="">Tous les statuts</option><option value="active">En cours</option><option value="won">Gagné</option><option value="lost">Perdu</option><option value="pending">En attente</option>',5)]),512),[[ie,u(j).status]])]),e("div",null,[l[10]||(l[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période",-1)),G(e("select",{"onUpdate:modelValue":l[2]||(l[2]=L=>u(j).period=L),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},l[9]||(l[9]=[e("option",{value:""},"Toutes les périodes",-1),e("option",{value:"week"},"Cette semaine",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1)]),512),[[ie,u(j).period]])]),e("div",Bf,[e("button",{onClick:l[3]||(l[3]=(...L)=>u(V)&&u(V)(...L)),class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),u($)?(t(),s("div",Of,[e("div",Hf,[b(u(be),{class:"h-5 w-5 text-red-400"}),e("div",Gf,[l[11]||(l[11]=e("h3",{class:"text-sm font-medium text-red-800"}," Erreur de chargement ",-1)),e("div",Kf,[e("p",null,o(u($)),1)]),e("div",Zf,[e("button",{onClick:l[4]||(l[4]=L=>u(i)()),class:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded-md hover:bg-red-200 transition-colors"}," Réessayer ")])])])])):U("",!0),u(h)?(t(),s("div",Wf,l[12]||(l[12]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement de vos tickets...",-1)]))):u(v).length===0?(t(),s("div",Jf,[b(u(Se),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e("h3",Xf,o(u(v).length===0&&!u(j).search&&!u(j).status&&!u(j).period?"Aucun ticket acheté":"Aucun résultat trouvé"),1),e("p",Yf,o(u(v).length===0&&!u(j).search&&!u(j).status&&!u(j).period?"Vous n'avez pas encore participé à des tombolas":"Essayez de modifier vos filtres de recherche"),1),u(v).length===0&&!u(j).search&&!u(j).status&&!u(j).period?(t(),ne(a,{key:0,to:"/customer/products",class:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},{default:Y(()=>l[13]||(l[13]=[O(" Découvrir les produits ",-1)])),_:1,__:[13]})):U("",!0)])):(t(),s("div",Qf,[(t(!0),s(W,null,J(u(v),L=>(t(),s("div",{key:L.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},[e("div",eb,[e("div",tb,[e("div",sb,[e("img",{src:L.product.image_url||L.product.main_image||L.product.image,alt:L.product.title,class:"w-20 h-20 rounded-lg object-cover"},null,8,ob)]),e("div",rb,[e("div",ab,[e("div",null,[e("h3",nb,o(L.product.title),1),e("p",ib,o(L.product.description),1)]),e("span",{class:Z(["px-3 py-1 text-sm font-medium rounded-full",L.status==="won"?"bg-blue-100 text-blue-800":L.status==="lost"?"bg-red-100 text-red-800":L.status==="active"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},o(u(z)(L.status)),3)]),e("div",lb,[e("div",null,[l[14]||(l[14]=e("p",{class:"text-xs text-gray-500"},"Tickets achetés",-1)),e("p",db,o(L.quantity),1)]),e("div",null,[l[15]||(l[15]=e("p",{class:"text-xs text-gray-500"},"Total payé",-1)),e("p",cb,o(u(A)(L.total_price)),1)]),e("div",null,[l[16]||(l[16]=e("p",{class:"text-xs text-gray-500"},"Date d'achat",-1)),e("p",ub,o(u(I)(L.purchased_at)),1)]),e("div",null,[l[17]||(l[17]=e("p",{class:"text-xs text-gray-500"},"Tirage",-1)),e("p",mb,o(u(I)(L.lottery.draw_date)),1)])]),e("div",pb,[l[18]||(l[18]=e("p",{class:"text-xs text-gray-500 mb-2"},"Vos numéros de tickets",-1)),e("div",gb,[(t(!0),s(W,null,J(L.ticket_numbers,K=>(t(),s("span",{key:K,class:Z(["px-2 py-1 text-xs font-mono rounded border",L.winning_number===K?"bg-blue-100 text-blue-800 border-blue-300":"bg-gray-50 text-gray-700 border-gray-300"])}," #"+o(K),3))),128))])]),L.status==="active"?(t(),s("div",vb,[e("div",xb,[l[19]||(l[19]=e("span",null,"Progression de la tombola",-1)),e("span",null,o(L.lottery.progress)+"%",1)]),e("div",fb,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:we({width:L.lottery.progress+"%"})},null,4)])])):U("",!0),L.status==="won"?(t(),s("div",bb,[e("div",hb,[b(u(qe),{class:"w-5 h-5 text-blue-600 mr-2"}),l[20]||(l[20]=e("p",{class:"font-semibold text-blue-900"},"Félicitations ! Vous avez gagné !",-1))]),e("p",yb,"Numéro gagnant: #"+o(L.winning_number),1),e("p",_b,"Tirage effectué le "+o(u(I)(L.lottery.draw_date)),1),L.prize_claimed?(t(),s("div",kb,[e("span",Cb,[b(u(je),{class:"w-4 h-4 mr-1"}),l[21]||(l[21]=O(" Prix réclamé ",-1))])])):(t(),s("div",wb,[e("button",{onClick:K=>d(L.id),disabled:u(h),class:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},o(u(h)?"Réclamation...":"Réclamer mon prix"),9,$b)]))])):U("",!0),L.status==="lost"?(t(),s("div",jb,[e("div",Ab,[b(u(be),{class:"w-5 h-5 text-red-600 mr-2"}),l[22]||(l[22]=e("p",{class:"font-semibold text-red-900"},"Pas de chance cette fois-ci",-1))]),e("p",Pb,"Numéro gagnant: #"+o(L.winning_number),1),e("p",Eb,"Tirage effectué le "+o(u(I)(L.lottery.draw_date)),1)])):U("",!0),e("div",Ib,[e("div",Mb,o(u(D)(L.lottery.draw_date,L.status)),1),e("div",Db,[b(a,{to:`/customer/products/${L.product.id}`,class:"text-sm text-blue-600 hover:text-blue-700 font-medium"},{default:Y(()=>l[23]||(l[23]=[O(" Voir le produit ",-1)])),_:2,__:[23]},1032,["to"]),e("button",{onClick:K=>S(L.id),disabled:u(h),class:"text-sm text-gray-600 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed"},o(u(h)?"Téléchargement...":"Télécharger"),9,Lb)])])])])])]))),128))])),!u(h)&&u(v).length>0&&u(f)?(t(),s("div",Sb,[e("button",{onClick:l[5]||(l[5]=(...L)=>u(c)&&u(c)(...L)),class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-blue-600 bg-blue-50 hover:bg-blue-100"},[l[24]||(l[24]=O(" Charger plus de tickets ",-1)),b(u(at),{class:"ml-2 w-5 h-5"})])])):U("",!0)])}}},Vb={class:"min-h-screen bg-gray-50 py-8"},Rb={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Fb={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},Nb={class:"flex items-center justify-between"},zb={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},qb={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Ub={class:"flex items-center"},Bb={class:"text-2xl font-bold text-gray-900"},Ob={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Hb={class:"flex items-center"},Gb={class:"text-2xl font-bold text-gray-900"},Kb={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Zb={class:"flex items-center"},Wb={class:"text-2xl font-bold text-gray-900"},Jb={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Xb={class:"flex items-center"},Yb={class:"text-2xl font-bold text-gray-900"},Qb={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-8"},eh={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},th={class:"flex items-center space-x-4"},sh={class:"text-sm text-gray-500"},oh={key:0,class:"text-center py-12"},rh={key:1,class:"text-center py-12"},ah={key:2,class:"space-y-4"},nh={class:"flex items-start justify-between"},ih={class:"flex-1"},lh={class:"flex items-center space-x-3 mb-2"},dh={class:"font-mono text-sm text-gray-600"},ch={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},uh={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},mh={class:"text-lg font-semibold text-gray-900"},ph={class:"text-sm font-medium"},gh={class:"text-sm"},vh={key:0,class:"bg-gray-50 rounded-lg p-3 mb-4"},xh={class:"font-medium"},fh={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4"},bh={class:"text-sm text-red-700 mt-1"},hh={key:2,class:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"},yh={class:"text-sm text-blue-700 mt-1"},_h={class:"flex space-x-2 ml-4"},wh=["onClick"],$h=["onClick"],kh={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Ch={class:"flex items-center justify-center min-h-screen px-4"},jh={class:"relative bg-white rounded-lg max-w-lg w-full"},Ah={class:"p-6"},Ph={class:"flex items-center justify-between mb-4"},Eh={class:"space-y-4"},Ih=["value"],Mh={class:"flex justify-end space-x-3 mt-6"},Dh=["disabled"],Lh={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},Sh={class:"flex items-center justify-center min-h-screen px-4"},Th={class:"relative bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto"},Vh={class:"p-6"},Rh={class:"flex items-center justify-between mb-6"},Fh={class:"space-y-6"},Nh={class:"grid grid-cols-2 gap-4"},zh={class:"font-mono font-medium"},qh={class:"grid grid-cols-2 gap-4"},Uh={class:"text-xl font-semibold text-blue-600"},Bh={class:"bg-gray-50 rounded-lg p-4"},Oh={class:"grid grid-cols-2 gap-4"},Hh={class:"font-mono"},Gh={key:0,class:"bg-blue-50 rounded-lg p-4"},Kh={class:"mt-2"},Zh={class:"space-y-2"},Wh={class:"flex justify-between"},Jh={class:"text-sm"},Xh={key:0,class:"flex justify-between"},Yh={class:"text-sm"},Qh={key:1,class:"flex justify-between"},ey={class:"text-sm"},ty={key:2,class:"flex justify-between"},sy={class:"text-sm"},oy={__name:"Refunds",setup(_){const{get:v,post:M}=ae(),j=R([]),f=R({}),h=R(!1),$=R(""),i=R(!1),c=R(!1),y=R(null),E=R([]),V=R({transaction_id:"",reason:"",notes:""}),A=async()=>{h.value=!0;try{const H=new URLSearchParams({limit:50});$.value&&H.append("status",$.value);const F=await v(`/refunds?${H}`);j.value=F.data.refunds||[],f.value=F.data.stats||{}}catch(H){console.error("Error loading refunds:",H)}finally{h.value=!1}},I=async()=>{try{const H=await v("/transactions?status=completed&limit=100");E.value=H.data.transactions?.filter(F=>!F.has_refund)||[]}catch(H){console.error("Error loading transactions:",H)}},D=async()=>{c.value=!0;try{const H=await M("/refunds",V.value);j.value.unshift(H.data.refund),f.value.total_refunds=(f.value.total_refunds||0)+1,f.value.pending_refunds=(f.value.pending_refunds||0)+1,V.value={transaction_id:"",reason:"",notes:""},i.value=!1,window.$toast&&window.$toast.success("Demande de remboursement créée avec succès!","✅ Demande créée")}catch(H){console.error("Error creating refund:",H),window.$toast&&window.$toast.error("Erreur lors de la création de la demande","❌ Erreur")}finally{c.value=!1}},z=async H=>{if(confirm("Êtes-vous sûr de vouloir annuler cette demande ?"))try{await M(`/refunds/${H.id}/cancel`);const F=j.value.findIndex(B=>B.id===H.id);F!==-1&&(j.value[F].status="rejected",j.value[F].rejection_reason="Annulé par l'utilisateur"),window.$toast&&window.$toast.success("Demande annulée avec succès","✅ Annulation")}catch(F){console.error("Error cancelling refund:",F),window.$toast&&window.$toast.error("Erreur lors de l'annulation","❌ Erreur")}},p=H=>{y.value=H},d=()=>{i.value=!1,V.value={transaction_id:"",reason:"",notes:""}},S=()=>{$.value="",A()},n=H=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(H||0)+" FCFA",l=H=>H?H>=1e6?(H/1e6).toFixed(1)+"M":H>=1e3?(H/1e3).toFixed(0)+"K":H.toString():"0",a=H=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(H)),L=H=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",processed:"bg-purple-100 text-purple-800",completed:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800"})[H]||"bg-gray-100 text-gray-800",K=H=>({pending:"⏳ En attente",approved:"✅ Approuvé",processed:"🔄 En traitement",completed:"✅ Terminé",rejected:"❌ Rejeté",failed:"❌ Échec"})[H]||H,ee=H=>({insufficient_participants:"Participants insuffisants",lottery_cancelled:"Tombola annulée",accidental_purchase:"Achat accidentel",changed_mind:"Changement d'avis",duplicate_purchase:"Achat en double",technical_issue:"Problème technique",system_error:"Erreur système",other:"Autre"})[H]||H,se=H=>({mobile_money:"Mobile Money",bank_transfer:"Virement bancaire",wallet_credit:"Crédit portefeuille"})[H]||H;return ce(async()=>{await Promise.all([A(),I()])}),(H,F)=>(t(),s("div",Vb,[e("div",Rb,[e("div",Fb,[e("div",Nb,[F[8]||(F[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"💸 Mes Remboursements"),e("p",{class:"text-gray-600 mt-1"},"Gérez vos demandes de remboursement")],-1)),e("button",{onClick:F[0]||(F[0]=B=>i.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," ➕ Nouvelle demande ")])]),e("div",zb,[e("div",qb,[e("div",Ub,[F[10]||(F[10]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"}," 💰 ",-1)),e("div",null,[e("div",Bb,o(f.value.total_refunds||0),1),F[9]||(F[9]=e("div",{class:"text-sm text-gray-600"},"Remboursements",-1))])])]),e("div",Ob,[e("div",Hb,[F[12]||(F[12]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"}," ✅ ",-1)),e("div",null,[e("div",Gb,o(l(f.value.total_amount_refunded)),1),F[11]||(F[11]=e("div",{class:"text-sm text-gray-600"},"Montant remboursé",-1))])])]),e("div",Kb,[e("div",Zb,[F[14]||(F[14]=e("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4"}," ⏳ ",-1)),e("div",null,[e("div",Wb,o(f.value.pending_refunds||0),1),F[13]||(F[13]=e("div",{class:"text-sm text-gray-600"},"En attente",-1))])])]),e("div",Jb,[e("div",Xb,[F[16]||(F[16]=e("div",{class:"p-3 rounded-full bg-red-100 text-red-600 mr-4"}," X ",-1)),e("div",null,[e("div",Yb,o(f.value.rejected_refunds||0),1),F[15]||(F[15]=e("div",{class:"text-sm text-gray-600"},"Rejetées",-1))])])])]),e("div",Qb,[e("div",eh,[e("div",th,[G(e("select",{"onUpdate:modelValue":F[1]||(F[1]=B=>$.value=B),onChange:A,class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},F[17]||(F[17]=[oe('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="approved">Approuvé</option><option value="processed">Traité</option><option value="completed">Terminé</option><option value="rejected">Rejeté</option>',6)]),544),[[ie,$.value]]),e("button",{onClick:S,class:"px-3 py-2 text-gray-600 hover:text-gray-800 text-sm"}," Réinitialiser ")]),e("div",sh,o(j.value.length)+" remboursement(s) ",1)])]),h.value?(t(),s("div",oh,F[18]||(F[18]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des remboursements...",-1)]))):j.value.length===0?(t(),s("div",rh,[b(u(ht),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),F[19]||(F[19]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Aucun remboursement",-1)),F[20]||(F[20]=e("p",{class:"text-gray-600 mb-6"},"Vous n'avez pas encore de demande de remboursement.",-1)),e("button",{onClick:F[2]||(F[2]=B=>i.value=!0),class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Faire une demande ")])):(t(),s("div",ah,[(t(!0),s(W,null,J(j.value,B=>(t(),s("div",{key:B.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow"},[e("div",nh,[e("div",ih,[e("div",lh,[e("span",dh,o(B.refund_number),1),e("span",{class:Z(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",L(B.status)])},o(K(B.status)),3),B.auto_processed?(t(),s("span",ch," 🤖 Automatique ")):U("",!0)]),e("div",uh,[e("div",null,[F[21]||(F[21]=e("div",{class:"text-sm text-gray-600"},"Montant",-1)),e("div",mh,o(n(B.amount)),1)]),e("div",null,[F[22]||(F[22]=e("div",{class:"text-sm text-gray-600"},"Raison",-1)),e("div",ph,o(ee(B.reason)),1)]),e("div",null,[F[23]||(F[23]=e("div",{class:"text-sm text-gray-600"},"Date de demande",-1)),e("div",gh,o(a(B.created_at)),1)])]),B.lottery?(t(),s("div",vh,[F[24]||(F[24]=e("div",{class:"text-sm text-gray-600"},"Tombola concernée",-1)),e("div",xh,o(B.lottery.lottery_number)+" - "+o(B.lottery.product_title),1)])):U("",!0),B.rejection_reason?(t(),s("div",fh,[F[25]||(F[25]=e("div",{class:"text-sm font-medium text-red-800"},"Raison du rejet",-1)),e("div",bh,o(B.rejection_reason),1)])):U("",!0),B.notes?(t(),s("div",hh,[F[26]||(F[26]=e("div",{class:"text-sm font-medium text-blue-800"},"Notes",-1)),e("div",yh,o(B.notes),1)])):U("",!0)]),e("div",_h,[e("button",{onClick:N=>p(B),class:"px-3 py-2 text-blue-600 hover:text-blue-700 text-sm font-medium"}," Détails ",8,wh),B.status==="pending"?(t(),s("button",{key:0,onClick:N=>z(B),class:"px-3 py-2 text-red-600 hover:text-red-700 text-sm font-medium"}," Annuler ",8,$h)):U("",!0)])])]))),128))]))]),i.value?(t(),s("div",kh,[e("div",Ch,[e("div",{class:"fixed inset-0 bg-black/20",onClick:d}),e("div",jh,[e("div",Ah,[e("div",Ph,[F[27]||(F[27]=e("h3",{class:"text-lg font-semibold"},"Nouvelle demande de remboursement",-1)),e("button",{onClick:d,class:"text-gray-400 hover:text-gray-600"},[b(u(De),{class:"w-6 h-6"})])]),e("form",{onSubmit:ge(D,["prevent"])},[e("div",Eh,[e("div",null,[F[29]||(F[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Transaction à rembourser",-1)),G(e("select",{"onUpdate:modelValue":F[3]||(F[3]=B=>V.value.transaction_id=B),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[F[28]||(F[28]=e("option",{value:""},"Sélectionnez une transaction",-1)),(t(!0),s(W,null,J(E.value,B=>(t(),s("option",{key:B.id,value:B.id},o(B.reference)+" - "+o(n(B.amount))+" "+o(B.lottery?`(${B.lottery.lottery_number})`:""),9,Ih))),128))],512),[[ie,V.value.transaction_id]])]),e("div",null,[F[31]||(F[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Raison du remboursement",-1)),G(e("select",{"onUpdate:modelValue":F[4]||(F[4]=B=>V.value.reason=B),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},F[30]||(F[30]=[oe('<option value="">Sélectionnez une raison</option><option value="accidental_purchase">Achat accidentel</option><option value="changed_mind">Changement d&#39;avis</option><option value="duplicate_purchase">Achat en double</option><option value="technical_issue">Problème technique</option><option value="other">Autre</option>',6)]),512),[[ie,V.value.reason]])]),e("div",null,[F[32]||(F[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Explication (optionnel)",-1)),G(e("textarea",{"onUpdate:modelValue":F[5]||(F[5]=B=>V.value.notes=B),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Décrivez votre situation..."},null,512),[[X,V.value.notes]])])]),e("div",Mh,[e("button",{type:"button",onClick:d,class:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg"}," Annuler "),e("button",{type:"submit",disabled:c.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},o(c.value?"Création...":"Créer la demande"),9,Dh)])],32)])])])])):U("",!0),y.value?(t(),s("div",Lh,[e("div",Sh,[e("div",{class:"fixed inset-0 bg-black/20",onClick:F[6]||(F[6]=B=>y.value=null)}),e("div",Th,[e("div",Vh,[e("div",Rh,[F[33]||(F[33]=e("h3",{class:"text-lg font-semibold"},"Détails du remboursement",-1)),e("button",{onClick:F[7]||(F[7]=B=>y.value=null),class:"text-gray-400 hover:text-gray-600"},[b(u(De),{class:"w-6 h-6"})])]),e("div",Fh,[e("div",Nh,[e("div",null,[F[34]||(F[34]=e("div",{class:"text-sm text-gray-600"},"Numéro",-1)),e("div",zh,o(y.value.refund_number),1)]),e("div",null,[F[35]||(F[35]=e("div",{class:"text-sm text-gray-600"},"Statut",-1)),e("span",{class:Z(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",L(y.value.status)])},o(K(y.value.status)),3)])]),e("div",qh,[e("div",null,[F[36]||(F[36]=e("div",{class:"text-sm text-gray-600"},"Montant",-1)),e("div",Uh,o(n(y.value.amount)),1)]),e("div",null,[F[37]||(F[37]=e("div",{class:"text-sm text-gray-600"},"Méthode de remboursement",-1)),e("div",null,o(se(y.value.refund_method)),1)])]),e("div",Bh,[F[40]||(F[40]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Transaction originale",-1)),e("div",Oh,[e("div",null,[F[38]||(F[38]=e("div",{class:"text-sm text-gray-600"},"Référence",-1)),e("div",Hh,o(y.value.transaction.reference),1)]),e("div",null,[F[39]||(F[39]=e("div",{class:"text-sm text-gray-600"},"Montant",-1)),e("div",null,o(n(y.value.transaction.amount)),1)])])]),y.value.lottery?(t(),s("div",Gh,[F[43]||(F[43]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Tombola concernée",-1)),e("div",null,[F[41]||(F[41]=e("div",{class:"text-sm text-gray-600"},"Numéro",-1)),e("div",null,o(y.value.lottery.lottery_number),1)]),e("div",Kh,[F[42]||(F[42]=e("div",{class:"text-sm text-gray-600"},"Produit",-1)),e("div",null,o(y.value.lottery.product_title),1)])])):U("",!0),e("div",null,[F[48]||(F[48]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Chronologie",-1)),e("div",Zh,[e("div",Wh,[F[44]||(F[44]=e("span",{class:"text-sm text-gray-600"},"Demande créée",-1)),e("span",Jh,o(a(y.value.created_at)),1)]),y.value.approved_at?(t(),s("div",Xh,[F[45]||(F[45]=e("span",{class:"text-sm text-gray-600"},"Approuvé",-1)),e("span",Yh,o(a(y.value.approved_at)),1)])):U("",!0),y.value.processed_at?(t(),s("div",Qh,[F[46]||(F[46]=e("span",{class:"text-sm text-gray-600"},"Traité",-1)),e("span",ey,o(a(y.value.processed_at)),1)])):U("",!0),y.value.rejected_at?(t(),s("div",ty,[F[47]||(F[47]=e("span",{class:"text-sm text-gray-600"},"Rejeté",-1)),e("span",sy,o(a(y.value.rejected_at)),1)])):U("",!0)])])])])])])])):U("",!0)]))}};function ry(){const{get:_,loading:v,error:M}=ae(),j=R({users:{total:0,active:0,growth:0},products:{total:0,active:0,growth:0},lotteries:{total:0,active:0,growth:0},revenue:{total:0,monthly:0,growth:0}}),f=R([]),h=R([]),$=R([]),i=Q(()=>[{label:"Utilisateurs actifs",value:A(j.value.users.active),change:j.value.users.growth,icon:"UsersIcon",bgColor:"bg-[#0099cc]/10",iconColor:"text-[#0099cc]"},{label:"Produits en vente",value:A(j.value.products.active),change:j.value.products.growth,icon:"ShoppingBagIcon",bgColor:"bg-blue-100",iconColor:"text-blue-600"},{label:"Tombolas actives",value:A(j.value.lotteries.active),change:j.value.lotteries.growth,icon:"GiftIcon",bgColor:"bg-yellow-100",iconColor:"text-yellow-600"},{label:"Revenus mensuel",value:I(j.value.revenue.monthly),change:j.value.revenue.growth,icon:"CurrencyDollarIcon",bgColor:"bg-purple-100",iconColor:"text-purple-600"}]),c=async()=>{try{const d=await _("/admin/dashboard/stats");d&&d.success&&(j.value={users:{total:d.data.users?.total||0,active:d.data.users?.active||0,growth:d.data.users?.growth||0},products:{total:d.data.products?.total||0,active:d.data.products?.active||0,growth:d.data.products?.growth||0},lotteries:{total:d.data.lotteries?.total||0,active:d.data.lotteries?.active||0,growth:d.data.lotteries?.growth||0},revenue:{total:d.data.revenue?.total||0,monthly:d.data.revenue?.monthly||0,growth:d.data.revenue?.growth||0}})}catch(d){console.error("Erreur lors du chargement des statistiques:",d),j.value={users:{total:2543,active:1876,growth:12.5},products:{total:186,active:134,growth:8.2},lotteries:{total:45,active:24,growth:-2.1},revenue:{total:125e6,monthly:452e5,growth:15.3}}}},y=async()=>{try{const d=await _("/admin/lotteries/recent?limit=5");d&&d.success&&(f.value=d.data.map(S=>({id:S.id,lottery_number:S.lottery_number,product:{name:S.product?.name||"Produit inconnu",image:S.product?.image_url||S.product?.main_image||"/images/products/placeholder.jpg"},status:S.status,statusLabel:D(S.status),sold_tickets:S.sold_tickets||0,total_tickets:S.total_tickets||0,end_date:S.end_date})))}catch(d){console.error("Erreur lors du chargement des tombolas récentes:",d),f.value=[]}},E=async()=>{try{const d=await _("/admin/activities/recent?limit=10");d&&d.success&&(h.value=d.data.map(S=>({id:S.id,type:S.type,icon:z(S.type),title:S.title,description:S.description,time:new Date(S.created_at)})))}catch(d){console.error("Erreur lors du chargement des activités récentes:",d),h.value=[]}},V=async()=>{try{const d=await _("/admin/products/top?limit=5");d&&d.success&&($.value=d.data.map(S=>({id:S.id,title:S.name,sales:S.total_tickets_sold||0,growth:S.growth_percentage||0,image:S.image_url||S.main_image||"/images/products/placeholder.jpg"})))}catch(d){console.error("Erreur lors du chargement des produits populaires:",d),$.value=[]}},A=d=>d>=1e6?(d/1e6).toFixed(1)+"M":d>=1e3?(d/1e3).toFixed(1)+"k":d.toLocaleString(),I=d=>d>=1e6?(d/1e6).toFixed(1)+"M FCFA":d>=1e3?(d/1e3).toFixed(0)+"k FCFA":d.toLocaleString()+" FCFA",D=d=>({active:"Active",completed:"Terminée",pending:"En attente",cancelled:"Annulée",draft:"Brouillon"})[d]||d,z=d=>({user:"UsersIcon",product:"ShoppingBagIcon",payment:"CurrencyDollarIcon",lottery:"GiftIcon",transaction:"BanknotesIcon"})[d]||"InformationCircleIcon";return{stats:i,recentLotteries:f,recentActivities:h,topProducts:$,loading:v,error:M,loadDashboardData:async()=>{await Promise.all([c(),y(),E(),V()])},loadDashboardStats:c,loadRecentLotteries:y,loadRecentActivities:E,loadTopProducts:V,formatNumber:A,formatCurrency:I,getStatusLabel:D,getActivityIcon:z}}const ay={class:"space-y-6"},ny={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},iy={class:"flex items-center"},ly={class:"ml-4"},dy={class:"text-sm font-medium text-gray-600"},cy={class:"text-2xl font-bold text-gray-900"},uy={class:"mt-4 pt-4 border-t border-gray-100"},my={class:"flex items-center text-sm"},py={key:0,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},gy={class:"flex"},vy={class:"ml-3"},xy={class:"mt-1 text-sm text-red-700"},fy={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},by={class:"lg:col-span-2 space-y-6"},hy={class:"admin-card"},yy={class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},_y={class:"text-center"},wy={class:"admin-card"},$y={class:"overflow-x-auto"},ky={class:"min-w-full"},Cy={class:"bg-white divide-y divide-gray-200"},jy={class:"px-6 py-4 whitespace-nowrap"},Ay={class:"flex items-center"},Py={class:"ml-4"},Ey={class:"text-sm font-medium text-gray-900"},Iy={class:"text-sm text-gray-500"},My={class:"px-6 py-4 whitespace-nowrap"},Dy={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ly={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Sy={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ty=["onClick"],Vy={class:"space-y-6"},Ry={class:"admin-card"},Fy={key:0,class:"space-y-4"},Ny={key:1,class:"space-y-4"},zy={class:"flex-1 min-w-0"},qy={class:"text-sm font-medium text-gray-900"},Uy={class:"text-sm text-gray-600"},By={class:"text-xs text-gray-500 mt-1"},Oy={key:2,class:"text-center py-6 text-gray-500"},Hy={class:"admin-card"},Gy={class:"space-y-4"},Ky={class:"flex-shrink-0"},Zy={class:"inline-flex items-center justify-center w-6 h-6 text-sm font-bold text-gray-600"},Wy={class:"flex-1 min-w-0"},Jy={class:"text-sm font-medium text-gray-900 truncate"},Xy={class:"flex items-center space-x-2 mt-1"},Yy={class:"text-xs text-gray-500"},Qy={class:"admin-card"},e_={class:"space-y-3"},t_={__name:"Dashboard",setup(_){const v=he();ae();const{stats:M,recentLotteries:j,recentActivities:f,topProducts:h,loading:$,error:i,loadDashboardData:c}=ry(),y={UsersIcon:Ye,ShoppingBagIcon:Re,GiftIcon:Oe,CurrencyDollarIcon:Ie,BanknotesIcon:ht,InformationCircleIcon:Te},E=Q(()=>M.value.map(l=>({...l,icon:y[l.icon]||Te}))),V=Q(()=>f.value.map(l=>({...l,icon:y[l.icon]||Te}))),A=l=>new Date(l).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),I=l=>{const L=Math.floor((new Date-l)/1e3);return L<60?`il y a ${L}s`:L<3600?`il y a ${Math.floor(L/60)}min`:L<86400?`il y a ${Math.floor(L/3600)}h`:`il y a ${Math.floor(L/86400)}j`},D=async()=>{await c()},z=()=>{v.push("/admin/users")},p=()=>{v.push("/admin/lotteries")},d=()=>{window.$toast&&window.$toast.info("Fonctionnalité des activités détaillées en cours de développement","ℹ️ Information")},S=l=>{window.$toast&&window.$toast.info(`Affichage des détails de la tombola ${l.lottery_number}`,"👁️ Détails")},n=async()=>{try{window.$toast&&window.$toast.info("Génération du rapport en cours...","📊 Rapport"),await new Promise(l=>setTimeout(l,2e3)),window.$toast&&window.$toast.success("Rapport généré avec succès!","✅ Rapport")}catch{window.$toast&&window.$toast.error("Erreur lors de la génération du rapport","❌ Erreur")}};return ce(async()=>{await c()}),(l,a)=>(t(),s("div",ay,[a[15]||(a[15]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de bord"),e("p",{class:"mt-2 text-gray-600"},"Vue d'ensemble des activités de la plateforme Koumbaya")],-1)),e("div",ny,[u($)?(t(),s(W,{key:0},J(4,L=>e("div",{key:L,class:"admin-card animate-pulse"},a[0]||(a[0]=[oe('<div class="flex items-center"><div class="p-3 rounded-lg bg-gray-200"></div><div class="ml-4 flex-1"><div class="h-4 bg-gray-200 rounded w-20 mb-2"></div><div class="h-6 bg-gray-200 rounded w-16"></div></div></div><div class="mt-4 pt-4 border-t border-gray-100"><div class="h-4 bg-gray-200 rounded w-24"></div></div>',2)]))),64)):(t(!0),s(W,{key:1},J(E.value,L=>(t(),s("div",{key:L.label,class:"admin-card hover:shadow-md transition-shadow duration-200"},[e("div",iy,[e("div",{class:Z(["p-3 rounded-lg",L.bgColor])},[(t(),ne(_e(L.icon),{class:Z(["w-6 h-6",L.iconColor])},null,8,["class"]))],2),e("div",ly,[e("p",dy,o(L.label),1),e("p",cy,o(L.value),1)])]),e("div",uy,[e("div",my,[e("span",{class:Z(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",L.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(t(),ne(_e(L.change>=0?u(Tt):u(at)),{class:"w-3 h-3 mr-1"})),O(" "+o(Math.abs(L.change))+"% ",1)],2),a[1]||(a[1]=e("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),u(i)&&!u($)?(t(),s("div",py,[e("div",gy,[e("div",vy,[a[2]||(a[2]=e("h3",{class:"text-sm font-medium text-red-800"},"Erreur de chargement",-1)),e("p",xy,o(u(i)),1),e("button",{onClick:D,class:"mt-2 text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded"}," Réessayer ")])])])):U("",!0),e("div",fy,[e("div",by,[e("div",hy,[a[5]||(a[5]=oe('<div class="admin-card-header"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-900">Revenus mensuels</h3><div class="flex items-center space-x-2"><button class="text-sm text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md hover:bg-gray-100">30j</button><button class="text-sm bg-[#0099cc]/10 text-[#0099cc] px-3 py-1 rounded-md">90j</button><button class="text-sm text-gray-500 hover:text-gray-700 px-3 py-1 rounded-md hover:bg-gray-100">1an</button></div></div></div>',1)),e("div",yy,[e("div",_y,[b(u(it),{class:"w-12 h-12 text-gray-400 mx-auto mb-2"}),a[3]||(a[3]=e("p",{class:"text-gray-500"},"Graphique des revenus",-1)),a[4]||(a[4]=e("p",{class:"text-xs text-gray-400"},"Données en cours de chargement...",-1))])])]),e("div",wy,[a[7]||(a[7]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tombolas récentes")],-1)),e("div",$y,[e("table",ky,[a[6]||(a[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Produit"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date de fin"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Cy,[(t(!0),s(W,null,J(u(j),L=>(t(),s("tr",{key:L.id,class:"hover:bg-gray-50"},[e("td",jy,[e("div",Ay,[b(Ve,{src:L.product.image_url||L.product.main_image||L.product.image,alt:L.product.name,"container-class":"h-10 w-10 rounded-lg","image-class":"h-full w-full object-cover rounded-lg","fallback-class":"h-full w-full rounded-lg"},null,8,["src","alt"]),e("div",Py,[e("div",Ey,o(L.product.name),1),e("div",Iy,o(L.lottery_number),1)])])]),e("td",My,[e("span",{class:Z(["inline-flex px-2 py-1 text-xs font-medium rounded-full",L.status==="active"?"admin-badge-success":L.status==="completed"?"bg-gray-100 text-gray-800":"admin-badge-warning"])},o(L.statusLabel),3)]),e("td",Dy,o(L.sold_tickets)+"/"+o(L.total_tickets),1),e("td",Ly,o(A(L.end_date)),1),e("td",Sy,[e("button",{onClick:K=>S(L),class:"text-[#0099cc] hover:text-[#0088bb] mr-3"}," Voir ",8,Ty),L.status==="active"?(t(),s("button",{key:0,onClick:p,class:"text-orange-600 hover:text-orange-900"}," Modifier ")):U("",!0)])]))),128))])])])])]),e("div",Vy,[e("div",Ry,[a[10]||(a[10]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Activités récentes")],-1)),u($)?(t(),s("div",Fy,[(t(),s(W,null,J(4,L=>e("div",{key:L,class:"flex items-start space-x-3 p-3 animate-pulse"},a[8]||(a[8]=[oe('<div class="w-8 h-8 bg-gray-200 rounded-full flex-shrink-0"></div><div class="flex-1 min-w-0 space-y-2"><div class="h-4 bg-gray-200 rounded w-32"></div><div class="h-3 bg-gray-200 rounded w-48"></div><div class="h-3 bg-gray-200 rounded w-16"></div></div>',2)]))),64))])):V.value.length>0?(t(),s("div",Ny,[(t(!0),s(W,null,J(V.value,L=>(t(),s("div",{key:L.id,class:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[e("div",{class:Z(["w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",L.type==="user"?"bg-[#0099cc]/10 text-[#0099cc]":L.type==="product"?"bg-blue-100 text-blue-600":L.type==="payment"?"bg-yellow-100 text-yellow-600":"bg-purple-100 text-purple-600"])},[(t(),ne(_e(L.icon),{class:"w-4 h-4"}))],2),e("div",zy,[e("p",qy,o(L.title),1),e("p",Uy,o(L.description),1),e("p",By,o(I(L.time)),1)])]))),128))])):(t(),s("div",Oy,[b(u(Te),{class:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a[9]||(a[9]=e("p",{class:"text-sm"},"Aucune activité récente",-1))])),e("div",{class:"mt-4 pt-4 border-t border-gray-100"},[e("button",{onClick:d,class:"admin-btn-secondary w-full text-sm"}," Voir toutes les activités ")])]),e("div",Hy,[a[11]||(a[11]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Produits populaires")],-1)),e("div",Gy,[(t(!0),s(W,null,J(u(h),(L,K)=>(t(),s("div",{key:L.id,class:"flex items-center space-x-3"},[e("div",Ky,[e("span",Zy,o(K+1),1)]),b(Ve,{src:L.image_url||L.main_image||L.image,alt:L.title,"container-class":"w-10 h-10 rounded-lg flex-shrink-0","image-class":"w-full h-full object-cover rounded-lg","fallback-class":"w-full h-full rounded-lg"},null,8,["src","alt"]),e("div",Wy,[e("p",Jy,o(L.title),1),e("div",Xy,[e("p",Yy,o(L.sales)+" tickets",1),e("span",{class:Z(["text-xs font-medium",L.growth>0?"text-blue-600":"text-red-600"])},o(L.growth>0?"+":"")+o(L.growth)+"% ",3)])])]))),128))])]),e("div",Qy,[a[14]||(a[14]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Actions rapides")],-1)),e("div",e_,[e("button",{onClick:z,class:"admin-btn-primary w-full justify-center"},[b(u(qt),{class:"w-4 h-4 mr-2"}),a[12]||(a[12]=O(" Gérer les utilisateurs ",-1))]),e("button",{onClick:n,class:"admin-btn-secondary w-full justify-center"},[b(u(cs),{class:"w-4 h-4 mr-2"}),a[13]||(a[13]=O(" Générer rapport ",-1))])])])])])]))}},s_={class:"px-6"},o_={class:"mb-8"},r_={class:"flex justify-between items-center"},a_={class:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6"},n_={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},i_=["value"],l_={class:"bg-white rounded-lg shadow-sm border border-gray-200"},d_={class:"px-6 py-4 border-b border-gray-200"},c_={class:"flex justify-between items-center"},u_={class:"text-lg font-semibold text-gray-900"},m_={class:"flex space-x-2"},p_={class:"p-2 text-gray-400 hover:text-gray-600"},g_={key:0,class:"p-8 text-center"},v_={key:1,class:"overflow-x-auto"},x_={class:"min-w-full divide-y divide-gray-200"},f_={class:"bg-white divide-y divide-gray-200"},b_={class:"px-6 py-4 whitespace-nowrap"},h_={class:"flex items-center"},y_={class:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center"},__={class:"text-sm font-medium text-gray-700"},w_={class:"ml-4"},$_={class:"text-sm font-medium text-gray-900"},k_={key:0,class:"text-sm text-gray-500"},C_={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},j_={class:"px-6 py-4 whitespace-nowrap"},A_={class:"px-6 py-4 whitespace-nowrap"},P_={class:"flex items-center space-x-2"},E_={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},I_={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},M_={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},D_={class:"flex space-x-2"},L_=["onClick"],S_=["onClick"],T_={class:"px-6 py-3 border-t border-gray-200"},V_={class:"flex items-center justify-between"},R_={class:"text-sm text-gray-700"},F_={class:"flex space-x-2"},N_=["disabled"],z_=["disabled"],q_={__name:"UserManagement",setup(_){const{get:v,post:M}=ae(),j=R([]),f=R(!1);R(!1);const h=R(1),$=R(20),i=R(0),c=R([]),y=de({search:"",role:"",status:""});ke(()=>y,()=>{h.value=1,I()},{deep:!0});const E=Q(()=>j.value),V=Q(()=>j.value),A=Q(()=>Math.ceil(i.value/$.value)),I=async()=>{f.value=!0;try{const l=new URLSearchParams;l.append("page",h.value),l.append("per_page",$.value),y.search&&l.append("search",y.search),y.role&&l.append("role",y.role),y.status&&l.append("status",y.status);const a=await v(`/admin/users?${l.toString()}`);a&&a.data&&(j.value=a.data.users||[],i.value=a.data.pagination?.total||0,c.value=a.data.available_roles||[])}catch(l){console.error("Erreur lors du chargement des utilisateurs:",l),j.value=[]}finally{f.value=!1}},D=()=>{y.search="",y.role="",y.status="",h.value=1},z=l=>{console.log("Éditer utilisateur:",l)},p=async l=>{try{const a=await M(`/admin/users/${l.id}/toggle-status`);a&&a.success&&(await I(),window.$toast&&window.$toast.success(a.message||"Statut modifié","✓ Succès"))}catch(a){console.error("Erreur lors de la modification du statut:",a),window.$toast&&window.$toast.error("Erreur lors de la modification du statut","✘ Erreur")}},d=l=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(l)),S=l=>({"Super Admin":"Super Admin",Admin:"Administrateur",Agent:"Agent","Agent Back Office":"Agent BO",Marchand:"Marchand",Client:"Client"})[l]||l,n=l=>({"Super Admin":"bg-purple-100 text-purple-800",Admin:"bg-red-100 text-red-800",Agent:"bg-yellow-100 text-yellow-800","Agent Back Office":"bg-orange-100 text-orange-800",Marchand:"bg-blue-100 text-blue-800",Client:"bg-green-100 text-green-800"})[l]||"bg-gray-100 text-gray-800";return ke(h,()=>{I()}),ce(()=>{I()}),(l,a)=>(t(),s("div",s_,[e("div",o_,[e("div",r_,[a[6]||(a[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des Utilisateurs"),e("p",{class:"mt-2 text-gray-600"},"Gérez tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:I,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"},[b(u(ot),{class:Z(["w-5 h-5 inline mr-2",f.value?"animate-spin":""])},null,8,["class"]),a[5]||(a[5]=O(" Recharger ",-1))])])]),e("div",a_,[e("div",n_,[e("div",null,[a[7]||(a[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":a[0]||(a[0]=L=>y.search=L),type:"text",placeholder:"Nom, email...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,y.search]])]),e("div",null,[a[9]||(a[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),G(e("select",{"onUpdate:modelValue":a[1]||(a[1]=L=>y.role=L),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[a[8]||(a[8]=e("option",{value:""},"Tous les rôles",-1)),(t(!0),s(W,null,J(c.value,L=>(t(),s("option",{key:L.value,value:L.value},o(L.label),9,i_))),128))],512),[[ie,y.role]])]),e("div",null,[a[11]||(a[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":a[2]||(a[2]=L=>y.status=L),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},a[10]||(a[10]=[oe('<option value="">Tous les statuts</option><option value="active">Actif</option><option value="inactive">Inactif</option><option value="verified">Vérifié</option><option value="unverified">Non vérifié</option>',5)]),512),[[ie,y.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:D,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),e("div",l_,[e("div",d_,[e("div",c_,[e("h3",u_," Utilisateurs ("+o(E.value.length)+") ",1),e("div",m_,[e("button",p_,[b(u(ot),{class:"w-5 h-5"})])])])]),f.value?(t(),s("div",g_,a[12]||(a[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)]))):(t(),s("div",v_,[e("table",x_,[a[13]||(a[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Inscription "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",f_,[(t(!0),s(W,null,J(V.value,L=>(t(),s("tr",{key:L.id,class:"hover:bg-gray-50"},[e("td",b_,[e("div",h_,[e("div",y_,[e("span",__,o(L.first_name[0])+o(L.last_name[0]),1)]),e("div",w_,[e("div",$_,o(L.first_name)+" "+o(L.last_name),1),L.phone?(t(),s("div",k_,o(L.phone),1)):U("",!0)])])]),e("td",C_,o(L.email),1),e("td",j_,[e("span",{class:Z(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",n(L.primary_role)])},o(S(L.primary_role)),3)]),e("td",A_,[e("div",P_,[e("span",{class:Z(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",L.is_active?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},o(L.is_active?"Actif":"Inactif"),3),L.verified_at?(t(),s("span",E_," Vérifié ")):U("",!0)])]),e("td",I_,o(d(L.created_at)),1),e("td",M_,[e("div",D_,[e("button",{onClick:K=>z(L),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,L_),e("button",{onClick:K=>p(L),class:Z(L.is_active?"text-red-600 hover:text-red-900":"text-blue-600 hover:text-blue-900")},o(L.is_active?"Désactiver":"Activer"),11,S_)])])]))),128))])])])),e("div",T_,[e("div",V_,[e("div",R_," Affichage de "+o((h.value-1)*$.value+1)+" à "+o(Math.min(h.value*$.value,i.value))+" sur "+o(i.value)+" résultats ",1),e("div",F_,[e("button",{onClick:a[3]||(a[3]=L=>h.value--),disabled:h.value===1,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Précédent ",8,N_),e("button",{onClick:a[4]||(a[4]=L=>h.value++),disabled:h.value===A.value,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Suivant ",8,z_)])])])])]))}},U_={class:"mb-8 flex justify-between items-center"},B_={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},O_={class:"flex items-center"},H_={class:"ml-4"},G_={class:"text-sm font-medium text-gray-600"},K_={class:"text-2xl font-bold text-gray-900"},Z_={class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6"},W_={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},J_=["value"],X_={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Y_={key:0,class:"text-center py-12"},Q_={key:1},e5={class:"px-6 py-3 bg-gray-50 border-b border-gray-200"},t5={class:"flex justify-between items-center"},s5={class:"text-lg font-semibold text-gray-900"},o5={class:"overflow-x-auto"},r5={class:"min-w-full divide-y divide-gray-200"},a5={class:"bg-white divide-y divide-gray-200"},n5={class:"px-6 py-4 whitespace-nowrap"},i5={class:"flex items-center"},l5={class:"w-16 h-16 flex-shrink-0"},d5={class:"ml-4"},c5={class:"text-sm font-medium text-gray-900"},u5={class:"text-sm text-gray-500 line-clamp-2"},m5={class:"px-6 py-4 whitespace-nowrap"},p5={class:"text-sm text-gray-900"},g5={class:"px-6 py-4 whitespace-nowrap"},v5={class:"text-sm text-gray-900"},x5={key:0,class:"text-xs text-gray-500"},f5={class:"px-6 py-4 whitespace-nowrap"},b5={key:0,class:"text-sm text-gray-900"},h5={key:1,class:"text-xs text-gray-500"},y5={class:"px-6 py-4 whitespace-nowrap"},_5={class:"px-6 py-4 whitespace-nowrap"},w5={key:0},$5={class:"flex items-center"},k5={class:"w-16 bg-gray-200 rounded-full h-2 mr-2"},C5={class:"text-xs text-gray-600"},j5={class:"text-xs text-gray-500 mt-1"},A5={key:1,class:"text-xs text-gray-500"},P5={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},E5={class:"flex space-x-2"},I5=["onClick"],M5=["onClick"],D5=["onClick"],L5={class:"px-6 py-3 border-t border-gray-200"},S5={class:"flex items-center justify-between"},T5={class:"text-sm text-gray-700"},V5={class:"flex space-x-2"},R5=["disabled"],F5=["disabled"],N5={key:0,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},z5={class:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},q5={class:"px-6 py-4 space-y-4"},U5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},B5=["value"],O5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H5={key:0},G5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},K5={class:"flex items-center pt-6"},Z5={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},W5=["disabled"],J5={key:0},X5={key:1},Y5={__name:"ProductManagement",setup(_){const{get:v,put:M,delete:j}=ae(),f=he(),h=R(!1),$=R(!1),i=R(!1),c=R(null),y=R([]),E=R([]),V=R(1),A=R(0),I=R(20),D=de({search:"",category:"",status:""}),z=R([{label:"Total produits",value:"0",color:"bg-blue-500",icon:Re},{label:"Actifs",value:"0",color:"bg-green-500",icon:qe},{label:"Valeur totale",value:"0 FCFA",color:"bg-yellow-500",icon:Ie},{label:"En tombola",value:"0 FCFA",color:"bg-purple-500",icon:it}]),p=de({name:"",description:"",price:"",ticket_price:"",category_id:"",sale_mode:"direct",status:"draft",is_featured:!1});ke(()=>D,()=>{V.value=1,S()},{deep:!0}),ke(V,()=>{S()});const d=Q(()=>Math.ceil(A.value/I.value)),S=async()=>{h.value=!0;try{const w=new URLSearchParams;w.append("page",V.value),w.append("per_page",I.value),D.search&&w.append("search",D.search),D.category&&w.append("category_id",D.category),D.status&&w.append("status",D.status);const m=await v(`/admin/products?${w.toString()}`);m&&m.data&&(y.value=m.data.products||[],A.value=m.data.pagination?.total||0,E.value=m.data.categories||[],m.data.stats&&(z.value[0].value=m.data.stats.total?.toString()||"0",z.value[1].value=m.data.stats.active?.toString()||"0",z.value[2].value=H(m.data.stats.total_value||0)+" FCFA",z.value[3].value=H(m.data.stats.total_lottery_value||0)+" FCFA"))}catch(w){console.error("Erreur lors du chargement des produits:",w),y.value=[]}finally{h.value=!1}},n=async()=>{$.value=!0;try{const w=await M(`/admin/products/${c.value.id}`,p);w&&w.success&&(await S(),i.value=!1,ee(),window.$toast&&window.$toast.success("Produit mis à jour avec succès","✓ Succès"))}catch(w){console.error("Erreur lors de la mise à jour:",w),window.$toast&&window.$toast.error("Erreur lors de la mise à jour","✗ Erreur")}finally{$.value=!1}},l=async w=>{if(confirm("Voulez-vous vraiment supprimer ce produit ? Cette action est irréversible."))try{const m=await j(`/admin/products/${w}`);m&&m.success&&(await S(),window.$toast&&window.$toast.success("Produit supprimé avec succès","✓ Succès"))}catch(m){if(console.error("Erreur lors de la suppression:",m),window.$toast){const r=m.response?.data?.message||"Erreur lors de la suppression";window.$toast.error(r,"✗ Erreur")}}},a=w=>{c.value=w,Object.assign(p,{name:w.name,description:w.description,price:w.price,ticket_price:w.ticket_price,category_id:w.category_id,sale_mode:w.sale_mode,status:w.status,is_featured:w.is_featured||!1}),i.value=!0},L=w=>{f.push(`/admin/products/${w}`)},K=()=>{i.value=!1,ee()},ee=()=>{Object.assign(p,{name:"",description:"",price:"",ticket_price:"",category_id:"",sale_mode:"direct",status:"draft",is_featured:!1}),c.value=null},se=()=>{D.search="",D.category="",D.status="",V.value=1},H=w=>new Intl.NumberFormat("fr-FR").format(w||0),F=w=>({active:"Actif",draft:"Brouillon",completed:"Terminé",cancelled:"Annulé"})[w]||w,B=w=>({active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[w]||"bg-gray-100 text-gray-800",N=w=>({direct:"Vente directe",lottery:"Tombola"})[w]||w;return ce(()=>{S()}),(w,m)=>(t(),s("div",null,[e("div",U_,[m[14]||(m[14]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des produits"),e("p",{class:"mt-2 text-gray-600"},"Gérez les produits disponibles pour les tombolas")],-1)),e("button",{onClick:S,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center"},[b(u(ot),{class:Z(["w-5 h-5 mr-2",h.value?"animate-spin":""])},null,8,["class"]),m[13]||(m[13]=O(" Actualiser ",-1))])]),e("div",B_,[(t(!0),s(W,null,J(z.value,r=>(t(),s("div",{key:r.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},[e("div",O_,[e("div",{class:Z(["p-3 rounded-lg",r.color])},[(t(),ne(_e(r.icon),{class:"w-6 h-6 text-white"}))],2),e("div",H_,[e("p",G_,o(r.label),1),e("p",K_,o(r.value),1)])])]))),128))]),e("div",Z_,[e("div",W_,[e("div",null,[m[15]||(m[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),G(e("input",{"onUpdate:modelValue":m[0]||(m[0]=r=>D.search=r),type:"text",placeholder:"Nom du produit...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,D.search]])]),e("div",null,[m[17]||(m[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),G(e("select",{"onUpdate:modelValue":m[1]||(m[1]=r=>D.category=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[m[16]||(m[16]=e("option",{value:""},"Toutes les catégories",-1)),(t(!0),s(W,null,J(E.value,r=>(t(),s("option",{key:r.id,value:r.id},o(r.name),9,J_))),128))],512),[[ie,D.category]])]),e("div",null,[m[19]||(m[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":m[2]||(m[2]=r=>D.status=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},m[18]||(m[18]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"completed"},"Terminé",-1)]),512),[[ie,D.status]])]),e("div",{class:"flex items-end"},[e("button",{onClick:se,class:"w-full px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Réinitialiser ")])])]),e("div",X_,[h.value?(t(),s("div",Y_,m[20]||(m[20]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des produits...",-1)]))):(t(),s("div",Q_,[e("div",e5,[e("div",t5,[e("h3",s5,o(A.value)+" produit"+o(A.value>1?"s":""),1)])]),e("div",o5,[e("table",r5,[m[21]||(m[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Catégorie "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Prix "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Marchand "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tombola "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",a5,[(t(!0),s(W,null,J(y.value,r=>(t(),s("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",n5,[e("div",i5,[e("div",l5,[b(Ve,{src:r.image_url||r.main_image,alt:r.name,"container-class":"w-16 h-16 rounded-lg","image-class":"w-full h-full object-cover rounded-lg"},null,8,["src","alt"])]),e("div",d5,[e("div",c5,o(r.name),1),e("div",u5,o(r.description),1)])])]),e("td",m5,[e("span",p5,o(r.category?.name||"N/A"),1)]),e("td",g5,[e("div",v5,o(H(r.price))+" FCFA",1),r.sale_mode==="lottery"?(t(),s("div",x5,o(H(r.ticket_price))+" FCFA/ticket ",1)):U("",!0)]),e("td",f5,[r.merchant?(t(),s("div",b5,o(r.merchant.name),1)):U("",!0),r.merchant?(t(),s("div",h5,o(r.merchant.email),1)):U("",!0)]),e("td",y5,[e("span",{class:Z(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",B(r.status)])},o(F(r.status)),3)]),e("td",_5,[r.lottery?(t(),s("div",w5,[e("div",$5,[e("div",k5,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:we({width:r.lottery.progress+"%"})},null,4)]),e("span",C5,o(r.lottery.progress)+"%",1)]),e("div",j5,o(r.lottery.sold_tickets)+"/"+o(r.lottery.total_tickets)+" tickets ",1)])):(t(),s("span",A5,o(N(r.sale_mode)),1))]),e("td",P5,[e("div",E5,[e("button",{onClick:k=>a(r),class:"text-blue-600 hover:text-blue-900",title:"Modifier"},[b(u(rt),{class:"w-4 h-4"})],8,I5),e("button",{onClick:k=>L(r.id),class:"text-blue-600 hover:text-blue-900",title:"Voir"},[b(u(Me),{class:"w-4 h-4"})],8,M5),e("button",{onClick:k=>l(r.id),class:"text-red-600 hover:text-red-900",title:"Supprimer"},[b(u(ft),{class:"w-4 h-4"})],8,D5)])])]))),128))])])]),e("div",L5,[e("div",S5,[e("div",T5," Affichage de "+o((V.value-1)*I.value+1)+" à "+o(Math.min(V.value*I.value,A.value))+" sur "+o(A.value)+" résultats ",1),e("div",V5,[e("button",{onClick:m[3]||(m[3]=r=>V.value--),disabled:V.value===1,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Précédent ",8,R5),e("button",{onClick:m[4]||(m[4]=r=>V.value++),disabled:V.value===d.value,class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded disabled:opacity-50"}," Suivant ",8,F5)])])])]))]),i.value?(t(),s("div",N5,[e("div",z5,[m[31]||(m[31]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"}," Modifier le produit ")],-1)),e("form",{onSubmit:m[12]||(m[12]=ge(r=>n(),["prevent"]))},[e("div",q5,[e("div",U5,[e("div",null,[m[22]||(m[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),G(e("input",{"onUpdate:modelValue":m[5]||(m[5]=r=>p.name=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.name]])]),e("div",null,[m[24]||(m[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),G(e("select",{"onUpdate:modelValue":m[6]||(m[6]=r=>p.category_id=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[m[23]||(m[23]=e("option",{value:""},"Sélectionner une catégorie",-1)),(t(!0),s(W,null,J(E.value,r=>(t(),s("option",{key:r.id,value:r.id},o(r.name),9,B5))),128))],512),[[ie,p.category_id]])])]),e("div",null,[m[25]||(m[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),G(e("textarea",{"onUpdate:modelValue":m[7]||(m[7]=r=>p.description=r),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.description]])]),e("div",O5,[e("div",null,[m[26]||(m[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix du produit (FCFA) *",-1)),G(e("input",{"onUpdate:modelValue":m[8]||(m[8]=r=>p.price=r),type:"number",required:"",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.price,void 0,{number:!0}]])]),p.sale_mode==="lottery"?(t(),s("div",H5,[m[27]||(m[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prix par ticket (FCFA)",-1)),G(e("input",{"onUpdate:modelValue":m[9]||(m[9]=r=>p.ticket_price=r),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.ticket_price,void 0,{number:!0}]])])):U("",!0)]),e("div",G5,[e("div",null,[m[29]||(m[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":m[10]||(m[10]=r=>p.status=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},m[28]||(m[28]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"completed"},"Terminé",-1),e("option",{value:"cancelled"},"Annulé",-1)]),512),[[ie,p.status]])]),e("div",K5,[G(e("input",{"onUpdate:modelValue":m[11]||(m[11]=r=>p.is_featured=r),type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[Ee,p.is_featured]]),m[30]||(m[30]=e("label",{class:"ml-2 text-sm text-gray-700"},"Produit en vedette",-1))])])]),e("div",Z5,[e("button",{type:"button",onClick:K,class:"px-4 py-2 text-gray-600 hover:text-gray-900"}," Annuler "),e("button",{type:"submit",disabled:$.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"},[$.value?(t(),s("span",J5,"Enregistrement...")):(t(),s("span",X5,"Modifier"))],8,W5)])],32)])])):U("",!0)]))}},Q5=Le(Y5,[["__scopeId","data-v-3bfa4d60"]]),ew={class:"mb-8"},tw={class:"flex justify-between items-center"},sw=["disabled"],ow={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},rw={class:"flex items-center"},aw={class:"ml-4"},nw={class:"text-sm font-medium text-gray-600"},iw={class:"text-2xl font-bold text-gray-900"},lw={class:"mb-8"},dw={class:"border-b border-gray-200"},cw={class:"flex space-x-8"},uw=["onClick"],mw={key:0,class:"ml-2 bg-gray-100 text-gray-600 py-1 px-2 rounded-full text-xs"},pw={class:"mt-4 flex justify-between items-center"},gw={class:"flex space-x-3"},vw={class:"text-sm text-gray-500"},xw={key:0,class:"text-center py-12"},fw={key:1},bw={class:"bg-white rounded-lg shadow-sm border border-gray-200"},hw={key:0,class:"text-center py-12"},yw={key:1,class:"divide-y divide-gray-200"},_w={class:"flex items-center justify-between"},ww={class:"flex items-center space-x-4"},$w=["src","alt"],kw={class:"text-lg font-semibold text-gray-900"},Cw={class:"text-sm text-gray-600"},jw={class:"flex items-center space-x-4 mt-2"},Aw={class:"text-sm font-medium text-blue-600"},Pw={class:"text-sm text-gray-500"},Ew={class:"flex space-x-3"},Iw=["onClick"],Mw=["onClick","disabled"],Dw={key:0},Lw={key:1},Sw={class:"mt-4"},Tw={class:"w-full bg-gray-200 rounded-full h-2"},Vw={key:2},Rw={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Fw={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Nw={class:"flex space-x-2"},zw={class:"overflow-x-auto"},qw={class:"min-w-full divide-y divide-gray-200"},Uw={class:"bg-white divide-y divide-gray-200"},Bw={class:"px-6 py-4 whitespace-nowrap"},Ow={class:"flex items-center"},Hw=["src","alt"],Gw={class:"ml-4"},Kw={class:"text-sm font-medium text-gray-900"},Zw={class:"text-sm text-gray-500"},Ww={class:"px-6 py-4 whitespace-nowrap"},Jw={class:"text-sm text-gray-900"},Xw={class:"w-full bg-gray-200 rounded-full h-2 mt-1"},Yw={class:"text-xs text-gray-500 mt-1"},Qw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},e4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},t4={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},s4={class:"flex space-x-2"},o4=["onClick"],r4=["onClick"],a4={key:3},n4={class:"bg-white rounded-lg shadow-sm border border-gray-200"},i4={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},l4={class:"flex space-x-2"},d4={class:"divide-y divide-gray-200"},c4={class:"flex items-start justify-between"},u4={class:"flex items-start space-x-4"},m4=["src","alt"],p4={class:"text-lg font-semibold text-gray-900"},g4={class:"text-sm text-gray-600"},v4={class:"flex items-center space-x-4 mt-2"},x4={class:"text-sm text-gray-500"},f4={class:"text-sm font-medium text-blue-600"},b4={class:"text-right"},h4={class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800"},y4={class:"mt-2 text-sm text-gray-600"},_4={key:0,class:"mt-4 bg-green-50 p-4 rounded-lg"},w4={class:"flex items-center justify-between"},$4={class:"flex items-center"},k4={class:"font-semibold text-green-900"},C4={class:"text-sm text-green-800"},j4={class:"text-right"},A4={class:"text-sm text-green-800"},P4={class:"text-sm text-green-600"},E4={class:"flex justify-end space-x-2 mt-4"},I4=["onClick"],M4=["onClick"],D4={key:4,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},L4={class:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},S4={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},T4={class:"text-lg font-semibold text-gray-900"},V4={class:"px-6 py-4"},R4={class:"mb-4"},F4={class:"overflow-x-auto"},N4={class:"min-w-full divide-y divide-gray-200"},z4={class:"bg-white divide-y divide-gray-200"},q4={class:"px-6 py-4 whitespace-nowrap"},U4={class:"text-sm font-medium text-gray-900"},B4={class:"text-sm text-gray-500"},O4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},H4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},G4={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K4={key:5,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},Z4={class:"bg-white rounded-lg max-w-md w-full mx-4"},W4={class:"px-6 py-4"},J4={class:"text-gray-600 mb-4"},X4={class:"font-semibold"},Y4={class:"bg-gray-50 p-4 rounded-lg mb-4"},Q4={class:"text-sm text-gray-600"},e3={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},t3=["disabled"],s3={key:0},o3={key:1},r3={__name:"LotteryManagement",setup(_){const{get:v,post:M}=ae(),j=R(!1),f=R("pending"),h=R(!1),$=R(!1),i=R(!1),c=R(null),y=R(""),E=R({}),V=R([]),A=R(1),I=R(1),D=R(20),z=Q(()=>[{key:"pending",label:"Tirages en attente",count:E.value.pending_draws||0},{key:"active",label:"Tombolas actives",count:E.value.active_lotteries||0},{key:"completed",label:"Historique",count:E.value.completed_lotteries||0}]),p=Q(()=>[{label:"Tirages en attente",value:E.value.pending_draws||"0",color:"bg-yellow-500",icon:Ke},{label:"Actives",value:E.value.active_lotteries||"0",color:"bg-blue-500",icon:qe},{label:"Revenus totaux",value:H(E.value.total_revenue||0)+" FCFA",color:"bg-green-500",icon:Ie},{label:"Taux de participation",value:Math.round(E.value.average_participation_rate||0)+"%",color:"bg-purple-500",icon:it}]),d=de({search:""}),S=de({search:"",period:""}),n=Q(()=>V.value.filter(T=>T.status==="active"&&!T.is_drawn&&new Date(T.end_date)<=new Date)),l=Q(()=>V.value.filter(T=>T.status==="active"&&new Date(T.end_date)>new Date)),a=Q(()=>V.value.filter(T=>T.status==="completed"||T.is_drawn)),L=Q(()=>{let T=l.value;if(d.search){const g=d.search.toLowerCase();T=T.filter(C=>C.product?.title?.toLowerCase().includes(g)||C.product?.name?.toLowerCase().includes(g)||C.product?.description?.toLowerCase().includes(g)||C.lottery_number?.toLowerCase().includes(g))}return T}),K=Q(()=>{let T=a.value;if(S.search){const g=S.search.toLowerCase();T=T.filter(C=>C.product?.title?.toLowerCase().includes(g)||C.product?.name?.toLowerCase().includes(g)||C.winner?.first_name?.toLowerCase().includes(g)||C.winner?.last_name?.toLowerCase().includes(g)||C.winner?.email?.toLowerCase().includes(g)||C.lottery_number?.toLowerCase().includes(g))}if(S.period){const g=new Date,C=S.period;T=T.filter(te=>{const re=new Date(te.draw_date||te.created_at);if(C==="week"){const ue=new Date(g.getTime()-6048e5);return re>=ue}else if(C==="month"){const ue=new Date(g.getFullYear(),g.getMonth()-1,g.getDate());return re>=ue}else if(C==="quarter"){const ue=new Date(g.getFullYear(),g.getMonth()-3,g.getDate());return re>=ue}return!0})}return T}),ee=Q(()=>{if(!c.value?.participants_list)return[];let T=c.value.participants_list;if(y.value){const g=y.value.toLowerCase();T=T.filter(C=>{const te=C.user;return`${te?.first_name||""} ${te?.last_name||""}`.toLowerCase().includes(g)||te?.email?.toLowerCase().includes(g)})}return T}),se=T=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(T)),H=T=>new Intl.NumberFormat("fr-FR").format(T||0);ke(f,()=>{B()});const F=async()=>{try{const T=await v("/admin/lotteries/statistics");T&&(E.value=T)}catch(T){console.error("Erreur lors du chargement des statistiques:",T)}},B=async()=>{j.value=!0;try{const T=new URLSearchParams;T.append("per_page",D.value),T.append("page",A.value),f.value==="active"||f.value==="pending"?(T.append("status","active"),T.append("is_drawn","false")):f.value==="completed"&&T.append("is_drawn","true");const g=await v(`/admin/lotteries?${T.toString()}`);g&&g.data&&(V.value=g.data.map(C=>({...C,progress:C.sold_tickets&&C.total_tickets?Math.round(C.sold_tickets/C.total_tickets*100):0})),A.value=g.current_page||1,I.value=g.last_page||1)}catch(T){console.error("Erreur lors du chargement des tombolas:",T),V.value=[]}finally{j.value=!1}},N=async()=>{await Promise.all([F(),B()])},w=async T=>{try{const g=await v(`/admin/lotteries/${T.id}`);g&&(c.value=g,$.value=!0)}catch(g){console.error("Erreur lors du chargement des participants:",g),window.$toast&&window.$toast.error("Erreur lors du chargement des participants","✗ Erreur")}},m=T=>{c.value=T,i.value=!0},r=async()=>{h.value=!0;try{const T=await M(`/admin/lotteries/${c.value.id}/draw`);T&&T.success&&(window.$toast&&window.$toast.success("Tirage effectué avec succès","✓ Succès"),await N(),f.value="completed")}catch(T){if(console.error("Erreur lors du tirage:",T),window.$toast){const g=T.response?.data?.message||"Erreur lors du tirage";window.$toast.error(g,"✗ Erreur")}}finally{h.value=!1,i.value=!1,c.value=null}},k=T=>{console.log("Edit lottery:",T.id)},P=async T=>{try{const g=await v(`/admin/lotteries/${T.id}`);g&&console.log("Draw details:",g)}catch(g){console.error("Erreur lors du chargement des détails:",g)}},x=async T=>{try{const g=await v(`/admin/lotteries/${T.id}/export`);if(g){const C=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),te=URL.createObjectURL(C),re=document.createElement("a");re.href=te,re.download=`lottery-${T.lottery_number}-export.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(te),window.$toast&&window.$toast.success("Export téléchargé avec succès","✓ Succès")}}catch(g){console.error("Erreur lors de l'export:",g),window.$toast&&window.$toast.error("Erreur lors de l'export","✗ Erreur")}},q=async()=>{try{const T=await v("/admin/lotteries/eligible-for-draw");T&&(console.log("Eligible draws:",T),window.$toast&&window.$toast.info(`${T.count} tirages disponibles`,"ℹ Info"))}catch(T){console.error("Erreur lors du chargement des tirages disponibles:",T)}};return ce(()=>{F(),B()}),(T,g)=>(t(),s("div",null,[e("div",ew,[e("div",tw,[g[8]||(g[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des tombolas"),e("p",{class:"mt-2 text-gray-600"},"Gérez les tirages et suivez les résultats des tombolas")],-1)),e("button",{onClick:N,disabled:j.value,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:bg-gray-400"},[(t(),s("svg",{class:Z(["w-4 h-4 mr-2",j.value?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},g[6]||(g[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),g[7]||(g[7]=O(" Actualiser ",-1))],8,sw)])]),e("div",ow,[(t(!0),s(W,null,J(p.value,C=>(t(),s("div",{key:C.label,class:"bg-white p-6 rounded-lg shadow-sm border border-gray-200"},[e("div",rw,[e("div",{class:Z(["p-3 rounded-lg",C.color])},[(t(),ne(_e(C.icon),{class:"w-6 h-6 text-white"}))],2),e("div",aw,[e("p",nw,o(C.label),1),e("p",iw,o(C.value),1)])])]))),128))]),e("div",lw,[e("div",dw,[e("nav",cw,[(t(!0),s(W,null,J(z.value,C=>(t(),s("button",{key:C.key,onClick:te=>f.value=C.key,class:Z(["py-2 px-1 border-b-2 font-medium text-sm",f.value===C.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[O(o(C.label)+" ",1),C.count!==void 0?(t(),s("span",mw,o(C.count),1)):U("",!0)],10,uw))),128))])]),e("div",pw,[e("div",gw,[e("button",{onClick:q,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700"},[g[9]||(g[9]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),O(" Tirages disponibles ("+o(E.value.pending_draws||0)+") ",1)])]),e("div",vw," Dernière mise à jour : "+o(new Date().toLocaleTimeString("fr-FR")),1)])]),j.value?(t(),s("div",xw,g[10]||(g[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des tombolas...",-1)]))):f.value==="pending"?(t(),s("div",fw,[e("div",bw,[g[13]||(g[13]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tirages en attente"),e("p",{class:"text-sm text-gray-600"},"Tombolas prêtes pour le tirage")],-1)),n.value.length===0?(t(),s("div",hw,[b(u(Ke),{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),g[11]||(g[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun tirage en attente",-1)),g[12]||(g[12]=e("p",{class:"text-gray-600"},"Toutes les tombolas sont à jour",-1))])):(t(),s("div",yw,[(t(!0),s(W,null,J(n.value,C=>(t(),s("div",{key:C.id,class:"p-6 hover:bg-gray-50"},[e("div",_w,[e("div",ww,[e("img",{src:C.product?.image_url||C.product?.main_image||"/images/placeholder.jpg",alt:C.product?.title||C.product?.name,class:"w-16 h-16 rounded-lg object-cover"},null,8,$w),e("div",null,[e("h4",kw,o(C.product?.title||C.product?.name),1),e("p",Cw,o(C.product?.description),1),e("div",jw,[e("span",Aw,o(C.sold_tickets||0)+"/"+o(C.total_tickets)+" tickets vendus ",1),e("span",Pw," Tirage prévu: "+o(se(C.draw_date||C.end_date)),1)])])]),e("div",Ew,[e("button",{onClick:te=>w(C),class:"px-4 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors"}," Voir participants ",8,Iw),e("button",{onClick:te=>m(C),disabled:h.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400"},[h.value?(t(),s("span",Dw,"Tirage...")):(t(),s("span",Lw,"Effectuer le tirage"))],8,Mw)])]),e("div",Sw,[e("div",Tw,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:we({width:C.progress+"%"})},null,4)])])]))),128))]))])])):f.value==="active"?(t(),s("div",Vw,[e("div",Rw,[e("div",Fw,[g[14]||(g[14]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tombolas actives"),e("p",{class:"text-sm text-gray-600"},"Tombolas en cours de vente")],-1)),e("div",Nw,[G(e("input",{"onUpdate:modelValue":g[0]||(g[0]=C=>d.search=C),type:"text",placeholder:"Rechercher...",class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,d.search]])])]),e("div",zw,[e("table",qw,[g[15]||(g[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Progression "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Revenus "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date de tirage "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Uw,[(t(!0),s(W,null,J(L.value,C=>(t(),s("tr",{key:C.id,class:"hover:bg-gray-50"},[e("td",Bw,[e("div",Ow,[e("img",{src:C.product?.image_url||C.product?.main_image||"/images/placeholder.jpg",alt:C.product?.title||C.product?.name,class:"w-12 h-12 rounded-lg object-cover"},null,8,Hw),e("div",Gw,[e("div",Kw,o(C.product?.title||C.product?.name),1),e("div",Zw,o(H(C.product?.price||0))+" FCFA",1)])])]),e("td",Ww,[e("div",Jw,o(C.progress)+"%",1),e("div",Xw,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:we({width:C.progress+"%"})},null,4)]),e("div",Yw,o(C.sold_tickets||0)+"/"+o(C.total_tickets),1)]),e("td",Qw,o(H((C.sold_tickets||0)*(C.ticket_price||0)))+" FCFA ",1),e("td",e4,o(se(C.draw_date||C.end_date)),1),e("td",t4,[e("div",s4,[e("button",{onClick:te=>k(C),class:"text-blue-600 hover:text-blue-900",title:"Modifier"},[b(u(rt),{class:"w-4 h-4"})],8,o4),e("button",{onClick:te=>w(C),class:"text-blue-600 hover:text-blue-900",title:"Voir participants"},[b(u(Ye),{class:"w-4 h-4"})],8,r4)])])]))),128))])])])])])):f.value==="completed"?(t(),s("div",a4,[e("div",n4,[e("div",i4,[g[17]||(g[17]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Tirages terminés"),e("p",{class:"text-sm text-gray-600"},"Historique des tombolas terminées")],-1)),e("div",l4,[G(e("input",{"onUpdate:modelValue":g[1]||(g[1]=C=>S.search=C),type:"text",placeholder:"Rechercher...",class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,S.search]]),G(e("select",{"onUpdate:modelValue":g[2]||(g[2]=C=>S.period=C),class:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},g[16]||(g[16]=[e("option",{value:""},"Toutes les périodes",-1),e("option",{value:"week"},"Cette semaine",-1),e("option",{value:"month"},"Ce mois",-1),e("option",{value:"quarter"},"Ce trimestre",-1)]),512),[[ie,S.period]])])]),e("div",d4,[(t(!0),s(W,null,J(K.value,C=>(t(),s("div",{key:C.id,class:"p-6"},[e("div",c4,[e("div",u4,[e("img",{src:C.product?.image_url||C.product?.main_image||"/images/placeholder.jpg",alt:C.product?.title||C.product?.name,class:"w-16 h-16 rounded-lg object-cover"},null,8,m4),e("div",null,[e("h4",p4,o(C.product?.title||C.product?.name),1),e("p",g4,o(C.product?.description),1),e("div",v4,[e("span",x4," Tirage effectué: "+o(se(C.draw_date||C.updated_at)),1),e("span",f4," Revenus: "+o(H((C.sold_tickets||0)*(C.ticket_price||0)))+" FCFA ",1)])])]),e("div",b4,[e("span",h4,[b(u(je),{class:"w-4 h-4 mr-1"}),g[18]||(g[18]=O(" Terminé ",-1))]),e("div",y4," Gagnant: "+o(C.winner?`${C.winner.first_name} ${C.winner.last_name}`:"Non réclamé"),1)])]),C.winner?(t(),s("div",_4,[e("div",w4,[e("div",$4,[b(u(qe),{class:"w-5 h-5 text-green-600 mr-2"}),e("div",null,[e("p",k4,o(C.winner.first_name)+" "+o(C.winner.last_name),1),e("p",C4,"Ticket gagnant: #"+o(C.winning_ticket_number||"N/A"),1)])]),e("div",j4,[e("p",A4,o(C.winner.email),1),e("p",P4,o(C.winner.phone),1)])])])):U("",!0),e("div",E4,[e("button",{onClick:te=>P(C),class:"px-3 py-1 text-sm text-blue-600 hover:text-blue-800"}," Voir détails ",8,I4),e("button",{onClick:te=>x(C),class:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800"}," Exporter ",8,M4)])]))),128))])])])):U("",!0),$.value?(t(),s("div",D4,[e("div",L4,[e("div",S4,[e("h3",T4," Participants - "+o(c.value?.product?.title||c.value?.product?.name),1),e("button",{onClick:g[3]||(g[3]=C=>$.value=!1),class:"text-gray-400 hover:text-gray-600"},[b(u(De),{class:"w-6 h-6"})])]),e("div",V4,[e("div",R4,[G(e("input",{"onUpdate:modelValue":g[4]||(g[4]=C=>y.value=C),type:"text",placeholder:"Rechercher un participant...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,y.value]])]),e("div",F4,[e("table",N4,[g[19]||(g[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tickets "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total payé "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date d'achat ")])],-1)),e("tbody",z4,[(t(!0),s(W,null,J(ee.value,C=>(t(),s("tr",{key:C.user?.id,class:"hover:bg-gray-50"},[e("td",q4,[e("div",null,[e("div",U4,o(C.user?.first_name)+" "+o(C.user?.last_name),1),e("div",B4,o(C.user?.email),1)])]),e("td",O4,o(C.tickets_count),1),e("td",H4,o(H(C.total_spent))+" FCFA ",1),e("td",G4,o(se(C.tickets?.[0]?.purchased_at||C.tickets?.[0]?.created_at)),1)]))),128))])])])])])])):U("",!0),i.value?(t(),s("div",K4,[e("div",Z4,[g[25]||(g[25]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Confirmer le tirage")],-1)),e("div",W4,[e("p",J4,[g[20]||(g[20]=O(" Êtes-vous sûr de vouloir effectuer le tirage pour ",-1)),e("span",X4,o(c.value?.product?.title||c.value?.product?.name),1),g[21]||(g[21]=O(" ? ",-1))]),e("div",Y4,[e("p",Q4,[O(" • "+o(c.value?.sold_tickets||0)+" tickets vendus",1),g[22]||(g[22]=e("br",null,null,-1)),O(" • "+o(c.value?.participants_list?.length||0)+" participants",1),g[23]||(g[23]=e("br",null,null,-1)),O(" • Revenus: "+o(H((c.value?.sold_tickets||0)*(c.value?.ticket_price||0)))+" FCFA ",1)])]),g[24]||(g[24]=e("p",{class:"text-sm text-red-600"}," ⚠️ Cette action est irréversible. Le gagnant sera choisi aléatoirement. ",-1))]),e("div",e3,[e("button",{onClick:g[5]||(g[5]=C=>i.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-900"}," Annuler "),e("button",{onClick:r,disabled:h.value,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400"},[h.value?(t(),s("span",s3,"Tirage en cours...")):(t(),s("span",o3,"Effectuer le tirage"))],8,t3)])])])):U("",!0)]))}},a3={class:"mb-8"},n3={class:"border-b border-gray-200"},i3={class:"flex space-x-8"},l3=["onClick"],d3={key:0},c3={class:"bg-white rounded-lg shadow-sm border border-gray-200"},u3={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},m3={class:"p-6"},p3={class:"mb-6"},g3={class:"overflow-x-auto"},v3={class:"min-w-full divide-y divide-gray-200"},x3={class:"bg-white divide-y divide-gray-200"},f3={class:"px-6 py-4 whitespace-nowrap"},b3={class:"flex items-center"},h3=["src","alt"],y3={class:"text-sm font-medium text-gray-900"},_3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},w3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},$3={class:"px-6 py-4 whitespace-nowrap"},k3={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},C3={class:"flex space-x-2"},j3=["onClick"],A3=["onClick"],P3=["onClick"],E3={key:1},I3={class:"bg-white rounded-lg shadow-sm border border-gray-200"},M3={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},D3={class:"p-6"},L3={class:"mb-6"},S3={class:"overflow-x-auto"},T3={class:"min-w-full divide-y divide-gray-200"},V3={class:"bg-white divide-y divide-gray-200"},R3={class:"px-6 py-4 whitespace-nowrap"},F3={class:"flex items-center"},N3={class:"text-2xl mr-3"},z3={class:"text-sm font-medium text-gray-900"},q3={class:"text-sm text-gray-500"},U3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},B3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},O3={class:"px-6 py-4 whitespace-nowrap"},H3={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},G3={class:"flex space-x-2"},K3=["onClick"],Z3=["onClick"],W3=["onClick"],J3={key:2},X3={class:"space-y-6"},Y3={class:"bg-white rounded-lg shadow-sm border border-gray-200"},Q3={class:"p-6"},e6={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},t6=["value"],s6=["value"],o6={class:"mt-6"},r6={class:"mt-6 flex justify-end"},a6=["disabled"],n6={key:0},i6={key:1},l6={class:"bg-white rounded-lg shadow-sm border border-gray-200"},d6={class:"p-6"},c6={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},u6={class:"mt-6 flex justify-end"},m6=["disabled"],p6={key:0},g6={key:1},v6={key:3,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},x6={class:"bg-white rounded-lg max-w-md w-full mx-4"},f6={class:"px-6 py-4 border-b border-gray-200"},b6={class:"text-lg font-semibold text-gray-900"},h6={class:"px-6 py-4 space-y-4"},y6={class:"flex items-center"},_6={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},w6=["disabled"],$6={key:0},k6={key:1},C6={key:4,class:"fixed inset-0 bg-black/20 flex items-center justify-center z-50"},j6={class:"bg-white rounded-lg max-w-md w-full mx-4"},A6={class:"px-6 py-4 border-b border-gray-200"},P6={class:"text-lg font-semibold text-gray-900"},E6={class:"px-6 py-4 space-y-4"},I6={class:"flex items-center"},M6={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},D6=["disabled"],L6={key:0},S6={key:1},T6={__name:"CountryLanguageManagement",setup(_){const v=R("countries"),M=R(!1),j=R(!1),f=R(!1),h=R(!1),$=R(!1),i=R(!1),c=R(null),y=R(null),E=[{key:"countries",label:"Pays",icon:us},{key:"languages",label:"Langues",icon:ps},{key:"settings",label:"Paramètres",icon:as}],V=de({search:""}),A=de({search:""}),I=R([{id:1,name:"France",code:"FR",currency:"EUR",flag:"https://flagcdn.com/w40/fr.png",is_active:!0},{id:2,name:"Sénégal",code:"SN",currency:"XOF",flag:"https://flagcdn.com/w40/sn.png",is_active:!0},{id:3,name:"Côte d'Ivoire",code:"CI",currency:"XOF",flag:"https://flagcdn.com/w40/ci.png",is_active:!0},{id:4,name:"Mali",code:"ML",currency:"XOF",flag:"https://flagcdn.com/w40/ml.png",is_active:!1}]),D=R([{id:1,name:"Français",native_name:"Français",code:"fr",flag:"🇫🇷",direction:"ltr",is_active:!0},{id:2,name:"English",native_name:"English",code:"en",flag:"🇺🇸",direction:"ltr",is_active:!0},{id:3,name:"العربية",native_name:"العربية",code:"ar",flag:"🇸🇦",direction:"rtl",is_active:!1},{id:4,name:"Español",native_name:"Español",code:"es",flag:"🇪🇸",direction:"ltr",is_active:!1}]),z=de({name:"",code:"",currency:"",flag:"",is_active:!0}),p=de({name:"",native_name:"",code:"",flag:"",direction:"ltr",is_active:!0}),d=de({app_name:"Koumbaya",app_url:"https://koumbaya.com",app_description:"Plateforme de tombolas en ligne pour gagner des produits exceptionnels",default_language:"fr",default_country:"SN"}),S=de({from_email:"noreply@koumbaya.com",from_name:"Koumbaya",support_email:"support@koumbaya.com",admin_email:"admin@koumbaya.com"}),n=Q(()=>{let T=I.value;if(V.search){const g=V.search.toLowerCase();T=T.filter(C=>C.name.toLowerCase().includes(g)||C.code.toLowerCase().includes(g))}return T}),l=Q(()=>{let T=D.value;if(A.search){const g=A.search.toLowerCase();T=T.filter(C=>C.name.toLowerCase().includes(g)||C.native_name.toLowerCase().includes(g)||C.code.toLowerCase().includes(g))}return T}),a=Q(()=>I.value.filter(T=>T.is_active)),L=Q(()=>D.value.filter(T=>T.is_active)),K=T=>{c.value=T,Object.assign(z,{name:T.name,code:T.code,currency:T.currency,flag:T.flag,is_active:T.is_active}),h.value=!0},ee=T=>{y.value=T,Object.assign(p,{name:T.name,native_name:T.native_name,code:T.code,flag:T.flag,direction:T.direction,is_active:T.is_active}),i.value=!0},se=async T=>{try{T.is_active=!T.is_active,console.log("Country status toggled:",T)}catch(g){console.error("Error toggling country status:",g)}},H=async T=>{try{T.is_active=!T.is_active,console.log("Language status toggled:",T)}catch(g){console.error("Error toggling language status:",g)}},F=async T=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce pays ?"))try{I.value=I.value.filter(g=>g.id!==T),console.log("Country deleted:",T)}catch(g){console.error("Error deleting country:",g)}},B=async T=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette langue ?"))try{D.value=D.value.filter(g=>g.id!==T),console.log("Language deleted:",T)}catch(g){console.error("Error deleting language:",g)}},N=async()=>{M.value=!0;try{await new Promise(g=>setTimeout(g,1500));const T={id:Date.now(),...z};I.value.unshift(T),x(),console.log("Country created")}catch(T){console.error("Error creating country:",T)}finally{M.value=!1}},w=async()=>{M.value=!0;try{await new Promise(g=>setTimeout(g,1500));const T=I.value.findIndex(g=>g.id===c.value.id);T!==-1&&(I.value[T]={...I.value[T],...z}),x(),console.log("Country updated")}catch(T){console.error("Error updating country:",T)}finally{M.value=!1}},m=async()=>{M.value=!0;try{await new Promise(g=>setTimeout(g,1500));const T={id:Date.now(),...p};D.value.unshift(T),q(),console.log("Language created")}catch(T){console.error("Error creating language:",T)}finally{M.value=!1}},r=async()=>{M.value=!0;try{await new Promise(g=>setTimeout(g,1500));const T=D.value.findIndex(g=>g.id===y.value.id);T!==-1&&(D.value[T]={...D.value[T],...p}),q(),console.log("Language updated")}catch(T){console.error("Error updating language:",T)}finally{M.value=!1}},k=async()=>{j.value=!0;try{await new Promise(T=>setTimeout(T,1500)),console.log("General settings updated")}catch(T){console.error("Error updating general settings:",T)}finally{j.value=!1}},P=async()=>{j.value=!0;try{await new Promise(T=>setTimeout(T,1500)),console.log("Email settings updated")}catch(T){console.error("Error updating email settings:",T)}finally{j.value=!1}},x=()=>{f.value=!1,h.value=!1,c.value=null,Object.assign(z,{name:"",code:"",currency:"",flag:"",is_active:!0})},q=()=>{$.value=!1,i.value=!1,y.value=null,Object.assign(p,{name:"",native_name:"",code:"",flag:"",direction:"ltr",is_active:!0})};return ce(()=>{console.log("Settings page mounted")}),(T,g)=>(t(),s("div",null,[g[55]||(g[55]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Configuration système"),e("p",{class:"mt-2 text-gray-600"},"Gérez les paramètres globaux de l'application")],-1)),e("div",a3,[e("div",n3,[e("nav",i3,[(t(),s(W,null,J(E,C=>e("button",{key:C.key,onClick:te=>v.value=C.key,class:Z(["py-2 px-1 border-b-2 font-medium text-sm",v.value===C.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[(t(),ne(_e(C.icon),{class:"w-5 h-5 inline mr-2"})),O(" "+o(C.label),1)],10,l3)),64))])])]),v.value==="countries"?(t(),s("div",d3,[e("div",c3,[e("div",u3,[g[27]||(g[27]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Gestion des pays"),e("p",{class:"text-sm text-gray-600"},"Configurez les pays disponibles sur la plateforme")],-1)),e("button",{onClick:g[0]||(g[0]=C=>f.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center"},[b(u(vt),{class:"w-4 h-4 mr-2"}),g[26]||(g[26]=O(" Ajouter un pays ",-1))])]),e("div",m3,[e("div",p3,[G(e("input",{"onUpdate:modelValue":g[1]||(g[1]=C=>V.search=C),type:"text",placeholder:"Rechercher un pays...",class:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,V.search]])]),e("div",g3,[e("table",v3,[g[28]||(g[28]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pays "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Code "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Devise "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",x3,[(t(!0),s(W,null,J(n.value,C=>(t(),s("tr",{key:C.id,class:"hover:bg-gray-50"},[e("td",f3,[e("div",b3,[C.flag?(t(),s("img",{key:0,src:C.flag,alt:C.name,class:"w-6 h-4 rounded object-cover mr-3"},null,8,h3)):U("",!0),e("div",y3,o(C.name),1)])]),e("td",_3,o(C.code),1),e("td",w3,o(C.currency),1),e("td",$3,[e("span",{class:Z(["px-2 py-1 text-xs font-medium rounded-full",C.is_active?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},o(C.is_active?"Actif":"Inactif"),3)]),e("td",k3,[e("div",C3,[e("button",{onClick:te=>K(C),class:"text-blue-600 hover:text-blue-900"},[b(u(rt),{class:"w-4 h-4"})],8,j3),e("button",{onClick:te=>se(C),class:"text-blue-600 hover:text-blue-900"},o(C.is_active?"Désactiver":"Activer"),9,A3),e("button",{onClick:te=>F(C.id),class:"text-red-600 hover:text-red-900"},[b(u(ft),{class:"w-4 h-4"})],8,P3)])])]))),128))])])])])])])):U("",!0),v.value==="languages"?(t(),s("div",E3,[e("div",I3,[e("div",M3,[g[30]||(g[30]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Gestion des langues"),e("p",{class:"text-sm text-gray-600"},"Configurez les langues disponibles sur la plateforme")],-1)),e("button",{onClick:g[2]||(g[2]=C=>$.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center"},[b(u(vt),{class:"w-4 h-4 mr-2"}),g[29]||(g[29]=O(" Ajouter une langue ",-1))])]),e("div",D3,[e("div",L3,[G(e("input",{"onUpdate:modelValue":g[3]||(g[3]=C=>A.search=C),type:"text",placeholder:"Rechercher une langue...",class:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,A.search]])]),e("div",S3,[e("table",T3,[g[31]||(g[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Langue "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Code "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Direction "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",V3,[(t(!0),s(W,null,J(l.value,C=>(t(),s("tr",{key:C.id,class:"hover:bg-gray-50"},[e("td",R3,[e("div",F3,[e("span",N3,o(C.flag),1),e("div",null,[e("div",z3,o(C.name),1),e("div",q3,o(C.native_name),1)])])]),e("td",U3,o(C.code),1),e("td",B3,o(C.direction==="rtl"?"Droite à gauche":"Gauche à droite"),1),e("td",O3,[e("span",{class:Z(["px-2 py-1 text-xs font-medium rounded-full",C.is_active?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},o(C.is_active?"Actif":"Inactif"),3)]),e("td",H3,[e("div",G3,[e("button",{onClick:te=>ee(C),class:"text-blue-600 hover:text-blue-900"},[b(u(rt),{class:"w-4 h-4"})],8,K3),e("button",{onClick:te=>H(C),class:"text-blue-600 hover:text-blue-900"},o(C.is_active?"Désactiver":"Activer"),9,Z3),e("button",{onClick:te=>B(C.id),class:"text-red-600 hover:text-red-900"},[b(u(ft),{class:"w-4 h-4"})],8,W3)])])]))),128))])])])])])])):U("",!0),v.value==="settings"?(t(),s("div",J3,[e("div",X3,[e("div",Y3,[g[37]||(g[37]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Paramètres généraux")],-1)),e("div",Q3,[e("form",{onSubmit:ge(k,["prevent"])},[e("div",e6,[e("div",null,[g[32]||(g[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'application",-1)),G(e("input",{"onUpdate:modelValue":g[4]||(g[4]=C=>d.app_name=C),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,d.app_name]])]),e("div",null,[g[33]||(g[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL de l'application",-1)),G(e("input",{"onUpdate:modelValue":g[5]||(g[5]=C=>d.app_url=C),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,d.app_url]])]),e("div",null,[g[34]||(g[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue par défaut",-1)),G(e("select",{"onUpdate:modelValue":g[6]||(g[6]=C=>d.default_language=C),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[(t(!0),s(W,null,J(L.value,C=>(t(),s("option",{key:C.id,value:C.code},o(C.name),9,t6))),128))],512),[[ie,d.default_language]])]),e("div",null,[g[35]||(g[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays par défaut",-1)),G(e("select",{"onUpdate:modelValue":g[7]||(g[7]=C=>d.default_country=C),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[(t(!0),s(W,null,J(a.value,C=>(t(),s("option",{key:C.id,value:C.code},o(C.name),9,s6))),128))],512),[[ie,d.default_country]])])]),e("div",o6,[g[36]||(g[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description de l'application",-1)),G(e("textarea",{"onUpdate:modelValue":g[8]||(g[8]=C=>d.app_description=C),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,d.app_description]])]),e("div",r6,[e("button",{type:"submit",disabled:j.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"},[j.value?(t(),s("span",n6,"Mise à jour...")):(t(),s("span",i6,"Sauvegarder"))],8,a6)])],32)])]),e("div",l6,[g[42]||(g[42]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Paramètres email")],-1)),e("div",d6,[e("form",{onSubmit:ge(P,["prevent"])},[e("div",c6,[e("div",null,[g[38]||(g[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email expéditeur",-1)),G(e("input",{"onUpdate:modelValue":g[9]||(g[9]=C=>S.from_email=C),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,S.from_email]])]),e("div",null,[g[39]||(g[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom expéditeur",-1)),G(e("input",{"onUpdate:modelValue":g[10]||(g[10]=C=>S.from_name=C),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,S.from_name]])]),e("div",null,[g[40]||(g[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email support",-1)),G(e("input",{"onUpdate:modelValue":g[11]||(g[11]=C=>S.support_email=C),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,S.support_email]])]),e("div",null,[g[41]||(g[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email admin",-1)),G(e("input",{"onUpdate:modelValue":g[12]||(g[12]=C=>S.admin_email=C),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,S.admin_email]])])]),e("div",u6,[e("button",{type:"submit",disabled:j.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"},[j.value?(t(),s("span",p6,"Mise à jour...")):(t(),s("span",g6,"Sauvegarder"))],8,m6)])],32)])])])])):U("",!0),f.value||h.value?(t(),s("div",v6,[e("div",x6,[e("div",f6,[e("h3",b6,o(f.value?"Ajouter un pays":"Modifier le pays"),1)]),e("form",{onSubmit:g[18]||(g[18]=ge(C=>f.value?N():w(),["prevent"]))},[e("div",h6,[e("div",null,[g[43]||(g[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),G(e("input",{"onUpdate:modelValue":g[13]||(g[13]=C=>z.name=C),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,z.name]])]),e("div",null,[g[44]||(g[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code *",-1)),G(e("input",{"onUpdate:modelValue":g[14]||(g[14]=C=>z.code=C),type:"text",required:"",maxlength:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,z.code]])]),e("div",null,[g[45]||(g[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),G(e("input",{"onUpdate:modelValue":g[15]||(g[15]=C=>z.currency=C),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,z.currency]])]),e("div",null,[g[46]||(g[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du drapeau",-1)),G(e("input",{"onUpdate:modelValue":g[16]||(g[16]=C=>z.flag=C),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,z.flag]])]),e("div",y6,[G(e("input",{"onUpdate:modelValue":g[17]||(g[17]=C=>z.is_active=C),type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[Ee,z.is_active]]),g[47]||(g[47]=e("label",{class:"ml-2 text-sm text-gray-700"},"Actif",-1))])]),e("div",_6,[e("button",{type:"button",onClick:x,class:"px-4 py-2 text-gray-600 hover:text-gray-900"}," Annuler "),e("button",{type:"submit",disabled:M.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"},[M.value?(t(),s("span",$6,"Enregistrement...")):(t(),s("span",k6,o(f.value?"Créer":"Modifier"),1))],8,w6)])],32)])])):U("",!0),$.value||i.value?(t(),s("div",C6,[e("div",j6,[e("div",A6,[e("h3",P6,o($.value?"Ajouter une langue":"Modifier la langue"),1)]),e("form",{onSubmit:g[25]||(g[25]=ge(C=>$.value?m():r(),["prevent"]))},[e("div",E6,[e("div",null,[g[48]||(g[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),G(e("input",{"onUpdate:modelValue":g[19]||(g[19]=C=>p.name=C),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.name]])]),e("div",null,[g[49]||(g[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom natif",-1)),G(e("input",{"onUpdate:modelValue":g[20]||(g[20]=C=>p.native_name=C),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.native_name]])]),e("div",null,[g[50]||(g[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code *",-1)),G(e("input",{"onUpdate:modelValue":g[21]||(g[21]=C=>p.code=C),type:"text",required:"",maxlength:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.code]])]),e("div",null,[g[51]||(g[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Drapeau (emoji)",-1)),G(e("input",{"onUpdate:modelValue":g[22]||(g[22]=C=>p.flag=C),type:"text",maxlength:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[X,p.flag]])]),e("div",null,[g[53]||(g[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Direction",-1)),G(e("select",{"onUpdate:modelValue":g[23]||(g[23]=C=>p.direction=C),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},g[52]||(g[52]=[e("option",{value:"ltr"},"Gauche à droite",-1),e("option",{value:"rtl"},"Droite à gauche",-1)]),512),[[ie,p.direction]])]),e("div",I6,[G(e("input",{"onUpdate:modelValue":g[24]||(g[24]=C=>p.is_active=C),type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[Ee,p.is_active]]),g[54]||(g[54]=e("label",{class:"ml-2 text-sm text-gray-700"},"Actif",-1))])]),e("div",M6,[e("button",{type:"button",onClick:q,class:"px-4 py-2 text-gray-600 hover:text-gray-900"}," Annuler "),e("button",{type:"submit",disabled:M.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400"},[M.value?(t(),s("span",L6,"Enregistrement...")):(t(),s("span",S6,o($.value?"Créer":"Modifier"),1))],8,D6)])],32)])])):U("",!0)]))}},V6={class:"min-h-screen bg-gray-50 py-8"},R6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},F6={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"},N6={class:"flex items-center justify-between"},z6={class:"flex space-x-3"},q6={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},U6={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},B6={class:"flex items-center"},O6={class:"text-2xl font-bold text-gray-900"},H6={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},G6={class:"flex items-center"},K6={class:"text-2xl font-bold text-gray-900"},Z6={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},W6={class:"flex items-center"},J6={class:"text-2xl font-bold text-gray-900"},X6={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Y6={class:"flex items-center"},Q6={class:"text-2xl font-bold text-gray-900"},e9={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8"},t9={class:"p-6"},s9={key:0,class:"mb-6"},o9={class:"space-y-3"},r9={class:"font-medium"},a9={class:"text-sm text-gray-600"},n9={class:"text-sm"},i9={class:"text-right"},l9={class:"font-semibold text-orange-700"},d9=["onClick"],c9={key:1},u9={class:"space-y-3"},m9={class:"font-medium"},p9={class:"text-sm text-gray-600"},g9={class:"text-sm"},v9={class:"text-right"},x9={class:"font-semibold text-red-700"},f9=["onClick"],b9={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-8"},h9={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},y9={class:"flex flex-wrap items-center space-x-4"},_9={class:"text-sm text-gray-500"},w9={key:1,class:"text-center py-12"},$9={key:2,class:"text-center py-12"},k9={key:3,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},C9={class:"overflow-x-auto"},j9={class:"min-w-full divide-y divide-gray-200"},A9={class:"bg-white divide-y divide-gray-200"},P9={class:"px-6 py-4 whitespace-nowrap"},E9={class:"font-mono text-sm font-medium text-gray-900"},I9={class:"text-sm text-gray-500"},M9={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mt-1"},D9={class:"px-6 py-4 whitespace-nowrap"},L9={class:"text-sm font-medium text-gray-900"},S9={class:"text-sm text-gray-500"},T9={class:"px-6 py-4 whitespace-nowrap"},V9={class:"text-sm font-semibold text-gray-900"},R9={class:"text-xs text-gray-500"},F9={class:"px-6 py-4 whitespace-nowrap"},N9={class:"text-sm text-gray-900"},z9={key:0,class:"text-xs text-gray-500"},q9={key:1,class:"text-xs text-gray-500"},U9={class:"px-6 py-4 whitespace-nowrap"},B9={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},O9={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},H9={class:"flex space-x-2"},G9=["onClick"],K9=["onClick"],Z9=["onClick"],W9={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},J9={class:"flex items-center justify-center min-h-screen px-4"},X9={class:"relative bg-white rounded-lg max-w-md w-full"},Y9={class:"p-6"},Q9={class:"flex items-center justify-between mb-4"},e$={class:"space-y-4"},t$={class:"flex items-center"},s$={class:"flex justify-end space-x-3 mt-6"},o$=["disabled"],r$={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},a$={class:"flex items-center justify-center min-h-screen px-4"},n$={class:"relative bg-white rounded-lg max-w-md w-full"},i$={class:"p-6"},l$={class:"flex items-center justify-between mb-4"},d$={class:"space-y-4"},c$={class:"flex justify-end space-x-3 mt-6"},u$=["disabled"],m$={__name:"RefundManagement",setup(_){const{get:v,post:M}=ae(),j=R([]),f=R({}),h=R(!1),$=R(!1),i=R({}),c=R(!1),y=R(null),E=R(""),V=R({status:"",type:"",reason:""}),A=R({dryRun:!1}),I=async()=>{h.value=!0;try{const N=new URLSearchParams({limit:100});Object.keys(V.value).forEach(m=>{V.value[m]&&N.append(m,V.value[m])});const w=await v(`/admin/refunds?${N}`);w&&w.success&&w.data&&(j.value=w.data.refunds||[])}catch(N){console.error("Error loading refunds:",N),window.$toast&&window.$toast.error("Erreur lors du chargement des remboursements","✗ Erreur"),j.value=[]}finally{h.value=!1}},D=async()=>{try{const N=await v("/admin/refunds/stats");N&&N.success&&N.data&&(f.value=N.data)}catch(N){console.error("Error loading stats:",N),window.$toast&&window.$toast.error("Erreur lors du chargement des statistiques","✗ Erreur"),f.value={total_refunds:0,total_amount_refunded:0,pending_refunds:0,auto_processed:0}}},z=async()=>{try{const N=await v("/admin/refunds/eligible-lotteries");N&&N.success&&N.data&&(i.value=N.data)}catch(N){console.error("Error loading eligible lotteries:",N),window.$toast&&window.$toast.error("Erreur lors du chargement des tombolas éligibles","✗ Erreur"),i.value={expired_insufficient:[],cancelled:[],summary:{expired_count:0,expired_estimated_refund:0,cancelled_count:0,cancelled_estimated_refund:0}}}},p=async()=>{$.value=!0;try{const N=await M("/admin/refunds/process-automatic",{dry_run:A.value.dryRun});if(N&&N.success&&window.$toast){const w=N.data.message||"Traitement automatique terminé";window.$toast.success(w,"✅ Traitement")}await Promise.all([I(),D(),z()]),c.value=!1}catch(N){if(console.error("Error processing automatic refunds:",N),window.$toast){const w=N.response?.data?.message||"Erreur lors du traitement automatique";window.$toast.error(w,"✗ Erreur")}}finally{$.value=!1}},d=async(N,w=!1)=>{if(confirm("Traiter les remboursements pour cette tombola ?")){$.value=!0;try{const m=await M("/admin/refunds/process-automatic",{lottery_id:N,dry_run:w});if(m&&m.success&&window.$toast){const r=m.data.message||"Traitement terminé";window.$toast.success(r,"✅ Traitement")}await Promise.all([I(),D(),z()])}catch(m){if(console.error("Error processing lottery refunds:",m),window.$toast){const r=m.response?.data?.message||"Erreur lors du traitement";window.$toast.error(r,"✗ Erreur")}}finally{$.value=!1}}},S=async N=>{if(confirm("Approuver ce remboursement ?")){$.value=!0;try{const w=await M(`/admin/refunds/${N.id}/approve`);if(w&&w.success){if(window.$toast){const r=w.data.message||"Remboursement approuvé et traité";window.$toast.success(r,"✅ Approbation")}const m=j.value.findIndex(r=>r.id===N.id);m!==-1&&w.data.refund&&(j.value[m]=w.data.refund),await D()}}catch(w){if(console.error("Error approving refund:",w),window.$toast){const m=w.response?.data?.message||"Erreur lors de l'approbation";window.$toast.error(m,"✗ Erreur")}}finally{$.value=!1}}},n=N=>{y.value=N,E.value=""},l=async()=>{if(E.value.trim()){$.value=!0;try{const N=await M(`/admin/refunds/${y.value.id}/reject`,{reason:E.value});if(N&&N.success){if(window.$toast){const m=N.data.message||"Remboursement rejeté";window.$toast.warning(m,"⚠️ Rejet")}const w=j.value.findIndex(m=>m.id===y.value.id);w!==-1&&N.data.refund&&(j.value[w]=N.data.refund),await D()}y.value=null,E.value=""}catch(N){if(console.error("Error rejecting refund:",N),window.$toast){const w=N.response?.data?.message||"Erreur lors du rejet";window.$toast.error(w,"✗ Erreur")}y.value=null,E.value=""}finally{$.value=!1}}},a=N=>{window.$toast&&window.$toast.info("Détails du remboursement : "+N.refund_number,"📝 Détails")},L=()=>{V.value={status:"",type:"",reason:""},I()},K=N=>new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(N||0)+" FCFA",ee=N=>N?N>=1e6?(N/1e6).toFixed(1)+"M":N>=1e3?(N/1e3).toFixed(0)+"K":N.toString():"0",se=N=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(N)),H=N=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",processed:"bg-purple-100 text-purple-800",completed:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",failed:"bg-red-100 text-red-800"})[N]||"bg-gray-100 text-gray-800",F=N=>({pending:"En attente",approved:"Approuvé",processed:"Traité",completed:"Terminé",rejected:"Rejeté",failed:"Échec"})[N]||N,B=N=>({insufficient_participants:"Participants insuffisants",lottery_cancelled:"Tombola annulée",accidental_purchase:"Achat accidentel",changed_mind:"Changement d'avis",duplicate_purchase:"Achat en double",technical_issue:"Problème technique",system_error:"Erreur système",other:"Autre"})[N]||N;return ce(async()=>{await Promise.all([I(),D(),z()])}),(N,w)=>(t(),s("div",V6,[e("div",R6,[e("div",F6,[e("div",N6,[w[13]||(w[13]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Gestion des Remboursements"),e("p",{class:"text-gray-600 mt-1"},"Administration des remboursements automatiques et manuels")],-1)),e("div",z6,[e("button",{onClick:z,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},[b(u(Ne),{class:"w-4 h-4 mr-2"}),w[12]||(w[12]=O(" Vérifier les tombolas ",-1))]),e("button",{onClick:w[0]||(w[0]=m=>c.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," 🤖 Traiter automatique ")])])]),e("div",q6,[e("div",U6,[e("div",B6,[w[15]||(w[15]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"}," 💰 ",-1)),e("div",null,[e("div",O6,o(f.value.total_refunds||0),1),w[14]||(w[14]=e("div",{class:"text-sm text-gray-600"},"Total remboursements",-1))])])]),e("div",H6,[e("div",G6,[w[17]||(w[17]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"}," ✅ ",-1)),e("div",null,[e("div",K6,o(ee(f.value.total_amount_refunded)),1),w[16]||(w[16]=e("div",{class:"text-sm text-gray-600"},"Montant remboursé",-1))])])]),e("div",Z6,[e("div",W6,[w[19]||(w[19]=e("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4"}," ⏳ ",-1)),e("div",null,[e("div",J6,o(f.value.pending_refunds||0),1),w[18]||(w[18]=e("div",{class:"text-sm text-gray-600"},"En attente",-1))])])]),e("div",X6,[e("div",Y6,[w[21]||(w[21]=e("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600 mr-4"}," 🤖 ",-1)),e("div",null,[e("div",Q6,o(f.value.auto_processed||0),1),w[20]||(w[20]=e("div",{class:"text-sm text-gray-600"},"Auto-traités",-1))])])])]),i.value.expired_insufficient?.length||i.value.cancelled?.length?(t(),s("div",e9,[w[24]||(w[24]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"🎯 Tombolas éligibles aux remboursements")],-1)),e("div",t9,[i.value.expired_insufficient?.length?(t(),s("div",s9,[w[22]||(w[22]=e("h4",{class:"text-md font-medium text-orange-700 mb-3"},"⏰ Expirées - Participants insuffisants",-1)),e("div",o9,[(t(!0),s(W,null,J(i.value.expired_insufficient,m=>(t(),s("div",{key:m.id,class:"flex items-center justify-between bg-orange-50 border border-orange-200 rounded-lg p-4"},[e("div",null,[e("div",r9,o(m.lottery_number),1),e("div",a9,o(m.product_title),1),e("div",n9,o(m.participants)+"/"+o(m.min_participants)+" participants",1)]),e("div",i9,[e("div",l9,o(K(m.estimated_refund)),1),e("button",{onClick:r=>d(m.id,!1),class:"mt-2 px-3 py-1 bg-orange-600 text-white text-sm rounded hover:bg-orange-700"}," Rembourser ",8,d9)])]))),128))])])):U("",!0),i.value.cancelled?.length?(t(),s("div",c9,[w[23]||(w[23]=e("h4",{class:"text-md font-medium text-red-700 mb-3"},"Tombolas annulées",-1)),e("div",u9,[(t(!0),s(W,null,J(i.value.cancelled,m=>(t(),s("div",{key:m.id,class:"flex items-center justify-between bg-red-50 border border-red-200 rounded-lg p-4"},[e("div",null,[e("div",m9,o(m.lottery_number),1),e("div",p9,o(m.product_title),1),e("div",g9,o(m.participants)+" participants",1)]),e("div",v9,[e("div",x9,o(K(m.estimated_refund)),1),e("button",{onClick:r=>d(m.id,!1),class:"mt-2 px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700"}," Rembourser ",8,f9)])]))),128))])])):U("",!0)])])):U("",!0),e("div",b9,[e("div",h9,[e("div",y9,[G(e("select",{"onUpdate:modelValue":w[1]||(w[1]=m=>V.value.status=m),onChange:I,class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},w[25]||(w[25]=[oe('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="approved">Approuvé</option><option value="processed">Traité</option><option value="completed">Terminé</option><option value="rejected">Rejeté</option>',6)]),544),[[ie,V.value.status]]),G(e("select",{"onUpdate:modelValue":w[2]||(w[2]=m=>V.value.type=m),onChange:I,class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},w[26]||(w[26]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"automatic"},"Automatique",-1),e("option",{value:"manual"},"Manuel",-1),e("option",{value:"admin"},"Admin",-1)]),544),[[ie,V.value.type]]),G(e("select",{"onUpdate:modelValue":w[3]||(w[3]=m=>V.value.reason=m),onChange:I,class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},w[27]||(w[27]=[oe('<option value="">Toutes les raisons</option><option value="insufficient_participants">Participants insuffisants</option><option value="lottery_cancelled">Tombola annulée</option><option value="accidental_purchase">Achat accidentel</option><option value="technical_issue">Problème technique</option>',5)]),544),[[ie,V.value.reason]]),e("button",{onClick:L,class:"px-3 py-2 text-gray-600 hover:text-gray-800 text-sm"}," Réinitialiser ")]),e("div",_9,o(j.value.length)+" remboursement(s) ",1)])]),h.value?(t(),s("div",w9,w[28]||(w[28]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des remboursements...",-1)]))):j.value.length===0?(t(),s("div",$9,[b(u(ht),{class:"mx-auto h-16 w-16 text-gray-400 mb-4"}),w[29]||(w[29]=e("h3",{class:"text-xl font-medium text-gray-900 mb-2"},"Aucun remboursement",-1)),w[30]||(w[30]=e("p",{class:"text-gray-600"},"Aucun remboursement ne correspond aux filtres sélectionnés.",-1))])):(t(),s("div",k9,[e("div",C9,[e("table",j9,[w[31]||(w[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Remboursement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Raison"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",A9,[(t(!0),s(W,null,J(j.value,m=>(t(),s("tr",{key:m.id,class:"hover:bg-gray-50"},[e("td",P9,[e("div",null,[e("div",E9,o(m.refund_number),1),e("div",I9,o(m.type),1),m.auto_processed?(t(),s("div",M9," 🤖 Auto ")):U("",!0)])]),e("td",D9,[e("div",null,[e("div",L9,o(m.user?.full_name||`${m.user?.first_name||""} ${m.user?.last_name||""}`.trim()||"N/A"),1),e("div",S9,o(m.user?.email||"N/A"),1)])]),e("td",T9,[e("div",V9,o(K(m.amount)),1),e("div",R9,o(m.currency),1)]),e("td",F9,[e("div",N9,o(B(m.reason)),1),m.lottery?(t(),s("div",z9,o(m.lottery.lottery_number),1)):m.ticket?(t(),s("div",q9," Ticket #"+o(m.ticket.ticket_number),1)):U("",!0)]),e("td",U9,[e("span",{class:Z(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",H(m.status)])},o(F(m.status)),3)]),e("td",B9,o(se(m.created_at)),1),e("td",O9,[e("div",H9,[m.status==="pending"?(t(),s("button",{key:0,onClick:r=>S(m),class:"text-blue-600 hover:text-blue-900"}," Approuver ",8,G9)):U("",!0),m.status==="pending"?(t(),s("button",{key:1,onClick:r=>n(m),class:"text-red-600 hover:text-red-900"}," Rejeter ",8,K9)):U("",!0),e("button",{onClick:r=>a(m),class:"text-blue-600 hover:text-blue-900"}," 👁️ Détails ",8,Z9)])])]))),128))])])])]))]),c.value?(t(),s("div",W9,[e("div",J9,[e("div",{class:"fixed inset-0 bg-black/20",onClick:w[4]||(w[4]=m=>c.value=!1)}),e("div",X9,[e("div",Y9,[e("div",Q9,[w[32]||(w[32]=e("h3",{class:"text-lg font-semibold"},"🤖 Traitement Automatique",-1)),e("button",{onClick:w[5]||(w[5]=m=>c.value=!1),class:"text-gray-400 hover:text-gray-600"},[b(u(De),{class:"w-6 h-6"})])]),e("div",e$,[e("div",null,[e("label",t$,[G(e("input",{type:"checkbox","onUpdate:modelValue":w[6]||(w[6]=m=>A.value.dryRun=m),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[Ee,A.value.dryRun]]),w[33]||(w[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Mode test (pas de changements)",-1))])]),w[34]||(w[34]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},[e("div",{class:"text-sm text-yellow-800"},[e("p",{class:"font-medium mb-1"},"⚠️ Attention"),e("p",null,"Cette action va traiter automatiquement tous les remboursements éligibles.")])],-1))]),e("div",s$,[e("button",{onClick:w[7]||(w[7]=m=>c.value=!1),class:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg"}," Annuler "),e("button",{onClick:p,disabled:$.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},o($.value?"Traitement...":"Traiter"),9,o$)])])])])])):U("",!0),y.value?(t(),s("div",r$,[e("div",a$,[e("div",{class:"fixed inset-0 bg-black/20",onClick:w[8]||(w[8]=m=>y.value=null)}),e("div",n$,[e("div",i$,[e("div",l$,[w[35]||(w[35]=e("h3",{class:"text-lg font-semibold"},"Rejeter le remboursement",-1)),e("button",{onClick:w[9]||(w[9]=m=>y.value=null),class:"text-gray-400 hover:text-gray-600"},[b(u(De),{class:"w-6 h-6"})])]),e("div",d$,[e("div",null,[w[36]||(w[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Raison du rejet *",-1)),G(e("textarea",{"onUpdate:modelValue":w[10]||(w[10]=m=>E.value=m),rows:"3",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500",placeholder:"Expliquez pourquoi ce remboursement est rejeté..."},null,512),[[X,E.value]])])]),e("div",c$,[e("button",{onClick:w[11]||(w[11]=m=>{y.value=null,E.value=""}),class:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg"}," Annuler "),e("button",{onClick:l,disabled:$.value||!E.value.trim(),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50"},o($.value?"Rejet...":"Rejeter"),9,u$)])])])])])):U("",!0)]))}},p$={class:"space-y-6"},g$={class:"flex justify-between items-center"},v$={class:"flex space-x-3"},x$={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},f$={class:"flex items-center"},b$={class:"ml-4"},h$={class:"text-sm font-medium text-gray-600"},y$={class:"text-2xl font-bold text-gray-900"},_$={class:"mt-4 pt-4 border-t border-gray-100"},w$={class:"flex items-center text-sm"},$$={class:"admin-card"},k$={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},C$={class:"relative"},j$={class:"admin-card"},A$={key:0,class:"flex justify-center py-12"},P$={key:1,class:"overflow-x-auto"},E$={class:"min-w-full"},I$={class:"bg-white divide-y divide-gray-200"},M$={class:"px-6 py-4 whitespace-nowrap"},D$={class:"text-sm font-medium text-gray-900"},L$={class:"text-sm text-gray-500"},S$={class:"px-6 py-4 whitespace-nowrap"},T$={class:"flex items-center"},V$={class:"flex-shrink-0 h-8 w-8"},R$={class:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center"},F$={class:"ml-3"},N$={class:"text-sm font-medium text-gray-900"},z$={class:"text-sm text-gray-500"},q$={class:"px-6 py-4 whitespace-nowrap"},U$={class:"text-sm text-gray-900"},B$={class:"text-sm text-gray-500"},O$={class:"px-6 py-4 whitespace-nowrap"},H$={class:"text-sm font-medium text-gray-900"},G$={class:"text-sm text-gray-500"},K$={class:"px-6 py-4 whitespace-nowrap"},Z$={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},W$={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},J$={class:"flex items-center space-x-2"},X$=["onClick"],Y$=["onClick"],Q$={class:"bg-white px-6 py-3 border-t border-gray-200 flex items-center justify-between"},e7={class:"text-sm text-gray-700"},t7={class:"font-medium"},s7={class:"font-medium"},o7={class:"font-medium"},r7={class:"flex space-x-2"},a7=["disabled"],n7=["disabled"],i7={key:0,class:"fixed inset-0 bg-black/20 overflow-y-auto h-full w-full z-50"},l7={class:"relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white"},d7={class:"mt-3"},c7={class:"flex justify-between items-center mb-4"},u7={key:0,class:"space-y-4"},m7={class:"grid grid-cols-2 gap-4"},p7={class:"text-sm text-gray-900"},g7={class:"text-sm text-gray-900"},v7={class:"text-sm text-gray-900"},x7={class:"text-sm text-gray-900"},f7={class:"text-sm text-gray-900"},b7={class:"mt-6 flex justify-end space-x-3"},h7={__name:"PaymentManagement",setup(_){const{get:v,post:M}=ae(),j=R(!1),f=R([]),h=Q(()=>[{label:"Total des revenus",value:n(A.value.total_revenue)+" FCFA",change:A.value.revenue_change,icon:Ie,bgColor:"bg-green-100",iconColor:"text-green-600"},{label:"Transactions réussies",value:A.value.successful_transactions.toString(),change:A.value.transactions_change,icon:Ft,bgColor:"bg-blue-100",iconColor:"text-[#0099cc]"},{label:"Taux de réussite",value:A.value.success_rate+"%",change:A.value.success_rate_change,icon:it,bgColor:"bg-purple-100",iconColor:"text-purple-600"},{label:"Transactions échouées",value:A.value.failed_transactions.toString(),change:-Math.abs(A.value.failed_transactions/Math.max(A.value.successful_transactions,1)*100),icon:Be,bgColor:"bg-red-100",iconColor:"text-red-600"}]),$=de({search:"",status:"",startDate:"",endDate:""}),i=R(1),c=R(20),y=R(0),E=R(!1),V=R(null),A=R({total_revenue:0,current_month_revenue:0,revenue_change:0,successful_transactions:0,current_month_transactions:0,transactions_change:0,success_rate:0,success_rate_change:0,failed_transactions:0,pending_transactions:0}),I=Q(()=>Math.ceil(y.value/c.value)),D=Q(()=>(i.value-1)*c.value+1),z=Q(()=>Math.min(i.value*c.value,y.value)),p=async()=>{j.value=!0;try{const w=new URLSearchParams;w.append("page",i.value),w.append("per_page",c.value),$.search&&w.append("search",$.search),$.status&&w.append("status",$.status),$.startDate&&w.append("start_date",$.startDate),$.endDate&&w.append("end_date",$.endDate);const m=await v(`/admin/payments?${w.toString()}`);m&&m.success&&m.data&&(f.value=m.data.payments||[],y.value=m.data.pagination?.total||0,m.data.stats&&(A.value=m.data.stats))}catch(w){console.error("Error loading payments:",w),window.$toast&&window.$toast.error("Erreur lors du chargement des paiements","✗ Erreur"),f.value=[],y.value=0}finally{j.value=!1}},d=()=>{i.value=1,p()},S=async()=>{try{const w=await v("/admin/payments/stats");w&&w.success&&w.data&&(A.value=w.data)}catch(w){console.error("Error loading payment stats:",w)}},n=w=>new Intl.NumberFormat("fr-FR").format(w),l=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),a=w=>({pending:"admin-badge-warning",completed:"admin-badge-success",failed:"admin-badge-danger",refunded:"bg-gray-100 text-gray-800 px-2 py-1 text-xs font-medium rounded-full"})[w]||"bg-gray-100 text-gray-800 px-2 py-1 text-xs font-medium rounded-full",L=w=>({pending:"En attente",completed:"Complété",failed:"Échoué",refunded:"Remboursé"})[w]||w,K=w=>{V.value=w,E.value=!0},ee=()=>{E.value=!1,V.value=null},se=async w=>{if(confirm("Êtes-vous sûr de vouloir initier un remboursement pour cette transaction ?"))try{const m=await M(`/admin/payments/${w.id}/refund`,{reason:"admin_initiated"});m&&m.success&&(window.$toast&&window.$toast.success("Remboursement initié avec succès","✅ Remboursement"),p(),ee())}catch(m){if(console.error("Error initiating refund:",m),window.$toast){const r=m.response?.data?.message||"Erreur lors de l'initiation du remboursement";window.$toast.error(r,"✗ Erreur")}}},H=async()=>{try{const w=new URLSearchParams;$.search&&w.append("search",$.search),$.status&&w.append("status",$.status),$.startDate&&w.append("start_date",$.startDate),$.endDate&&w.append("end_date",$.endDate);const m=await v(`/admin/payments/export?${w.toString()}`);if(m&&m.success&&m.data){const r=new Blob([JSON.stringify(m.data,null,2)],{type:"application/json"}),k=URL.createObjectURL(r),P=document.createElement("a");P.href=k,P.download=`payments-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(k),window.$toast&&window.$toast.success("Export téléchargé avec succès","✅ Export")}}catch(w){console.error("Error exporting payments:",w),window.$toast&&window.$toast.error("Erreur lors de l'export","✗ Erreur")}},F=async()=>{await Promise.all([p(),S()])},B=()=>{i.value>1&&(i.value--,p())},N=()=>{i.value<I.value&&(i.value++,p())};return ce(()=>{p(),S()}),(w,m)=>(t(),s("div",p$,[e("div",g$,[m[7]||(m[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Gestion des Paiements"),e("p",{class:"mt-2 text-gray-600"},"Suivez et gérez toutes les transactions financières")],-1)),e("div",v$,[e("button",{onClick:H,class:"admin-btn-secondary"},[b(u(ds),{class:"w-4 h-4 mr-2"}),m[5]||(m[5]=O(" Exporter ",-1))]),e("button",{onClick:F,class:"admin-btn-primary"},[b(u(ot),{class:"w-4 h-4 mr-2"}),m[6]||(m[6]=O(" Actualiser ",-1))])])]),e("div",x$,[(t(!0),s(W,null,J(h.value,r=>(t(),s("div",{key:r.label,class:"admin-card hover:shadow-md transition-shadow duration-200"},[e("div",f$,[e("div",{class:Z(["p-3 rounded-lg",r.bgColor])},[(t(),ne(_e(r.icon),{class:Z(["w-6 h-6",r.iconColor])},null,8,["class"]))],2),e("div",b$,[e("p",h$,o(r.label),1),e("p",y$,o(r.value),1)])]),e("div",_$,[e("div",w$,[e("span",{class:Z(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",r.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(t(),ne(_e(r.change>=0?u(Tt):u(at)),{class:"w-3 h-3 mr-1"})),O(" "+o(Math.abs(r.change))+"% ",1)],2),m[8]||(m[8]=e("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),e("div",$$,[e("div",k$,[e("div",null,[m[9]||(m[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),e("div",C$,[b(u(Ne),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),G(e("input",{"onUpdate:modelValue":m[0]||(m[0]=r=>$.search=r),type:"text",placeholder:"Transaction ID, utilisateur...",class:"admin-input pl-10",onInput:d},null,544),[[X,$.search]])])]),e("div",null,[m[11]||(m[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),G(e("select",{"onUpdate:modelValue":m[1]||(m[1]=r=>$.status=r),onChange:d,class:"admin-input"},m[10]||(m[10]=[oe('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="completed">Complété</option><option value="failed">Échoué</option><option value="refunded">Remboursé</option>',5)]),544),[[ie,$.status]])]),e("div",null,[m[12]||(m[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date début",-1)),G(e("input",{"onUpdate:modelValue":m[2]||(m[2]=r=>$.startDate=r),type:"date",class:"admin-input",onChange:d},null,544),[[X,$.startDate]])]),e("div",null,[m[13]||(m[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date fin",-1)),G(e("input",{"onUpdate:modelValue":m[3]||(m[3]=r=>$.endDate=r),type:"date",class:"admin-input",onChange:d},null,544),[[X,$.endDate]])])])]),e("div",j$,[m[20]||(m[20]=e("div",{class:"admin-card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Transactions récentes")],-1)),j.value?(t(),s("div",A$,m[14]||(m[14]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#0099cc]"},null,-1)]))):(t(),s("div",P$,[e("table",E$,[m[15]||(m[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Transaction "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Produit/Tombola "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Montant "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",I$,[(t(!0),s(W,null,J(f.value,r=>(t(),s("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",M$,[e("div",D$,"#"+o(r.transaction_id),1),e("div",L$,o(r.payment_method),1)]),e("td",S$,[e("div",T$,[e("div",V$,[e("div",R$,[b(u(Pe),{class:"h-4 w-4 text-gray-600"})])]),e("div",F$,[e("div",N$,o(r.user_name),1),e("div",z$,o(r.user_email),1)])])]),e("td",q$,[e("div",U$,o(r.product_name),1),e("div",B$,o(r.tickets_count)+" tickets",1)]),e("td",O$,[e("div",H$,o(n(r.amount)),1),e("div",G$,o(r.currency),1)]),e("td",K$,[e("span",{class:Z(a(r.status))},o(L(r.status)),3)]),e("td",Z$,o(l(r.created_at)),1),e("td",W$,[e("div",J$,[e("button",{onClick:k=>K(r),class:"text-[#0099cc] hover:text-[#0088bb]",title:"Voir détails"},[b(u(Me),{class:"w-4 h-4"})],8,X$),r.status==="completed"?(t(),s("button",{key:0,onClick:k=>se(r),class:"text-orange-600 hover:text-orange-900",title:"Initier remboursement"},[b(u(os),{class:"w-4 h-4"})],8,Y$)):U("",!0)])])]))),128))])])])),e("div",Q$,[e("div",e7,[m[16]||(m[16]=O(" Affichage de ",-1)),e("span",t7,o(D.value),1),m[17]||(m[17]=O(" à ",-1)),e("span",s7,o(z.value),1),m[18]||(m[18]=O(" sur ",-1)),e("span",o7,o(y.value),1),m[19]||(m[19]=O(" résultats ",-1))]),e("div",r7,[e("button",{onClick:B,disabled:i.value===1,class:"admin-btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"}," Précédent ",8,a7),e("button",{onClick:N,disabled:i.value===I.value,class:"admin-btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"}," Suivant ",8,n7)])])]),E.value?(t(),s("div",i7,[e("div",l7,[e("div",d7,[e("div",c7,[m[21]||(m[21]=e("h3",{class:"text-lg font-medium text-gray-900"},"Détails du paiement",-1)),e("button",{onClick:ee,class:"text-gray-400 hover:text-gray-600"},[b(u(De),{class:"w-6 h-6"})])]),V.value?(t(),s("div",u7,[e("div",m7,[e("div",null,[m[22]||(m[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction",-1)),e("p",p7,o(V.value.transaction_id),1)]),e("div",null,[m[23]||(m[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",g7,o(n(V.value.amount))+" "+o(V.value.currency),1)]),e("div",null,[m[24]||(m[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:Z(a(V.value.status))},o(L(V.value.status)),3)]),e("div",null,[m[25]||(m[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Méthode",-1)),e("p",v7,o(V.value.payment_method),1)]),e("div",null,[m[26]||(m[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("p",x7,o(l(V.value.created_at)),1)]),e("div",null,[m[27]||(m[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateur",-1)),e("p",f7,o(V.value.user_name),1)])])])):U("",!0),e("div",b7,[e("button",{onClick:ee,class:"admin-btn-secondary"}," Fermer "),V.value?.status==="completed"?(t(),s("button",{key:0,onClick:m[4]||(m[4]=r=>se(V.value)),class:"admin-btn-accent"}," Initier remboursement ")):U("",!0)])])])])):U("",!0)]))}},y7=[{path:"/register",name:"register",component:en,meta:{requiresGuest:!0}},{path:"/verify-email",name:"verify-email",component:gn},{path:"/forgot-password",name:"forgot-password",component:On,meta:{requiresGuest:!0}},{path:"/reset-password-verify",name:"reset-password-verify",component:ki,meta:{requiresGuest:!0}},{path:"/",component:Os,children:[{path:"",name:"home",component:Fl},{path:"results",name:"public.results",component:Yd},{path:"verify",name:"public.verify",component:Gc},{path:"history",name:"public.history",component:y0},{path:"login",name:"login",component:na,meta:{requiresGuest:!0}},{path:"products",name:"public.products",component:sm},{path:"products/:id",name:"public.product.detail",component:qp,props:!0},{path:"how-it-works",name:"public.how-it-works",component:cg},{path:"contact",name:"public.contact",component:tv}]},{path:"/customer",component:wo,meta:{requiresAuth:!0},children:[{path:"",name:"customer.dashboard",component:Nv},{path:"products",name:"customer.products",component:c2},{path:"products/:id",name:"customer.product.detail",component:Cx,props:!0},{path:"profile",name:"customer.profile",component:Sf},{path:"tickets",name:"customer.tickets",component:Tb},{path:"refunds",name:"customer.refunds",component:oy}]},{path:"/admin",component:or,meta:{requiresAuth:!0},children:[{path:"",name:"admin.dashboard",component:t_},{path:"users",name:"admin.users",component:q_},{path:"products",name:"admin.products",component:Q5},{path:"lotteries",name:"admin.lotteries",component:r3},{path:"settings",name:"admin.settings",component:T6},{path:"refunds",name:"admin.refunds",component:m$},{path:"payments",name:"admin.payments",component:h7}]},{path:"/merchant",component:()=>$e(()=>import("./MerchantLayout-ehXDugB-.js"),__vite__mapDeps([0,1])),meta:{requiresAuth:!0,role:"MERCHANT"},children:[{path:"",redirect:"dashboard"},{path:"dashboard",name:"merchant.dashboard",component:()=>$e(()=>import("./Dashboard-CC_Tz33y.js"),__vite__mapDeps([2,1]))},{path:"products",name:"merchant.products",component:()=>$e(()=>import("./Products-B7qDJLx2.js"),__vite__mapDeps([3,1,4]))},{path:"products/create",name:"merchant.products.create",component:()=>$e(()=>import("./CreateProduct-BKeZk_Pq.js"),__vite__mapDeps([5,1,4]))},{path:"products/:id/edit",name:"merchant.products.edit",component:()=>$e(()=>import("./EditProduct-CHrQPHTR.js"),__vite__mapDeps([6,1])),props:!0},{path:"orders",name:"merchant.orders",component:()=>$e(()=>import("./Orders-BJak5TiH.js"),__vite__mapDeps([7,1]))},{path:"lotteries",name:"merchant.lotteries",component:()=>$e(()=>import("./LotteriesSimple-D6hvpnbJ.js"),__vite__mapDeps([8,1]))},{path:"lotteries/:id",name:"merchant.lottery.view",component:()=>$e(()=>import("./LotteryView-CMMxSmCz.js"),__vite__mapDeps([9,1])),props:!0},{path:"analytics",name:"merchant.analytics",component:()=>$e(()=>import("./Analytics-BGwhXqX6.js"),__vite__mapDeps([10,1]))},{path:"settings",name:"merchant.settings",component:()=>$e(()=>import("./Settings-BhnV8paX.js"),__vite__mapDeps([11,1]))},{path:"profile",name:"merchant.profile",component:()=>$e(()=>import("./Profile-Cx1sEWBU.js"),__vite__mapDeps([12,1]))}]}],$t=Kt({history:Zt(),routes:y7});$t.beforeEach((_,v,M)=>{const j=ve();if(_.meta.requiresAuth&&!j.isAuthenticated){M({name:"login"});return}if(_.meta.requiresGuest&&j.isAuthenticated){const f=j.getDefaultRedirect();M({name:f});return}if(_.meta.role&&j.isAuthenticated&&!_7(_.meta.role,j)){const h=j.getDefaultRedirect();M({name:h});return}M()});function _7(_,v){switch(_){case"ADMIN":return v.isAdmin;case"MERCHANT":return v.isMerchant;case"CUSTOMER":return v.isCustomer;default:return!1}}const w7={class:"fixed top-4 right-4 z-50 space-y-2"},$7={class:"flex-shrink-0"},k7={class:"ml-3 flex-1"},C7={key:0,class:"text-sm font-semibold mb-1"},j7={class:"text-sm"},A7=["onClick"],P7={__name:"Toast",setup(_,{expose:v}){const M=R([]);let j=0;const f={success:je,error:wt,warning:Be,info:Te},h=p=>f[p]||Te,$=p=>{const d="bg-white/90 border-l-4",S={success:"border-blue-500 text-blue-900",error:"border-red-500 text-red-900",warning:"border-orange-500 text-orange-900",info:"border-blue-500 text-blue-900"};return`${d} ${S[p]||S.info}`},i=p=>{const d={success:"text-blue-600",error:"text-red-600",warning:"text-orange-600",info:"text-blue-600"};return d[p]||d.info},c=p=>{const d={success:"bg-blue-500",error:"bg-red-500",warning:"bg-orange-500",info:"bg-blue-500"};return d[p]||d.info},y=({title:p,message:d,type:S="info",duration:n=5e3})=>{const l=++j,a={id:l,title:p,message:d,type:S,duration:n};return M.value.push(a),n>0&&setTimeout(()=>{E(l)},n),l},E=p=>{const d=M.value.findIndex(S=>S.id===p);d>-1&&M.value.splice(d,1)},V=()=>{M.value=[]},A=(p,d="Succès")=>y({title:d,message:p,type:"success"}),I=(p,d="Erreur")=>y({title:d,message:p,type:"error"}),D=(p,d="Attention")=>y({title:d,message:p,type:"warning"}),z=(p,d="Information")=>y({title:d,message:p,type:"info"});return v({addToast:y,removeToast:E,clearAll:V,showSuccess:A,showError:I,showWarning:D,showInfo:z}),ce(()=>{window.$toast={success:A,error:I,warning:D,info:z,add:y,remove:E,clear:V}}),Xe(()=>{delete window.$toast}),(p,d)=>(t(),ne(Jt,{to:"body"},[e("div",w7,[b(Wt,{name:"toast",tag:"div",class:"space-y-2"},{default:Y(()=>[(t(!0),s(W,null,J(M.value,S=>(t(),s("div",{key:S.id,class:Z([$(S.type),"flex items-start p-4 rounded-xl shadow-lg border backdrop-blur-sm max-w-sm transition-all duration-300"])},[e("div",$7,[(t(),ne(_e(h(S.type)),{class:Z([i(S.type),"w-5 h-5"])},null,8,["class"]))]),e("div",k7,[S.title?(t(),s("h4",C7,o(S.title),1)):U("",!0),e("p",j7,o(S.message),1)]),e("button",{onClick:n=>E(S.id),class:"flex-shrink-0 ml-2 p-1 rounded-lg hover:bg-black/5 transition-colors"},[b(u(De),{class:"w-4 h-4 text-gray-400 hover:text-gray-600"})],8,A7),S.duration?(t(),s("div",{key:0,class:Z([c(S.type),"absolute bottom-0 left-0 h-1 rounded-b-xl transition-all duration-linear"]),style:we({width:"100%",animationDuration:S.duration+"ms",animationName:"toast-progress"})},null,6)):U("",!0)],2))),128))]),_:1})])]))}},E7=Le(P7,[["__scopeId","data-v-583315c0"]]),I7={id:"app"},M7={__name:"App",setup(_){const v=ve();return ce(()=>{v.checkAuth()}),(M,j)=>{const f=pe("router-view");return t(),s("div",I7,[b(f),b(E7,{ref:"toastRef"},null,512)])}}},kt=Xt(M7),D7=Yt();window.router=$t;kt.use(D7);kt.use($t);kt.mount("#app");export{le as A,He as B,ot as C,ds as D,wt as E,Ke as F,Se as G,Vt as H,qe as I,vs as J,Ut as K,gs as L,dt as M,St as _,ae as a,lt as b,It as c,Re as d,Oe as e,it as f,as as g,Pe as h,Fe as i,Ie as j,Ye as k,vt as l,Tt as m,at as n,Ve as o,Ne as p,De as q,nt as r,je as s,Me as t,ve as u,rt as v,ft as w,At as x,Te as y,ss as z};
