import{a as z,e as E,f as G,g as L,h as q}from"./app-SOrfQP04.js";import{r as p,c as $,j as T,b as c,e as t,g as l,w as b,h as U,F as w,z as C,u as a,aS as P,t as o,af as H,o as i,aH as Q,M as I,x as h,A as R,W as V,i as F,aU as W,aV as J,G as K,N as B,P as X}from"./vendor-HurWl8Tx.js";function Y(){const{get:_,loading:k,error:D}=z(),n=p({products:{total:0,active:0,total_views:0},orders:{total:0,total_revenue:0},lotteries:{total:0,active:0,completed:0,total_tickets_sold:0},revenue:{monthly:0,weekly:0,total:0}}),g=p([]),f=p([]),d=p([]),S=$(()=>[{label:"Revenus du mois",value:v(n.value.revenue?.monthly||0),change:0,icon:"CurrencyDollarIcon",color:"bg-[#0099cc]"},{label:"Commandes",value:n.value.orders?.total||0,change:0,icon:"ShoppingBagIcon",color:"bg-blue-500"},{label:"Produits actifs",value:n.value.products?.active||0,change:0,icon:"GiftIcon",color:"bg-yellow-500"},{label:"Clients",value:n.value.customers?.total||0,change:0,icon:"UsersIcon",color:"bg-purple-500"}]),j=$(()=>({total_revenue:n.value.revenue?.total||0,total_orders:n.value.orders?.total||0,avg_order_value:n.value.orders?.total>0?(n.value.revenue?.total||0)/n.value.orders.total:0})),m=async()=>{try{const e=await _("/stats/merchant/dashboard");e&&e.success&&(n.value=e.data)}catch(e){console.error("Erreur lors du chargement des statistiques:",e)}},x=async()=>{try{const e=await _("/stats/merchant/orders");e&&e.success&&(g.value=e.data.recent_orders||[]);const r=await _("/stats/merchant/lotteries");r&&r.success&&(f.value=r.data.recent_lotteries||[]);const s=await _("/stats/merchant/analytics?period=30d");if(s&&s.success){const y=s.data.top_products||[];d.value=y.sort((N,O)=>(O.order_count||0)-(N.order_count||0))}}catch(e){console.error("Erreur lors du chargement des données récentes:",e)}},v=e=>{const r=parseFloat(e)||0;return r>=1e6?(r/1e6).toFixed(1)+"M FCFA":r>=1e3?(r/1e3).toFixed(0)+"k FCFA":r.toLocaleString("fr-FR")+" FCFA"};return{stats:S,summary:j,dashboardStats:n,recentOrders:g,recentLotteries:f,topProducts:d,loading:k,error:D,loadDashboardData:async()=>{await Promise.all([m(),x()])},loadDashboardStats:m,loadRecentData:x,formatCurrency:v,formatDate:e=>new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e)),getStatusColor:e=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800",active:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"})[e]||"bg-gray-100 text-gray-800"}}const Z={class:"space-y-6"},tt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},et={class:"flex items-center"},st={class:"flex items-center"},ot={class:"flex items-center"},at={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},rt={class:"flex items-center justify-between"},lt={class:"text-sm font-medium text-gray-600"},nt={class:"text-3xl font-bold text-gray-900 mt-2"},it={class:"mt-4 pt-4 border-t border-gray-100"},dt={class:"flex items-center text-sm"},ct={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ut={class:"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-gray-100"},gt={class:"flex items-center justify-between mb-6"},mt={class:"flex space-x-2"},xt=["onClick"],vt={class:"h-64 bg-gradient-to-br from-[#0099cc]/10 to-cyan-100 rounded-lg flex items-center justify-center"},bt={class:"text-center"},_t={class:"text-gray-400 text-sm"},ht={class:"mt-6 grid grid-cols-3 gap-4"},pt={class:"text-center"},ft={class:"text-2xl font-bold text-[#0099cc]"},yt={class:"text-center"},wt={class:"text-2xl font-bold text-blue-600"},Ct={class:"text-center"},Ft={class:"text-2xl font-bold text-purple-600"},kt={class:"space-y-6"},Dt={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},St={class:"flex items-center justify-between mb-4"},jt={key:0,class:"animate-pulse space-y-3"},Pt={key:1},It={class:"flex items-center gap-4 mb-4"},$t={class:"text-4xl font-bold text-gray-900"},At={class:"text-sm text-gray-500 mt-1"},Mt={class:"grid grid-cols-3 gap-2 mt-4 pt-4 border-t border-gray-100"},Rt={class:"text-center"},Vt={class:"text-lg font-semibold text-[#0099cc]"},Bt={class:"text-center"},Nt={class:"text-lg font-semibold text-green-600"},Ot={class:"text-center"},zt={class:"text-lg font-semibold text-purple-600"},Et={key:2,class:"text-center py-4"},Gt={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},Lt={class:"flex items-center justify-between mb-4"},qt={class:"space-y-3"},Tt={class:"flex items-center space-x-3"},Ut={class:"w-10 h-10 bg-[#0099cc]/10 rounded-full flex items-center justify-center"},Ht={class:"font-medium text-gray-900"},Qt={class:"text-sm text-gray-500"},Wt={class:"text-right"},Jt={class:"font-semibold text-gray-900"},Kt={class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100"},Xt={class:"flex items-center justify-between mb-4"},Yt={class:"space-y-3"},Zt={class:"flex-shrink-0 w-6 h-6 bg-[#0099cc] text-white text-xs font-bold rounded-full flex items-center justify-center"},te={class:"flex-1 min-w-0"},ee={class:"font-medium text-gray-900 truncate"},se={class:"flex items-center space-x-2 text-sm text-gray-500"},re={__name:"Dashboard",setup(_){const{stats:k,recentOrders:D,topProducts:n,summary:g,loadDashboardData:f}=Y(),{rating:d,loading:S,fetchMyRating:j}=E(),m=p("30j"),x=$(()=>({totalSales:g.value.total_revenue||0,totalOrders:g.value.total_orders||0,avgOrder:g.value.avg_order_value||0})),v=u=>new Intl.NumberFormat("fr-FR").format(u),A=u=>({completed:"Terminé",pending:"En attente",processing:"En cours",cancelled:"Annulé",paid:"Payé",awaiting_payment:"En attente de paiement"})[u]||u,M=u=>({CurrencyDollarIcon:X,ShoppingBagIcon:I,GiftIcon:B,UsersIcon:K,ChartBarIcon:P})[u]||B;return T(async()=>{await Promise.all([f(),j()])}),(u,e)=>{const r=U("router-link");return i(),c("div",Z,[e[20]||(e[20]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de Bord Vendeur"),t("p",{class:"mt-2 text-gray-600"},"Suivez vos ventes, gérez vos produits et analysez vos performances")],-1)),t("div",tt,[l(r,{to:"/merchant/products/create",class:"bg-gradient-to-r from-[#0099cc] to-[#0088bb] text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:b(()=>[t("div",et,[l(a(Q),{class:"w-8 h-8 mr-4"}),e[0]||(e[0]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Nouveau Produit"),t("p",{class:"text-blue-100 text-sm"},"Publier un produit")],-1))])]),_:1}),l(r,{to:"/merchant/orders",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:b(()=>[t("div",st,[l(a(I),{class:"w-8 h-8 mr-4"}),e[1]||(e[1]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Commandes"),t("p",{class:"text-blue-100 text-sm"},"Suivre les ventes")],-1))])]),_:1}),l(r,{to:"/merchant/analytics",class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl"},{default:b(()=>[t("div",ot,[l(a(P),{class:"w-8 h-8 mr-4"}),e[2]||(e[2]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Analytiques"),t("p",{class:"text-purple-100 text-sm"},"Voir les stats")],-1))])]),_:1})]),t("div",at,[(i(!0),c(w,null,C(a(k),s=>(i(),c("div",{key:s.label,class:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200"},[t("div",rt,[t("div",null,[t("p",lt,o(s.label),1),t("p",nt,o(s.value),1)]),t("div",{class:h(["p-4 rounded-xl",s.color])},[(i(),R(V(M(s.icon)),{class:"w-8 h-8 text-white"}))],2)]),t("div",it,[t("div",dt,[t("span",{class:h(["font-medium flex items-center px-2 py-1 rounded-full text-xs",s.change>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"])},[(i(),R(V(s.change>=0?a(W):a(J)),{class:"w-3 h-3 mr-1"})),F(" "+o(Math.abs(s.change))+"% ",1)],2),e[3]||(e[3]=t("span",{class:"ml-2 text-gray-500"},"vs mois dernier",-1))])])]))),128))]),t("div",ct,[t("div",ut,[t("div",gt,[e[4]||(e[4]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Évolution des Ventes",-1)),t("div",mt,[(i(),c(w,null,C(["7j","30j","90j"],s=>t("button",{key:s,onClick:y=>m.value=s,class:h(["px-3 py-1 rounded-lg text-sm font-medium transition-all",m.value===s?"bg-[#0099cc] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},o(s),11,xt)),64))])]),t("div",vt,[t("div",bt,[l(a(P),{class:"w-16 h-16 text-[#0099cc] mx-auto mb-4"}),e[5]||(e[5]=t("p",{class:"text-gray-600 font-medium"},"Graphique des ventes",-1)),t("p",_t,"Données des derniers "+o(m.value),1)])]),t("div",ht,[t("div",pt,[t("p",ft,o(v(x.value.totalSales||0)),1),e[6]||(e[6]=t("p",{class:"text-sm text-gray-600"},"Ventes totales (FCFA)",-1))]),t("div",yt,[t("p",wt,o(x.value.totalOrders||0),1),e[7]||(e[7]=t("p",{class:"text-sm text-gray-600"},"Commandes",-1))]),t("div",Ct,[t("p",Ft,o(v(x.value.avgOrder||0)),1),e[8]||(e[8]=t("p",{class:"text-sm text-gray-600"},"Panier moyen (FCFA)",-1))])])]),t("div",kt,[t("div",Dt,[t("div",St,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Ma notation",-1)),l(r,{to:"/merchant/profile",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:b(()=>e[9]||(e[9]=[F(" Détails → ",-1)])),_:1,__:[9]})]),a(S)?(i(),c("div",jt,e[11]||(e[11]=[t("div",{class:"h-10 bg-gray-200 rounded w-1/2"},null,-1),t("div",{class:"h-4 bg-gray-200 rounded w-3/4"},null,-1)]))):a(d)?(i(),c("div",Pt,[t("div",It,[t("div",$t,o((a(d).avg_rating||0).toFixed(1)),1),t("div",null,[l(G,{rating:a(d).avg_rating||0,size:"lg"},null,8,["rating"]),t("p",At,o(a(d).total_reviews||0)+" avis",1)])]),l(L,{badge:a(d).badge||"average"},null,8,["badge"]),t("div",Mt,[t("div",Rt,[t("div",Vt,o(Math.round(a(d).activity_score||50)),1),e[12]||(e[12]=t("div",{class:"text-xs text-gray-500"},"Activité",-1))]),t("div",Bt,[t("div",Nt,o(Math.round(a(d).quality_score||50)),1),e[13]||(e[13]=t("div",{class:"text-xs text-gray-500"},"Qualité",-1))]),t("div",Ot,[t("div",zt,o(Math.round(a(d).reliability_score||50)),1),e[14]||(e[14]=t("div",{class:"text-xs text-gray-500"},"Fiabilité",-1))])])])):(i(),c("div",Et,[l(a(H),{class:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e[15]||(e[15]=t("p",{class:"text-sm text-gray-500"},"Notation non disponible",-1))]))]),t("div",Gt,[t("div",Lt,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Commandes récentes",-1)),l(r,{to:"/merchant/orders",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:b(()=>e[16]||(e[16]=[F(" Voir tout → ",-1)])),_:1,__:[16]})]),t("div",qt,[(i(!0),c(w,null,C(a(D),s=>(i(),c("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"},[t("div",Tt,[t("div",Ut,[l(a(I),{class:"w-5 h-5 text-[#0099cc]"})]),t("div",null,[t("p",Ht,o(s.product_name),1),t("p",Qt,o(s.customer_name),1)])]),t("div",Wt,[t("p",Jt,o(v(s.amount||0))+" FCFA",1),t("span",{class:h(["inline-block px-2 py-1 text-xs font-medium rounded-full",s.status==="completed"?"bg-blue-100 text-blue-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},o(A(s.status)),3)])]))),128))])]),t("div",Kt,[t("div",Xt,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Produits populaires",-1)),l(r,{to:"/merchant/products",class:"text-[#0099cc] hover:text-[#0088bb] text-sm font-medium"},{default:b(()=>e[18]||(e[18]=[F(" Gérer → ",-1)])),_:1,__:[18]})]),t("div",Yt,[(i(!0),c(w,null,C(a(n),(s,y)=>(i(),c("div",{key:s.id,class:"flex items-center space-x-3"},[t("div",Zt,o(y+1),1),l(q,{src:s.image_url||s.main_image||s.image,alt:s.name,"container-class":"w-12 h-12 rounded-lg","image-class":"w-12 h-12 rounded-lg object-cover","fallback-class":"w-12 h-12 rounded-lg","fallback-text":"Photo"},null,8,["src","alt"]),t("div",te,[t("p",ee,o(s.name),1),t("div",se,[t("span",null,o(s.sales)+" ventes",1),t("span",{class:h(["font-medium",s.growth>=0?"text-blue-600":"text-red-600"])},o(s.growth>=0?"+":"")+o(s.growth)+"% ",3)])])]))),128))])])])])])}}};export{re as default};
