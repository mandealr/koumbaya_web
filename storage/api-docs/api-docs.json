{
    "openapi": "3.0.0",
    "info": {
        "title": "Koumbaya Marketplace API",
        "description": "API REST pour la marketplace Koumbaya avec système de tombolas et paiements mobile money",
        "contact": {
            "name": "Équipe Koumbaya",
            "email": "dev@koumbaya.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "https://koumbaya.com",
            "description": "Serveur de développement Koumbaya"
        }
    ],
    "paths": {
        "/api/admin/lotteries": {
            "get": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Liste paginée de toutes les tombolas avec filtres",
                "operationId": "a74a64ac771ced95da89a90b962fc612",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut (active, completed, cancelled)",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "active",
                                "completed",
                                "cancelled"
                            ]
                        }
                    },
                    {
                        "name": "is_drawn",
                        "in": "query",
                        "description": "Filtrer par état de tirage",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Recherche par numéro de tombola ou titre de produit",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Filtrer à partir de cette date",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Filtrer jusqu'à cette date",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Champ de tri",
                        "schema": {
                            "type": "string",
                            "default": "created_at"
                        }
                    },
                    {
                        "name": "sort_order",
                        "in": "query",
                        "description": "Ordre de tri",
                        "schema": {
                            "type": "string",
                            "default": "desc",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des tombolas avec pagination",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "current_page": {
                                            "type": "integer"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "total": {
                                            "type": "integer"
                                        },
                                        "per_page": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/lotteries/statistics": {
            "get": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Statistiques globales des tombolas",
                "operationId": "640b9d6c1189f59c224970d7dc90c9a2",
                "responses": {
                    "200": {
                        "description": "Statistiques des tombolas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "total_lotteries": {
                                            "description": "Nombre total de tombolas",
                                            "type": "integer"
                                        },
                                        "active_lotteries": {
                                            "description": "Nombre de tombolas actives",
                                            "type": "integer"
                                        },
                                        "completed_lotteries": {
                                            "description": "Nombre de tombolas terminées",
                                            "type": "integer"
                                        },
                                        "pending_draws": {
                                            "description": "Nombre de tirages en attente",
                                            "type": "integer"
                                        },
                                        "total_revenue": {
                                            "description": "Revenus totaux",
                                            "type": "number"
                                        },
                                        "total_participants": {
                                            "description": "Nombre total de participants uniques",
                                            "type": "integer"
                                        },
                                        "average_participation_rate": {
                                            "description": "Taux de participation moyen en %",
                                            "type": "number"
                                        },
                                        "recent_draws": {
                                            "description": "10 derniers tirages effectués",
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "monthly_revenue": {
                                            "description": "Revenus mensuels des 12 derniers mois",
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "month": {
                                                        "type": "string",
                                                        "example": "2024-01"
                                                    },
                                                    "revenue": {
                                                        "type": "number"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/lotteries/{id}": {
            "get": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Détails complets d'une tombola",
                "operationId": "54b21f789380506eab20d6869120dab0",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de la tombola avec participants et historique",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Tombola non trouvée"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Mettre à jour les paramètres d'une tombola",
                "operationId": "837761854a6793ea701d7f08857224ae",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "end_date": {
                                        "description": "Nouvelle date de fin",
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "draw_date": {
                                        "description": "Nouvelle date de tirage",
                                        "type": "string",
                                        "format": "date-time"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tombola mise à jour avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "lottery": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Impossible de mettre à jour une tombola tirée ou erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Tombola non trouvée"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/lotteries/{id}/draw": {
            "post": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Déclencher un tirage manuel",
                "operationId": "0adf92e8e9ff411ebe455fba3b01dcc7",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tirage effectué avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "winner": {
                                            "type": "object"
                                        },
                                        "draw_history": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur lors du tirage",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Tombola non trouvée"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/lotteries/eligible-for-draw": {
            "get": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Liste des tombolas éligibles pour un tirage",
                "operationId": "f4086cf1c00a7ad6f7770e5ee4e8ec4a",
                "responses": {
                    "200": {
                        "description": "Liste des tombolas prêtes pour le tirage",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "count": {
                                            "description": "Nombre de tombolas éligibles",
                                            "type": "integer"
                                        },
                                        "lotteries": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "lottery_number": {
                                                        "type": "string"
                                                    },
                                                    "product": {
                                                        "type": "string"
                                                    },
                                                    "end_date": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "days_since_end": {
                                                        "type": "integer"
                                                    },
                                                    "participants": {
                                                        "type": "integer"
                                                    },
                                                    "min_participants": {
                                                        "type": "integer"
                                                    },
                                                    "revenue": {
                                                        "type": "number"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/lotteries/batch-draw": {
            "post": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Effectuer plusieurs tirages en lot",
                "operationId": "3d424aecb1872235a6a60a8d817aac54",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "lottery_ids": {
                                        "description": "Liste des IDs de tombolas à tirer",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Résultats des tirages en lot",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "summary": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "success": {
                                                    "type": "integer"
                                                },
                                                "failed": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "results": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "lottery_id": {
                                                        "type": "integer"
                                                    },
                                                    "lottery_number": {
                                                        "type": "string"
                                                    },
                                                    "success": {
                                                        "type": "boolean"
                                                    },
                                                    "message": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/lotteries/{id}/cancel": {
            "post": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Annuler une tombola et initier les remboursements",
                "operationId": "2879c9c7e28ff306247f34c348264a14",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reason": {
                                        "description": "Raison de l'annulation",
                                        "type": "string",
                                        "maxLength": 500
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tombola annulée avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "affected_users": {
                                            "description": "Nombre d'utilisateurs affectés",
                                            "type": "integer"
                                        },
                                        "refunds_initiated": {
                                            "description": "Nombre de remboursements initiés",
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Impossible d'annuler une tombola tirée",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur lors de l'annulation"
                    },
                    "404": {
                        "description": "Tombola non trouvée"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/lotteries/{id}/export": {
            "get": {
                "tags": [
                    "Admin Lotteries"
                ],
                "summary": "Exporter les données d'une tombola",
                "operationId": "6ac5f4e75b146ed2eda15b6243be40fa",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Données de la tombola pour export",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "lottery": {
                                            "type": "object"
                                        },
                                        "participants": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "ticket_number": {
                                                        "type": "string"
                                                    },
                                                    "user_name": {
                                                        "type": "string"
                                                    },
                                                    "user_email": {
                                                        "type": "string"
                                                    },
                                                    "user_phone": {
                                                        "type": "string"
                                                    },
                                                    "purchased_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "is_winner": {
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Tombola non trouvée"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/refunds": {
            "get": {
                "tags": [
                    "Admin Refunds"
                ],
                "summary": "Liste administrative des remboursements",
                "operationId": "739d8903691cc1f9ac7c19d677eb1794",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "automatic",
                                "manual",
                                "admin"
                            ]
                        }
                    },
                    {
                        "name": "reason",
                        "in": "query",
                        "description": "Filtrer par raison",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de remboursements",
                        "schema": {
                            "type": "integer",
                            "default": 50
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des remboursements"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/refunds/stats": {
            "get": {
                "tags": [
                    "Admin Refunds"
                ],
                "summary": "Statistiques administratives des remboursements",
                "operationId": "c05ed884d40eb8a8dd7ae1b9f30a561f",
                "responses": {
                    "200": {
                        "description": "Statistiques complètes"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/refunds/{id}/approve": {
            "post": {
                "tags": [
                    "Admin Refunds"
                ],
                "summary": "Approuver un remboursement",
                "operationId": "ff3d6cd7b020211f213754567af9d4d9",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du remboursement",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "notes": {
                                        "description": "Notes d'approbation",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Remboursement approuvé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/refunds/{id}/reject": {
            "post": {
                "tags": [
                    "Admin Refunds"
                ],
                "summary": "Rejeter un remboursement",
                "operationId": "b2dd83d945a17decc64679c8bc1284e9",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du remboursement",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reason": {
                                        "description": "Raison du rejet",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Remboursement rejeté"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/refunds/process-automatic": {
            "post": {
                "tags": [
                    "Admin Refunds"
                ],
                "summary": "Traiter les remboursements automatiques",
                "operationId": "432ee11566839a18fb6bf3172d4eafc8",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "lottery_id": {
                                        "description": "ID de la tombola (optionnel)",
                                        "type": "integer"
                                    },
                                    "dry_run": {
                                        "description": "Mode test",
                                        "type": "boolean",
                                        "default": false
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Remboursements automatiques traités"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/refunds/eligible-lotteries": {
            "get": {
                "tags": [
                    "Admin Refunds"
                ],
                "summary": "Tombolas éligibles aux remboursements",
                "operationId": "80bdf462977cf66bc06c05b9287c963c",
                "responses": {
                    "200": {
                        "description": "Liste des tombolas éligibles"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Inscription d'un nouvel utilisateur",
                "operationId": "c7bb21a0d87049e161b8e4c9b0d909f2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "first_name",
                                    "last_name",
                                    "email",
                                    "phone",
                                    "password",
                                    "role"
                                ],
                                "properties": {
                                    "first_name": {
                                        "type": "string",
                                        "example": "Jean"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "Dupont"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "jean@example.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "+24177123456"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "role": {
                                        "type": "string",
                                        "enum": [
                                            "MERCHANT",
                                            "RESELLER",
                                            "PARTNER"
                                        ],
                                        "example": "MERCHANT"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Utilisateur créé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Utilisateur créé avec succès"
                                        },
                                        "user": {
                                            "type": "object"
                                        },
                                        "access_token": {
                                            "type": "string"
                                        },
                                        "token_type": {
                                            "type": "string",
                                            "example": "bearer"
                                        },
                                        "expires_in": {
                                            "type": "integer",
                                            "example": 3600
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation"
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Connexion d'un utilisateur",
                "operationId": "dd51a484b7fa0f97c7680fdbde14cf5f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "jean@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion réussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "type": "string"
                                        },
                                        "token_type": {
                                            "type": "string",
                                            "example": "bearer"
                                        },
                                        "expires_in": {
                                            "type": "integer",
                                            "example": 3600
                                        },
                                        "user": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides"
                    }
                }
            }
        },
        "/api/auth/me": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Récupérer les informations de l'utilisateur connecté",
                "operationId": "b5de204f5e452ef51327c691aa99e77c",
                "responses": {
                    "200": {
                        "description": "Informations utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifié"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Déconnexion de l'utilisateur",
                "operationId": "df9bdc6c7a6d9f20b983526b2ec0f698",
                "responses": {
                    "200": {
                        "description": "Déconnexion réussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Déconnexion réussie"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Rafraîchir le token JWT",
                "operationId": "30c20c52f5f72828d8c531fd7c9ea3e7",
                "responses": {
                    "200": {
                        "description": "Token rafraîchi",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "type": "string"
                                        },
                                        "token_type": {
                                            "type": "string",
                                            "example": "bearer"
                                        },
                                        "expires_in": {
                                            "type": "integer",
                                            "example": 3600
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/reset-password": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Réinitialiser le mot de passe",
                "operationId": "0a6624b616e4ba5a310a61d9f7418c35",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "otp",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "identifier": {
                                        "type": "string",
                                        "example": "user@example.com"
                                    },
                                    "otp": {
                                        "type": "string",
                                        "example": "123456"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "newpassword123"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "example": "newpassword123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Mot de passe réinitialisé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Mot de passe réinitialisé avec succès"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation ou code OTP invalide"
                    },
                    "404": {
                        "description": "Utilisateur non trouvé"
                    }
                }
            }
        },
        "/api/categories": {
            "get": {
                "tags": [
                    "Categories"
                ],
                "summary": "Lister toutes les catégories",
                "operationId": "ac9c4d978ea4e5b72915ca9728e5b8b1",
                "parameters": [
                    {
                        "name": "parent_only",
                        "in": "query",
                        "description": "Afficher seulement les catégories parentes",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des catégories",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "categories": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/categories/{id}": {
            "get": {
                "tags": [
                    "Categories"
                ],
                "summary": "Récupérer une catégorie par ID",
                "operationId": "09767bb2e47dde77dd1e2591428b0ae1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la catégorie",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de la catégorie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "category": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Catégorie non trouvée"
                    }
                }
            }
        },
        "/api/categories/{id}/products": {
            "get": {
                "tags": [
                    "Categories"
                ],
                "summary": "Récupérer les produits d'une catégorie",
                "operationId": "f5471cad040b47602127693aa34ba309",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la catégorie",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Numéro de page",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 50
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Produits de la catégorie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "products": {
                                            "type": "object"
                                        },
                                        "category": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/countries": {
            "get": {
                "tags": [
                    "Countries"
                ],
                "summary": "Lister tous les pays",
                "operationId": "bbb90b9e86a9cab92aaa448fe98954c9",
                "parameters": [
                    {
                        "name": "active_only",
                        "in": "query",
                        "description": "Afficher seulement les pays actifs",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des pays",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "countries": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/countries/{id}": {
            "get": {
                "tags": [
                    "Countries"
                ],
                "summary": "Récupérer un pays par ID",
                "operationId": "c172dfb1b3785a376f52b0f46f344f20",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du pays",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du pays",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "country": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Pays non trouvé"
                    }
                }
            }
        },
        "/api/languages": {
            "get": {
                "tags": [
                    "Languages"
                ],
                "summary": "Lister toutes les langues",
                "operationId": "1cb1ddff581b67412e8c4d53e8a5286d",
                "parameters": [
                    {
                        "name": "active_only",
                        "in": "query",
                        "description": "Afficher seulement les langues actives",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des langues",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "languages": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/languages/{id}": {
            "get": {
                "tags": [
                    "Languages"
                ],
                "summary": "Récupérer une langue par ID",
                "operationId": "0f580519be224b9e58ceae07113528c8",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la langue",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de la langue",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "language": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Langue non trouvée"
                    }
                }
            }
        },
        "/api/languages/default": {
            "get": {
                "tags": [
                    "Languages"
                ],
                "summary": "Récupérer la langue par défaut",
                "operationId": "0e6b8efde73a795079b0013889422368",
                "responses": {
                    "200": {
                        "description": "Langue par défaut",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "language": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Aucune langue par défaut définie"
                    }
                }
            }
        },
        "/api/lotteries": {
            "get": {
                "tags": [
                    "Lotteries"
                ],
                "summary": "Lister toutes les tombolas",
                "operationId": "9ea87e50016fca92c67526b0b1c981e0",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "active",
                                "completed",
                                "cancelled"
                            ]
                        }
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "Filtrer par catégorie de produit",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "min_ticket_price",
                        "in": "query",
                        "description": "Prix minimum du ticket",
                        "required": false,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "max_ticket_price",
                        "in": "query",
                        "description": "Prix maximum du ticket",
                        "required": false,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "ending_soon",
                        "in": "query",
                        "description": "Tombolas se terminant dans les 24h",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Trier par",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "end_date_asc",
                                "end_date_desc",
                                "ticket_price_asc",
                                "ticket_price_desc",
                                "popularity"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des tombolas"
                    }
                }
            }
        },
        "/api/lotteries/my-lotteries": {
            "get": {
                "tags": [
                    "Lotteries"
                ],
                "summary": "Lister mes tombolas en tant que merchant",
                "operationId": "f0c294755424c3b29cda99686bae0cf6",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "active",
                                "completed",
                                "cancelled"
                            ]
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Recherche par nom ou description",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Trier par",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "end_date_asc",
                                "end_date_desc",
                                "ticket_price_asc",
                                "ticket_price_desc",
                                "popularity"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste de mes tombolas"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/lotteries/active": {
            "get": {
                "tags": [
                    "Lotteries"
                ],
                "summary": "Tombolas actives",
                "operationId": "a24ac4021cb411c5255935d0cc5c93fb",
                "responses": {
                    "200": {
                        "description": "Tombolas actives"
                    }
                }
            }
        },
        "/api/lotteries/{id}": {
            "get": {
                "tags": [
                    "Lotteries"
                ],
                "summary": "Détails d'une tombola",
                "operationId": "fbb03768631c4ce3881e829c0b88da49",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de la tombola"
                    }
                }
            }
        },
        "/api/lotteries/{id}/buy-ticket": {
            "post": {
                "tags": [
                    "Lotteries"
                ],
                "summary": "Acheter un ticket de tombola",
                "operationId": "ce2ff44ef1aca23589f45b6cd481b1a5",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "quantity": {
                                        "description": "Nombre de tickets",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Ticket(s) acheté(s)"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/lotteries/{id}/my-tickets": {
            "get": {
                "tags": [
                    "Lotteries"
                ],
                "summary": "Mes tickets pour une tombola",
                "operationId": "91ac3d540c9f89d679fe367eeb01b08e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Mes tickets"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/lotteries/{id}/draw": {
            "post": {
                "tags": [
                    "Lotteries"
                ],
                "summary": "Effectuer le tirage d'une tombola (Admin/Merchant seulement)",
                "operationId": "a1e7277d52ec67123ce470184b911246",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la tombola",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tirage effectué"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/dashboard/stats": {
            "get": {
                "tags": [
                    "Merchant Dashboard"
                ],
                "summary": "Statistiques générales du marchand",
                "operationId": "c754b1d0be5e3a789da6e8e7eaaad57f",
                "responses": {
                    "200": {
                        "description": "Statistiques du dashboard",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "total_products": {
                                                    "type": "integer"
                                                },
                                                "active_lotteries": {
                                                    "type": "integer"
                                                },
                                                "total_sales": {
                                                    "type": "number"
                                                },
                                                "tickets_sold": {
                                                    "type": "integer"
                                                },
                                                "revenue_this_month": {
                                                    "type": "number"
                                                },
                                                "growth_rate": {
                                                    "type": "number"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/dashboard/sales-chart": {
            "get": {
                "tags": [
                    "Merchant Dashboard"
                ],
                "summary": "Données pour le graphique des ventes",
                "operationId": "ce1e81ff612aa423b5f164244d2419cb",
                "parameters": [
                    {
                        "name": "period",
                        "in": "query",
                        "description": "Période (7d, 30d, 90d, 1y)",
                        "schema": {
                            "type": "string",
                            "default": "30d"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Données du graphique"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/dashboard/top-products": {
            "get": {
                "tags": [
                    "Merchant Dashboard"
                ],
                "summary": "Produits les plus vendus",
                "operationId": "5830bc882fffb2a314dddee057ed1880",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de produits",
                        "schema": {
                            "type": "integer",
                            "default": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des top produits"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/dashboard/recent-transactions": {
            "get": {
                "tags": [
                    "Merchant Dashboard"
                ],
                "summary": "Transactions récentes",
                "operationId": "e5c8a9536424885df81516e0786431c2",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de transactions",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Transactions récentes"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/dashboard/lottery-performance": {
            "get": {
                "tags": [
                    "Merchant Dashboard"
                ],
                "summary": "Performance des tombolas",
                "operationId": "7790ae315489e9999a0fc7ce0f1e4d00",
                "responses": {
                    "200": {
                        "description": "Performance des tombolas"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/orders": {
            "get": {
                "tags": [
                    "Merchant Orders"
                ],
                "summary": "Récupérer les commandes du marchand avec filtres et pagination",
                "description": "Récupère la liste paginée des commandes du marchand connecté avec possibilité de filtrer par dates, statut, type et produit",
                "operationId": "45e4e2e6456aeb47a0b6aeb323870bc3",
                "parameters": [
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page (max 100)",
                        "schema": {
                            "type": "integer",
                            "default": 15,
                            "maximum": 100,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Numéro de page",
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Date de début (YYYY-MM-DD)",
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-01-01"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Date de fin (YYYY-MM-DD)",
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-12-31"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut de la commande",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "awaiting_payment",
                                "paid",
                                "failed",
                                "cancelled",
                                "fulfilled",
                                "refunded"
                            ]
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type de commande",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "lottery",
                                "direct"
                            ]
                        }
                    },
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "Filtrer par ID de produit",
                        "schema": {
                            "type": "integer",
                            "example": 123
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Recherche par numéro de commande, nom client ou email",
                        "schema": {
                            "type": "string",
                            "example": "ORD-123"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Trier par",
                        "schema": {
                            "type": "string",
                            "default": "created_at_desc",
                            "enum": [
                                "created_at_desc",
                                "created_at_asc",
                                "amount_desc",
                                "amount_asc",
                                "status"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des commandes récupérée avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "order_number": {
                                                        "type": "string",
                                                        "example": "ORD-67890ABCDE"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "lottery"
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "example": "paid"
                                                    },
                                                    "total_amount": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 5000
                                                    },
                                                    "currency": {
                                                        "type": "string",
                                                        "example": "XAF"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "paid_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "customer": {
                                                        "properties": {
                                                            "name": {
                                                                "type": "string",
                                                                "example": "John Doe"
                                                            },
                                                            "email": {
                                                                "type": "string",
                                                                "example": "john@example.com"
                                                            },
                                                            "phone": {
                                                                "type": "string",
                                                                "example": "06123456"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "product": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Loterie Jackpot"
                                                            },
                                                            "image": {
                                                                "type": "string",
                                                                "example": "product.jpg"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "payments_count": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "tickets_count": {
                                                        "type": "integer",
                                                        "example": 5
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "example": 150
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "summary": {
                                            "properties": {
                                                "total_orders": {
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "total_revenue": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 750000
                                                },
                                                "avg_order_value": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 5000
                                                },
                                                "status_breakdown": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifié ou pas de rôle marchand",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/orders/export": {
            "get": {
                "tags": [
                    "Merchant Orders"
                ],
                "summary": "Exporter les commandes au format CSV",
                "description": "Génère et télécharge un fichier CSV contenant les commandes du marchand selon les filtres appliqués",
                "operationId": "b2a79bd79c65b16461bc641a7a80e673",
                "parameters": [
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Date de début pour l'export",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Date de fin pour l'export",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "product_id",
                        "in": "query",
                        "description": "Filtrer par produit",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Fichier CSV généré avec succès",
                        "headers": {
                            "Content-Disposition": {
                                "description": "Nom du fichier CSV",
                                "schema": {
                                    "type": "string"
                                }
                            }
                        },
                        "content": {
                            "text/csv": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/orders/top-products": {
            "get": {
                "tags": [
                    "Merchant Orders"
                ],
                "summary": "Récupérer les produits les plus performants pour le filtre",
                "description": "Retourne la liste des produits du marchand triés par performance pour alimenter les filtres de sélection",
                "operationId": "0ad30299af31b35f209848eebc1f0dcb",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de produits à retourner",
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 50
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des produits performance",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "total_orders": {
                                                        "type": "integer"
                                                    },
                                                    "total_revenue": {
                                                        "type": "number"
                                                    },
                                                    "avg_order_value": {
                                                        "type": "number"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/orders/metrics": {
            "get": {
                "tags": [
                    "Merchant Orders"
                ],
                "summary": "Récupérer les métriques applicatives",
                "description": "Récupère les compteurs applicatifs et métriques de performance",
                "operationId": "14720d766443e5cacbccc1f3cb694d47",
                "parameters": [
                    {
                        "name": "date_from",
                        "in": "query",
                        "description": "Date de début pour les métriques (YYYY-MM-DD)",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "description": "Date de fin pour les métriques (YYYY-MM-DD)",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Métriques récupérées avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "counters": {
                                                    "properties": {
                                                        "orders_created": {
                                                            "type": "integer",
                                                            "example": 150
                                                        },
                                                        "orders_paid": {
                                                            "type": "integer",
                                                            "example": 120
                                                        },
                                                        "payments_callback_received": {
                                                            "type": "integer",
                                                            "example": 145
                                                        },
                                                        "payments_failed": {
                                                            "type": "integer",
                                                            "example": 25
                                                        },
                                                        "invoice_generated": {
                                                            "type": "integer",
                                                            "example": 100
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "daily_metrics": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "performance_metrics": {
                                                    "type": "object"
                                                },
                                                "conversion_metrics": {
                                                    "type": "object"
                                                },
                                                "period": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/merchant/orders/metrics/health": {
            "get": {
                "tags": [
                    "Merchant Orders"
                ],
                "summary": "Vérifier l'état de santé du système de métriques",
                "description": "Vérifie que le système de métriques fonctionne correctement",
                "operationId": "503fba4d504469ec3007d8c9289f21e0",
                "responses": {
                    "200": {
                        "description": "État de santé du système de métriques",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "status": {
                                                    "type": "string",
                                                    "example": "healthy"
                                                },
                                                "cache_connectivity": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "counter_functionality": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "current_counters": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "checked_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Liste des notifications utilisateur",
                "operationId": "6d56a555955089a73fdf3f7229e8ead8",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de notifications",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "name": "unread_only",
                        "in": "query",
                        "description": "Notifications non lues seulement",
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des notifications",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "notifications": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "stats": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications/{id}/read": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Marquer une notification comme lue",
                "operationId": "89d94089af487b4bafdd6b9db9c55478",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la notification",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification marquée comme lue"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications/mark-all-read": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Marquer toutes les notifications comme lues",
                "operationId": "2c05d18629d588cb3c35be1ae1577214",
                "responses": {
                    "200": {
                        "description": "Toutes les notifications marquées comme lues"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications/{id}": {
            "delete": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Supprimer une notification",
                "operationId": "ab7264b840570ab1351fff8ba6732bdc",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la notification",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification supprimée"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications/stats": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Statistiques des notifications",
                "operationId": "f48181ee53f1cd072e4548eb448ce470",
                "responses": {
                    "200": {
                        "description": "Statistiques des notifications"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications/unread-count": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Nombre de notifications non lues",
                "operationId": "f3e05b69d516049be949f02a45e0eedd",
                "responses": {
                    "200": {
                        "description": "Nombre de notifications non lues",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "unread_count": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/orders": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Récupérer les commandes de l'utilisateur avec pagination et filtres",
                "description": "Récupère la liste paginée des commandes de l'utilisateur connecté avec possibilité de filtrer par statut et type",
                "operationId": "ded18a95cfee17b489f6889aca43c358",
                "parameters": [
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page (max 50)",
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "maximum": 50,
                            "minimum": 1
                        },
                        "example": 10
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut de la commande",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "awaiting_payment",
                                "paid",
                                "failed",
                                "cancelled",
                                "fulfilled",
                                "refunded"
                            ]
                        },
                        "example": "paid"
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type de commande",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "lottery",
                                "direct"
                            ]
                        },
                        "example": "lottery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des commandes récupérée avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "order_number": {
                                                        "type": "string",
                                                        "example": "ORD-67890ABCDE"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "lottery"
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "example": "paid"
                                                    },
                                                    "total_amount": {
                                                        "type": "number",
                                                        "format": "float",
                                                        "example": 5000
                                                    },
                                                    "currency": {
                                                        "type": "string",
                                                        "example": "XAF"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2024-01-15T10:30:00Z"
                                                    },
                                                    "paid_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2024-01-15T10:35:00Z"
                                                    },
                                                    "fulfilled_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": null,
                                                        "nullable": true
                                                    },
                                                    "product": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Loterie Jackpot"
                                                            },
                                                            "image": {
                                                                "type": "string",
                                                                "example": "lottery-image.jpg"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "lottery": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "lottery_number": {
                                                                "type": "string",
                                                                "example": "LOT-001"
                                                            },
                                                            "title": {
                                                                "type": "string",
                                                                "example": "Loterie du Nouvel An"
                                                            },
                                                            "draw_date": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "example": "2024-01-31T20:00:00Z"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "payments_count": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "latest_payment_status": {
                                                        "type": "string",
                                                        "example": "paid"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "example": 25
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifié",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/orders/{order_number}": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Récupérer les détails complets d'une commande",
                "description": "Récupère les détails complets d'une commande spécifique incluant les billets, paiements et informations produit",
                "operationId": "699d2130cb6d9c6347160f8726c43d2a",
                "parameters": [
                    {
                        "name": "order_number",
                        "in": "path",
                        "description": "Numéro unique de la commande",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "ORD-67890ABCDE"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de la commande récupérés avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "order_number": {
                                                    "type": "string",
                                                    "example": "ORD-67890ABCDE"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "lottery"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "example": "paid"
                                                },
                                                "total_amount": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 5000
                                                },
                                                "currency": {
                                                    "type": "string",
                                                    "example": "XAF"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-15T10:30:00Z"
                                                },
                                                "paid_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-15T10:35:00Z"
                                                },
                                                "fulfilled_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "cancelled_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "refunded_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "notes": {
                                                    "type": "string",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "product": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Loterie Jackpot"
                                                        },
                                                        "description": {
                                                            "type": "string",
                                                            "example": "Grande loterie avec gros gains"
                                                        },
                                                        "image": {
                                                            "type": "string",
                                                            "example": "lottery-image.jpg"
                                                        },
                                                        "sale_mode": {
                                                            "type": "string",
                                                            "example": "lottery"
                                                        },
                                                        "price": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 1000
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "lottery": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "lottery_number": {
                                                            "type": "string",
                                                            "example": "LOT-001"
                                                        },
                                                        "title": {
                                                            "type": "string",
                                                            "example": "Loterie du Nouvel An"
                                                        },
                                                        "description": {
                                                            "type": "string",
                                                            "example": "Tirage spécial Nouvel An"
                                                        },
                                                        "ticket_price": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 1000
                                                        },
                                                        "max_tickets": {
                                                            "type": "integer",
                                                            "example": 1000
                                                        },
                                                        "sold_tickets": {
                                                            "type": "integer",
                                                            "example": 850
                                                        },
                                                        "status": {
                                                            "type": "string",
                                                            "example": "active"
                                                        },
                                                        "draw_date": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2024-01-31T20:00:00Z"
                                                        },
                                                        "winner_ticket_number": {
                                                            "type": "string",
                                                            "example": null,
                                                            "nullable": true
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "tickets": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "ticket_number": {
                                                                "type": "string",
                                                                "example": "TICKET-123456"
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "example": "active"
                                                            },
                                                            "is_winner": {
                                                                "type": "boolean",
                                                                "example": false
                                                            },
                                                            "price_paid": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 1000
                                                            },
                                                            "purchased_at": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "example": "2024-01-15T10:30:00Z"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "nullable": true
                                                },
                                                "payments": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "reference": {
                                                                "type": "string",
                                                                "example": "KMB-PAY-20240115103000-0001"
                                                            },
                                                            "ebilling_id": {
                                                                "type": "string",
                                                                "example": "EB-123456789"
                                                            },
                                                            "amount": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 5000
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "example": "paid"
                                                            },
                                                            "payment_method": {
                                                                "type": "string",
                                                                "example": "airtel_money"
                                                            },
                                                            "external_transaction_id": {
                                                                "type": "string",
                                                                "example": "AM-789123456"
                                                            },
                                                            "created_at": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "example": "2024-01-15T10:30:00Z"
                                                            },
                                                            "paid_at": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "example": "2024-01-15T10:35:00Z"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Commande non trouvée",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Commande non trouvée"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifié",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/orders/{order_number}/invoice": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Générer et télécharger la facture PDF d'une commande payée",
                "description": "Génère et retourne un fichier PDF de facture pour une commande payée. La facture inclut le numéro de commande, date, informations client, lignes de commande et total en FCFA",
                "operationId": "3e9ff95496aa7e99feb93f8ea00a913a",
                "parameters": [
                    {
                        "name": "order_number",
                        "in": "path",
                        "description": "Numéro unique de la commande",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "ORD-67890ABCDE"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Facture PDF générée et téléchargée avec succès",
                        "headers": {
                            "Content-Disposition": {
                                "description": "Nom du fichier PDF",
                                "schema": {
                                    "type": "string",
                                    "example": "attachment; filename=facture-ORD-67890ABCDE.pdf"
                                }
                            }
                        },
                        "content": {
                            "application/pdf": {
                                "schema": {
                                    "description": "Fichier PDF de la facture",
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Commande non payée ou statut invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La facture n'est disponible que pour les commandes payées"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Commande non trouvée",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Commande non trouvée"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur lors de la génération de la facture",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Erreur lors de la génération de la facture"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "PDF generation failed",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifié",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/orders/stats": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Récupérer les statistiques des commandes de l'utilisateur",
                "description": "Récupère les statistiques détaillées des commandes de l'utilisateur connecté incluant les totaux, montants et billets",
                "operationId": "99b9c9c72688fe8cb320218811012920",
                "responses": {
                    "200": {
                        "description": "Statistiques des commandes récupérées avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "total_orders": {
                                                    "description": "Nombre total de commandes",
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "paid_orders": {
                                                    "description": "Nombre de commandes payées",
                                                    "type": "integer",
                                                    "example": 12
                                                },
                                                "pending_orders": {
                                                    "description": "Nombre de commandes en attente",
                                                    "type": "integer",
                                                    "example": 2
                                                },
                                                "failed_orders": {
                                                    "description": "Nombre de commandes échouées",
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "fulfilled_orders": {
                                                    "description": "Nombre de commandes livrées",
                                                    "type": "integer",
                                                    "example": 8
                                                },
                                                "total_amount_spent": {
                                                    "description": "Montant total dépensé en FCFA",
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 75000
                                                },
                                                "lottery_orders": {
                                                    "description": "Nombre de commandes loterie",
                                                    "type": "integer",
                                                    "example": 10
                                                },
                                                "direct_orders": {
                                                    "description": "Nombre de commandes directes",
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "total_tickets_purchased": {
                                                    "description": "Nombre total de billets achetés",
                                                    "type": "integer",
                                                    "example": 25
                                                },
                                                "winning_tickets": {
                                                    "description": "Nombre de billets gagnants",
                                                    "type": "integer",
                                                    "example": 3
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifié",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/orders/search": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Rechercher des commandes, paiements et billets",
                "description": "Recherche dans les commandes par numéro de commande, références de paiement, et numéros de billets de loterie",
                "operationId": "ba27e15e82bc75319223e0fe57077597",
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "description": "Terme de recherche (numéro de commande, référence de paiement, numéro de billet)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "ORD-67890"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Résultats de recherche",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "orders": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "order_number": {
                                                                "type": "string",
                                                                "example": "ORD-67890ABCDE"
                                                            },
                                                            "type": {
                                                                "type": "string",
                                                                "example": "lottery"
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "example": "paid"
                                                            },
                                                            "total_amount": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 5000
                                                            },
                                                            "created_at": {
                                                                "type": "string",
                                                                "format": "date-time"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "nullable": true
                                                },
                                                "payments": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "reference": {
                                                                "type": "string",
                                                                "example": "KMB-PAY-20240115103000-0001"
                                                            },
                                                            "amount": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 5000
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "example": "paid"
                                                            },
                                                            "payment_method": {
                                                                "type": "string",
                                                                "example": "airtel_money"
                                                            },
                                                            "created_at": {
                                                                "type": "string",
                                                                "format": "date-time"
                                                            },
                                                            "order": {
                                                                "type": "object",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "nullable": true
                                                },
                                                "tickets": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "ticket_number": {
                                                                "type": "string",
                                                                "example": "TICKET-123456"
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "example": "active"
                                                            },
                                                            "is_winner": {
                                                                "type": "boolean",
                                                                "example": false
                                                            },
                                                            "price_paid": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 1000
                                                            },
                                                            "purchased_at": {
                                                                "type": "string",
                                                                "format": "date-time"
                                                            },
                                                            "lottery": {
                                                                "type": "object",
                                                                "nullable": true
                                                            },
                                                            "order": {
                                                                "type": "object",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Terme de recherche manquant",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Terme de recherche requis"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifié",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/otp/send": {
            "post": {
                "tags": [
                    "OTP"
                ],
                "summary": "Envoyer un code OTP",
                "operationId": "d34d0fcd867e74d90714f6163dae0c32",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "type",
                                    "purpose"
                                ],
                                "properties": {
                                    "identifier": {
                                        "description": "Email ou numéro de téléphone",
                                        "type": "string",
                                        "example": "user@example.com"
                                    },
                                    "type": {
                                        "description": "Type d'envoi",
                                        "type": "string",
                                        "enum": [
                                            "email",
                                            "sms"
                                        ],
                                        "example": "email"
                                    },
                                    "purpose": {
                                        "description": "But du code OTP",
                                        "type": "string",
                                        "enum": [
                                            "registration",
                                            "password_reset",
                                            "login",
                                            "payment"
                                        ],
                                        "example": "registration"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Code OTP envoyé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Code de vérification envoyé par email"
                                        },
                                        "data": {
                                            "properties": {
                                                "masked_identifier": {
                                                    "type": "string",
                                                    "example": "us**@example.com"
                                                },
                                                "expires_at": {
                                                    "type": "string",
                                                    "example": "2025-08-07 18:05:00"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Validation failed"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Trop de tentatives",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Trop de tentatives, veuillez patienter"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/otp/verify": {
            "post": {
                "tags": [
                    "OTP"
                ],
                "summary": "Vérifier un code OTP",
                "operationId": "4d68b7909e86f7183a88d99c570feee3",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "code",
                                    "purpose"
                                ],
                                "properties": {
                                    "identifier": {
                                        "description": "Email ou numéro de téléphone",
                                        "type": "string",
                                        "example": "user@example.com"
                                    },
                                    "code": {
                                        "description": "Code OTP à 6 chiffres",
                                        "type": "string",
                                        "example": "123456"
                                    },
                                    "purpose": {
                                        "description": "But du code OTP",
                                        "type": "string",
                                        "enum": [
                                            "registration",
                                            "password_reset",
                                            "login",
                                            "payment"
                                        ],
                                        "example": "registration"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Code OTP vérifié avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Code de vérification validé avec succès"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Code invalide ou expiré",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Code de vérification invalide ou expiré"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/otp/resend": {
            "post": {
                "tags": [
                    "OTP"
                ],
                "summary": "Renvoyer un code OTP",
                "operationId": "fd23a34799a79abfe400251392bba317",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "type",
                                    "purpose"
                                ],
                                "properties": {
                                    "identifier": {
                                        "description": "Email ou numéro de téléphone",
                                        "type": "string",
                                        "example": "user@example.com"
                                    },
                                    "type": {
                                        "description": "Type d'envoi",
                                        "type": "string",
                                        "enum": [
                                            "email",
                                            "sms"
                                        ],
                                        "example": "email"
                                    },
                                    "purpose": {
                                        "description": "But du code OTP",
                                        "type": "string",
                                        "enum": [
                                            "registration",
                                            "password_reset",
                                            "login",
                                            "payment"
                                        ],
                                        "example": "registration"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Code OTP renvoyé avec succès"
                    }
                }
            }
        },
        "/api/otp/status/{identifier}": {
            "get": {
                "tags": [
                    "OTP"
                ],
                "summary": "Vérifier le statut d'un OTP",
                "operationId": "49bd7d71599eff2916f33c8aa045dcde",
                "parameters": [
                    {
                        "name": "identifier",
                        "in": "path",
                        "description": "Email ou téléphone",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "purpose",
                        "in": "query",
                        "description": "But du code OTP",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "registration",
                                "password_reset",
                                "login",
                                "payment"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Statut de l'OTP",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "has_pending_otp": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "masked_identifier": {
                                                    "type": "string",
                                                    "example": "us**@example.com"
                                                },
                                                "expires_at": {
                                                    "type": "string",
                                                    "example": "2025-08-07 18:05:00"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "email"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/otp/cleanup": {
            "delete": {
                "tags": [
                    "OTP"
                ],
                "summary": "Nettoyer les anciens codes OTP (Admin only)",
                "operationId": "32b1e92d3fb6208119c7a75ed92e37d8",
                "responses": {
                    "200": {
                        "description": "Nettoyage effectué",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Nettoyage effectué"
                                        },
                                        "data": {
                                            "properties": {
                                                "deleted_count": {
                                                    "type": "integer",
                                                    "example": 15
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/payment/callback": {
            "post": {
                "tags": [
                    "Payment Callbacks"
                ],
                "summary": "Callback de notification de paiement",
                "operationId": "78b016d73ef93416c56d332137bbcffb",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reference": {
                                        "type": "string"
                                    },
                                    "status": {
                                        "type": "string"
                                    },
                                    "amount": {
                                        "type": "number"
                                    },
                                    "transaction_id": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Callback traité"
                    }
                }
            }
        },
        "/api/transactions/{transactionId}/status": {
            "get": {
                "tags": [
                    "Payment Callbacks"
                ],
                "summary": "Vérifier le statut d'une transaction",
                "operationId": "2fdad8691591611089f4f58bb0a296e7",
                "parameters": [
                    {
                        "name": "transactionId",
                        "in": "path",
                        "description": "ID de la transaction",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Statut de la transaction",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "status": {
                                                    "type": "string"
                                                },
                                                "message": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/payment/return": {
            "post": {
                "tags": [
                    "Payment Callbacks"
                ],
                "summary": "Page de retour après paiement",
                "operationId": "8403418da82f7775db05bc4c204bb522",
                "responses": {
                    "200": {
                        "description": "Page de retour"
                    }
                }
            }
        },
        "/api/payments/initiate-from-transaction": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Créer un paiement eBilling à partir d'une transaction existante",
                "operationId": "d4690f46b194d4b885b7f2749c370756",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "transaction_id",
                                    "phone",
                                    "operator"
                                ],
                                "properties": {
                                    "transaction_id": {
                                        "type": "string",
                                        "example": "TXN-1234567890-ABC123"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "074123456"
                                    },
                                    "operator": {
                                        "type": "string",
                                        "enum": [
                                            "airtel",
                                            "moov"
                                        ],
                                        "example": "airtel"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Paiement eBilling créé",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "properties": {
                                                "bill_id": {
                                                    "type": "string"
                                                },
                                                "reference": {
                                                    "type": "string"
                                                },
                                                "amount": {
                                                    "type": "number"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/payments/initiate": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Initier un paiement pour achat de tickets ou produit",
                "operationId": "09337e33e2aff50f10b00befaf0ae25f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "type"
                                ],
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "lottery_ticket",
                                            "product_purchase"
                                        ],
                                        "example": "lottery_ticket"
                                    },
                                    "lottery_id": {
                                        "description": "Required for lottery_ticket type",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "product_id": {
                                        "description": "Required for product_purchase type",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "quantity": {
                                        "description": "Number of tickets (for lottery_ticket)",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "phone": {
                                        "description": "Phone for payment",
                                        "type": "string",
                                        "example": "074123456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Paiement initié",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "properties": {
                                                "bill_id": {
                                                    "type": "string"
                                                },
                                                "reference": {
                                                    "type": "string"
                                                },
                                                "amount": {
                                                    "type": "number"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/payments/callback": {
            "post": {
                "tags": [
                    "Payment Callbacks"
                ],
                "summary": "Webhook E-Billing orchestré pour traitement des paiements",
                "description": "Endpoint orchestré pour recevoir les callbacks de E-Billing. Valide le payload, vérifie les montants, mappe les statuts, met à jour les commandes et assure l'idempotence avec sécurité renforcée.",
                "operationId": "0b732d8a5ed20f67b03a5e8b20267c0d",
                "requestBody": {
                    "description": "Payload du webhook E-Billing",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "reference",
                                    "amount",
                                    "transactionid",
                                    "paymentsystem"
                                ],
                                "properties": {
                                    "reference": {
                                        "description": "Référence unique du paiement généré par notre système",
                                        "type": "string",
                                        "example": "KMB-PAY-20240115103000-0001"
                                    },
                                    "amount": {
                                        "description": "Montant du paiement en FCFA",
                                        "type": "number",
                                        "format": "float",
                                        "example": 5000
                                    },
                                    "transactionid": {
                                        "description": "ID de transaction externe de E-Billing",
                                        "type": "string",
                                        "example": "EB-1234567890"
                                    },
                                    "paymentsystem": {
                                        "description": "Système de paiement utilisé (airtelmoney, moovmoney4, etc.)",
                                        "type": "string",
                                        "example": "airtelmoney"
                                    },
                                    "status": {
                                        "description": "Statut du paiement retourné par la gateway",
                                        "type": "string",
                                        "example": "success"
                                    },
                                    "message": {
                                        "description": "Message optionnel de la gateway",
                                        "type": "string",
                                        "example": "Transaction successful",
                                        "nullable": true
                                    },
                                    "ebilling_id": {
                                        "description": "ID de référence E-Billing optionnel",
                                        "type": "string",
                                        "example": "EB-REF-123456",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Callback traité avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Payment processed successfully"
                                        },
                                        "data": {
                                            "properties": {
                                                "payment_id": {
                                                    "type": "integer",
                                                    "example": 123
                                                },
                                                "order_id": {
                                                    "type": "integer",
                                                    "example": 456
                                                },
                                                "order_number": {
                                                    "type": "string",
                                                    "example": "ORD-67890ABCDE"
                                                },
                                                "internal_status": {
                                                    "type": "string",
                                                    "example": "paid"
                                                },
                                                "processed_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-15T10:35:00Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "202": {
                        "description": "Callback déjà traité (idempotence)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Payment already processed"
                                        },
                                        "data": {
                                            "properties": {
                                                "payment_id": {
                                                    "type": "integer",
                                                    "example": 123
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "example": "paid"
                                                },
                                                "processed_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-15T10:35:00Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation ou de montant",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Amount mismatch detected"
                                        },
                                        "error": {
                                            "properties": {
                                                "type": {
                                                    "type": "string",
                                                    "example": "amount_mismatch"
                                                },
                                                "expected": {
                                                    "type": "number",
                                                    "example": 5000
                                                },
                                                "received": {
                                                    "type": "number",
                                                    "example": 4950
                                                },
                                                "tolerance": {
                                                    "type": "number",
                                                    "example": 0.01
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Signature invalide ou problème de sécurité",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid signature"
                                        },
                                        "error": {
                                            "properties": {
                                                "type": {
                                                    "type": "string",
                                                    "example": "security_violation"
                                                },
                                                "reason": {
                                                    "type": "string",
                                                    "example": "HMAC signature mismatch"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Paiement ou commande non trouvé",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Payment not found"
                                        },
                                        "error": {
                                            "properties": {
                                                "type": {
                                                    "type": "string",
                                                    "example": "not_found"
                                                },
                                                "reference": {
                                                    "type": "string",
                                                    "example": "KMB-PAY-20240115103000-0001"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Données du payload invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Validation failed"
                                        },
                                        "errors": {
                                            "properties": {
                                                "reference": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The reference field is required"
                                                    }
                                                },
                                                "amount": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The amount must be a number"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Internal server error during payment processing"
                                        },
                                        "error": {
                                            "properties": {
                                                "type": {
                                                    "type": "string",
                                                    "example": "processing_error"
                                                },
                                                "details": {
                                                    "type": "string",
                                                    "example": "Database connection failed",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/payments/{id}/status": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Vérifier le statut d'un paiement",
                "operationId": "adc18ab90fbf9829221668152a1b1dfc",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du paiement",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Statut du paiement"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/payments/success": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Page de succès de paiement",
                "operationId": "ef11379b5af0c382479811f7ee3a2fb2",
                "parameters": [
                    {
                        "name": "reference",
                        "in": "query",
                        "description": "Référence du paiement",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Page de succès"
                    }
                }
            }
        },
        "/api/payments/notify": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Notification E-Billing (IPN)",
                "operationId": "ab2521c44367d3e67b70dfbf676947b3",
                "responses": {
                    "200": {
                        "description": "Notification traitée"
                    }
                }
            }
        },
        "/api/payments/ussd-push": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Déclencher un push USSD",
                "operationId": "f27fc5a34e475b3e862c434d2c05cbe1",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "bill_id",
                                    "payment_system_name",
                                    "payer_msisdn"
                                ],
                                "properties": {
                                    "bill_id": {
                                        "type": "string",
                                        "example": "BILL123456"
                                    },
                                    "payment_system_name": {
                                        "type": "string",
                                        "example": "airtel_money"
                                    },
                                    "payer_msisdn": {
                                        "type": "string",
                                        "example": "074123456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Push USSD envoyé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/payments/retry-ussd": {
            "post": {
                "tags": [
                    "Payments"
                ],
                "summary": "Relancer le push USSD pour un paiement existant",
                "operationId": "c7a7262ba620037d60393be802bf80c8",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "bill_id",
                                    "operator"
                                ],
                                "properties": {
                                    "bill_id": {
                                        "type": "string",
                                        "example": "5570928698"
                                    },
                                    "operator": {
                                        "type": "string",
                                        "enum": [
                                            "airtel",
                                            "moov"
                                        ],
                                        "example": "airtel"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Push USSD relancé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/payments/kyc": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Récupérer les informations KYC",
                "operationId": "946c715356c8c637ddae58608c6e16b1",
                "parameters": [
                    {
                        "name": "operator",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "airtel_money"
                        }
                    },
                    {
                        "name": "phone",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "074123456"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Données KYC récupérées"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Lister tous les produits",
                "operationId": "d97d1c3727cbac49708b85f7d11f7d58",
                "parameters": [
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "Filtrer par catégorie",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "featured",
                        "in": "query",
                        "description": "Produits mis en avant seulement",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Recherche par nom/description",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "min_price",
                        "in": "query",
                        "description": "Prix minimum",
                        "required": false,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "max_price",
                        "in": "query",
                        "description": "Prix maximum",
                        "required": false,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Trier par",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "price_asc",
                                "price_desc",
                                "date_asc",
                                "date_desc",
                                "name_asc",
                                "name_desc",
                                "popularity"
                            ]
                        }
                    },
                    {
                        "name": "has_lottery",
                        "in": "query",
                        "description": "Produits avec tombola active",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "lottery_ending_soon",
                        "in": "query",
                        "description": "Tombolas se terminant bientôt (24h)",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des produits",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "products": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "Créer un nouveau produit (Marchands seulement)",
                "operationId": "785644b7d7dd38af4b51dafd0fbc1b6d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "description",
                                    "price",
                                    "ticket_price",
                                    "category_id"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "iPhone 15 Pro"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Smartphone Apple dernière génération"
                                    },
                                    "price": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 850000
                                    },
                                    "ticket_price": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 2500
                                    },
                                    "category_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "images": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "min_participants": {
                                        "type": "integer",
                                        "example": 150
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Produit créé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "product": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/search": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Recherche intelligente avec auto-complétion",
                "operationId": "6b588a52a56a41d175df187e5fb615c8",
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "description": "Terme de recherche",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de suggestions (max 10)",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Suggestions de recherche",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "suggestions": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "type": {
                                                                "type": "string",
                                                                "example": "product"
                                                            },
                                                            "title": {
                                                                "type": "string",
                                                                "example": "iPhone 15 Pro"
                                                            },
                                                            "subtitle": {
                                                                "type": "string",
                                                                "example": "Électronique"
                                                            },
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "price": {
                                                                "type": "number",
                                                                "example": 750000
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "categories": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/products/featured": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Produits mis en avant",
                "operationId": "787711e5f2b08d01a9338d339746e9e1",
                "responses": {
                    "200": {
                        "description": "Produits mis en avant"
                    }
                }
            }
        },
        "/api/products/{id}": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Détails d'un produit",
                "operationId": "c87fb2e4d617e7b36c712cad358acdb8",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du produit",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du produit",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "product": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Products"
                ],
                "summary": "Mettre à jour un produit",
                "operationId": "416e4959a3919547eb609d87e3db9135",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du produit",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Produit mis à jour"
                    },
                    "403": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{id}/create-lottery": {
            "post": {
                "tags": [
                    "Products"
                ],
                "summary": "Créer une tombola pour un produit",
                "operationId": "0cc3e0afa739a2a67e4b2078084c6060",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du produit",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "duration_days": {
                                        "description": "Durée en jours",
                                        "type": "integer",
                                        "example": 7
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Tombola créée"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/latest": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Récupérer les derniers produits",
                "operationId": "7ffdacbdbf0e7d7f668510c8ce20622a",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de produits à retourner",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 8
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des derniers produits",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/products/latest-lottery": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Récupérer le dernier produit tombola actif",
                "operationId": "8084860265efe3926154b0ceffb8d8ab",
                "responses": {
                    "200": {
                        "description": "Dernier produit tombola",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Aucun produit tombola trouvé",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/products/latest-direct": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Récupérer les derniers produits en achat direct",
                "operationId": "fd38829b49f32297edca473cd2a04745",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de produits à retourner",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 8
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des derniers produits en achat direct",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/products/latest-lottery-only": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Récupérer les derniers produits tombola uniquement",
                "operationId": "d8743a2de1f88c3875eeed3f075d2cc0",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de produits à retourner",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 8
                        }
                    },
                    {
                        "name": "active_only",
                        "in": "query",
                        "description": "Produits avec tombola active uniquement",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": true
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des derniers produits tombola",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/products/by-sale-mode/{mode}": {
            "get": {
                "tags": [
                    "Products"
                ],
                "summary": "Récupérer les produits par mode de vente",
                "operationId": "f6566f9d43bf57db9623e68158ff1fa5",
                "parameters": [
                    {
                        "name": "mode",
                        "in": "path",
                        "description": "Mode de vente (direct ou lottery)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "direct",
                                "lottery"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de produits à retourner",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page à récupérer",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des produits par mode de vente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/public/results": {
            "get": {
                "tags": [
                    "Public Results"
                ],
                "summary": "Liste des résultats de tombolas",
                "operationId": "9eb12a5ee4b34a9c1eb24708040a05d9",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de résultats",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "name": "period",
                        "in": "query",
                        "description": "Période (week, month, year)",
                        "schema": {
                            "type": "string",
                            "default": "month"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des résultats",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "results": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "stats": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/public/results/{lottery}": {
            "get": {
                "tags": [
                    "Public Results"
                ],
                "summary": "Détail d'un résultat de tombola",
                "operationId": "77a3c62303ae67d3d51db512892e03fe",
                "parameters": [
                    {
                        "name": "lottery",
                        "in": "path",
                        "description": "ID ou numéro de la tombola",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détail du résultat"
                    }
                }
            }
        },
        "/api/public/results/verify/{code}": {
            "get": {
                "tags": [
                    "Public Results"
                ],
                "summary": "Vérifier un code de résultat",
                "operationId": "e78dbf831933dc8914e0d4cce140f871",
                "parameters": [
                    {
                        "name": "code",
                        "in": "path",
                        "description": "Code de vérification",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Résultat de la vérification"
                    }
                }
            }
        },
        "/api/public/results/stats": {
            "get": {
                "tags": [
                    "Public Results"
                ],
                "summary": "Statistiques publiques des tombolas",
                "operationId": "19e4ceb406b58c8f48c63fc7e262a152",
                "responses": {
                    "200": {
                        "description": "Statistiques publiques"
                    }
                }
            }
        },
        "/api/public/results/recent-winners": {
            "get": {
                "tags": [
                    "Public Results"
                ],
                "summary": "Gagnants récents",
                "operationId": "0ca73d3b038f0856b8acd9ef9eda9314",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de gagnants",
                        "schema": {
                            "type": "integer",
                            "default": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des gagnants récents"
                    }
                }
            }
        },
        "/api/refunds": {
            "get": {
                "tags": [
                    "Refunds"
                ],
                "summary": "Liste des remboursements utilisateur",
                "operationId": "a26d6ad1be98a0df8c722baedff0a1f5",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrer par statut",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "approved",
                                "processed",
                                "completed",
                                "rejected"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Nombre de remboursements",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des remboursements",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "refunds": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "stats": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Refunds"
                ],
                "summary": "Demander un remboursement",
                "operationId": "8350dc97ea392ee20b60ebdcf41b7a60",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "transaction_id": {
                                        "description": "ID de la transaction",
                                        "type": "integer"
                                    },
                                    "reason": {
                                        "description": "Raison du remboursement",
                                        "type": "string"
                                    },
                                    "notes": {
                                        "description": "Notes additionnelles",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Demande de remboursement créée"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/refunds/{id}": {
            "get": {
                "tags": [
                    "Refunds"
                ],
                "summary": "Détails d'un remboursement",
                "operationId": "5c3e56db0c4bcfcdd2ccc13518e05965",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du remboursement",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du remboursement"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/refunds/stats": {
            "get": {
                "tags": [
                    "Refunds"
                ],
                "summary": "Statistiques personnelles de remboursements",
                "operationId": "6cbbb1b970e5251f2046c77c011504eb",
                "responses": {
                    "200": {
                        "description": "Statistiques de remboursements"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/refunds/{id}/cancel": {
            "post": {
                "tags": [
                    "Refunds"
                ],
                "summary": "Annuler une demande de remboursement",
                "operationId": "f37128afbd30e4edc361b0b53c7e4369",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du remboursement",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Demande annulée"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tickets/purchase": {
            "post": {
                "tags": [
                    "Tickets"
                ],
                "summary": "Acheter des tickets de tombola",
                "operationId": "2faf9d24da487be49d2c55bb28e33cc5",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "lottery_id",
                                    "quantity",
                                    "phone_number",
                                    "total_amount"
                                ],
                                "properties": {
                                    "lottery_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "quantity": {
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "phone_number": {
                                        "type": "string",
                                        "example": "074123456"
                                    },
                                    "total_amount": {
                                        "type": "number",
                                        "example": 5000
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Achat initié avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "properties": {
                                                "transaction_id": {
                                                    "type": "string"
                                                },
                                                "tickets": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tickets/my-tickets": {
            "get": {
                "tags": [
                    "Tickets"
                ],
                "summary": "Mes tickets achetés",
                "operationId": "c8eafb9516307fdbd0c82af3578146da",
                "parameters": [
                    {
                        "name": "lottery_id",
                        "in": "query",
                        "description": "Filtrer par tombola",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste de mes tickets",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tickets/{id}": {
            "get": {
                "tags": [
                    "Tickets"
                ],
                "summary": "Détails d'un ticket",
                "operationId": "da5292e25da44db69ed981a43357753c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du ticket",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du ticket"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tickets/{id}/cancel": {
            "post": {
                "tags": [
                    "Tickets"
                ],
                "summary": "Annuler un ticket (si non payé)",
                "operationId": "4609fcd1c9be096f2fd4f3c8dee4b404",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du ticket",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ticket annulé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/calculate-ticket-price": {
            "post": {
                "tags": [
                    "Ticket Price Calculator"
                ],
                "summary": "Calculer le prix d'un ticket de tombola",
                "operationId": "fc1bc5d3012817d23347e7690096d087",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "product_price"
                                ],
                                "properties": {
                                    "product_price": {
                                        "description": "Prix du produit en FCFA",
                                        "type": "number",
                                        "format": "float",
                                        "example": 750000
                                    },
                                    "number_of_tickets": {
                                        "description": "Nombre de tickets (défaut: 1000)",
                                        "type": "integer",
                                        "example": 1000
                                    },
                                    "commission_rate": {
                                        "description": "Taux de commission (défaut: 10%)",
                                        "type": "number",
                                        "format": "float",
                                        "example": 0.1
                                    },
                                    "margin_rate": {
                                        "description": "Taux de marge (défaut: 15%)",
                                        "type": "number",
                                        "format": "float",
                                        "example": 0.15
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Prix du ticket calculé avec détails",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "product_price": {
                                                    "type": "number",
                                                    "example": 750000
                                                },
                                                "commission_rate": {
                                                    "type": "number",
                                                    "example": 0.1
                                                },
                                                "margin_rate": {
                                                    "type": "number",
                                                    "example": 0.15
                                                },
                                                "commission_amount": {
                                                    "type": "number",
                                                    "example": 75000
                                                },
                                                "margin_amount": {
                                                    "type": "number",
                                                    "example": 112500
                                                },
                                                "total_amount": {
                                                    "type": "number",
                                                    "example": 937500
                                                },
                                                "number_of_tickets": {
                                                    "type": "integer",
                                                    "example": 1000
                                                },
                                                "calculated_ticket_price": {
                                                    "type": "number",
                                                    "example": 937.5
                                                },
                                                "final_ticket_price": {
                                                    "type": "number",
                                                    "example": 938
                                                },
                                                "total_potential_revenue": {
                                                    "type": "number",
                                                    "example": 938000
                                                },
                                                "koumbaya_profit": {
                                                    "type": "number",
                                                    "example": 187500
                                                },
                                                "merchant_revenue": {
                                                    "type": "number",
                                                    "example": 750000
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "validation": {
                                            "properties": {
                                                "is_valid": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "warnings": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "formatted": {
                                            "properties": {
                                                "ticket_price": {
                                                    "type": "string",
                                                    "example": "938 FCFA"
                                                },
                                                "total_revenue": {
                                                    "type": "string",
                                                    "example": "938 000 FCFA"
                                                },
                                                "koumbaya_profit": {
                                                    "type": "string",
                                                    "example": "187 500 FCFA"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation"
                    },
                    "400": {
                        "description": "Paramètres invalides"
                    }
                }
            }
        },
        "/api/ticket-price-suggestions": {
            "post": {
                "tags": [
                    "Ticket Price Calculator"
                ],
                "summary": "Obtenir des suggestions de prix pour différents nombres de tickets",
                "operationId": "f79872f29a973a876a0282dd62312a0d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "product_price"
                                ],
                                "properties": {
                                    "product_price": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 750000
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Suggestions de prix",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "suggestions": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "tickets": {
                                                        "type": "integer",
                                                        "example": 1000
                                                    },
                                                    "price": {
                                                        "type": "number",
                                                        "example": 938
                                                    },
                                                    "total_revenue": {
                                                        "type": "number",
                                                        "example": 938000
                                                    },
                                                    "is_recommended": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "formatted_price": {
                                                        "type": "string",
                                                        "example": "938 FCFA"
                                                    },
                                                    "formatted_revenue": {
                                                        "type": "string",
                                                        "example": "938 000 FCFA"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/ticket-calculation-config": {
            "get": {
                "tags": [
                    "Ticket Price Calculator"
                ],
                "summary": "Obtenir la configuration du calculateur de prix",
                "operationId": "41f2d2907c0a28cb2d4b296edefa252c",
                "responses": {
                    "200": {
                        "description": "Configuration du calculateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "config": {
                                            "properties": {
                                                "commission_rate": {
                                                    "type": "number",
                                                    "example": 0.1
                                                },
                                                "margin_rate": {
                                                    "type": "number",
                                                    "example": 0.15
                                                },
                                                "default_tickets": {
                                                    "type": "integer",
                                                    "example": 1000
                                                },
                                                "min_tickets": {
                                                    "type": "integer",
                                                    "example": 100
                                                },
                                                "max_tickets": {
                                                    "type": "integer",
                                                    "example": 5000
                                                },
                                                "min_ticket_price": {
                                                    "type": "number",
                                                    "example": 100
                                                },
                                                "max_ticket_price": {
                                                    "type": "number",
                                                    "example": 50000
                                                },
                                                "currency": {
                                                    "type": "string",
                                                    "example": "FCFA"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "OrderSummary": {
                "title": "Résumé de commande",
                "description": "Structure de données pour l'affichage en liste des commandes",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "order_number": {
                        "type": "string",
                        "example": "ORD-67890ABCDE"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "lottery",
                            "direct"
                        ],
                        "example": "lottery"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "awaiting_payment",
                            "paid",
                            "failed",
                            "cancelled",
                            "fulfilled",
                            "refunded"
                        ],
                        "example": "paid"
                    },
                    "total_amount": {
                        "type": "number",
                        "format": "float",
                        "example": 5000
                    },
                    "currency": {
                        "type": "string",
                        "example": "XAF"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "paid_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "fulfilled_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "product": {
                        "type": "object",
                        "nullable": true
                    },
                    "lottery": {
                        "type": "object",
                        "nullable": true
                    },
                    "payments_count": {
                        "type": "integer",
                        "example": 1
                    },
                    "latest_payment_status": {
                        "type": "string",
                        "example": "paid",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ProductSummary": {
                "title": "Résumé produit",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Loterie Jackpot"
                    },
                    "image": {
                        "type": "string",
                        "example": "lottery-image.jpg"
                    }
                },
                "type": "object"
            },
            "LotterySummary": {
                "title": "Résumé loterie",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "lottery_number": {
                        "type": "string",
                        "example": "LOT-001"
                    },
                    "title": {
                        "type": "string",
                        "example": "Loterie du Nouvel An"
                    },
                    "draw_date": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "PaymentCallbackRequest": {
                "title": "Requête callback de paiement",
                "required": [
                    "reference",
                    "amount",
                    "transactionid",
                    "paymentsystem"
                ],
                "properties": {
                    "reference": {
                        "description": "Référence unique du paiement",
                        "type": "string",
                        "example": "KMB-PAY-20240115103000-0001"
                    },
                    "amount": {
                        "description": "Montant en FCFA",
                        "type": "number",
                        "format": "float",
                        "example": 5000
                    },
                    "transactionid": {
                        "description": "ID transaction E-Billing",
                        "type": "string",
                        "example": "EB-1234567890"
                    },
                    "paymentsystem": {
                        "description": "Système de paiement",
                        "type": "string",
                        "example": "airtelmoney"
                    },
                    "status": {
                        "description": "Statut retourné par la gateway",
                        "type": "string",
                        "example": "success"
                    },
                    "message": {
                        "type": "string",
                        "example": "Transaction successful",
                        "nullable": true
                    },
                    "ebilling_id": {
                        "type": "string",
                        "example": "EB-REF-123456",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ErrorResponse": {
                "title": "Réponse d'erreur standard",
                "properties": {
                    "success": {
                        "type": "boolean",
                        "example": false
                    },
                    "message": {
                        "type": "string",
                        "example": "Une erreur s'est produite"
                    },
                    "error": {
                        "properties": {
                            "type": {
                                "type": "string",
                                "example": "validation_error"
                            },
                            "details": {
                                "type": "string",
                                "example": "Champ requis manquant"
                            }
                        },
                        "type": "object",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaginationMeta": {
                "properties": {
                    "current_page": {
                        "type": "integer"
                    },
                    "from": {
                        "type": "integer"
                    },
                    "last_page": {
                        "type": "integer"
                    },
                    "per_page": {
                        "type": "integer"
                    },
                    "to": {
                        "type": "integer"
                    },
                    "total": {
                        "type": "integer"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Authentification via token Bearer JWT",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            },
            "sanctum": {
                "type": "apiKey",
                "description": "Laravel Sanctum authentication token (Bearer token)",
                "name": "Authorization",
                "in": "header"
            }
        }
    },
    "tags": [
        {
            "name": "Admin Lotteries",
            "description": "API endpoints pour l'administration des tombolas (accès administrateur uniquement)"
        },
        {
            "name": "Admin Refunds",
            "description": "API endpoints d'administration des remboursements"
        },
        {
            "name": "Authentication",
            "description": "Endpoints d'authentification et gestion utilisateurs"
        },
        {
            "name": "Categories",
            "description": "Gestion des catégories de produits"
        },
        {
            "name": "Countries",
            "description": "Gestion des pays et localisation"
        },
        {
            "name": "Languages",
            "description": "Gestion des langues et internationalisation"
        },
        {
            "name": "Lotteries",
            "description": "Gestion des tombolas et tirages"
        },
        {
            "name": "Merchant Dashboard",
            "description": "API endpoints pour le dashboard marchand"
        },
        {
            "name": "Merchant Orders",
            "description": "Gestion des commandes côté marchand avec export CSV et filtres avancés"
        },
        {
            "name": "Notifications",
            "description": "API endpoints pour la gestion des notifications"
        },
        {
            "name": "OTP",
            "description": "Gestion des codes de vérification OTP (SMS/Email)"
        },
        {
            "name": "Payment Callbacks",
            "description": "Webhooks et callbacks de paiement orchestrés avec sécurité renforcée"
        },
        {
            "name": "Payments",
            "description": "Système de paiement E-Billing et Mobile Money"
        },
        {
            "name": "Products",
            "description": "Gestion des produits et catalogue"
        },
        {
            "name": "Public Results",
            "description": "API endpoints publiques pour les résultats des tombolas"
        },
        {
            "name": "Refunds",
            "description": "API endpoints pour la gestion des remboursements"
        },
        {
            "name": "Tickets",
            "description": "API endpoints pour l'achat de tickets de tombola"
        },
        {
            "name": "Ticket Price Calculator",
            "description": "API endpoints pour le calcul automatique des prix de tickets"
        },
        {
            "name": "Orders",
            "description": "Gestion des commandes, suivi et facturation PDF"
        }
    ]
}